{"version":3,"file":"tabulator.min.js","sources":["../../../src/js/core/defaults/options.js","../../../src/js/core/CoreFeature.js","../../../src/js/core/column/ColumnComponent.js","../../../src/js/core/column/defaults/options.js","../../../src/js/core/cell/CellComponent.js","../../../src/js/core/cell/Cell.js","../../../src/js/core/column/Column.js","../../../src/js/core/tools/Helpers.js","../../../src/js/core/tools/OptionsList.js","../../../src/js/core/rendering/Renderer.js","../../../src/js/core/rendering/renderers/BasicHorizontal.js","../../../src/js/core/rendering/renderers/VirtualDomHorizontal.js","../../../src/js/core/ColumnManager.js","../../../src/js/core/row/RowComponent.js","../../../src/js/core/row/Row.js","../../../src/js/core/rendering/renderers/BasicVertical.js","../../../src/js/core/rendering/renderers/VirtualDomVertical.js","../../../src/js/core/RowManager.js","../../../src/js/core/FooterManager.js","../../../src/js/core/tools/InteractionMonitor.js","../../../src/js/core/tools/ComponentFunctionBinder.js","../../../src/js/core/tools/DataLoader.js","../../../src/js/core/tools/ExternalEventBus.js","../../../src/js/core/tools/InternalEventBus.js","../../../src/js/core/tools/DeprecationAdvisor.js","../../../src/js/core/tools/DependencyRegistry.js","../../../src/js/core/tools/Popup.js","../../../src/js/core/Module.js","../../../src/js/modules/Layout/defaults/modes/fitDataGeneral.js","../../../src/js/modules/Layout/defaults/modes.js","../../../src/js/modules/Layout/defaults/modes/fitData.js","../../../src/js/modules/Layout/defaults/modes/fitDataStretch.js","../../../src/js/modules/Layout/defaults/modes/fitColumns.js","../../../src/js/modules/Layout/Layout.js","../../../src/js/modules/Localize/defaults/langs.js","../../../src/js/modules/Localize/Localize.js","../../../src/js/modules/Comms/Comms.js","../../../src/js/core/tools/TableRegistry.js","../../../src/js/core/tools/ModuleBinder.js","../../../src/js/core/tools/Alert.js","../../../src/js/core/Tabulator.js","../../../src/js/modules/Accessor/defaults/accessors.js","../../../src/js/modules/Accessor/Accessor.js","../../../src/js/modules/Ajax/defaults/config.js","../../../src/js/modules/Ajax/defaults/urlGenerator.js","../../../src/js/modules/Ajax/defaults/loaderPromise.js","../../../src/js/modules/Ajax/defaults/contentTypeFormatters.js","../../../src/js/modules/Ajax/Ajax.js","../../../src/js/modules/Clipboard/defaults/pasteActions.js","../../../src/js/modules/Clipboard/defaults/pasteParsers.js","../../../src/js/modules/Clipboard/extensions/extensions.js","../../../src/js/modules/Clipboard/extensions/keybindings/bindings.js","../../../src/js/modules/Clipboard/extensions/keybindings/actions.js","../../../src/js/modules/Clipboard/Clipboard.js","../../../src/js/modules/ColumnCalcs/CalcComponent.js","../../../src/js/modules/ColumnCalcs/defaults/calculations.js","../../../src/js/modules/ColumnCalcs/ColumnCalcs.js","../../../src/js/modules/Download/defaults/downloaders.js","../../../src/js/modules/Download/defaults/downloaders/csv.js","../../../src/js/modules/Download/defaults/downloaders/json.js","../../../src/js/modules/Download/defaults/downloaders/jsonLines.js","../../../src/js/modules/Download/defaults/downloaders/pdf.js","../../../src/js/modules/Download/defaults/downloaders/xlsx.js","../../../src/js/modules/Download/defaults/downloaders/html.js","../../../src/js/modules/Download/Download.js","../../../src/js/modules/Edit/inputMask.js","../../../src/js/modules/Edit/List.js","../../../src/js/modules/Edit/defaults/editors.js","../../../src/js/modules/Edit/defaults/editors/input.js","../../../src/js/modules/Edit/defaults/editors/textarea.js","../../../src/js/modules/Edit/defaults/editors/number.js","../../../src/js/modules/Edit/defaults/editors/range.js","../../../src/js/modules/Edit/defaults/editors/date.js","../../../src/js/modules/Edit/defaults/editors/time.js","../../../src/js/modules/Edit/defaults/editors/datetime.js","../../../src/js/modules/Edit/defaults/editors/list.js","../../../src/js/modules/Edit/defaults/editors/star.js","../../../src/js/modules/Edit/defaults/editors/progress.js","../../../src/js/modules/Edit/defaults/editors/tickCross.js","../../../src/js/modules/Edit/defaults/editors/adaptable.js","../../../src/js/modules/Edit/Edit.js","../../../src/js/modules/Export/ExportRow.js","../../../src/js/modules/Export/ExportColumn.js","../../../src/js/modules/Export/defaults/columnLookups.js","../../../src/js/modules/Export/defaults/rowLookups.js","../../../src/js/modules/Export/Export.js","../../../src/js/modules/Filter/defaults/filters.js","../../../src/js/modules/Filter/Filter.js","../../../src/js/modules/Format/defaults/formatters.js","../../../src/js/modules/Format/defaults/formatters/plaintext.js","../../../src/js/modules/Format/defaults/formatters/html.js","../../../src/js/modules/Format/defaults/formatters/textarea.js","../../../src/js/modules/Format/defaults/formatters/money.js","../../../src/js/modules/Format/defaults/formatters/link.js","../../../src/js/modules/Format/defaults/formatters/image.js","../../../src/js/modules/Format/defaults/formatters/tickCross.js","../../../src/js/modules/Format/defaults/formatters/datetime.js","../../../src/js/modules/Format/defaults/formatters/datetimediff.js","../../../src/js/modules/Format/defaults/formatters/lookup.js","../../../src/js/modules/Format/defaults/formatters/star.js","../../../src/js/modules/Format/defaults/formatters/traffic.js","../../../src/js/modules/Format/defaults/formatters/progress.js","../../../src/js/modules/Format/defaults/formatters/color.js","../../../src/js/modules/Format/defaults/formatters/buttonTick.js","../../../src/js/modules/Format/defaults/formatters/buttonCross.js","../../../src/js/modules/Format/defaults/formatters/toggle.js","../../../src/js/modules/Format/defaults/formatters/rownum.js","../../../src/js/modules/Format/defaults/formatters/handle.js","../../../src/js/modules/Format/defaults/formatters/adaptable.js","../../../src/js/modules/Format/defaults/formatters/array.js","../../../src/js/modules/Format/defaults/formatters/json.js","../../../src/js/modules/Format/Format.js","../../../src/js/modules/GroupRows/GroupComponent.js","../../../src/js/modules/GroupRows/Group.js","../../../src/js/modules/History/defaults/undoers.js","../../../src/js/modules/History/defaults/redoers.js","../../../src/js/modules/History/extensions/extensions.js","../../../src/js/modules/History/extensions/keybindings/bindings.js","../../../src/js/modules/History/extensions/keybindings/actions.js","../../../src/js/modules/History/History.js","../../../src/js/modules/Import/defaults/importers.js","../../../src/js/modules/Import/defaults/importers/csv.js","../../../src/js/modules/Import/defaults/importers/json.js","../../../src/js/modules/Import/defaults/importers/array.js","../../../src/js/modules/Import/defaults/importers/xlsx.js","../../../src/js/modules/Import/Import.js","../../../src/js/modules/Keybindings/defaults/bindings.js","../../../src/js/modules/Keybindings/defaults/actions.js","../../../src/js/modules/Keybindings/Keybindings.js","../../../src/js/modules/MoveRows/defaults/senders.js","../../../src/js/modules/MoveRows/defaults/receivers.js","../../../src/js/modules/MoveRows/MoveRows.js","../../../src/js/modules/Mutator/defaults/mutators.js","../../../src/js/modules/Mutator/Mutator.js","../../../src/js/modules/Page/defaults/pageCounters.js","../../../src/js/modules/Page/defaults/pageCounters/rows.js","../../../src/js/modules/Page/defaults/pageCounters/pages.js","../../../src/js/modules/Page/Page.js","../../../src/js/modules/Persistence/defaults/readers.js","../../../src/js/modules/Persistence/defaults/writers.js","../../../src/js/modules/Persistence/Persistence.js","../../../src/js/modules/ResponsiveLayout/extensions/extensions.js","../../../src/js/modules/ResponsiveLayout/extensions/formatters/responsiveCollapse.js","../../../src/js/modules/SelectRow/extensions/extensions.js","../../../src/js/modules/SelectRow/extensions/formatters/rowSelection.js","../../../src/js/modules/SelectRange/RangeComponent.js","../../../src/js/modules/SelectRange/Range.js","../../../src/js/modules/SelectRange/extensions/keybindings/bindings.js","../../../src/js/modules/SelectRange/extensions/extensions.js","../../../src/js/modules/SelectRange/extensions/keybindings/actions.js","../../../src/js/modules/SelectRange/extensions/clipboard/pasteActions.js","../../../src/js/modules/SelectRange/extensions/clipboard/pasteParsers.js","../../../src/js/modules/SelectRange/extensions/export/columnLookups.js","../../../src/js/modules/SelectRange/extensions/export/rowLookups.js","../../../src/js/modules/Sort/defaults/sorters/datetime.js","../../../src/js/modules/Sort/defaults/sorters.js","../../../src/js/modules/Sort/defaults/sorters/number.js","../../../src/js/modules/Sort/defaults/sorters/string.js","../../../src/js/modules/Sort/defaults/sorters/date.js","../../../src/js/modules/Sort/defaults/sorters/time.js","../../../src/js/modules/Sort/defaults/sorters/boolean.js","../../../src/js/modules/Sort/defaults/sorters/array.js","../../../src/js/modules/Sort/defaults/sorters/exists.js","../../../src/js/modules/Sort/defaults/sorters/alphanum.js","../../../src/js/modules/Sort/Sort.js","../../../src/js/modules/Spreadsheet/GridCalculator.js","../../../src/js/modules/Spreadsheet/SheetComponent.js","../../../src/js/modules/Spreadsheet/Sheet.js","../../../src/js/modules/Validate/defaults/validators.js","../../../src/js/modules/Validate/Validate.js","../../../src/js/modules/DataTree/DataTree.js","../../../src/js/modules/FrozenColumns/FrozenColumns.js","../../../src/js/modules/FrozenRows/FrozenRows.js","../../../src/js/modules/GroupRows/GroupRows.js","../../../src/js/modules/HtmlTableImport/HtmlTableImport.js","../../../src/js/modules/Interaction/Interaction.js","../../../src/js/modules/Menu/Menu.js","../../../src/js/modules/MoveColumns/MoveColumns.js","../../../src/js/modules/Popup/Popup.js","../../../src/js/modules/Print/Print.js","../../../src/js/modules/ReactiveData/ReactiveData.js","../../../src/js/modules/ResizeColumns/ResizeColumns.js","../../../src/js/modules/ResizeRows/ResizeRows.js","../../../src/js/modules/ResizeTable/ResizeTable.js","../../../src/js/modules/ResponsiveLayout/ResponsiveLayout.js","../../../src/js/modules/SelectRange/SelectRange.js","../../../src/js/modules/SelectRow/SelectRow.js","../../../src/js/modules/Spreadsheet/Spreadsheet.js","../../../src/js/modules/Tooltip/Tooltip.js","../../../src/js/core/TabulatorFull.js"],"sourcesContent":["export default {\r\n  debugEventsExternal: false, // flag to console log events\r\n  debugEventsInternal: false, // flag to console log events\r\n  debugInvalidOptions: true, // allow toggling of invalid option warnings\r\n  debugInvalidComponentFuncs: true, // allow toggling of invalid component warnings\r\n  debugInitialization: true, // allow toggling of pre initialization function call warnings\r\n  debugDeprecation: true, // allow toggling of deprecation warnings\r\n\r\n  height: false, // height of tabulator\r\n  minHeight: false, // minimum height of tabulator\r\n  maxHeight: false, // maximum height of tabulator\r\n\r\n  columnHeaderVertAlign: 'top', // vertical alignment of column headers\r\n\r\n  popupContainer: false,\r\n\r\n  columns: [], // store for colum header info\r\n  columnDefaults: {}, // store column default props\r\n  rowHeader: false,\r\n\r\n  data: false, // default starting data\r\n\r\n  autoColumns: false, // build columns from data row structure\r\n  autoColumnsDefinitions: false,\r\n\r\n  nestedFieldSeparator: '.', // separator for nested data\r\n\r\n  footerElement: false, // hold footer element\r\n\r\n  index: 'id', // filed for row index\r\n\r\n  textDirection: 'auto',\r\n\r\n  addRowPos: 'bottom', // position to insert blank rows, top|bottom\r\n\r\n  headerVisible: true, // hide header\r\n\r\n  renderVertical: 'virtual',\r\n  renderHorizontal: 'basic',\r\n  renderVerticalBuffer: 0, // set virtual DOM buffer size\r\n\r\n  scrollToRowPosition: 'top',\r\n  scrollToRowIfVisible: true,\r\n\r\n  scrollToColumnPosition: 'left',\r\n  scrollToColumnIfVisible: true,\r\n\r\n  rowFormatter: false,\r\n  rowFormatterPrint: null,\r\n  rowFormatterClipboard: null,\r\n  rowFormatterHtmlOutput: null,\r\n\r\n  rowHeight: null,\r\n\r\n  placeholder: false,\r\n\r\n  dataLoader: true,\r\n  dataLoaderLoading: false,\r\n  dataLoaderError: false,\r\n  dataLoaderErrorTimeout: 3000,\r\n  dataSendParams: {},\r\n  dataReceiveParams: {},\r\n\r\n  dependencies: {}\r\n}\r\n","export default class CoreFeature {\r\n  constructor(table) {\r\n    this.table = table\r\n  }\r\n\r\n  /// ///////////////////////////////////////\r\n  /// //////////// DataLoad /////////////////\r\n  /// ///////////////////////////////////////\r\n\r\n  reloadData(data, silent, columnsChanged) {\r\n    return this.table.dataLoader.load(data, undefined, undefined, undefined, silent, columnsChanged)\r\n  }\r\n\r\n  /// ///////////////////////////////////////\r\n  /// ////////// Localization ///////////////\r\n  /// ///////////////////////////////////////\r\n\r\n  langText() {\r\n    return this.table.modules.localize.getText(...arguments)\r\n  }\r\n\r\n  langBind() {\r\n    return this.table.modules.localize.bind(...arguments)\r\n  }\r\n\r\n  langLocale() {\r\n    return this.table.modules.localize.getLocale(...arguments)\r\n  }\r\n\r\n  /// ///////////////////////////////////////\r\n  /// /////// Inter Table Comms /////////////\r\n  /// ///////////////////////////////////////\r\n\r\n  commsConnections() {\r\n    return this.table.modules.comms.getConnections(...arguments)\r\n  }\r\n\r\n  commsSend() {\r\n    return this.table.modules.comms.send(...arguments)\r\n  }\r\n\r\n  /// ///////////////////////////////////////\r\n  /// ///////////// Layout  /////////////////\r\n  /// ///////////////////////////////////////\r\n\r\n  layoutMode() {\r\n    return this.table.modules.layout.getMode()\r\n  }\r\n\r\n  layoutRefresh(force) {\r\n    return this.table.modules.layout.layout(force)\r\n  }\r\n\r\n  /// ///////////////////////////////////////\r\n  /// //////////// Event Bus ////////////////\r\n  /// ///////////////////////////////////////\r\n\r\n  subscribe() {\r\n    return this.table.eventBus.subscribe(...arguments)\r\n  }\r\n\r\n  unsubscribe() {\r\n    return this.table.eventBus.unsubscribe(...arguments)\r\n  }\r\n\r\n  subscribed(key) {\r\n    return this.table.eventBus.subscribed(key)\r\n  }\r\n\r\n  subscriptionChange() {\r\n    return this.table.eventBus.subscriptionChange(...arguments)\r\n  }\r\n\r\n  dispatch() {\r\n    return this.table.eventBus.dispatch(...arguments)\r\n  }\r\n\r\n  chain() {\r\n    return this.table.eventBus.chain(...arguments)\r\n  }\r\n\r\n  confirm() {\r\n    return this.table.eventBus.confirm(...arguments)\r\n  }\r\n\r\n  dispatchExternal() {\r\n    return this.table.externalEvents.dispatch(...arguments)\r\n  }\r\n\r\n  subscribedExternal(key) {\r\n    return this.table.externalEvents.subscribed(key)\r\n  }\r\n\r\n  subscriptionChangeExternal() {\r\n    return this.table.externalEvents.subscriptionChange(...arguments)\r\n  }\r\n\r\n  /// ///////////////////////////////////////\r\n  /// ///////////// Options /////////////////\r\n  /// ///////////////////////////////////////\r\n\r\n  options(key) {\r\n    return this.table.options[key]\r\n  }\r\n\r\n  setOption(key, value) {\r\n    if (typeof value !== 'undefined') {\r\n      this.table.options[key] = value\r\n    }\r\n\r\n    return this.table.options[key]\r\n  }\r\n\r\n  /// ///////////////////////////////////////\r\n  /// //////// Deprecation Checks ///////////\r\n  /// ///////////////////////////////////////\r\n\r\n  deprecationCheck(oldOption, newOption, convert) {\r\n    return this.table.deprecationAdvisor.check(oldOption, newOption, convert)\r\n  }\r\n\r\n  deprecationCheckMsg(oldOption, msg) {\r\n    return this.table.deprecationAdvisor.checkMsg(oldOption, msg)\r\n  }\r\n\r\n  deprecationMsg(msg) {\r\n    return this.table.deprecationAdvisor.msg(msg)\r\n  }\r\n  /// ///////////////////////////////////////\r\n  /// ///////////// Modules /////////////////\r\n  /// ///////////////////////////////////////\r\n\r\n  module(key) {\r\n    return this.table.module(key)\r\n  }\r\n}\r\n","// public column object\r\nexport default class ColumnComponent {\r\n  constructor(column) {\r\n    this._column = column\r\n    this.type = 'ColumnComponent'\r\n\r\n    return new Proxy(this, {\r\n      get: function (target, name, receiver) {\r\n        if (typeof target[name] !== 'undefined') {\r\n          return target[name]\r\n        } else {\r\n          return target._column.table.componentFunctionBinder.handle('column', target._column, name)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  getElement() {\r\n    return this._column.getElement()\r\n  }\r\n\r\n  getDefinition() {\r\n    return this._column.getDefinition()\r\n  }\r\n\r\n  getField() {\r\n    return this._column.getField()\r\n  }\r\n\r\n  getTitleDownload() {\r\n    return this._column.getTitleDownload()\r\n  }\r\n\r\n  getCells() {\r\n    const cells = []\r\n\r\n    this._column.cells.forEach(function (cell) {\r\n      cells.push(cell.getComponent())\r\n    })\r\n\r\n    return cells\r\n  }\r\n\r\n  isVisible() {\r\n    return this._column.visible\r\n  }\r\n\r\n  show() {\r\n    if (this._column.isGroup) {\r\n      this._column.columns.forEach(function (column) {\r\n        column.show()\r\n      })\r\n    } else {\r\n      this._column.show()\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    if (this._column.isGroup) {\r\n      this._column.columns.forEach(function (column) {\r\n        column.hide()\r\n      })\r\n    } else {\r\n      this._column.hide()\r\n    }\r\n  }\r\n\r\n  toggle() {\r\n    if (this._column.visible) {\r\n      this.hide()\r\n    } else {\r\n      this.show()\r\n    }\r\n  }\r\n\r\n  delete() {\r\n    return this._column.delete()\r\n  }\r\n\r\n  getSubColumns() {\r\n    const output = []\r\n\r\n    if (this._column.columns.length) {\r\n      this._column.columns.forEach(function (column) {\r\n        output.push(column.getComponent())\r\n      })\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  getParentColumn() {\r\n    return this._column.getParentComponent()\r\n  }\r\n\r\n  _getSelf() {\r\n    return this._column\r\n  }\r\n\r\n  scrollTo(position, ifVisible) {\r\n    return this._column.table.columnManager.scrollToColumn(this._column, position, ifVisible)\r\n  }\r\n\r\n  getTable() {\r\n    return this._column.table\r\n  }\r\n\r\n  move(to, after) {\r\n    const toColumn = this._column.table.columnManager.findColumn(to)\r\n\r\n    if (toColumn) {\r\n      this._column.table.columnManager.moveColumn(this._column, toColumn, after)\r\n    } else {\r\n      console.warn('Move Error - No matching column found:', toColumn)\r\n    }\r\n  }\r\n\r\n  getNextColumn() {\r\n    const nextCol = this._column.nextColumn()\r\n\r\n    return nextCol ? nextCol.getComponent() : false\r\n  }\r\n\r\n  getPrevColumn() {\r\n    const prevCol = this._column.prevColumn()\r\n\r\n    return prevCol ? prevCol.getComponent() : false\r\n  }\r\n\r\n  updateDefinition(updates) {\r\n    return this._column.updateDefinition(updates)\r\n  }\r\n\r\n  getWidth() {\r\n    return this._column.getWidth()\r\n  }\r\n\r\n  setWidth(width) {\r\n    let result\r\n\r\n    if (width === true) {\r\n      result = this._column.reinitializeWidth(true)\r\n    } else {\r\n      result = this._column.setWidth(width)\r\n    }\r\n\r\n    this._column.table.columnManager.rerenderColumns(true)\r\n\r\n    return result\r\n  }\r\n}\r\n","export default {\r\n  title: undefined,\r\n  field: undefined,\r\n  columns: undefined,\r\n  visible: undefined,\r\n  hozAlign: undefined,\r\n  vertAlign: undefined,\r\n  width: undefined,\r\n  minWidth: 40,\r\n  maxWidth: undefined,\r\n  maxInitialWidth: undefined,\r\n  cssClass: undefined,\r\n  variableHeight: undefined,\r\n  headerVertical: undefined,\r\n  headerHozAlign: undefined,\r\n  headerWordWrap: false,\r\n  editableTitle: undefined\r\n}\r\n","// public cell object\r\nexport default class CellComponent {\r\n  constructor(cell) {\r\n    this._cell = cell\r\n\r\n    return new Proxy(this, {\r\n      get: function (target, name, receiver) {\r\n        if (typeof target[name] !== 'undefined') {\r\n          return target[name]\r\n        } else {\r\n          return target._cell.table.componentFunctionBinder.handle('cell', target._cell, name)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  getValue() {\r\n    return this._cell.getValue()\r\n  }\r\n\r\n  getOldValue() {\r\n    return this._cell.getOldValue()\r\n  }\r\n\r\n  getInitialValue() {\r\n    return this._cell.initialValue\r\n  }\r\n\r\n  getElement() {\r\n    return this._cell.getElement()\r\n  }\r\n\r\n  getRow() {\r\n    return this._cell.row.getComponent()\r\n  }\r\n\r\n  getData(transform) {\r\n    return this._cell.row.getData(transform)\r\n  }\r\n\r\n  getType() {\r\n    return 'cell'\r\n  }\r\n\r\n  getField() {\r\n    return this._cell.column.getField()\r\n  }\r\n\r\n  getColumn() {\r\n    return this._cell.column.getComponent()\r\n  }\r\n\r\n  setValue(value, mutate) {\r\n    if (typeof mutate === 'undefined') {\r\n      mutate = true\r\n    }\r\n\r\n    this._cell.setValue(value, mutate)\r\n  }\r\n\r\n  restoreOldValue() {\r\n    this._cell.setValueActual(this._cell.getOldValue())\r\n  }\r\n\r\n  restoreInitialValue() {\r\n    this._cell.setValueActual(this._cell.initialValue)\r\n  }\r\n\r\n  checkHeight() {\r\n    this._cell.checkHeight()\r\n  }\r\n\r\n  getTable() {\r\n    return this._cell.table\r\n  }\r\n\r\n  _getSelf() {\r\n    return this._cell\r\n  }\r\n}\r\n","import CoreFeature from '../CoreFeature.js'\r\nimport CellComponent from './CellComponent.js'\r\n\r\nexport default class Cell extends CoreFeature {\r\n  constructor(column, row) {\r\n    super(column.table)\r\n\r\n    this.table = column.table\r\n    this.column = column\r\n    this.row = row\r\n    this.element = null\r\n    this.value = null\r\n    this.initialValue\r\n    this.oldValue = null\r\n    this.modules = {}\r\n\r\n    this.height = null\r\n    this.width = null\r\n    this.minWidth = null\r\n\r\n    this.component = null\r\n\r\n    this.loaded = false // track if the cell has been added to the DOM yet\r\n\r\n    this.build()\r\n  }\r\n\r\n  /// ///////////// Setup Functions /////////////////\r\n  // generate element\r\n  build() {\r\n    this.generateElement()\r\n\r\n    this.setWidth()\r\n\r\n    this._configureCell()\r\n\r\n    this.setValueActual(this.column.getFieldValue(this.row.data))\r\n\r\n    this.initialValue = this.value\r\n  }\r\n\r\n  generateElement() {\r\n    this.element = document.createElement('div')\r\n    this.element.className = 'tabulator-cell'\r\n    this.element.setAttribute('role', 'gridcell')\r\n\r\n    if (this.column.isRowHeader) {\r\n      this.element.classList.add('tabulator-row-header')\r\n    }\r\n  }\r\n\r\n  _configureCell() {\r\n    const element = this.element\r\n    const field = this.column.getField()\r\n    const vertAligns = {\r\n      top: 'flex-start',\r\n      bottom: 'flex-end',\r\n      middle: 'center'\r\n    }\r\n    const hozAligns = {\r\n      left: 'flex-start',\r\n      right: 'flex-end',\r\n      center: 'center'\r\n    }\r\n\r\n    // set text alignment\r\n    element.style.textAlign = this.column.hozAlign\r\n\r\n    if (this.column.vertAlign) {\r\n      element.style.display = 'inline-flex'\r\n\r\n      element.style.alignItems = vertAligns[this.column.vertAlign] || ''\r\n\r\n      if (this.column.hozAlign) {\r\n        element.style.justifyContent = hozAligns[this.column.hozAlign] || ''\r\n      }\r\n    }\r\n\r\n    if (field) {\r\n      element.setAttribute('tabulator-field', field)\r\n    }\r\n\r\n    // add class to cell if needed\r\n    if (this.column.definition.cssClass) {\r\n      const classNames = this.column.definition.cssClass.split(' ')\r\n      classNames.forEach((className) => {\r\n        element.classList.add(className)\r\n      })\r\n    }\r\n\r\n    this.dispatch('cell-init', this)\r\n\r\n    // hide cell if not visible\r\n    if (!this.column.visible) {\r\n      this.hide()\r\n    }\r\n  }\r\n\r\n  // generate cell contents\r\n  _generateContents() {\r\n    let val\r\n\r\n    val = this.chain('cell-format', this, null, () => {\r\n      return (this.element.innerHTML = this.value)\r\n    })\r\n\r\n    switch (typeof val) {\r\n      case 'object':\r\n        if (val instanceof Node) {\r\n          // clear previous cell contents\r\n          while (this.element.firstChild) this.element.removeChild(this.element.firstChild)\r\n\r\n          this.element.appendChild(val)\r\n        } else {\r\n          this.element.innerHTML = ''\r\n\r\n          if (val != null) {\r\n            console.warn(\r\n              'Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:',\r\n              val\r\n            )\r\n          }\r\n        }\r\n        break\r\n      case 'undefined':\r\n        this.element.innerHTML = ''\r\n        break\r\n      default:\r\n        this.element.innerHTML = val\r\n    }\r\n  }\r\n\r\n  cellRendered() {\r\n    this.dispatch('cell-rendered', this)\r\n  }\r\n\r\n  /// ///////////////// Getters ////////////////////\r\n  getElement(containerOnly) {\r\n    if (!this.loaded) {\r\n      this.loaded = true\r\n      if (!containerOnly) {\r\n        this.layoutElement()\r\n      }\r\n    }\r\n\r\n    return this.element\r\n  }\r\n\r\n  getValue() {\r\n    return this.value\r\n  }\r\n\r\n  getOldValue() {\r\n    return this.oldValue\r\n  }\r\n\r\n  /// ///////////////// Actions ////////////////////\r\n  setValue(value, mutate, force) {\r\n    const changed = this.setValueProcessData(value, mutate, force)\r\n\r\n    if (changed) {\r\n      this.dispatch('cell-value-updated', this)\r\n\r\n      this.cellRendered()\r\n\r\n      if (this.column.definition.cellEdited) {\r\n        this.column.definition.cellEdited.call(this.table, this.getComponent())\r\n      }\r\n\r\n      this.dispatchExternal('cellEdited', this.getComponent())\r\n\r\n      if (this.subscribedExternal('dataChanged')) {\r\n        this.dispatchExternal('dataChanged', this.table.rowManager.getData())\r\n      }\r\n    }\r\n  }\r\n\r\n  setValueProcessData(value, mutate, force) {\r\n    let changed = false\r\n\r\n    if (this.value !== value || force) {\r\n      changed = true\r\n\r\n      if (mutate) {\r\n        value = this.chain('cell-value-changing', [this, value], null, value)\r\n      }\r\n    }\r\n\r\n    this.setValueActual(value)\r\n\r\n    if (changed) {\r\n      this.dispatch('cell-value-changed', this)\r\n    }\r\n\r\n    return changed\r\n  }\r\n\r\n  setValueActual(value) {\r\n    this.oldValue = this.value\r\n\r\n    this.value = value\r\n\r\n    this.dispatch('cell-value-save-before', this)\r\n\r\n    this.column.setFieldValue(this.row.data, value)\r\n\r\n    this.dispatch('cell-value-save-after', this)\r\n\r\n    if (this.loaded) {\r\n      this.layoutElement()\r\n    }\r\n  }\r\n\r\n  layoutElement() {\r\n    this._generateContents()\r\n\r\n    this.dispatch('cell-layout', this)\r\n  }\r\n\r\n  setWidth() {\r\n    this.width = this.column.width\r\n    this.element.style.width = this.column.widthStyled\r\n  }\r\n\r\n  clearWidth() {\r\n    this.width = ''\r\n    this.element.style.width = ''\r\n  }\r\n\r\n  getWidth() {\r\n    return this.width || this.element.offsetWidth\r\n  }\r\n\r\n  setMinWidth() {\r\n    this.minWidth = this.column.minWidth\r\n    this.element.style.minWidth = this.column.minWidthStyled\r\n  }\r\n\r\n  setMaxWidth() {\r\n    this.maxWidth = this.column.maxWidth\r\n    this.element.style.maxWidth = this.column.maxWidthStyled\r\n  }\r\n\r\n  checkHeight() {\r\n    // var height = this.element.css(\"height\");\r\n    this.row.reinitializeHeight()\r\n  }\r\n\r\n  clearHeight() {\r\n    this.element.style.height = ''\r\n    this.height = null\r\n\r\n    this.dispatch('cell-height', this, '')\r\n  }\r\n\r\n  setHeight() {\r\n    this.height = this.row.height\r\n    this.element.style.height = this.row.heightStyled\r\n\r\n    this.dispatch('cell-height', this, this.row.heightStyled)\r\n  }\r\n\r\n  getHeight() {\r\n    return this.height || this.element.offsetHeight\r\n  }\r\n\r\n  show() {\r\n    this.element.style.display = this.column.vertAlign ? 'inline-flex' : ''\r\n  }\r\n\r\n  hide() {\r\n    this.element.style.display = 'none'\r\n  }\r\n\r\n  delete() {\r\n    this.dispatch('cell-delete', this)\r\n\r\n    if (!this.table.rowManager.redrawBlock && this.element.parentNode) {\r\n      this.element.parentNode.removeChild(this.element)\r\n    }\r\n\r\n    this.element = false\r\n    this.column.deleteCell(this)\r\n    this.row.deleteCell(this)\r\n    this.calcs = {}\r\n  }\r\n\r\n  getIndex() {\r\n    return this.row.getCellIndex(this)\r\n  }\r\n\r\n  /// ///////////// Object Generation /////////////////\r\n  getComponent() {\r\n    if (!this.component) {\r\n      this.component = new CellComponent(this)\r\n    }\r\n\r\n    return this.component\r\n  }\r\n}\r\n","import CoreFeature from '../CoreFeature.js'\r\nimport ColumnComponent from './ColumnComponent.js'\r\nimport defaultOptions from './defaults/options.js'\r\n\r\nimport Cell from '../cell/Cell.js'\r\n\r\nexport default class Column extends CoreFeature {\r\n  static defaultOptionList = defaultOptions\r\n\r\n  constructor(def, parent, rowHeader) {\r\n    super(parent.table)\r\n\r\n    this.definition = def // column definition\r\n    this.parent = parent // hold parent object\r\n    this.type = 'column' // type of element\r\n    this.columns = [] // child columns\r\n    this.cells = [] // cells bound to this column\r\n    this.isGroup = false\r\n    this.isRowHeader = rowHeader\r\n    this.element = this.createElement() // column header element\r\n    this.contentElement = false\r\n    this.titleHolderElement = false\r\n    this.titleElement = false\r\n    this.groupElement = this.createGroupElement() // column group holder element\r\n    this.hozAlign = '' // horizontal text alignment\r\n    this.vertAlign = '' // vert text alignment\r\n\r\n    // multi dimensional filed handling\r\n    this.field = ''\r\n    this.fieldStructure = ''\r\n    this.getFieldValue = ''\r\n    this.setFieldValue = ''\r\n\r\n    this.titleDownload = null\r\n    this.titleFormatterRendered = false\r\n\r\n    this.mapDefinitions()\r\n\r\n    this.setField(this.definition.field)\r\n\r\n    this.modules = {} // hold module variables;\r\n\r\n    this.width = null // column width\r\n    this.widthStyled = '' // column width pre-styled to improve render efficiency\r\n    this.maxWidth = null // column maximum width\r\n    this.maxWidthStyled = '' // column maximum pre-styled to improve render efficiency\r\n    this.maxInitialWidth = null\r\n    this.minWidth = null // column minimum width\r\n    this.minWidthStyled = '' // column minimum pre-styled to improve render efficiency\r\n    this.widthFixed = false // user has specified a width for this column\r\n\r\n    this.visible = true // default visible state\r\n\r\n    this.component = null\r\n\r\n    // initialize column\r\n    if (this.definition.columns) {\r\n      this.isGroup = true\r\n\r\n      this.definition.columns.forEach((def, i) => {\r\n        const newCol = new Column(def, this)\r\n        this.attachColumn(newCol)\r\n      })\r\n\r\n      this.checkColumnVisibility()\r\n    } else {\r\n      parent.registerColumnField(this)\r\n    }\r\n\r\n    this._initialize()\r\n  }\r\n\r\n  createElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-col')\r\n    el.setAttribute('role', 'columnheader')\r\n    el.setAttribute('aria-sort', 'none')\r\n\r\n    if (this.isRowHeader) {\r\n      el.classList.add('tabulator-row-header')\r\n    }\r\n\r\n    switch (this.table.options.columnHeaderVertAlign) {\r\n      case 'middle':\r\n        el.style.justifyContent = 'center'\r\n        break\r\n      case 'bottom':\r\n        el.style.justifyContent = 'flex-end'\r\n        break\r\n    }\r\n\r\n    return el\r\n  }\r\n\r\n  createGroupElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-col-group-cols')\r\n\r\n    return el\r\n  }\r\n\r\n  mapDefinitions() {\r\n    const defaults = this.table.options.columnDefaults\r\n\r\n    // map columnDefaults onto column definitions\r\n    if (defaults) {\r\n      for (const key in defaults) {\r\n        if (typeof this.definition[key] === 'undefined') {\r\n          this.definition[key] = defaults[key]\r\n        }\r\n      }\r\n    }\r\n\r\n    this.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition)\r\n  }\r\n\r\n  checkDefinition() {\r\n    Object.keys(this.definition).forEach((key) => {\r\n      if (Column.defaultOptionList.indexOf(key) === -1) {\r\n        console.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key)\r\n      }\r\n    })\r\n  }\r\n\r\n  setField(field) {\r\n    this.field = field\r\n    this.fieldStructure = field\r\n      ? this.table.options.nestedFieldSeparator\r\n        ? field.split(this.table.options.nestedFieldSeparator)\r\n        : [field]\r\n      : []\r\n    this.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData\r\n    this.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData\r\n  }\r\n\r\n  // register column position with column manager\r\n  registerColumnPosition(column) {\r\n    this.parent.registerColumnPosition(column)\r\n  }\r\n\r\n  // register column position with column manager\r\n  registerColumnField(column) {\r\n    this.parent.registerColumnField(column)\r\n  }\r\n\r\n  // trigger position registration\r\n  reRegisterPosition() {\r\n    if (this.isGroup) {\r\n      this.columns.forEach(function (column) {\r\n        column.reRegisterPosition()\r\n      })\r\n    } else {\r\n      this.registerColumnPosition(this)\r\n    }\r\n  }\r\n\r\n  // build header element\r\n  _initialize() {\r\n    const def = this.definition\r\n\r\n    while (this.element.firstChild) this.element.removeChild(this.element.firstChild)\r\n\r\n    if (def.headerVertical) {\r\n      this.element.classList.add('tabulator-col-vertical')\r\n\r\n      if (def.headerVertical === 'flip') {\r\n        this.element.classList.add('tabulator-col-vertical-flip')\r\n      }\r\n    }\r\n\r\n    this.contentElement = this._buildColumnHeaderContent()\r\n\r\n    this.element.appendChild(this.contentElement)\r\n\r\n    if (this.isGroup) {\r\n      this._buildGroupHeader()\r\n    } else {\r\n      this._buildColumnHeader()\r\n    }\r\n\r\n    this.dispatch('column-init', this)\r\n  }\r\n\r\n  // build header element for header\r\n  _buildColumnHeader() {\r\n    const def = this.definition\r\n\r\n    this.dispatch('column-layout', this)\r\n\r\n    // set column visibility\r\n    if (typeof def.visible !== 'undefined') {\r\n      if (def.visible) {\r\n        this.show(true)\r\n      } else {\r\n        this.hide(true)\r\n      }\r\n    }\r\n\r\n    // assign additional css classes to column header\r\n    if (def.cssClass) {\r\n      const classNames = def.cssClass.split(' ')\r\n      classNames.forEach((className) => {\r\n        this.element.classList.add(className)\r\n      })\r\n    }\r\n\r\n    if (def.field) {\r\n      this.element.setAttribute('tabulator-field', def.field)\r\n    }\r\n\r\n    // set min width if present\r\n    this.setMinWidth(parseInt(def.minWidth))\r\n\r\n    if (def.maxInitialWidth) {\r\n      this.maxInitialWidth = parseInt(def.maxInitialWidth)\r\n    }\r\n\r\n    if (def.maxWidth) {\r\n      this.setMaxWidth(parseInt(def.maxWidth))\r\n    }\r\n\r\n    this.reinitializeWidth()\r\n\r\n    // set horizontal text alignment\r\n    this.hozAlign = this.definition.hozAlign\r\n    this.vertAlign = this.definition.vertAlign\r\n\r\n    this.titleElement.style.textAlign = this.definition.headerHozAlign\r\n  }\r\n\r\n  _buildColumnHeaderContent() {\r\n    const contentElement = document.createElement('div')\r\n    contentElement.classList.add('tabulator-col-content')\r\n\r\n    this.titleHolderElement = document.createElement('div')\r\n    this.titleHolderElement.classList.add('tabulator-col-title-holder')\r\n\r\n    contentElement.appendChild(this.titleHolderElement)\r\n\r\n    this.titleElement = this._buildColumnHeaderTitle()\r\n\r\n    this.titleHolderElement.appendChild(this.titleElement)\r\n\r\n    return contentElement\r\n  }\r\n\r\n  // build title element of column\r\n  _buildColumnHeaderTitle() {\r\n    const def = this.definition\r\n\r\n    const titleHolderElement = document.createElement('div')\r\n    titleHolderElement.classList.add('tabulator-col-title')\r\n\r\n    if (def.headerWordWrap) {\r\n      titleHolderElement.classList.add('tabulator-col-title-wrap')\r\n    }\r\n\r\n    if (def.editableTitle) {\r\n      const titleElement = document.createElement('input')\r\n      titleElement.classList.add('tabulator-title-editor')\r\n\r\n      titleElement.addEventListener('click', (e) => {\r\n        e.stopPropagation()\r\n        titleElement.focus()\r\n      })\r\n\r\n      titleElement.addEventListener('mousedown', (e) => {\r\n        e.stopPropagation()\r\n      })\r\n\r\n      titleElement.addEventListener('change', () => {\r\n        def.title = titleElement.value\r\n        this.dispatchExternal('columnTitleChanged', this.getComponent())\r\n      })\r\n\r\n      titleHolderElement.appendChild(titleElement)\r\n\r\n      if (def.field) {\r\n        this.langBind('columns|' + def.field, (text) => {\r\n          titleElement.value = text || def.title || '&nbsp;'\r\n        })\r\n      } else {\r\n        titleElement.value = def.title || '&nbsp;'\r\n      }\r\n    } else {\r\n      if (def.field) {\r\n        this.langBind('columns|' + def.field, (text) => {\r\n          this._formatColumnHeaderTitle(titleHolderElement, text || def.title || '&nbsp;')\r\n        })\r\n      } else {\r\n        this._formatColumnHeaderTitle(titleHolderElement, def.title || '&nbsp;')\r\n      }\r\n    }\r\n\r\n    return titleHolderElement\r\n  }\r\n\r\n  _formatColumnHeaderTitle(el, title) {\r\n    const contents = this.chain('column-format', [this, title, el], null, () => {\r\n      return title\r\n    })\r\n\r\n    switch (typeof contents) {\r\n      case 'object':\r\n        if (contents instanceof Node) {\r\n          el.appendChild(contents)\r\n        } else {\r\n          el.innerHTML = ''\r\n          console.warn(\r\n            'Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:',\r\n            contents\r\n          )\r\n        }\r\n        break\r\n      case 'undefined':\r\n        el.innerHTML = ''\r\n        break\r\n      default:\r\n        el.innerHTML = contents\r\n    }\r\n  }\r\n\r\n  // build header element for column group\r\n  _buildGroupHeader() {\r\n    this.element.classList.add('tabulator-col-group')\r\n    this.element.setAttribute('role', 'columngroup')\r\n    this.element.setAttribute('aria-title', this.definition.title)\r\n\r\n    // asign additional css classes to column header\r\n    if (this.definition.cssClass) {\r\n      const classNames = this.definition.cssClass.split(' ')\r\n      classNames.forEach((className) => {\r\n        this.element.classList.add(className)\r\n      })\r\n    }\r\n\r\n    this.titleElement.style.textAlign = this.definition.headerHozAlign\r\n\r\n    this.element.appendChild(this.groupElement)\r\n  }\r\n\r\n  // flat field lookup\r\n  _getFlatData(data) {\r\n    return data[this.field]\r\n  }\r\n\r\n  // nested field lookup\r\n  _getNestedData(data) {\r\n    let dataObj = data\r\n    const structure = this.fieldStructure\r\n    const length = structure.length\r\n    let output\r\n\r\n    for (let i = 0; i < length; i++) {\r\n      dataObj = dataObj[structure[i]]\r\n\r\n      output = dataObj\r\n\r\n      if (!dataObj) {\r\n        break\r\n      }\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  // flat field set\r\n  _setFlatData(data, value) {\r\n    if (this.field) {\r\n      data[this.field] = value\r\n    }\r\n  }\r\n\r\n  // nested field set\r\n  _setNestedData(data, value) {\r\n    let dataObj = data\r\n    const structure = this.fieldStructure\r\n    const length = structure.length\r\n\r\n    for (let i = 0; i < length; i++) {\r\n      if (i == length - 1) {\r\n        dataObj[structure[i]] = value\r\n      } else {\r\n        if (!dataObj[structure[i]]) {\r\n          if (typeof value !== 'undefined') {\r\n            dataObj[structure[i]] = {}\r\n          } else {\r\n            break\r\n          }\r\n        }\r\n\r\n        dataObj = dataObj[structure[i]]\r\n      }\r\n    }\r\n  }\r\n\r\n  // attach column to this group\r\n  attachColumn(column) {\r\n    if (this.groupElement) {\r\n      this.columns.push(column)\r\n      this.groupElement.appendChild(column.getElement())\r\n\r\n      column.columnRendered()\r\n    } else {\r\n      console.warn('Column Warning - Column being attached to another column instead of column group')\r\n    }\r\n  }\r\n\r\n  // vertically align header in column\r\n  verticalAlign(alignment, height) {\r\n    // calculate height of column header and group holder element\r\n    const parentHeight = this.parent.isGroup\r\n      ? this.parent.getGroupElement().clientHeight\r\n      : height || this.parent.getHeadersElement().clientHeight\r\n    // var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\r\n\r\n    this.element.style.height = parentHeight + 'px'\r\n\r\n    this.dispatch('column-height', this, this.element.style.height)\r\n\r\n    if (this.isGroup) {\r\n      this.groupElement.style.minHeight = parentHeight - this.contentElement.offsetHeight + 'px'\r\n    }\r\n\r\n    // vertically align cell contents\r\n    // if(!this.isGroup && alignment !== \"top\"){\r\n    // \tif(alignment === \"bottom\"){\r\n    // \t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\r\n    // \t}else{\r\n    // \t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\r\n    // \t}\r\n    // }\r\n\r\n    this.columns.forEach(function (column) {\r\n      column.verticalAlign(alignment)\r\n    })\r\n  }\r\n\r\n  // clear vertical alignment\r\n  clearVerticalAlign() {\r\n    this.element.style.paddingTop = ''\r\n    this.element.style.height = ''\r\n    this.element.style.minHeight = ''\r\n    this.groupElement.style.minHeight = ''\r\n\r\n    this.columns.forEach(function (column) {\r\n      column.clearVerticalAlign()\r\n    })\r\n\r\n    this.dispatch('column-height', this, '')\r\n  }\r\n\r\n  /// / Retrieve Column Information ////\r\n  // return column header element\r\n  getElement() {\r\n    return this.element\r\n  }\r\n\r\n  // return column group element\r\n  getGroupElement() {\r\n    return this.groupElement\r\n  }\r\n\r\n  // return field name\r\n  getField() {\r\n    return this.field\r\n  }\r\n\r\n  getTitleDownload() {\r\n    return this.titleDownload\r\n  }\r\n\r\n  // return the first column in a group\r\n  getFirstColumn() {\r\n    if (!this.isGroup) {\r\n      return this\r\n    } else {\r\n      if (this.columns.length) {\r\n        return this.columns[0].getFirstColumn()\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  // return the last column in a group\r\n  getLastColumn() {\r\n    if (!this.isGroup) {\r\n      return this\r\n    } else {\r\n      if (this.columns.length) {\r\n        return this.columns[this.columns.length - 1].getLastColumn()\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  // return all columns in a group\r\n  getColumns(traverse) {\r\n    let columns = []\r\n\r\n    if (traverse) {\r\n      this.columns.forEach((column) => {\r\n        columns.push(column)\r\n\r\n        columns = columns.concat(column.getColumns(true))\r\n      })\r\n    } else {\r\n      columns = this.columns\r\n    }\r\n\r\n    return columns\r\n  }\r\n\r\n  // return all columns in a group\r\n  getCells() {\r\n    return this.cells\r\n  }\r\n\r\n  // retrieve the top column in a group of columns\r\n  getTopColumn() {\r\n    if (this.parent.isGroup) {\r\n      return this.parent.getTopColumn()\r\n    } else {\r\n      return this\r\n    }\r\n  }\r\n\r\n  // return column definition object\r\n  getDefinition(updateBranches) {\r\n    const colDefs = []\r\n\r\n    if (this.isGroup && updateBranches) {\r\n      this.columns.forEach(function (column) {\r\n        colDefs.push(column.getDefinition(true))\r\n      })\r\n\r\n      this.definition.columns = colDefs\r\n    }\r\n\r\n    return this.definition\r\n  }\r\n\r\n  /// ///////////////// Actions ////////////////////\r\n  checkColumnVisibility() {\r\n    let visible = false\r\n\r\n    this.columns.forEach(function (column) {\r\n      if (column.visible) {\r\n        visible = true\r\n      }\r\n    })\r\n\r\n    if (visible) {\r\n      this.show()\r\n      this.dispatchExternal('columnVisibilityChanged', this.getComponent(), false)\r\n    } else {\r\n      this.hide()\r\n    }\r\n  }\r\n\r\n  // show column\r\n  show(silent, responsiveToggle) {\r\n    if (!this.visible) {\r\n      this.visible = true\r\n\r\n      this.element.style.display = ''\r\n\r\n      if (this.parent.isGroup) {\r\n        this.parent.checkColumnVisibility()\r\n      }\r\n\r\n      this.cells.forEach(function (cell) {\r\n        cell.show()\r\n      })\r\n\r\n      if (!this.isGroup && this.width === null) {\r\n        this.reinitializeWidth()\r\n      }\r\n\r\n      this.table.columnManager.verticalAlignHeaders()\r\n\r\n      this.dispatch('column-show', this, responsiveToggle)\r\n\r\n      if (!silent) {\r\n        this.dispatchExternal('columnVisibilityChanged', this.getComponent(), true)\r\n      }\r\n\r\n      if (this.parent.isGroup) {\r\n        this.parent.matchChildWidths()\r\n      }\r\n\r\n      if (!this.silent) {\r\n        this.table.columnManager.rerenderColumns()\r\n      }\r\n    }\r\n  }\r\n\r\n  // hide column\r\n  hide(silent, responsiveToggle) {\r\n    if (this.visible) {\r\n      this.visible = false\r\n\r\n      this.element.style.display = 'none'\r\n\r\n      this.table.columnManager.verticalAlignHeaders()\r\n\r\n      if (this.parent.isGroup) {\r\n        this.parent.checkColumnVisibility()\r\n      }\r\n\r\n      this.cells.forEach(function (cell) {\r\n        cell.hide()\r\n      })\r\n\r\n      this.dispatch('column-hide', this, responsiveToggle)\r\n\r\n      if (!silent) {\r\n        this.dispatchExternal('columnVisibilityChanged', this.getComponent(), false)\r\n      }\r\n\r\n      if (this.parent.isGroup) {\r\n        this.parent.matchChildWidths()\r\n      }\r\n\r\n      if (!this.silent) {\r\n        this.table.columnManager.rerenderColumns()\r\n      }\r\n    }\r\n  }\r\n\r\n  matchChildWidths() {\r\n    let childWidth = 0\r\n\r\n    if (this.contentElement && this.columns.length) {\r\n      this.columns.forEach(function (column) {\r\n        if (column.visible) {\r\n          childWidth += column.getWidth()\r\n        }\r\n      })\r\n\r\n      this.contentElement.style.maxWidth = childWidth - 1 + 'px'\r\n      if (this.table.initialized) {\r\n        this.element.style.width = childWidth + 'px'\r\n      }\r\n\r\n      if (this.parent.isGroup) {\r\n        this.parent.matchChildWidths()\r\n      }\r\n    }\r\n  }\r\n\r\n  removeChild(child) {\r\n    const index = this.columns.indexOf(child)\r\n\r\n    if (index > -1) {\r\n      this.columns.splice(index, 1)\r\n    }\r\n\r\n    if (!this.columns.length) {\r\n      this.delete()\r\n    }\r\n  }\r\n\r\n  setWidth(width) {\r\n    this.widthFixed = true\r\n    this.setWidthActual(width)\r\n  }\r\n\r\n  setWidthActual(width) {\r\n    if (isNaN(width)) {\r\n      width = Math.floor((this.table.element.clientWidth / 100) * parseInt(width))\r\n    }\r\n\r\n    width = Math.max(this.minWidth, width)\r\n\r\n    if (this.maxWidth) {\r\n      width = Math.min(this.maxWidth, width)\r\n    }\r\n\r\n    this.width = width\r\n    this.widthStyled = width ? width + 'px' : ''\r\n\r\n    this.element.style.width = this.widthStyled\r\n\r\n    if (!this.isGroup) {\r\n      this.cells.forEach(function (cell) {\r\n        cell.setWidth()\r\n      })\r\n    }\r\n\r\n    if (this.parent.isGroup) {\r\n      this.parent.matchChildWidths()\r\n    }\r\n\r\n    this.dispatch('column-width', this)\r\n\r\n    if (this.subscribedExternal('columnWidth')) {\r\n      this.dispatchExternal('columnWidth', this.getComponent())\r\n    }\r\n  }\r\n\r\n  checkCellHeights() {\r\n    const rows = []\r\n\r\n    this.cells.forEach(function (cell) {\r\n      if (cell.row.heightInitialized) {\r\n        if (cell.row.getElement().offsetParent !== null) {\r\n          rows.push(cell.row)\r\n          cell.row.clearCellHeight()\r\n        } else {\r\n          cell.row.heightInitialized = false\r\n        }\r\n      }\r\n    })\r\n\r\n    rows.forEach(function (row) {\r\n      row.calcHeight()\r\n    })\r\n\r\n    rows.forEach(function (row) {\r\n      row.setCellHeight()\r\n    })\r\n  }\r\n\r\n  getWidth() {\r\n    let width = 0\r\n\r\n    if (this.isGroup) {\r\n      this.columns.forEach(function (column) {\r\n        if (column.visible) {\r\n          width += column.getWidth()\r\n        }\r\n      })\r\n    } else {\r\n      width = this.width\r\n    }\r\n\r\n    return width\r\n  }\r\n\r\n  getLeftOffset() {\r\n    let offset = this.element.offsetLeft\r\n\r\n    if (this.parent.isGroup) {\r\n      offset += this.parent.getLeftOffset()\r\n    }\r\n\r\n    return offset\r\n  }\r\n\r\n  getHeight() {\r\n    return Math.ceil(this.element.getBoundingClientRect().height)\r\n  }\r\n\r\n  setMinWidth(minWidth) {\r\n    if (this.maxWidth && minWidth > this.maxWidth) {\r\n      minWidth = this.maxWidth\r\n\r\n      console.warn(\r\n        'the minWidth (' +\r\n          minWidth +\r\n          \"px) for column '\" +\r\n          this.field +\r\n          \"' cannot be bigger that its maxWidth (\" +\r\n          this.maxWidthStyled +\r\n          ')'\r\n      )\r\n    }\r\n\r\n    this.minWidth = minWidth\r\n    this.minWidthStyled = minWidth ? minWidth + 'px' : ''\r\n\r\n    this.element.style.minWidth = this.minWidthStyled\r\n\r\n    this.cells.forEach(function (cell) {\r\n      cell.setMinWidth()\r\n    })\r\n  }\r\n\r\n  setMaxWidth(maxWidth) {\r\n    if (this.minWidth && maxWidth < this.minWidth) {\r\n      maxWidth = this.minWidth\r\n\r\n      console.warn(\r\n        'the maxWidth (' +\r\n          maxWidth +\r\n          \"px) for column '\" +\r\n          this.field +\r\n          \"' cannot be smaller that its minWidth (\" +\r\n          this.minWidthStyled +\r\n          ')'\r\n      )\r\n    }\r\n\r\n    this.maxWidth = maxWidth\r\n    this.maxWidthStyled = maxWidth ? maxWidth + 'px' : ''\r\n\r\n    this.element.style.maxWidth = this.maxWidthStyled\r\n\r\n    this.cells.forEach(function (cell) {\r\n      cell.setMaxWidth()\r\n    })\r\n  }\r\n\r\n  delete() {\r\n    return new Promise((resolve, reject) => {\r\n      if (this.isGroup) {\r\n        this.columns.forEach(function (column) {\r\n          column.delete()\r\n        })\r\n      }\r\n\r\n      this.dispatch('column-delete', this)\r\n\r\n      const cellCount = this.cells.length\r\n\r\n      for (let i = 0; i < cellCount; i++) {\r\n        this.cells[0].delete()\r\n      }\r\n\r\n      if (this.element.parentNode) {\r\n        this.element.parentNode.removeChild(this.element)\r\n      }\r\n\r\n      this.element = false\r\n      this.contentElement = false\r\n      this.titleElement = false\r\n      this.groupElement = false\r\n\r\n      if (this.parent.isGroup) {\r\n        this.parent.removeChild(this)\r\n      }\r\n\r\n      this.table.columnManager.deregisterColumn(this)\r\n\r\n      this.table.columnManager.rerenderColumns(true)\r\n\r\n      this.dispatch('column-deleted', this)\r\n\r\n      resolve()\r\n    })\r\n  }\r\n\r\n  columnRendered() {\r\n    if (this.titleFormatterRendered) {\r\n      this.titleFormatterRendered()\r\n    }\r\n\r\n    this.dispatch('column-rendered', this)\r\n  }\r\n\r\n  /// ///////////// Cell Management /////////////////\r\n  // generate cell for this column\r\n  generateCell(row) {\r\n    const cell = new Cell(this, row)\r\n\r\n    this.cells.push(cell)\r\n\r\n    return cell\r\n  }\r\n\r\n  nextColumn() {\r\n    const index = this.table.columnManager.findColumnIndex(this)\r\n    return index > -1 ? this._nextVisibleColumn(index + 1) : false\r\n  }\r\n\r\n  _nextVisibleColumn(index) {\r\n    const column = this.table.columnManager.getColumnByIndex(index)\r\n    return !column || column.visible ? column : this._nextVisibleColumn(index + 1)\r\n  }\r\n\r\n  prevColumn() {\r\n    const index = this.table.columnManager.findColumnIndex(this)\r\n    return index > -1 ? this._prevVisibleColumn(index - 1) : false\r\n  }\r\n\r\n  _prevVisibleColumn(index) {\r\n    const column = this.table.columnManager.getColumnByIndex(index)\r\n    return !column || column.visible ? column : this._prevVisibleColumn(index - 1)\r\n  }\r\n\r\n  reinitializeWidth(force) {\r\n    this.widthFixed = false\r\n\r\n    // set width if present\r\n    if (typeof this.definition.width !== 'undefined' && !force) {\r\n      // maxInitialWidth ignored here as width specified\r\n      this.setWidth(this.definition.width)\r\n    }\r\n\r\n    this.dispatch('column-width-fit-before', this)\r\n\r\n    this.fitToData(force)\r\n\r\n    this.dispatch('column-width-fit-after', this)\r\n  }\r\n\r\n  // set column width to maximum cell width for non group columns\r\n  fitToData(force) {\r\n    if (this.isGroup) {\r\n      return\r\n    }\r\n\r\n    if (!this.widthFixed) {\r\n      this.element.style.width = ''\r\n\r\n      this.cells.forEach((cell) => {\r\n        cell.clearWidth()\r\n      })\r\n    }\r\n\r\n    let maxWidth = this.element.offsetWidth\r\n\r\n    if (!this.width || !this.widthFixed) {\r\n      this.cells.forEach((cell) => {\r\n        const width = cell.getWidth()\r\n\r\n        if (width > maxWidth) {\r\n          maxWidth = width\r\n        }\r\n      })\r\n\r\n      if (maxWidth) {\r\n        let setTo = maxWidth + 1\r\n\r\n        if (force) {\r\n          this.setWidth(setTo)\r\n        } else {\r\n          if (this.maxInitialWidth && !force) {\r\n            setTo = Math.min(setTo, this.maxInitialWidth)\r\n          }\r\n          this.setWidthActual(setTo)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  updateDefinition(updates) {\r\n    let definition\r\n\r\n    if (!this.isGroup) {\r\n      if (!this.parent.isGroup) {\r\n        definition = Object.assign({}, this.getDefinition())\r\n        definition = Object.assign(definition, updates)\r\n\r\n        return this.table.columnManager.addColumn(definition, false, this).then((column) => {\r\n          if (definition.field == this.field) {\r\n            this.field = false // clear field name to prevent deletion of duplicate column from arrays\r\n          }\r\n\r\n          return this.delete().then(() => {\r\n            return column.getComponent()\r\n          })\r\n        })\r\n      } else {\r\n        console.error('Column Update Error - The updateDefinition function is only available on ungrouped columns')\r\n        return Promise.reject(\r\n          'Column Update Error - The updateDefinition function is only available on columns, not column groups'\r\n        )\r\n      }\r\n    } else {\r\n      console.error('Column Update Error - The updateDefinition function is only available on ungrouped columns')\r\n      return Promise.reject(\r\n        'Column Update Error - The updateDefinition function is only available on columns, not column groups'\r\n      )\r\n    }\r\n  }\r\n\r\n  deleteCell(cell) {\r\n    const index = this.cells.indexOf(cell)\r\n\r\n    if (index > -1) {\r\n      this.cells.splice(index, 1)\r\n    }\r\n  }\r\n\r\n  /// ///////////// Object Generation /////////////////\r\n  getComponent() {\r\n    if (!this.component) {\r\n      this.component = new ColumnComponent(this)\r\n    }\r\n\r\n    return this.component\r\n  }\r\n\r\n  getPosition() {\r\n    return this.table.columnManager.getVisibleColumnsByIndex().indexOf(this) + 1\r\n  }\r\n\r\n  getParentComponent() {\r\n    return this.parent instanceof Column ? this.parent.getComponent() : false\r\n  }\r\n}\r\n","export default class Helpers {\r\n  static elVisible(el) {\r\n    return !(el.offsetWidth <= 0 && el.offsetHeight <= 0)\r\n  }\r\n\r\n  static elOffset(el) {\r\n    const box = el.getBoundingClientRect()\r\n\r\n    return {\r\n      top: box.top + window.pageYOffset - document.documentElement.clientTop,\r\n      left: box.left + window.pageXOffset - document.documentElement.clientLeft\r\n    }\r\n  }\r\n\r\n  static retrieveNestedData(separator, field, data) {\r\n    const structure = separator ? field.split(separator) : [field]\r\n    const length = structure.length\r\n    let output\r\n\r\n    for (let i = 0; i < length; i++) {\r\n      data = data[structure[i]]\r\n\r\n      output = data\r\n\r\n      if (!data) {\r\n        break\r\n      }\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  static deepClone(obj, clone, list = []) {\r\n    const objectProto = {}.__proto__\r\n    const arrayProto = [].__proto__\r\n\r\n    if (!clone) {\r\n      clone = Object.assign(Array.isArray(obj) ? [] : {}, obj)\r\n    }\r\n\r\n    for (const i in obj) {\r\n      const subject = obj[i]\r\n      let match\r\n      let copy\r\n\r\n      if (\r\n        subject != null &&\r\n        typeof subject === 'object' &&\r\n        (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)\r\n      ) {\r\n        match = list.findIndex((item) => {\r\n          return item.subject === subject\r\n        })\r\n\r\n        if (match > -1) {\r\n          clone[i] = list[match].copy\r\n        } else {\r\n          copy = Object.assign(Array.isArray(subject) ? [] : {}, subject)\r\n\r\n          list.unshift({ subject, copy })\r\n\r\n          clone[i] = this.deepClone(subject, copy, list)\r\n        }\r\n      }\r\n    }\r\n\r\n    return clone\r\n  }\r\n}\r\n","export default class OptionsList {\r\n  constructor(table, msgType, defaults = {}) {\r\n    this.table = table\r\n    this.msgType = msgType\r\n    this.registeredDefaults = Object.assign({}, defaults)\r\n  }\r\n\r\n  register(option, value) {\r\n    this.registeredDefaults[option] = value\r\n  }\r\n\r\n  generate(defaultOptions, userOptions = {}) {\r\n    const output = Object.assign({}, this.registeredDefaults)\r\n    const warn = this.table.options.debugInvalidOptions || userOptions.debugInvalidOptions === true\r\n\r\n    Object.assign(output, defaultOptions)\r\n\r\n    for (const key in userOptions) {\r\n      if (!output.hasOwnProperty(key)) {\r\n        if (warn) {\r\n          console.warn('Invalid ' + this.msgType + ' option:', key)\r\n        }\r\n\r\n        output[key] = userOptions.key\r\n      }\r\n    }\r\n\r\n    for (const key in output) {\r\n      if (key in userOptions) {\r\n        output[key] = userOptions[key]\r\n      } else {\r\n        if (Array.isArray(output[key])) {\r\n          output[key] = Object.assign([], output[key])\r\n        } else if (typeof output[key] === 'object' && output[key] !== null) {\r\n          output[key] = Object.assign({}, output[key])\r\n        } else if (typeof output[key] === 'undefined') {\r\n          delete output[key]\r\n        }\r\n      }\r\n    }\r\n\r\n    return output\r\n  }\r\n}\r\n","import CoreFeature from '../CoreFeature.js'\r\nimport Helpers from '../tools/Helpers.js'\r\n\r\nexport default class Renderer extends CoreFeature {\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.elementVertical = table.rowManager.element\r\n    this.elementHorizontal = table.columnManager.element\r\n    this.tableElement = table.rowManager.tableElement\r\n\r\n    this.verticalFillMode = 'fit' // used by row manager to determine how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the container without resizing it)\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// //// Internal Bindings /////////\r\n  /// ////////////////////////////////\r\n\r\n  initialize() {\r\n    // initialize core functionality\r\n  }\r\n\r\n  clearRows() {\r\n    // clear down existing rows layout\r\n  }\r\n\r\n  clearColumns() {\r\n    // clear down existing columns layout\r\n  }\r\n\r\n  reinitializeColumnWidths(columns) {\r\n    // resize columns to fit data\r\n  }\r\n\r\n  renderRows() {\r\n    // render rows from a clean slate\r\n  }\r\n\r\n  renderColumns() {\r\n    // render columns from a clean slate\r\n  }\r\n\r\n  rerenderRows(callback) {\r\n    // rerender rows and keep position\r\n    if (callback) {\r\n      callback()\r\n    }\r\n  }\r\n\r\n  rerenderColumns(update, blockRedraw) {\r\n    // rerender columns\r\n  }\r\n\r\n  renderRowCells(row) {\r\n    // render the cells in a row\r\n  }\r\n\r\n  rerenderRowCells(row, force) {\r\n    // rerender the cells in a row\r\n  }\r\n\r\n  scrollColumns(left, dir) {\r\n    // handle horizontal scrolling\r\n  }\r\n\r\n  scrollRows(top, dir) {\r\n    // handle vertical scrolling\r\n  }\r\n\r\n  resize() {\r\n    // container has resized, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\r\n  }\r\n\r\n  scrollToRow(row) {\r\n    // scroll to a specific row\r\n  }\r\n\r\n  scrollToRowNearestTop(row) {\r\n    // determine weather the row is nearest the top or bottom of the table, return true for top or false for bottom\r\n  }\r\n\r\n  visibleRows(includingBuffer) {\r\n    // return the visible rows\r\n    return []\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ///// Helper Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  rows() {\r\n    return this.table.rowManager.getDisplayRows()\r\n  }\r\n\r\n  styleRow(row, index) {\r\n    const rowEl = row.getElement()\r\n\r\n    if (index % 2) {\r\n      rowEl.classList.add('tabulator-row-even')\r\n      rowEl.classList.remove('tabulator-row-odd')\r\n    } else {\r\n      rowEl.classList.add('tabulator-row-odd')\r\n      rowEl.classList.remove('tabulator-row-even')\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// //// External Triggers /////////\r\n  /// //// (DO NOT OVERRIDE) /////////\r\n  /// ////////////////////////////////\r\n\r\n  clear() {\r\n    // clear down existing layout\r\n    this.clearRows()\r\n    this.clearColumns()\r\n  }\r\n\r\n  render() {\r\n    // render from a clean slate\r\n    this.renderRows()\r\n    this.renderColumns()\r\n  }\r\n\r\n  rerender(callback) {\r\n    // rerender and keep position\r\n    this.rerenderRows()\r\n    this.rerenderColumns()\r\n  }\r\n\r\n  scrollToRowPosition(row, position, ifVisible) {\r\n    const rowIndex = this.rows().indexOf(row)\r\n    const rowEl = row.getElement()\r\n    let offset = 0\r\n\r\n    return new Promise((resolve, reject) => {\r\n      if (rowIndex > -1) {\r\n        if (typeof ifVisible === 'undefined') {\r\n          ifVisible = this.table.options.scrollToRowIfVisible\r\n        }\r\n\r\n        // check row visibility\r\n        if (!ifVisible) {\r\n          if (Helpers.elVisible(rowEl)) {\r\n            offset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top\r\n\r\n            if (offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight) {\r\n              resolve()\r\n              return false\r\n            }\r\n          }\r\n        }\r\n\r\n        if (typeof position === 'undefined') {\r\n          position = this.table.options.scrollToRowPosition\r\n        }\r\n\r\n        if (position === 'nearest') {\r\n          position = this.scrollToRowNearestTop(row) ? 'top' : 'bottom'\r\n        }\r\n\r\n        // scroll to row\r\n        this.scrollToRow(row)\r\n\r\n        // align to correct position\r\n        switch (position) {\r\n          case 'middle':\r\n          case 'center':\r\n            if (\r\n              this.elementVertical.scrollHeight - this.elementVertical.scrollTop ==\r\n              this.elementVertical.clientHeight\r\n            ) {\r\n              this.elementVertical.scrollTop =\r\n                this.elementVertical.scrollTop +\r\n                (rowEl.offsetTop - this.elementVertical.scrollTop) -\r\n                (this.elementVertical.scrollHeight - rowEl.offsetTop) / 2\r\n            } else {\r\n              this.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight / 2\r\n            }\r\n\r\n            break\r\n\r\n          case 'bottom':\r\n            if (\r\n              this.elementVertical.scrollHeight - this.elementVertical.scrollTop ==\r\n              this.elementVertical.clientHeight\r\n            ) {\r\n              this.elementVertical.scrollTop =\r\n                this.elementVertical.scrollTop -\r\n                (this.elementVertical.scrollHeight - rowEl.offsetTop) +\r\n                rowEl.offsetHeight\r\n            } else {\r\n              this.elementVertical.scrollTop =\r\n                this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight\r\n            }\r\n\r\n            break\r\n\r\n          case 'top':\r\n            this.elementVertical.scrollTop = rowEl.offsetTop\r\n            break\r\n        }\r\n\r\n        resolve()\r\n      } else {\r\n        console.warn('Scroll Error - Row not visible')\r\n        reject('Scroll Error - Row not visible')\r\n      }\r\n    })\r\n  }\r\n}\r\n","import Renderer from '../Renderer.js'\r\n\r\nexport default class BasicHorizontal extends Renderer {\r\n  constructor(table) {\r\n    super(table)\r\n  }\r\n\r\n  renderRowCells(row, inFragment) {\r\n    const rowFrag = document.createDocumentFragment()\r\n    row.cells.forEach((cell) => {\r\n      rowFrag.appendChild(cell.getElement())\r\n    })\r\n    row.element.appendChild(rowFrag)\r\n\r\n    if (!inFragment) {\r\n      row.cells.forEach((cell) => {\r\n        cell.cellRendered()\r\n      })\r\n    }\r\n  }\r\n\r\n  reinitializeColumnWidths(columns) {\r\n    columns.forEach(function (column) {\r\n      column.reinitializeWidth()\r\n    })\r\n  }\r\n}\r\n","import Renderer from '../Renderer.js'\r\n\r\nexport default class VirtualDomHorizontal extends Renderer {\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.leftCol = 0\r\n    this.rightCol = 0\r\n    this.scrollLeft = 0\r\n\r\n    this.vDomScrollPosLeft = 0\r\n    this.vDomScrollPosRight = 0\r\n\r\n    this.vDomPadLeft = 0\r\n    this.vDomPadRight = 0\r\n\r\n    this.fitDataColAvg = 0\r\n\r\n    this.windowBuffer = 200 // pixel margin to make column visible before it is shown on screen\r\n\r\n    this.visibleRows = null\r\n\r\n    this.initialized = false\r\n    this.isFitData = false\r\n\r\n    this.columns = []\r\n  }\r\n\r\n  initialize() {\r\n    this.compatibilityCheck()\r\n    this.layoutCheck()\r\n    this.vertScrollListen()\r\n  }\r\n\r\n  compatibilityCheck() {\r\n    if (this.options('layout') == 'fitDataTable') {\r\n      console.warn('Horizontal Virtual DOM is not compatible with fitDataTable layout mode')\r\n    }\r\n\r\n    if (this.options('responsiveLayout')) {\r\n      console.warn('Horizontal Virtual DOM is not compatible with responsive columns')\r\n    }\r\n\r\n    if (this.options('rtl')) {\r\n      console.warn('Horizontal Virtual DOM is not currently compatible with RTL text direction')\r\n    }\r\n  }\r\n\r\n  layoutCheck() {\r\n    this.isFitData = this.options('layout').startsWith('fitData')\r\n  }\r\n\r\n  vertScrollListen() {\r\n    this.subscribe('scroll-vertical', this.clearVisRowCache.bind(this))\r\n    this.subscribe('data-refreshed', this.clearVisRowCache.bind(this))\r\n  }\r\n\r\n  clearVisRowCache() {\r\n    this.visibleRows = null\r\n  }\r\n\r\n  /// ///////////////////////////////////\r\n  /// ////// Public Functions ///////////\r\n  /// ///////////////////////////////////\r\n\r\n  renderColumns(row, force) {\r\n    this.dataChange()\r\n  }\r\n\r\n  scrollColumns(left, dir) {\r\n    if (this.scrollLeft != left) {\r\n      this.scrollLeft = left\r\n\r\n      this.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer))\r\n    }\r\n  }\r\n\r\n  calcWindowBuffer() {\r\n    let buffer = this.elementVertical.clientWidth\r\n\r\n    this.table.columnManager.columnsByIndex.forEach((column) => {\r\n      if (column.visible) {\r\n        const width = column.getWidth()\r\n\r\n        if (width > buffer) {\r\n          buffer = width\r\n        }\r\n      }\r\n    })\r\n\r\n    this.windowBuffer = buffer * 2\r\n  }\r\n\r\n  rerenderColumns(update, blockRedraw) {\r\n    const old = {\r\n      cols: this.columns,\r\n      leftCol: this.leftCol,\r\n      rightCol: this.rightCol\r\n    }\r\n    let colPos = 0\r\n\r\n    if (update && !this.initialized) {\r\n      return\r\n    }\r\n\r\n    this.clear()\r\n\r\n    this.calcWindowBuffer()\r\n\r\n    this.scrollLeft = this.elementVertical.scrollLeft\r\n\r\n    this.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer\r\n    this.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer\r\n\r\n    this.table.columnManager.columnsByIndex.forEach((column) => {\r\n      const config = {}\r\n      let width\r\n\r\n      if (column.visible) {\r\n        if (!column.modules.frozen) {\r\n          width = column.getWidth()\r\n\r\n          config.leftPos = colPos\r\n          config.rightPos = colPos + width\r\n\r\n          config.width = width\r\n\r\n          if (this.isFitData) {\r\n            config.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true\r\n          }\r\n\r\n          if (colPos + width > this.vDomScrollPosLeft && colPos < this.vDomScrollPosRight) {\r\n            // column is visible\r\n\r\n            if (this.leftCol == -1) {\r\n              this.leftCol = this.columns.length\r\n              this.vDomPadLeft = colPos\r\n            }\r\n\r\n            this.rightCol = this.columns.length\r\n          } else {\r\n            // column is hidden\r\n            if (this.leftCol !== -1) {\r\n              this.vDomPadRight += width\r\n            }\r\n          }\r\n\r\n          this.columns.push(column)\r\n\r\n          column.modules.vdomHoz = config\r\n\r\n          colPos += width\r\n        }\r\n      }\r\n    })\r\n\r\n    this.tableElement.style.paddingLeft = this.vDomPadLeft + 'px'\r\n    this.tableElement.style.paddingRight = this.vDomPadRight + 'px'\r\n\r\n    this.initialized = true\r\n\r\n    if (!blockRedraw) {\r\n      if (!update || this.reinitChanged(old)) {\r\n        this.reinitializeRows()\r\n      }\r\n    }\r\n\r\n    this.elementVertical.scrollLeft = this.scrollLeft\r\n  }\r\n\r\n  renderRowCells(row) {\r\n    if (this.initialized) {\r\n      this.initializeRow(row)\r\n    } else {\r\n      const rowFrag = document.createDocumentFragment()\r\n      row.cells.forEach((cell) => {\r\n        rowFrag.appendChild(cell.getElement())\r\n      })\r\n      row.element.appendChild(rowFrag)\r\n\r\n      row.cells.forEach((cell) => {\r\n        cell.cellRendered()\r\n      })\r\n    }\r\n  }\r\n\r\n  rerenderRowCells(row, force) {\r\n    this.reinitializeRow(row, force)\r\n  }\r\n\r\n  reinitializeColumnWidths(columns) {\r\n    for (let i = this.leftCol; i <= this.rightCol; i++) {\r\n      const col = this.columns[i]\r\n\r\n      if (col) {\r\n        col.reinitializeWidth()\r\n      }\r\n    }\r\n  }\r\n\r\n  /// ///////////////////////////////////\r\n  /// ///// Internal Rendering //////////\r\n  /// ///////////////////////////////////\r\n\r\n  deinitialize() {\r\n    this.initialized = false\r\n  }\r\n\r\n  clear() {\r\n    this.columns = []\r\n\r\n    this.leftCol = -1\r\n    this.rightCol = 0\r\n\r\n    this.vDomScrollPosLeft = 0\r\n    this.vDomScrollPosRight = 0\r\n    this.vDomPadLeft = 0\r\n    this.vDomPadRight = 0\r\n  }\r\n\r\n  dataChange() {\r\n    let change = false\r\n    let row\r\n    let rowEl\r\n\r\n    if (this.isFitData) {\r\n      this.table.columnManager.columnsByIndex.forEach((column) => {\r\n        if (!column.definition.width && column.visible) {\r\n          change = true\r\n        }\r\n      })\r\n\r\n      if (change && this.table.rowManager.getDisplayRows().length) {\r\n        this.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer\r\n\r\n        row = this.chain('rows-sample', [1], [], () => {\r\n          return this.table.rowManager.getDisplayRows()\r\n        })[0]\r\n\r\n        if (row) {\r\n          rowEl = row.getElement()\r\n\r\n          row.generateCells()\r\n\r\n          this.tableElement.appendChild(rowEl)\r\n\r\n          for (let colEnd = 0; colEnd < row.cells.length; colEnd++) {\r\n            const cell = row.cells[colEnd]\r\n            rowEl.appendChild(cell.getElement())\r\n\r\n            cell.column.reinitializeWidth()\r\n          }\r\n\r\n          rowEl.parentNode.removeChild(rowEl)\r\n\r\n          this.rerenderColumns(false, true)\r\n        }\r\n      }\r\n    } else {\r\n      if (this.options('layout') === 'fitColumns') {\r\n        this.layoutRefresh()\r\n        this.rerenderColumns(false, true)\r\n      }\r\n    }\r\n  }\r\n\r\n  reinitChanged(old) {\r\n    let match = true\r\n\r\n    if (old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol) {\r\n      return true\r\n    }\r\n\r\n    old.cols.forEach((col, i) => {\r\n      if (col !== this.columns[i]) {\r\n        match = false\r\n      }\r\n    })\r\n\r\n    return !match\r\n  }\r\n\r\n  reinitializeRows() {\r\n    const visibleRows = this.getVisibleRows()\r\n    const otherRows = this.table.rowManager.getRows().filter((row) => !visibleRows.includes(row))\r\n\r\n    visibleRows.forEach((row) => {\r\n      this.reinitializeRow(row, true)\r\n    })\r\n\r\n    otherRows.forEach((row) => {\r\n      row.deinitialize()\r\n    })\r\n  }\r\n\r\n  getVisibleRows() {\r\n    if (!this.visibleRows) {\r\n      this.visibleRows = this.table.rowManager.getVisibleRows()\r\n    }\r\n\r\n    return this.visibleRows\r\n  }\r\n\r\n  scroll(diff) {\r\n    this.vDomScrollPosLeft += diff\r\n    this.vDomScrollPosRight += diff\r\n\r\n    if (Math.abs(diff) > this.windowBuffer / 2) {\r\n      this.rerenderColumns()\r\n    } else {\r\n      if (diff > 0) {\r\n        // scroll right\r\n        this.addColRight()\r\n        this.removeColLeft()\r\n      } else {\r\n        // scroll left\r\n        this.addColLeft()\r\n        this.removeColRight()\r\n      }\r\n    }\r\n  }\r\n\r\n  colPositionAdjust(start, end, diff) {\r\n    for (let i = start; i < end; i++) {\r\n      const column = this.columns[i]\r\n\r\n      column.modules.vdomHoz.leftPos += diff\r\n      column.modules.vdomHoz.rightPos += diff\r\n    }\r\n  }\r\n\r\n  addColRight() {\r\n    let changes = false\r\n    let working = true\r\n\r\n    while (working) {\r\n      const column = this.columns[this.rightCol + 1]\r\n\r\n      if (column) {\r\n        if (column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight) {\r\n          changes = true\r\n\r\n          this.getVisibleRows().forEach((row) => {\r\n            if (row.type !== 'group') {\r\n              const cell = row.getCell(column)\r\n              row\r\n                .getElement()\r\n                .insertBefore(cell.getElement(), row.getCell(this.columns[this.rightCol]).getElement().nextSibling)\r\n              cell.cellRendered()\r\n            }\r\n          })\r\n\r\n          this.fitDataColActualWidthCheck(column)\r\n\r\n          this.rightCol++ // Don't move this below the >= check below\r\n\r\n          this.getVisibleRows().forEach((row) => {\r\n            if (row.type !== 'group') {\r\n              row.modules.vdomHoz.rightCol = this.rightCol\r\n            }\r\n          })\r\n\r\n          if (this.rightCol >= this.columns.length - 1) {\r\n            this.vDomPadRight = 0\r\n          } else {\r\n            this.vDomPadRight -= column.getWidth()\r\n          }\r\n        } else {\r\n          working = false\r\n        }\r\n      } else {\r\n        working = false\r\n      }\r\n    }\r\n\r\n    if (changes) {\r\n      this.tableElement.style.paddingRight = this.vDomPadRight + 'px'\r\n    }\r\n  }\r\n\r\n  addColLeft() {\r\n    let changes = false\r\n    let working = true\r\n\r\n    while (working) {\r\n      const column = this.columns[this.leftCol - 1]\r\n\r\n      if (column) {\r\n        if (column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft) {\r\n          changes = true\r\n\r\n          this.getVisibleRows().forEach((row) => {\r\n            if (row.type !== 'group') {\r\n              const cell = row.getCell(column)\r\n              row.getElement().insertBefore(cell.getElement(), row.getCell(this.columns[this.leftCol]).getElement())\r\n              cell.cellRendered()\r\n            }\r\n          })\r\n\r\n          this.leftCol-- // don't move this below the <= check below\r\n\r\n          this.getVisibleRows().forEach((row) => {\r\n            if (row.type !== 'group') {\r\n              row.modules.vdomHoz.leftCol = this.leftCol\r\n            }\r\n          })\r\n\r\n          if (this.leftCol <= 0) {\r\n            // replicating logic in addColRight\r\n            this.vDomPadLeft = 0\r\n          } else {\r\n            this.vDomPadLeft -= column.getWidth()\r\n          }\r\n\r\n          const diff = this.fitDataColActualWidthCheck(column)\r\n\r\n          if (diff) {\r\n            this.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff\r\n            this.vDomPadRight -= diff\r\n          }\r\n        } else {\r\n          working = false\r\n        }\r\n      } else {\r\n        working = false\r\n      }\r\n    }\r\n\r\n    if (changes) {\r\n      this.tableElement.style.paddingLeft = this.vDomPadLeft + 'px'\r\n    }\r\n  }\r\n\r\n  removeColRight() {\r\n    let changes = false\r\n    let working = true\r\n\r\n    while (working) {\r\n      const column = this.columns[this.rightCol]\r\n\r\n      if (column) {\r\n        if (column.modules.vdomHoz.leftPos > this.vDomScrollPosRight) {\r\n          changes = true\r\n\r\n          this.getVisibleRows().forEach((row) => {\r\n            if (row.type !== 'group') {\r\n              const cell = row.getCell(column)\r\n\r\n              try {\r\n                row.getElement().removeChild(cell.getElement())\r\n              } catch (ex) {\r\n                console.warn('Could not removeColRight', ex.message)\r\n              }\r\n            }\r\n          })\r\n\r\n          this.vDomPadRight += column.getWidth()\r\n          this.rightCol--\r\n\r\n          this.getVisibleRows().forEach((row) => {\r\n            if (row.type !== 'group') {\r\n              row.modules.vdomHoz.rightCol = this.rightCol\r\n            }\r\n          })\r\n        } else {\r\n          working = false\r\n        }\r\n      } else {\r\n        working = false\r\n      }\r\n    }\r\n\r\n    if (changes) {\r\n      this.tableElement.style.paddingRight = this.vDomPadRight + 'px'\r\n    }\r\n  }\r\n\r\n  removeColLeft() {\r\n    let changes = false\r\n    let working = true\r\n\r\n    while (working) {\r\n      const column = this.columns[this.leftCol]\r\n\r\n      if (column) {\r\n        if (column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft) {\r\n          changes = true\r\n\r\n          this.getVisibleRows().forEach((row) => {\r\n            if (row.type !== 'group') {\r\n              const cell = row.getCell(column)\r\n\r\n              try {\r\n                row.getElement().removeChild(cell.getElement())\r\n              } catch (ex) {\r\n                console.warn('Could not removeColLeft', ex.message)\r\n              }\r\n            }\r\n          })\r\n\r\n          this.vDomPadLeft += column.getWidth()\r\n          this.leftCol++\r\n\r\n          this.getVisibleRows().forEach((row) => {\r\n            if (row.type !== 'group') {\r\n              row.modules.vdomHoz.leftCol = this.leftCol\r\n            }\r\n          })\r\n        } else {\r\n          working = false\r\n        }\r\n      } else {\r\n        working = false\r\n      }\r\n    }\r\n\r\n    if (changes) {\r\n      this.tableElement.style.paddingLeft = this.vDomPadLeft + 'px'\r\n    }\r\n  }\r\n\r\n  fitDataColActualWidthCheck(column) {\r\n    let newWidth, widthDiff\r\n\r\n    if (column.modules.vdomHoz.fitDataCheck) {\r\n      column.reinitializeWidth()\r\n\r\n      newWidth = column.getWidth()\r\n      widthDiff = newWidth - column.modules.vdomHoz.width\r\n\r\n      if (widthDiff) {\r\n        column.modules.vdomHoz.rightPos += widthDiff\r\n        column.modules.vdomHoz.width = newWidth\r\n        this.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff)\r\n      }\r\n\r\n      column.modules.vdomHoz.fitDataCheck = false\r\n    }\r\n\r\n    return widthDiff\r\n  }\r\n\r\n  initializeRow(row) {\r\n    if (row.type !== 'group') {\r\n      row.modules.vdomHoz = {\r\n        leftCol: this.leftCol,\r\n        rightCol: this.rightCol\r\n      }\r\n\r\n      if (this.table.modules.frozenColumns) {\r\n        this.table.modules.frozenColumns.leftColumns.forEach((column) => {\r\n          this.appendCell(row, column)\r\n        })\r\n      }\r\n\r\n      for (let i = this.leftCol; i <= this.rightCol; i++) {\r\n        this.appendCell(row, this.columns[i])\r\n      }\r\n\r\n      if (this.table.modules.frozenColumns) {\r\n        this.table.modules.frozenColumns.rightColumns.forEach((column) => {\r\n          this.appendCell(row, column)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  appendCell(row, column) {\r\n    if (column && column.visible) {\r\n      const cell = row.getCell(column)\r\n\r\n      row.getElement().appendChild(cell.getElement())\r\n      cell.cellRendered()\r\n    }\r\n  }\r\n\r\n  reinitializeRow(row, force) {\r\n    if (row.type !== 'group') {\r\n      if (\r\n        force ||\r\n        !row.modules.vdomHoz ||\r\n        row.modules.vdomHoz.leftCol !== this.leftCol ||\r\n        row.modules.vdomHoz.rightCol !== this.rightCol\r\n      ) {\r\n        const rowEl = row.getElement()\r\n        while (rowEl.firstChild) rowEl.removeChild(rowEl.firstChild)\r\n\r\n        this.initializeRow(row)\r\n      }\r\n    }\r\n  }\r\n}\r\n","import CoreFeature from './CoreFeature.js'\r\nimport Column from './column/Column.js'\r\nimport ColumnComponent from './column/ColumnComponent.js'\r\nimport Helpers from './tools/Helpers.js'\r\nimport OptionsList from './tools/OptionsList.js'\r\n\r\nimport RendererBasicHorizontal from './rendering/renderers/BasicHorizontal.js'\r\nimport RendererVirtualDomHorizontal from './rendering/renderers/VirtualDomHorizontal.js'\r\n\r\nimport defaultColumnOptions from './column/defaults/options.js'\r\n\r\nexport default class ColumnManager extends CoreFeature {\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.blockHozScrollEvent = false\r\n    this.headersElement = null\r\n    this.contentsElement = null\r\n    this.rowHeader = null\r\n    this.element = null // containing element\r\n    this.columns = [] // column definition object\r\n    this.columnsByIndex = [] // columns by index\r\n    this.columnsByField = {} // columns by field\r\n    this.scrollLeft = 0\r\n    this.optionsList = new OptionsList(this.table, 'column definition', defaultColumnOptions)\r\n\r\n    this.redrawBlock = false // prevent redraws to allow multiple data manipulations before continuing\r\n    this.redrawBlockUpdate = null // store latest redraw update only status\r\n\r\n    this.renderer = null\r\n  }\r\n\r\n  /// /////////// Setup Functions /////////////////\r\n\r\n  initialize() {\r\n    this.initializeRenderer()\r\n\r\n    this.headersElement = this.createHeadersElement()\r\n    this.contentsElement = this.createHeaderContentsElement()\r\n    this.element = this.createHeaderElement()\r\n\r\n    this.contentsElement.insertBefore(this.headersElement, this.contentsElement.firstChild)\r\n    this.element.insertBefore(this.contentsElement, this.element.firstChild)\r\n\r\n    this.initializeScrollWheelWatcher()\r\n\r\n    this.subscribe('scroll-horizontal', this.scrollHorizontal.bind(this))\r\n    this.subscribe('scrollbar-vertical', this.padVerticalScrollbar.bind(this))\r\n  }\r\n\r\n  padVerticalScrollbar(width) {\r\n    if (this.table.rtl) {\r\n      this.headersElement.style.marginLeft = width + 'px'\r\n    } else {\r\n      this.headersElement.style.marginRight = width + 'px'\r\n    }\r\n  }\r\n\r\n  initializeRenderer() {\r\n    let renderClass\r\n\r\n    const renderers = {\r\n      virtual: RendererVirtualDomHorizontal,\r\n      basic: RendererBasicHorizontal\r\n    }\r\n\r\n    if (typeof this.table.options.renderHorizontal === 'string') {\r\n      renderClass = renderers[this.table.options.renderHorizontal]\r\n    } else {\r\n      renderClass = this.table.options.renderHorizontal\r\n    }\r\n\r\n    if (renderClass) {\r\n      this.renderer = new renderClass(this.table, this.element, this.tableElement)\r\n      this.renderer.initialize()\r\n    } else {\r\n      console.error('Unable to find matching renderer:', this.table.options.renderHorizontal)\r\n    }\r\n  }\r\n\r\n  createHeadersElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-headers')\r\n    el.setAttribute('role', 'row')\r\n\r\n    return el\r\n  }\r\n\r\n  createHeaderContentsElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-header-contents')\r\n    el.setAttribute('role', 'rowgroup')\r\n\r\n    return el\r\n  }\r\n\r\n  createHeaderElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-header')\r\n    el.setAttribute('role', 'rowgroup')\r\n\r\n    if (!this.table.options.headerVisible) {\r\n      el.classList.add('tabulator-header-hidden')\r\n    }\r\n\r\n    return el\r\n  }\r\n\r\n  // return containing element\r\n  getElement() {\r\n    return this.element\r\n  }\r\n\r\n  // return containing contents element\r\n  getContentsElement() {\r\n    return this.contentsElement\r\n  }\r\n\r\n  // return header containing element\r\n  getHeadersElement() {\r\n    return this.headersElement\r\n  }\r\n\r\n  // scroll horizontally to match table body\r\n  scrollHorizontal(left) {\r\n    this.contentsElement.scrollLeft = left\r\n\r\n    this.scrollLeft = left\r\n\r\n    this.renderer.scrollColumns(left)\r\n  }\r\n\r\n  initializeScrollWheelWatcher() {\r\n    this.contentsElement.addEventListener('wheel', (e) => {\r\n      let left\r\n\r\n      if (e.deltaX) {\r\n        left = this.contentsElement.scrollLeft + e.deltaX\r\n\r\n        this.table.rowManager.scrollHorizontal(left)\r\n        this.table.columnManager.scrollHorizontal(left)\r\n      }\r\n    })\r\n  }\r\n\r\n  /// ////////// Column Setup Functions /////////////\r\n  generateColumnsFromRowData(data) {\r\n    const cols = []\r\n    const collProgress = {}\r\n    const rowSample = this.table.options.autoColumns === 'full' ? data : [data[0]]\r\n    const definitions = this.table.options.autoColumnsDefinitions\r\n\r\n    if (data && data.length) {\r\n      rowSample.forEach((row) => {\r\n        Object.keys(row).forEach((key, index) => {\r\n          const value = row[key]\r\n          let col\r\n\r\n          if (!collProgress[key]) {\r\n            col = {\r\n              field: key,\r\n              title: key,\r\n              sorter: this.calculateSorterFromValue(value)\r\n            }\r\n\r\n            cols.splice(index, 0, col)\r\n            collProgress[key] = typeof value === 'undefined' ? col : true\r\n          } else if (collProgress[key] !== true) {\r\n            if (typeof value !== 'undefined') {\r\n              collProgress[key].sorter = this.calculateSorterFromValue(value)\r\n              collProgress[key] = true\r\n            }\r\n          }\r\n        })\r\n      })\r\n\r\n      if (definitions) {\r\n        switch (typeof definitions) {\r\n          case 'function':\r\n            this.table.options.columns = definitions.call(this.table, cols)\r\n            break\r\n\r\n          case 'object':\r\n            if (Array.isArray(definitions)) {\r\n              cols.forEach((col) => {\r\n                const match = definitions.find((def) => {\r\n                  return def.field === col.field\r\n                })\r\n\r\n                if (match) {\r\n                  Object.assign(col, match)\r\n                }\r\n              })\r\n            } else {\r\n              cols.forEach((col) => {\r\n                if (definitions[col.field]) {\r\n                  Object.assign(col, definitions[col.field])\r\n                }\r\n              })\r\n            }\r\n\r\n            this.table.options.columns = cols\r\n            break\r\n        }\r\n      } else {\r\n        this.table.options.columns = cols\r\n      }\r\n\r\n      this.setColumns(this.table.options.columns)\r\n    }\r\n  }\r\n\r\n  calculateSorterFromValue(value) {\r\n    let sorter\r\n\r\n    switch (typeof value) {\r\n      case 'undefined':\r\n        sorter = 'string'\r\n        break\r\n\r\n      case 'boolean':\r\n        sorter = 'boolean'\r\n        break\r\n\r\n      case 'number':\r\n        sorter = 'number'\r\n        break\r\n\r\n      case 'object':\r\n        if (Array.isArray(value)) {\r\n          sorter = 'array'\r\n        } else {\r\n          sorter = 'string'\r\n        }\r\n        break\r\n\r\n      default:\r\n        if (!isNaN(value) && value !== '') {\r\n          sorter = 'number'\r\n        } else {\r\n          if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\r\n            sorter = 'alphanum'\r\n          } else {\r\n            sorter = 'string'\r\n          }\r\n        }\r\n        break\r\n    }\r\n\r\n    return sorter\r\n  }\r\n\r\n  setColumns(cols, row) {\r\n    while (this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild)\r\n\r\n    this.columns = []\r\n    this.columnsByIndex = []\r\n    this.columnsByField = {}\r\n\r\n    this.dispatch('columns-loading')\r\n    this.dispatchExternal('columnsLoading')\r\n\r\n    if (this.table.options.rowHeader) {\r\n      this.rowHeader = new Column(this.table.options.rowHeader === true ? {} : this.table.options.rowHeader, this, true)\r\n      this.columns.push(this.rowHeader)\r\n      this.headersElement.appendChild(this.rowHeader.getElement())\r\n      this.rowHeader.columnRendered()\r\n    }\r\n\r\n    cols.forEach((def, i) => {\r\n      this._addColumn(def)\r\n    })\r\n\r\n    this._reIndexColumns()\r\n\r\n    this.dispatch('columns-loaded')\r\n\r\n    if (this.subscribedExternal('columnsLoaded')) {\r\n      this.dispatchExternal('columnsLoaded', this.getComponents())\r\n    }\r\n\r\n    this.rerenderColumns(false, true)\r\n\r\n    this.redraw(true)\r\n  }\r\n\r\n  _addColumn(definition, before, nextToColumn) {\r\n    const column = new Column(definition, this)\r\n    const colEl = column.getElement()\r\n    let index = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn\r\n\r\n    // prevent adding of rows in front of row header\r\n    if (before && this.rowHeader && (!nextToColumn || nextToColumn === this.rowHeader)) {\r\n      before = false\r\n      nextToColumn = this.rowHeader\r\n      index = 0\r\n    }\r\n\r\n    if (nextToColumn && index > -1) {\r\n      const topColumn = nextToColumn.getTopColumn()\r\n      const parentIndex = this.columns.indexOf(topColumn)\r\n      const nextEl = topColumn.getElement()\r\n\r\n      if (before) {\r\n        this.columns.splice(parentIndex, 0, column)\r\n        nextEl.parentNode.insertBefore(colEl, nextEl)\r\n      } else {\r\n        this.columns.splice(parentIndex + 1, 0, column)\r\n        nextEl.parentNode.insertBefore(colEl, nextEl.nextSibling)\r\n      }\r\n    } else {\r\n      if (before) {\r\n        this.columns.unshift(column)\r\n        this.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild)\r\n      } else {\r\n        this.columns.push(column)\r\n        this.headersElement.appendChild(column.getElement())\r\n      }\r\n    }\r\n\r\n    column.columnRendered()\r\n\r\n    return column\r\n  }\r\n\r\n  registerColumnField(col) {\r\n    if (col.definition.field) {\r\n      this.columnsByField[col.definition.field] = col\r\n    }\r\n  }\r\n\r\n  registerColumnPosition(col) {\r\n    this.columnsByIndex.push(col)\r\n  }\r\n\r\n  _reIndexColumns() {\r\n    this.columnsByIndex = []\r\n\r\n    this.columns.forEach(function (column) {\r\n      column.reRegisterPosition()\r\n    })\r\n  }\r\n\r\n  // ensure column headers take up the correct amount of space in column groups\r\n  verticalAlignHeaders() {\r\n    let minHeight = 0\r\n\r\n    if (!this.redrawBlock) {\r\n      this.headersElement.style.height = ''\r\n\r\n      this.columns.forEach((column) => {\r\n        column.clearVerticalAlign()\r\n      })\r\n\r\n      this.columns.forEach((column) => {\r\n        const height = column.getHeight()\r\n\r\n        if (height > minHeight) {\r\n          minHeight = height\r\n        }\r\n      })\r\n\r\n      this.headersElement.style.height = minHeight + 'px'\r\n\r\n      this.columns.forEach((column) => {\r\n        column.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight)\r\n      })\r\n\r\n      this.table.rowManager.adjustTableSize()\r\n    }\r\n  }\r\n\r\n  /// ///////////// Column Details /////////////////\r\n  findColumn(subject) {\r\n    let columns\r\n\r\n    if (typeof subject === 'object') {\r\n      if (subject instanceof Column) {\r\n        // subject is column element\r\n        return subject\r\n      } else if (subject instanceof ColumnComponent) {\r\n        // subject is public column component\r\n        return subject._getSelf() || false\r\n      } else if (typeof HTMLElement !== 'undefined' && subject instanceof HTMLElement) {\r\n        columns = []\r\n\r\n        this.columns.forEach((column) => {\r\n          columns.push(column)\r\n          columns = columns.concat(column.getColumns(true))\r\n        })\r\n\r\n        // subject is a HTML element of the column header\r\n        const match = columns.find((column) => {\r\n          return column.element === subject\r\n        })\r\n\r\n        return match || false\r\n      }\r\n    } else {\r\n      // subject should be treated as the field name of the column\r\n      return this.columnsByField[subject] || false\r\n    }\r\n\r\n    // catch all for any other type of input\r\n    return false\r\n  }\r\n\r\n  getColumnByField(field) {\r\n    return this.columnsByField[field]\r\n  }\r\n\r\n  getColumnsByFieldRoot(root) {\r\n    const matches = []\r\n\r\n    Object.keys(this.columnsByField).forEach((field) => {\r\n      const fieldRoot = this.table.options.nestedFieldSeparator\r\n        ? field.split(this.table.options.nestedFieldSeparator)[0]\r\n        : field\r\n      if (fieldRoot === root) {\r\n        matches.push(this.columnsByField[field])\r\n      }\r\n    })\r\n\r\n    return matches\r\n  }\r\n\r\n  getColumnByIndex(index) {\r\n    return this.columnsByIndex[index]\r\n  }\r\n\r\n  getFirstVisibleColumn() {\r\n    const index = this.columnsByIndex.findIndex((col) => {\r\n      return col.visible\r\n    })\r\n\r\n    return index > -1 ? this.columnsByIndex[index] : false\r\n  }\r\n\r\n  getVisibleColumnsByIndex() {\r\n    return this.columnsByIndex.filter((col) => col.visible)\r\n  }\r\n\r\n  getColumns() {\r\n    return this.columns\r\n  }\r\n\r\n  findColumnIndex(column) {\r\n    return this.columnsByIndex.findIndex((col) => {\r\n      return column === col\r\n    })\r\n  }\r\n\r\n  // return all columns that are not groups\r\n  getRealColumns() {\r\n    return this.columnsByIndex\r\n  }\r\n\r\n  // traverse across columns and call action\r\n  traverse(callback) {\r\n    this.columnsByIndex.forEach((column, i) => {\r\n      callback(column, i)\r\n    })\r\n  }\r\n\r\n  // get definitions of actual columns\r\n  getDefinitions(active) {\r\n    const output = []\r\n\r\n    this.columnsByIndex.forEach((column) => {\r\n      if (!active || (active && column.visible)) {\r\n        output.push(column.getDefinition())\r\n      }\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  // get full nested definition tree\r\n  getDefinitionTree() {\r\n    const output = []\r\n\r\n    this.columns.forEach((column) => {\r\n      output.push(column.getDefinition(true))\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  getComponents(structured) {\r\n    const output = []\r\n    const columns = structured ? this.columns : this.columnsByIndex\r\n\r\n    columns.forEach((column) => {\r\n      output.push(column.getComponent())\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  getWidth() {\r\n    let width = 0\r\n\r\n    this.columnsByIndex.forEach((column) => {\r\n      if (column.visible) {\r\n        width += column.getWidth()\r\n      }\r\n    })\r\n\r\n    return width\r\n  }\r\n\r\n  moveColumn(from, to, after) {\r\n    to.element.parentNode.insertBefore(from.element, to.element)\r\n\r\n    if (after) {\r\n      to.element.parentNode.insertBefore(to.element, from.element)\r\n    }\r\n\r\n    this.moveColumnActual(from, to, after)\r\n\r\n    this.verticalAlignHeaders()\r\n\r\n    this.table.rowManager.reinitialize()\r\n  }\r\n\r\n  moveColumnActual(from, to, after) {\r\n    if (from.parent.isGroup) {\r\n      this._moveColumnInArray(from.parent.columns, from, to, after)\r\n    } else {\r\n      this._moveColumnInArray(this.columns, from, to, after)\r\n    }\r\n\r\n    this._moveColumnInArray(this.columnsByIndex, from, to, after, true)\r\n\r\n    this.rerenderColumns(true)\r\n\r\n    this.dispatch('column-moved', from, to, after)\r\n\r\n    if (this.subscribedExternal('columnMoved')) {\r\n      this.dispatchExternal('columnMoved', from.getComponent(), this.table.columnManager.getComponents())\r\n    }\r\n  }\r\n\r\n  _moveColumnInArray(columns, from, to, after, updateRows) {\r\n    const fromIndex = columns.indexOf(from)\r\n    let toIndex\r\n    let rows = []\r\n\r\n    if (fromIndex > -1) {\r\n      columns.splice(fromIndex, 1)\r\n\r\n      toIndex = columns.indexOf(to)\r\n\r\n      if (toIndex > -1) {\r\n        if (after) {\r\n          toIndex = toIndex + 1\r\n        }\r\n      } else {\r\n        toIndex = fromIndex\r\n      }\r\n\r\n      columns.splice(toIndex, 0, from)\r\n\r\n      if (updateRows) {\r\n        rows = this.chain('column-moving-rows', [from, to, after], null, []) || []\r\n\r\n        rows = rows.concat(this.table.rowManager.rows)\r\n\r\n        rows.forEach(function (row) {\r\n          if (row.cells.length) {\r\n            const cell = row.cells.splice(fromIndex, 1)[0]\r\n            row.cells.splice(toIndex, 0, cell)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  scrollToColumn(column, position, ifVisible) {\r\n    let left = 0\r\n    const offset = column.getLeftOffset()\r\n    let adjust = 0\r\n    const colEl = column.getElement()\r\n\r\n    return new Promise((resolve, reject) => {\r\n      if (typeof position === 'undefined') {\r\n        position = this.table.options.scrollToColumnPosition\r\n      }\r\n\r\n      if (typeof ifVisible === 'undefined') {\r\n        ifVisible = this.table.options.scrollToColumnIfVisible\r\n      }\r\n\r\n      if (column.visible) {\r\n        // align to correct position\r\n        switch (position) {\r\n          case 'middle':\r\n          case 'center':\r\n            adjust = -this.element.clientWidth / 2\r\n            break\r\n\r\n          case 'right':\r\n            adjust = colEl.clientWidth - this.headersElement.clientWidth\r\n            break\r\n        }\r\n\r\n        // check column visibility\r\n        if (!ifVisible) {\r\n          if (offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth) {\r\n            return false\r\n          }\r\n        }\r\n\r\n        // calculate scroll position\r\n        left = offset + adjust\r\n\r\n        left = Math.max(\r\n          Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),\r\n          0\r\n        )\r\n\r\n        this.table.rowManager.scrollHorizontal(left)\r\n        this.scrollHorizontal(left)\r\n\r\n        resolve()\r\n      } else {\r\n        console.warn('Scroll Error - Column not visible')\r\n        reject('Scroll Error - Column not visible')\r\n      }\r\n    })\r\n  }\r\n\r\n  /// ///////////// Cell Management /////////////////\r\n  generateCells(row) {\r\n    const cells = []\r\n\r\n    this.columnsByIndex.forEach((column) => {\r\n      cells.push(column.generateCell(row))\r\n    })\r\n\r\n    return cells\r\n  }\r\n\r\n  /// ///////////// Column Management /////////////////\r\n  getFlexBaseWidth() {\r\n    let totalWidth = this.table.element.clientWidth // table element width\r\n    let fixedWidth = 0\r\n\r\n    // adjust for vertical scrollbar if present\r\n    if (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\r\n      totalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth\r\n    }\r\n\r\n    this.columnsByIndex.forEach(function (column) {\r\n      let width, minWidth, colWidth\r\n\r\n      if (column.visible) {\r\n        width = column.definition.width || 0\r\n\r\n        minWidth = parseInt(column.minWidth)\r\n\r\n        if (typeof width === 'string') {\r\n          if (width.indexOf('%') > -1) {\r\n            colWidth = (totalWidth / 100) * parseInt(width)\r\n          } else {\r\n            colWidth = parseInt(width)\r\n          }\r\n        } else {\r\n          colWidth = width\r\n        }\r\n\r\n        fixedWidth += colWidth > minWidth ? colWidth : minWidth\r\n      }\r\n    })\r\n\r\n    return fixedWidth\r\n  }\r\n\r\n  addColumn(definition, before, nextToColumn) {\r\n    return new Promise((resolve, reject) => {\r\n      const column = this._addColumn(definition, before, nextToColumn)\r\n\r\n      this._reIndexColumns()\r\n\r\n      this.dispatch('column-add', definition, before, nextToColumn)\r\n\r\n      if (this.layoutMode() != 'fitColumns') {\r\n        column.reinitializeWidth()\r\n      }\r\n\r\n      this.redraw(true)\r\n\r\n      this.table.rowManager.reinitialize()\r\n\r\n      this.rerenderColumns()\r\n\r\n      resolve(column)\r\n    })\r\n  }\r\n\r\n  // remove column from system\r\n  deregisterColumn(column) {\r\n    const field = column.getField()\r\n    let index\r\n\r\n    // remove from field list\r\n    if (field) {\r\n      delete this.columnsByField[field]\r\n    }\r\n\r\n    // remove from index list\r\n    index = this.columnsByIndex.indexOf(column)\r\n\r\n    if (index > -1) {\r\n      this.columnsByIndex.splice(index, 1)\r\n    }\r\n\r\n    // remove from column list\r\n    index = this.columns.indexOf(column)\r\n\r\n    if (index > -1) {\r\n      this.columns.splice(index, 1)\r\n    }\r\n\r\n    this.verticalAlignHeaders()\r\n\r\n    this.redraw()\r\n  }\r\n\r\n  rerenderColumns(update, silent) {\r\n    if (!this.redrawBlock) {\r\n      this.renderer.rerenderColumns(update, silent)\r\n    } else {\r\n      if (update === false || (update === true && this.redrawBlockUpdate === null)) {\r\n        this.redrawBlockUpdate = update\r\n      }\r\n    }\r\n  }\r\n\r\n  blockRedraw() {\r\n    this.redrawBlock = true\r\n    this.redrawBlockUpdate = null\r\n  }\r\n\r\n  restoreRedraw() {\r\n    this.redrawBlock = false\r\n    this.verticalAlignHeaders()\r\n    this.renderer.rerenderColumns(this.redrawBlockUpdate)\r\n  }\r\n\r\n  // redraw columns\r\n  redraw(force) {\r\n    if (Helpers.elVisible(this.element)) {\r\n      this.verticalAlignHeaders()\r\n    }\r\n\r\n    if (force) {\r\n      this.table.rowManager.resetScroll()\r\n      this.table.rowManager.reinitialize()\r\n    }\r\n\r\n    if (!this.confirm('table-redrawing', force)) {\r\n      this.layoutRefresh(force)\r\n    }\r\n\r\n    this.dispatch('table-redraw', force)\r\n\r\n    this.table.footerManager.redraw()\r\n  }\r\n}\r\n","// public row object\r\nexport default class RowComponent {\r\n  constructor(row) {\r\n    this._row = row\r\n\r\n    return new Proxy(this, {\r\n      get: function (target, name, receiver) {\r\n        if (typeof target[name] !== 'undefined') {\r\n          return target[name]\r\n        } else {\r\n          return target._row.table.componentFunctionBinder.handle('row', target._row, name)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  getData(transform) {\r\n    return this._row.getData(transform)\r\n  }\r\n\r\n  getElement() {\r\n    return this._row.getElement()\r\n  }\r\n\r\n  getCells() {\r\n    const cells = []\r\n\r\n    this._row.getCells().forEach(function (cell) {\r\n      cells.push(cell.getComponent())\r\n    })\r\n\r\n    return cells\r\n  }\r\n\r\n  getCell(column) {\r\n    const cell = this._row.getCell(column)\r\n    return cell ? cell.getComponent() : false\r\n  }\r\n\r\n  getIndex() {\r\n    return this._row.getData('data')[this._row.table.options.index]\r\n  }\r\n\r\n  getPosition() {\r\n    return this._row.getPosition()\r\n  }\r\n\r\n  watchPosition(callback) {\r\n    return this._row.watchPosition(callback)\r\n  }\r\n\r\n  delete() {\r\n    return this._row.delete()\r\n  }\r\n\r\n  scrollTo(position, ifVisible) {\r\n    return this._row.table.rowManager.scrollToRow(this._row, position, ifVisible)\r\n  }\r\n\r\n  move(to, after) {\r\n    this._row.moveToRow(to, after)\r\n  }\r\n\r\n  update(data) {\r\n    return this._row.updateData(data)\r\n  }\r\n\r\n  normalizeHeight() {\r\n    this._row.normalizeHeight(true)\r\n  }\r\n\r\n  _getSelf() {\r\n    return this._row\r\n  }\r\n\r\n  reformat() {\r\n    return this._row.reinitialize()\r\n  }\r\n\r\n  getTable() {\r\n    return this._row.table\r\n  }\r\n\r\n  getNextRow() {\r\n    const row = this._row.nextRow()\r\n    return row ? row.getComponent() : row\r\n  }\r\n\r\n  getPrevRow() {\r\n    const row = this._row.prevRow()\r\n    return row ? row.getComponent() : row\r\n  }\r\n}\r\n","import CoreFeature from '../CoreFeature.js'\r\nimport RowComponent from './RowComponent.js'\r\nimport Helpers from '../tools/Helpers.js'\r\n\r\nexport default class Row extends CoreFeature {\r\n  constructor(data, parent, type = 'row') {\r\n    super(parent.table)\r\n\r\n    this.parent = parent\r\n    this.data = {}\r\n    this.type = type // type of element\r\n    this.element = false\r\n    this.modules = {} // hold module variables;\r\n    this.cells = []\r\n    this.height = 0 // hold element height\r\n    this.heightStyled = '' // hold element height pre-styled to improve render efficiency\r\n    this.manualHeight = false // user has manually set row height\r\n    this.outerHeight = 0 // hold elements outer height\r\n    this.initialized = false // element has been rendered\r\n    this.heightInitialized = false // element has resized cells to fit\r\n    this.position = 0 // store position of element in row list\r\n    this.positionWatchers = []\r\n\r\n    this.component = null\r\n\r\n    this.created = false\r\n\r\n    this.setData(data)\r\n  }\r\n\r\n  create() {\r\n    if (!this.created) {\r\n      this.created = true\r\n      this.generateElement()\r\n    }\r\n  }\r\n\r\n  createElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-row')\r\n    el.setAttribute('role', 'row')\r\n\r\n    this.element = el\r\n  }\r\n\r\n  getElement() {\r\n    this.create()\r\n    return this.element\r\n  }\r\n\r\n  detachElement() {\r\n    if (this.element && this.element.parentNode) {\r\n      this.element.parentNode.removeChild(this.element)\r\n    }\r\n  }\r\n\r\n  generateElement() {\r\n    this.createElement()\r\n    this.dispatch('row-init', this)\r\n  }\r\n\r\n  generateCells() {\r\n    this.cells = this.table.columnManager.generateCells(this)\r\n  }\r\n\r\n  // functions to setup on first render\r\n  initialize(force, inFragment) {\r\n    this.create()\r\n\r\n    if (!this.initialized || force) {\r\n      this.deleteCells()\r\n\r\n      while (this.element.firstChild) this.element.removeChild(this.element.firstChild)\r\n\r\n      this.dispatch('row-layout-before', this)\r\n\r\n      this.generateCells()\r\n\r\n      this.initialized = true\r\n\r\n      this.table.columnManager.renderer.renderRowCells(this, inFragment)\r\n\r\n      if (force) {\r\n        this.normalizeHeight()\r\n      }\r\n\r\n      this.dispatch('row-layout', this)\r\n\r\n      if (this.table.options.rowFormatter) {\r\n        this.table.options.rowFormatter(this.getComponent())\r\n      }\r\n\r\n      this.dispatch('row-layout-after', this)\r\n    } else {\r\n      this.table.columnManager.renderer.rerenderRowCells(this, inFragment)\r\n    }\r\n  }\r\n\r\n  rendered() {\r\n    this.cells.forEach((cell) => {\r\n      cell.cellRendered()\r\n    })\r\n  }\r\n\r\n  reinitializeHeight() {\r\n    this.heightInitialized = false\r\n\r\n    if (this.element && this.element.offsetParent !== null) {\r\n      this.normalizeHeight(true)\r\n    }\r\n  }\r\n\r\n  deinitialize() {\r\n    this.initialized = false\r\n  }\r\n\r\n  deinitializeHeight() {\r\n    this.heightInitialized = false\r\n  }\r\n\r\n  reinitialize(children) {\r\n    this.initialized = false\r\n    this.heightInitialized = false\r\n\r\n    if (!this.manualHeight) {\r\n      this.height = 0\r\n      this.heightStyled = ''\r\n    }\r\n\r\n    if (this.element && this.element.offsetParent !== null) {\r\n      this.initialize(true)\r\n    }\r\n\r\n    this.dispatch('row-relayout', this)\r\n  }\r\n\r\n  // get heights when doing bulk row style calcs in virtual DOM\r\n  calcHeight(force) {\r\n    let maxHeight = 0\r\n    let minHeight = 0\r\n\r\n    if (this.table.options.rowHeight) {\r\n      this.height = this.table.options.rowHeight\r\n    } else {\r\n      minHeight = this.calcMinHeight()\r\n      maxHeight = this.calcMaxHeight()\r\n\r\n      if (force) {\r\n        this.height = Math.max(maxHeight, minHeight)\r\n      } else {\r\n        this.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight)\r\n      }\r\n    }\r\n\r\n    this.heightStyled = this.height ? this.height + 'px' : ''\r\n    this.outerHeight = this.element.offsetHeight\r\n  }\r\n\r\n  calcMinHeight() {\r\n    return this.table.options.resizableRows ? this.element.clientHeight : 0\r\n  }\r\n\r\n  calcMaxHeight() {\r\n    let maxHeight = 0\r\n\r\n    this.cells.forEach(function (cell) {\r\n      const height = cell.getHeight()\r\n\r\n      if (height > maxHeight) {\r\n        maxHeight = height\r\n      }\r\n    })\r\n\r\n    return maxHeight\r\n  }\r\n\r\n  // set of cells\r\n  setCellHeight() {\r\n    this.cells.forEach(function (cell) {\r\n      cell.setHeight()\r\n    })\r\n\r\n    this.heightInitialized = true\r\n  }\r\n\r\n  clearCellHeight() {\r\n    this.cells.forEach(function (cell) {\r\n      cell.clearHeight()\r\n    })\r\n  }\r\n\r\n  // normalize the height of elements in the row\r\n  normalizeHeight(force) {\r\n    if (force && !this.table.options.rowHeight) {\r\n      this.clearCellHeight()\r\n    }\r\n\r\n    this.calcHeight(force)\r\n\r\n    this.setCellHeight()\r\n  }\r\n\r\n  // set height of rows\r\n  setHeight(height, force) {\r\n    if (this.height != height || force) {\r\n      this.manualHeight = true\r\n\r\n      this.height = height\r\n      this.heightStyled = height ? height + 'px' : ''\r\n\r\n      this.setCellHeight()\r\n\r\n      // this.outerHeight = this.element.outerHeight();\r\n      this.outerHeight = this.element.offsetHeight\r\n\r\n      if (this.subscribedExternal('rowHeight')) {\r\n        this.dispatchExternal('rowHeight', this.getComponent())\r\n      }\r\n    }\r\n  }\r\n\r\n  // return rows outer height\r\n  getHeight() {\r\n    return this.outerHeight\r\n  }\r\n\r\n  // return rows outer Width\r\n  getWidth() {\r\n    return this.element.offsetWidth\r\n  }\r\n\r\n  /// ///////////// Cell Management /////////////////\r\n  deleteCell(cell) {\r\n    const index = this.cells.indexOf(cell)\r\n\r\n    if (index > -1) {\r\n      this.cells.splice(index, 1)\r\n    }\r\n  }\r\n\r\n  /// ///////////// Data Management /////////////////\r\n  setData(data) {\r\n    this.data = this.chain('row-data-init-before', [this, data], undefined, data)\r\n\r\n    this.dispatch('row-data-init-after', this)\r\n  }\r\n\r\n  // update the rows data\r\n  updateData(updatedData) {\r\n    const visible = this.element && Helpers.elVisible(this.element)\r\n    let tempData = {}\r\n    let newRowData\r\n\r\n    return new Promise((resolve, reject) => {\r\n      if (typeof updatedData === 'string') {\r\n        updatedData = JSON.parse(updatedData)\r\n      }\r\n\r\n      this.dispatch('row-data-save-before', this)\r\n\r\n      if (this.subscribed('row-data-changing')) {\r\n        tempData = Object.assign(tempData, this.data)\r\n        tempData = Object.assign(tempData, updatedData)\r\n      }\r\n\r\n      newRowData = this.chain('row-data-changing', [this, tempData, updatedData], null, updatedData)\r\n\r\n      // set data\r\n      for (const attrname in newRowData) {\r\n        this.data[attrname] = newRowData[attrname]\r\n      }\r\n\r\n      this.dispatch('row-data-save-after', this)\r\n\r\n      // update affected cells only\r\n      for (const attrname in updatedData) {\r\n        const columns = this.table.columnManager.getColumnsByFieldRoot(attrname)\r\n\r\n        columns.forEach((column) => {\r\n          const cell = this.getCell(column.getField())\r\n\r\n          if (cell) {\r\n            const value = column.getFieldValue(newRowData)\r\n            if (cell.getValue() !== value) {\r\n              cell.setValueProcessData(value)\r\n\r\n              if (visible) {\r\n                cell.cellRendered()\r\n              }\r\n            }\r\n          }\r\n        })\r\n      }\r\n\r\n      // Partial reinitialization if visible\r\n      if (visible) {\r\n        this.normalizeHeight(true)\r\n\r\n        if (this.table.options.rowFormatter) {\r\n          this.table.options.rowFormatter(this.getComponent())\r\n        }\r\n      } else {\r\n        this.initialized = false\r\n        this.height = 0\r\n        this.heightStyled = ''\r\n      }\r\n\r\n      this.dispatch('row-data-changed', this, visible, updatedData)\r\n\r\n      // this.reinitialize();\r\n\r\n      this.dispatchExternal('rowUpdated', this.getComponent())\r\n\r\n      if (this.subscribedExternal('dataChanged')) {\r\n        this.dispatchExternal('dataChanged', this.table.rowManager.getData())\r\n      }\r\n\r\n      resolve()\r\n    })\r\n  }\r\n\r\n  getData(transform) {\r\n    if (transform) {\r\n      return this.chain('row-data-retrieve', [this, transform], null, this.data)\r\n    }\r\n\r\n    return this.data\r\n  }\r\n\r\n  getCell(column) {\r\n    let match = false\r\n\r\n    column = this.table.columnManager.findColumn(column)\r\n\r\n    if (!this.initialized && this.cells.length === 0) {\r\n      this.generateCells()\r\n    }\r\n\r\n    match = this.cells.find(function (cell) {\r\n      return cell.column === column\r\n    })\r\n\r\n    return match\r\n  }\r\n\r\n  getCellIndex(findCell) {\r\n    return this.cells.findIndex(function (cell) {\r\n      return cell === findCell\r\n    })\r\n  }\r\n\r\n  findCell(subject) {\r\n    return this.cells.find((cell) => {\r\n      return cell.element === subject\r\n    })\r\n  }\r\n\r\n  getCells() {\r\n    if (!this.initialized && this.cells.length === 0) {\r\n      this.generateCells()\r\n    }\r\n\r\n    return this.cells\r\n  }\r\n\r\n  nextRow() {\r\n    const row = this.table.rowManager.nextDisplayRow(this, true)\r\n    return row || false\r\n  }\r\n\r\n  prevRow() {\r\n    const row = this.table.rowManager.prevDisplayRow(this, true)\r\n    return row || false\r\n  }\r\n\r\n  moveToRow(to, before) {\r\n    const toRow = this.table.rowManager.findRow(to)\r\n\r\n    if (toRow) {\r\n      this.table.rowManager.moveRowActual(this, toRow, !before)\r\n      this.table.rowManager.refreshActiveData('display', false, true)\r\n    } else {\r\n      console.warn('Move Error - No matching row found:', to)\r\n    }\r\n  }\r\n\r\n  /// ////////////////// Actions  /////////////////////\r\n  delete() {\r\n    this.dispatch('row-delete', this)\r\n\r\n    this.deleteActual()\r\n\r\n    return Promise.resolve()\r\n  }\r\n\r\n  deleteActual(blockRedraw) {\r\n    this.detachModules()\r\n\r\n    this.table.rowManager.deleteRow(this, blockRedraw)\r\n\r\n    this.deleteCells()\r\n\r\n    this.initialized = false\r\n    this.heightInitialized = false\r\n    this.element = false\r\n\r\n    this.dispatch('row-deleted', this)\r\n  }\r\n\r\n  detachModules() {\r\n    this.dispatch('row-deleting', this)\r\n  }\r\n\r\n  deleteCells() {\r\n    const cellCount = this.cells.length\r\n\r\n    for (let i = 0; i < cellCount; i++) {\r\n      this.cells[0].delete()\r\n    }\r\n  }\r\n\r\n  wipe() {\r\n    this.detachModules()\r\n    this.deleteCells()\r\n\r\n    if (this.element) {\r\n      while (this.element.firstChild) this.element.removeChild(this.element.firstChild)\r\n\r\n      if (this.element.parentNode) {\r\n        this.element.parentNode.removeChild(this.element)\r\n      }\r\n    }\r\n\r\n    this.element = false\r\n    this.modules = {}\r\n  }\r\n\r\n  isDisplayed() {\r\n    return this.table.rowManager.getDisplayRows().includes(this)\r\n  }\r\n\r\n  getPosition() {\r\n    return this.isDisplayed() ? this.position : false\r\n  }\r\n\r\n  setPosition(position) {\r\n    if (position != this.position) {\r\n      this.position = position\r\n\r\n      this.positionWatchers.forEach((callback) => {\r\n        callback(this.position)\r\n      })\r\n    }\r\n  }\r\n\r\n  watchPosition(callback) {\r\n    this.positionWatchers.push(callback)\r\n\r\n    callback(this.position)\r\n  }\r\n\r\n  getGroup() {\r\n    return this.modules.group || false\r\n  }\r\n\r\n  /// ///////////// Object Generation /////////////////\r\n  getComponent() {\r\n    if (!this.component) {\r\n      this.component = new RowComponent(this)\r\n    }\r\n\r\n    return this.component\r\n  }\r\n}\r\n","import Renderer from '../Renderer.js'\r\nimport Helpers from '../../tools/Helpers.js'\r\n\r\nexport default class BasicVertical extends Renderer {\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.verticalFillMode = 'fill'\r\n\r\n    this.scrollTop = 0\r\n    this.scrollLeft = 0\r\n\r\n    this.scrollTop = 0\r\n    this.scrollLeft = 0\r\n  }\r\n\r\n  clearRows() {\r\n    const element = this.tableElement\r\n\r\n    // element.children.detach();\r\n    while (element.firstChild) element.removeChild(element.firstChild)\r\n\r\n    element.scrollTop = 0\r\n    element.scrollLeft = 0\r\n\r\n    element.style.minWidth = ''\r\n    element.style.minHeight = ''\r\n    element.style.display = ''\r\n    element.style.visibility = ''\r\n  }\r\n\r\n  renderRows() {\r\n    const element = this.tableElement\r\n    let onlyGroupHeaders = true\r\n    const tableFrag = document.createDocumentFragment()\r\n    const rows = this.rows()\r\n\r\n    rows.forEach((row, index) => {\r\n      this.styleRow(row, index)\r\n      row.initialize(false, true)\r\n\r\n      if (row.type !== 'group') {\r\n        onlyGroupHeaders = false\r\n      }\r\n\r\n      tableFrag.appendChild(row.getElement())\r\n    })\r\n\r\n    element.appendChild(tableFrag)\r\n\r\n    rows.forEach((row) => {\r\n      row.rendered()\r\n\r\n      if (!row.heightInitialized) {\r\n        row.calcHeight(true)\r\n      }\r\n    })\r\n\r\n    rows.forEach((row) => {\r\n      if (!row.heightInitialized) {\r\n        row.setCellHeight()\r\n      }\r\n    })\r\n\r\n    if (onlyGroupHeaders) {\r\n      element.style.minWidth = this.table.columnManager.getWidth() + 'px'\r\n    } else {\r\n      element.style.minWidth = ''\r\n    }\r\n  }\r\n\r\n  rerenderRows(callback) {\r\n    this.clearRows()\r\n\r\n    if (callback) {\r\n      callback()\r\n    }\r\n\r\n    this.renderRows()\r\n\r\n    if (!this.rows().length) {\r\n      this.table.rowManager.tableEmpty()\r\n    }\r\n  }\r\n\r\n  scrollToRowNearestTop(row) {\r\n    const rowTop = Helpers.elOffset(row.getElement()).top\r\n\r\n    return !(\r\n      Math.abs(this.elementVertical.scrollTop - rowTop) >\r\n      Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop)\r\n    )\r\n  }\r\n\r\n  scrollToRow(row) {\r\n    const rowEl = row.getElement()\r\n\r\n    this.elementVertical.scrollTop =\r\n      Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop\r\n  }\r\n\r\n  visibleRows(includingBuffer) {\r\n    return this.rows()\r\n  }\r\n}\r\n","import Renderer from '../Renderer.js'\r\nimport Helpers from '../../tools/Helpers.js'\r\n\r\nexport default class VirtualDomVertical extends Renderer {\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.verticalFillMode = 'fill'\r\n\r\n    this.scrollTop = 0\r\n    this.scrollLeft = 0\r\n\r\n    this.vDomRowHeight = 20 // approximation of row heights for padding\r\n\r\n    this.vDomTop = 0 // hold position for first rendered row in the virtual DOM\r\n    this.vDomBottom = 0 // hold position for last rendered row in the virtual DOM\r\n\r\n    this.vDomScrollPosTop = 0 // last scroll position of the vDom top;\r\n    this.vDomScrollPosBottom = 0 // last scroll position of the vDom bottom;\r\n\r\n    this.vDomTopPad = 0 // hold value of padding for top of virtual DOM\r\n    this.vDomBottomPad = 0 // hold value of padding for bottom of virtual DOM\r\n\r\n    this.vDomMaxRenderChain = 90 // the maximum number of dom elements that can be rendered in 1 go\r\n\r\n    this.vDomWindowBuffer = 0 // window row buffer before removing elements, to smooth scrolling\r\n\r\n    this.vDomWindowMinTotalRows = 20 // minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\r\n    this.vDomWindowMinMarginRows = 5 // minimum number of rows to be generated in virtual dom margin\r\n\r\n    this.vDomTopNewRows = [] // rows to normalize after appending to optimize render speed\r\n    this.vDomBottomNewRows = [] // rows to normalize after appending to optimize render speed\r\n  }\r\n\r\n  /// ///////////////////////////////////\r\n  /// ////// Public Functions ///////////\r\n  /// ///////////////////////////////////\r\n\r\n  clearRows() {\r\n    const element = this.tableElement\r\n\r\n    // element.children.detach();\r\n    while (element.firstChild) element.removeChild(element.firstChild)\r\n\r\n    element.style.paddingTop = ''\r\n    element.style.paddingBottom = ''\r\n    element.style.minHeight = ''\r\n    element.style.display = ''\r\n    element.style.visibility = ''\r\n\r\n    this.elementVertical.scrollTop = 0\r\n    this.elementVertical.scrollLeft = 0\r\n\r\n    this.scrollTop = 0\r\n    this.scrollLeft = 0\r\n\r\n    this.vDomTop = 0\r\n    this.vDomBottom = 0\r\n    this.vDomTopPad = 0\r\n    this.vDomBottomPad = 0\r\n    this.vDomScrollPosTop = 0\r\n    this.vDomScrollPosBottom = 0\r\n  }\r\n\r\n  renderRows() {\r\n    this._virtualRenderFill()\r\n  }\r\n\r\n  rerenderRows(callback) {\r\n    const scrollTop = this.elementVertical.scrollTop\r\n    let topRow = false\r\n    let topOffset = false\r\n\r\n    const left = this.table.rowManager.scrollLeft\r\n\r\n    const rows = this.rows()\r\n\r\n    for (let i = this.vDomTop; i <= this.vDomBottom; i++) {\r\n      if (rows[i]) {\r\n        const diff = scrollTop - rows[i].getElement().offsetTop\r\n\r\n        if (topOffset === false || Math.abs(diff) < topOffset) {\r\n          topOffset = diff\r\n          topRow = i\r\n        } else {\r\n          break\r\n        }\r\n      }\r\n    }\r\n\r\n    rows.forEach((row) => {\r\n      row.deinitializeHeight()\r\n    })\r\n\r\n    if (callback) {\r\n      callback()\r\n    }\r\n\r\n    if (this.rows().length) {\r\n      this._virtualRenderFill(topRow === false ? this.rows.length - 1 : topRow, true, topOffset || 0)\r\n    } else {\r\n      this.clear()\r\n      this.table.rowManager.tableEmpty()\r\n    }\r\n\r\n    this.scrollColumns(left)\r\n  }\r\n\r\n  scrollColumns(left) {\r\n    this.table.rowManager.scrollHorizontal(left)\r\n  }\r\n\r\n  scrollRows(top, dir) {\r\n    const topDiff = top - this.vDomScrollPosTop\r\n    const bottomDiff = top - this.vDomScrollPosBottom\r\n    const margin = this.vDomWindowBuffer * 2\r\n    const rows = this.rows()\r\n\r\n    this.scrollTop = top\r\n\r\n    if (-topDiff > margin || bottomDiff > margin) {\r\n      // if big scroll redraw table;\r\n      const left = this.table.rowManager.scrollLeft\r\n      this._virtualRenderFill(\r\n        Math.floor((this.elementVertical.scrollTop / this.elementVertical.scrollHeight) * rows.length)\r\n      )\r\n      this.scrollColumns(left)\r\n    } else {\r\n      if (dir) {\r\n        // scrolling up\r\n        if (topDiff < 0) {\r\n          this._addTopRow(rows, -topDiff)\r\n        }\r\n\r\n        if (bottomDiff < 0) {\r\n          // hide bottom row if needed\r\n          if (this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer) {\r\n            this._removeBottomRow(rows, -bottomDiff)\r\n          } else {\r\n            this.vDomScrollPosBottom = this.scrollTop\r\n          }\r\n        }\r\n      } else {\r\n        if (bottomDiff >= 0) {\r\n          this._addBottomRow(rows, bottomDiff)\r\n        }\r\n\r\n        // scrolling down\r\n        if (topDiff >= 0) {\r\n          // hide top row if needed\r\n          if (this.scrollTop > this.vDomWindowBuffer) {\r\n            this._removeTopRow(rows, topDiff)\r\n          } else {\r\n            this.vDomScrollPosTop = this.scrollTop\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  resize() {\r\n    this.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight\r\n  }\r\n\r\n  scrollToRowNearestTop(row) {\r\n    const rowIndex = this.rows().indexOf(row)\r\n\r\n    return !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex))\r\n  }\r\n\r\n  scrollToRow(row) {\r\n    const index = this.rows().indexOf(row)\r\n\r\n    if (index > -1) {\r\n      this._virtualRenderFill(index, true)\r\n    }\r\n  }\r\n\r\n  visibleRows(includingBuffer) {\r\n    const topEdge = this.elementVertical.scrollTop\r\n    const bottomEdge = this.elementVertical.clientHeight + topEdge\r\n    let topFound = false\r\n    let topRow = 0\r\n    let bottomRow = 0\r\n    const rows = this.rows()\r\n\r\n    if (includingBuffer) {\r\n      topRow = this.vDomTop\r\n      bottomRow = this.vDomBottom\r\n    } else {\r\n      for (let i = this.vDomTop; i <= this.vDomBottom; i++) {\r\n        if (rows[i]) {\r\n          if (!topFound) {\r\n            if (topEdge - rows[i].getElement().offsetTop >= 0) {\r\n              topRow = i\r\n            } else {\r\n              topFound = true\r\n\r\n              if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\r\n                bottomRow = i\r\n              } else {\r\n                break\r\n              }\r\n            }\r\n          } else {\r\n            if (bottomEdge - rows[i].getElement().offsetTop >= 0) {\r\n              bottomRow = i\r\n            } else {\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return rows.slice(topRow, bottomRow + 1)\r\n  }\r\n\r\n  /// ///////////////////////////////////\r\n  /// ///// Internal Rendering //////////\r\n  /// ///////////////////////////////////\r\n\r\n  // full virtual render\r\n  _virtualRenderFill(position, forceMove, offset) {\r\n    const element = this.tableElement\r\n    const holder = this.elementVertical\r\n    let topPad = 0\r\n    let rowsHeight = 0\r\n    let rowHeight = 0\r\n    let heightOccupied = 0\r\n    let topPadHeight = 0\r\n    let i = 0\r\n    const rows = this.rows()\r\n    const rowsCount = rows.length\r\n    let index = 0\r\n    let row\r\n    let rowFragment\r\n    let renderedRows = []\r\n    let totalRowsRendered = 0\r\n    let rowsToRender = 0\r\n    const fixedHeight = this.table.rowManager.fixedHeight\r\n    let containerHeight = this.elementVertical.clientHeight\r\n    let avgRowHeight = this.table.options.rowHeight\r\n    let resized = true\r\n\r\n    position = position || 0\r\n\r\n    offset = offset || 0\r\n\r\n    if (!position) {\r\n      this.clear()\r\n    } else {\r\n      while (element.firstChild) element.removeChild(element.firstChild)\r\n\r\n      // check if position is too close to bottom of table\r\n      heightOccupied = (rowsCount - position + 1) * this.vDomRowHeight\r\n\r\n      if (heightOccupied < containerHeight) {\r\n        position -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight)\r\n        if (position < 0) {\r\n          position = 0\r\n        }\r\n      }\r\n\r\n      // calculate initial pad\r\n      topPad = Math.min(\r\n        Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight), this.vDomWindowMinMarginRows),\r\n        position\r\n      )\r\n      position -= topPad\r\n    }\r\n\r\n    if (rowsCount && Helpers.elVisible(this.elementVertical)) {\r\n      this.vDomTop = position\r\n      this.vDomBottom = position - 1\r\n\r\n      if (fixedHeight || this.table.options.maxHeight) {\r\n        if (avgRowHeight) {\r\n          rowsToRender = containerHeight / avgRowHeight + this.vDomWindowBuffer / avgRowHeight\r\n        }\r\n        rowsToRender = Math.max(this.vDomWindowMinTotalRows, Math.ceil(rowsToRender))\r\n      } else {\r\n        rowsToRender = rowsCount\r\n      }\r\n\r\n      while (\r\n        (rowsToRender == rowsCount ||\r\n          rowsHeight <= containerHeight + this.vDomWindowBuffer ||\r\n          totalRowsRendered < this.vDomWindowMinTotalRows) &&\r\n        this.vDomBottom < rowsCount - 1\r\n      ) {\r\n        renderedRows = []\r\n        rowFragment = document.createDocumentFragment()\r\n\r\n        i = 0\r\n\r\n        while (i < rowsToRender && this.vDomBottom < rowsCount - 1) {\r\n          ;((index = this.vDomBottom + 1), (row = rows[index]))\r\n\r\n          this.styleRow(row, index)\r\n\r\n          row.initialize(false, true)\r\n          if (!row.heightInitialized && !this.table.options.rowHeight) {\r\n            row.clearCellHeight()\r\n          }\r\n\r\n          rowFragment.appendChild(row.getElement())\r\n          renderedRows.push(row)\r\n          this.vDomBottom++\r\n          i++\r\n        }\r\n\r\n        if (!renderedRows.length) {\r\n          break\r\n        }\r\n\r\n        element.appendChild(rowFragment)\r\n\r\n        // NOTE: The next 3 loops are separate on purpose\r\n        // This is to batch up the dom writes and reads which drastically improves performance\r\n\r\n        renderedRows.forEach((row) => {\r\n          row.rendered()\r\n\r\n          if (!row.heightInitialized) {\r\n            row.calcHeight(true)\r\n          }\r\n        })\r\n\r\n        renderedRows.forEach((row) => {\r\n          if (!row.heightInitialized) {\r\n            row.setCellHeight()\r\n          }\r\n        })\r\n\r\n        renderedRows.forEach((row) => {\r\n          rowHeight = row.getHeight()\r\n\r\n          if (totalRowsRendered < topPad) {\r\n            topPadHeight += rowHeight\r\n          } else {\r\n            rowsHeight += rowHeight\r\n          }\r\n\r\n          if (rowHeight > this.vDomWindowBuffer) {\r\n            this.vDomWindowBuffer = rowHeight * 2\r\n          }\r\n          totalRowsRendered++\r\n        })\r\n\r\n        resized = this.table.rowManager.adjustTableSize()\r\n        containerHeight = this.elementVertical.clientHeight\r\n        if (resized && (fixedHeight || this.table.options.maxHeight)) {\r\n          avgRowHeight = rowsHeight / totalRowsRendered\r\n          rowsToRender = Math.max(\r\n            this.vDomWindowMinTotalRows,\r\n            Math.ceil(containerHeight / avgRowHeight + this.vDomWindowBuffer / avgRowHeight)\r\n          )\r\n        }\r\n      }\r\n\r\n      if (!position) {\r\n        this.vDomTopPad = 0\r\n        // adjust row height to match average of rendered elements\r\n        this.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / totalRowsRendered)\r\n        this.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom - 1)\r\n\r\n        this.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight\r\n      } else {\r\n        this.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : this.vDomRowHeight * this.vDomTop + offset\r\n        this.vDomBottomPad =\r\n          this.vDomBottom == rowsCount - 1\r\n            ? 0\r\n            : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0)\r\n      }\r\n\r\n      element.style.paddingTop = this.vDomTopPad + 'px'\r\n      element.style.paddingBottom = this.vDomBottomPad + 'px'\r\n\r\n      if (forceMove) {\r\n        this.scrollTop =\r\n          this.vDomTopPad +\r\n          topPadHeight +\r\n          offset -\r\n          (this.elementVertical.scrollWidth > this.elementVertical.clientWidth\r\n            ? this.elementVertical.offsetHeight - containerHeight\r\n            : 0)\r\n      }\r\n\r\n      this.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight)\r\n\r\n      // adjust for horizontal scrollbar if present (and not at top of table)\r\n      if (this.elementVertical.scrollWidth > this.elementVertical.clientWidth && forceMove) {\r\n        this.scrollTop += this.elementVertical.offsetHeight - containerHeight\r\n      }\r\n\r\n      this.vDomScrollPosTop = this.scrollTop\r\n      this.vDomScrollPosBottom = this.scrollTop\r\n\r\n      holder.scrollTop = this.scrollTop\r\n\r\n      this.dispatch('render-virtual-fill')\r\n    }\r\n  }\r\n\r\n  _addTopRow(rows, fillableSpace) {\r\n    const table = this.tableElement\r\n    const addedRows = []\r\n    let paddingAdjust = 0\r\n    let index = this.vDomTop - 1\r\n    let i = 0\r\n    let working = true\r\n\r\n    while (working) {\r\n      if (this.vDomTop) {\r\n        const row = rows[index]\r\n        let rowHeight\r\n        let initialized\r\n\r\n        if (row && i < this.vDomMaxRenderChain) {\r\n          rowHeight = row.getHeight() || this.vDomRowHeight\r\n          initialized = row.initialized\r\n\r\n          if (fillableSpace >= rowHeight) {\r\n            this.styleRow(row, index)\r\n            table.insertBefore(row.getElement(), table.firstChild)\r\n\r\n            if (!row.initialized || !row.heightInitialized) {\r\n              addedRows.push(row)\r\n            }\r\n\r\n            row.initialize()\r\n\r\n            if (!initialized) {\r\n              rowHeight = row.getElement().offsetHeight\r\n\r\n              if (rowHeight > this.vDomWindowBuffer) {\r\n                this.vDomWindowBuffer = rowHeight * 2\r\n              }\r\n            }\r\n\r\n            fillableSpace -= rowHeight\r\n            paddingAdjust += rowHeight\r\n\r\n            this.vDomTop--\r\n            index--\r\n            i++\r\n          } else {\r\n            working = false\r\n          }\r\n        } else {\r\n          working = false\r\n        }\r\n      } else {\r\n        working = false\r\n      }\r\n    }\r\n\r\n    for (const row of addedRows) {\r\n      row.clearCellHeight()\r\n    }\r\n\r\n    this._quickNormalizeRowHeight(addedRows)\r\n\r\n    if (paddingAdjust) {\r\n      this.vDomTopPad -= paddingAdjust\r\n\r\n      if (this.vDomTopPad < 0) {\r\n        this.vDomTopPad = index * this.vDomRowHeight\r\n      }\r\n\r\n      if (index < 1) {\r\n        this.vDomTopPad = 0\r\n      }\r\n\r\n      table.style.paddingTop = this.vDomTopPad + 'px'\r\n      this.vDomScrollPosTop -= paddingAdjust\r\n    }\r\n  }\r\n\r\n  _removeTopRow(rows, fillableSpace) {\r\n    const removableRows = []\r\n    let paddingAdjust = 0\r\n    let i = 0\r\n    let working = true\r\n\r\n    while (working) {\r\n      const row = rows[this.vDomTop]\r\n      let rowHeight\r\n\r\n      if (row && i < this.vDomMaxRenderChain) {\r\n        rowHeight = row.getHeight() || this.vDomRowHeight\r\n\r\n        if (fillableSpace >= rowHeight) {\r\n          this.vDomTop++\r\n\r\n          fillableSpace -= rowHeight\r\n          paddingAdjust += rowHeight\r\n\r\n          removableRows.push(row)\r\n          i++\r\n        } else {\r\n          working = false\r\n        }\r\n      } else {\r\n        working = false\r\n      }\r\n    }\r\n\r\n    for (const row of removableRows) {\r\n      const rowEl = row.getElement()\r\n\r\n      if (rowEl.parentNode) {\r\n        rowEl.parentNode.removeChild(rowEl)\r\n      }\r\n    }\r\n\r\n    if (paddingAdjust) {\r\n      this.vDomTopPad += paddingAdjust\r\n      this.tableElement.style.paddingTop = this.vDomTopPad + 'px'\r\n      this.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer\r\n    }\r\n  }\r\n\r\n  _addBottomRow(rows, fillableSpace) {\r\n    const table = this.tableElement\r\n    const addedRows = []\r\n    let paddingAdjust = 0\r\n    let index = this.vDomBottom + 1\r\n    let i = 0\r\n    let working = true\r\n\r\n    while (working) {\r\n      const row = rows[index]\r\n      let rowHeight\r\n      let initialized\r\n\r\n      if (row && i < this.vDomMaxRenderChain) {\r\n        rowHeight = row.getHeight() || this.vDomRowHeight\r\n        initialized = row.initialized\r\n\r\n        if (fillableSpace >= rowHeight) {\r\n          this.styleRow(row, index)\r\n          table.appendChild(row.getElement())\r\n\r\n          if (!row.initialized || !row.heightInitialized) {\r\n            addedRows.push(row)\r\n          }\r\n\r\n          row.initialize()\r\n\r\n          if (!initialized) {\r\n            rowHeight = row.getElement().offsetHeight\r\n\r\n            if (rowHeight > this.vDomWindowBuffer) {\r\n              this.vDomWindowBuffer = rowHeight * 2\r\n            }\r\n          }\r\n\r\n          fillableSpace -= rowHeight\r\n          paddingAdjust += rowHeight\r\n\r\n          this.vDomBottom++\r\n          index++\r\n          i++\r\n        } else {\r\n          working = false\r\n        }\r\n      } else {\r\n        working = false\r\n      }\r\n    }\r\n\r\n    for (const row of addedRows) {\r\n      row.clearCellHeight()\r\n    }\r\n\r\n    this._quickNormalizeRowHeight(addedRows)\r\n\r\n    if (paddingAdjust) {\r\n      this.vDomBottomPad -= paddingAdjust\r\n\r\n      if (this.vDomBottomPad < 0 || index == rows.length - 1) {\r\n        this.vDomBottomPad = 0\r\n      }\r\n\r\n      table.style.paddingBottom = this.vDomBottomPad + 'px'\r\n      this.vDomScrollPosBottom += paddingAdjust\r\n    }\r\n  }\r\n\r\n  _removeBottomRow(rows, fillableSpace) {\r\n    const removableRows = []\r\n    let paddingAdjust = 0\r\n    let i = 0\r\n    let working = true\r\n\r\n    while (working) {\r\n      const row = rows[this.vDomBottom]\r\n      let rowHeight\r\n\r\n      if (row && i < this.vDomMaxRenderChain) {\r\n        rowHeight = row.getHeight() || this.vDomRowHeight\r\n\r\n        if (fillableSpace >= rowHeight) {\r\n          this.vDomBottom--\r\n\r\n          fillableSpace -= rowHeight\r\n          paddingAdjust += rowHeight\r\n\r\n          removableRows.push(row)\r\n          i++\r\n        } else {\r\n          working = false\r\n        }\r\n      } else {\r\n        working = false\r\n      }\r\n    }\r\n\r\n    for (const row of removableRows) {\r\n      const rowEl = row.getElement()\r\n\r\n      if (rowEl.parentNode) {\r\n        rowEl.parentNode.removeChild(rowEl)\r\n      }\r\n    }\r\n\r\n    if (paddingAdjust) {\r\n      this.vDomBottomPad += paddingAdjust\r\n\r\n      if (this.vDomBottomPad < 0) {\r\n        this.vDomBottomPad = 0\r\n      }\r\n\r\n      this.tableElement.style.paddingBottom = this.vDomBottomPad + 'px'\r\n      this.vDomScrollPosBottom -= paddingAdjust\r\n    }\r\n  }\r\n\r\n  _quickNormalizeRowHeight(rows) {\r\n    for (const row of rows) {\r\n      row.calcHeight()\r\n    }\r\n\r\n    for (const row of rows) {\r\n      row.setCellHeight()\r\n    }\r\n  }\r\n}\r\n","import CoreFeature from './CoreFeature.js'\r\nimport Row from './row/Row.js'\r\nimport RowComponent from './row/RowComponent.js'\r\nimport Helpers from './tools/Helpers.js'\r\n\r\nimport RendererBasicVertical from './rendering/renderers/BasicVertical.js'\r\nimport RendererVirtualDomVertical from './rendering/renderers/VirtualDomVertical.js'\r\n\r\nexport default class RowManager extends CoreFeature {\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.element = this.createHolderElement() // containing element\r\n    this.tableElement = this.createTableElement() // table element\r\n    this.heightFixer = this.createTableElement() // table element\r\n    this.placeholder = null // placeholder element\r\n    this.placeholderContents = null // placeholder element\r\n\r\n    this.firstRender = false // handle first render\r\n    this.renderMode = 'virtual' // current rendering mode\r\n    this.fixedHeight = false // current rendering mode\r\n\r\n    this.rows = [] // hold row data objects\r\n    this.activeRowsPipeline = [] // hold calculation of active rows\r\n    this.activeRows = [] // rows currently available to on display in the table\r\n    this.activeRowsCount = 0 // count of active rows\r\n\r\n    this.displayRows = [] // rows currently on display in the table\r\n    this.displayRowsCount = 0 // count of display rows\r\n\r\n    this.scrollTop = 0\r\n    this.scrollLeft = 0\r\n\r\n    this.redrawBlock = false // prevent redraws to allow multiple data manipulations before continuing\r\n    this.redrawBlockRestoreConfig = false // store latest redraw function calls for when redraw is needed\r\n    this.redrawBlockRenderInPosition = false // store latest redraw function calls for when redraw is needed\r\n\r\n    this.dataPipeline = [] // hold data pipeline tasks\r\n    this.displayPipeline = [] // hold data display pipeline tasks\r\n\r\n    this.scrollbarWidth = 0\r\n\r\n    this.renderer = null\r\n  }\r\n\r\n  /// ///////////// Setup Functions /////////////////\r\n\r\n  createHolderElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-tableholder')\r\n    el.setAttribute('tabindex', 0)\r\n    // el.setAttribute(\"role\", \"rowgroup\");\r\n\r\n    return el\r\n  }\r\n\r\n  createTableElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-table')\r\n    el.setAttribute('role', 'rowgroup')\r\n\r\n    return el\r\n  }\r\n\r\n  initializePlaceholder() {\r\n    let placeholder = this.table.options.placeholder\r\n\r\n    if (typeof placeholder === 'function') {\r\n      placeholder = placeholder.call(this.table)\r\n    }\r\n\r\n    placeholder = this.chain('placeholder', [placeholder], placeholder, placeholder) || placeholder\r\n\r\n    // configure placeholder element\r\n    if (placeholder) {\r\n      const el = document.createElement('div')\r\n      el.classList.add('tabulator-placeholder')\r\n\r\n      if (typeof placeholder === 'string') {\r\n        const contents = document.createElement('div')\r\n        contents.classList.add('tabulator-placeholder-contents')\r\n        contents.innerHTML = placeholder\r\n\r\n        el.appendChild(contents)\r\n\r\n        this.placeholderContents = contents\r\n      } else if (typeof HTMLElement !== 'undefined' && placeholder instanceof HTMLElement) {\r\n        el.appendChild(placeholder)\r\n        this.placeholderContents = placeholder\r\n      } else {\r\n        console.warn('Invalid placeholder provided, must be string or HTML Element', placeholder)\r\n\r\n        this.el = null\r\n      }\r\n\r\n      this.placeholder = el\r\n    }\r\n  }\r\n\r\n  // return containing element\r\n  getElement() {\r\n    return this.element\r\n  }\r\n\r\n  // return table element\r\n  getTableElement() {\r\n    return this.tableElement\r\n  }\r\n\r\n  initialize() {\r\n    this.initializePlaceholder()\r\n    this.initializeRenderer()\r\n\r\n    // initialize manager\r\n    this.element.appendChild(this.tableElement)\r\n\r\n    this.firstRender = true\r\n\r\n    // scroll header along with table body\r\n    this.element.addEventListener('scroll', () => {\r\n      const left = this.element.scrollLeft\r\n      const leftDir = this.scrollLeft > left\r\n      const top = this.element.scrollTop\r\n      const topDir = this.scrollTop > top\r\n\r\n      // handle horizontal scrolling\r\n      if (this.scrollLeft != left) {\r\n        this.scrollLeft = left\r\n\r\n        this.dispatch('scroll-horizontal', left, leftDir)\r\n        this.dispatchExternal('scrollHorizontal', left, leftDir)\r\n\r\n        this._positionPlaceholder()\r\n      }\r\n\r\n      // handle vertical scrolling\r\n      if (this.scrollTop != top) {\r\n        this.scrollTop = top\r\n\r\n        this.renderer.scrollRows(top, topDir)\r\n\r\n        this.dispatch('scroll-vertical', top, topDir)\r\n        this.dispatchExternal('scrollVertical', top, topDir)\r\n      }\r\n    })\r\n  }\r\n\r\n  /// /////////////// Row Manipulation //////////////////\r\n  findRow(subject) {\r\n    if (typeof subject === 'object') {\r\n      if (subject instanceof Row) {\r\n        // subject is row element\r\n        return subject\r\n      } else if (subject instanceof RowComponent) {\r\n        // subject is public row component\r\n        return subject._getSelf() || false\r\n      } else if (typeof HTMLElement !== 'undefined' && subject instanceof HTMLElement) {\r\n        // subject is a HTML element of the row\r\n        const match = this.rows.find((row) => {\r\n          return row.getElement() === subject\r\n        })\r\n\r\n        return match || false\r\n      } else if (subject === null) {\r\n        return false\r\n      }\r\n    } else if (typeof subject === 'undefined') {\r\n      return false\r\n    } else {\r\n      // subject should be treated as the index of the row\r\n      const match = this.rows.find((row) => {\r\n        return row.data[this.table.options.index] == subject\r\n      })\r\n\r\n      return match || false\r\n    }\r\n\r\n    // catch all for any other type of input\r\n    return false\r\n  }\r\n\r\n  getRowFromDataObject(data) {\r\n    const match = this.rows.find((row) => {\r\n      return row.data === data\r\n    })\r\n\r\n    return match || false\r\n  }\r\n\r\n  getRowFromPosition(position) {\r\n    return this.getDisplayRows().find((row) => {\r\n      return row.type === 'row' && row.getPosition() === position && row.isDisplayed()\r\n    })\r\n  }\r\n\r\n  scrollToRow(row, position, ifVisible) {\r\n    return this.renderer.scrollToRowPosition(row, position, ifVisible)\r\n  }\r\n\r\n  /// /////////////// Data Handling //////////////////\r\n  setData(data, renderInPosition, columnsChanged) {\r\n    return new Promise((resolve, reject) => {\r\n      if (renderInPosition && this.getDisplayRows().length) {\r\n        if (this.table.options.pagination) {\r\n          this._setDataActual(data, true)\r\n        } else {\r\n          this.reRenderInPosition(() => {\r\n            this._setDataActual(data)\r\n          })\r\n        }\r\n      } else {\r\n        if (this.table.options.autoColumns && columnsChanged && this.table.initialized) {\r\n          this.table.columnManager.generateColumnsFromRowData(data)\r\n        }\r\n        this.resetScroll()\r\n\r\n        this._setDataActual(data)\r\n      }\r\n\r\n      resolve()\r\n    })\r\n  }\r\n\r\n  _setDataActual(data, renderInPosition) {\r\n    this.dispatchExternal('dataProcessing', data)\r\n\r\n    this._wipeElements()\r\n\r\n    if (Array.isArray(data)) {\r\n      this.dispatch('data-processing', data)\r\n\r\n      data.forEach((def, i) => {\r\n        if (def && typeof def === 'object') {\r\n          const row = new Row(def, this)\r\n          this.rows.push(row)\r\n        } else {\r\n          console.warn(\r\n            'Data Loading Warning - Invalid row data detected and ignored, expecting object but received:',\r\n            def\r\n          )\r\n        }\r\n      })\r\n\r\n      this.refreshActiveData(false, false, renderInPosition)\r\n\r\n      this.dispatch('data-processed', data)\r\n      this.dispatchExternal('dataProcessed', data)\r\n    } else {\r\n      console.error(\r\n        'Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: ',\r\n        typeof data,\r\n        '\\nData:     ',\r\n        data\r\n      )\r\n    }\r\n  }\r\n\r\n  _wipeElements() {\r\n    this.dispatch('rows-wipe')\r\n\r\n    this.destroy()\r\n\r\n    this.adjustTableSize()\r\n\r\n    this.dispatch('rows-wiped')\r\n  }\r\n\r\n  destroy() {\r\n    this.rows.forEach((row) => {\r\n      row.wipe()\r\n    })\r\n\r\n    this.rows = []\r\n    this.activeRows = []\r\n    this.activeRowsPipeline = []\r\n    this.activeRowsCount = 0\r\n    this.displayRows = []\r\n    this.displayRowsCount = 0\r\n  }\r\n\r\n  deleteRow(row, blockRedraw) {\r\n    const allIndex = this.rows.indexOf(row)\r\n    const activeIndex = this.activeRows.indexOf(row)\r\n\r\n    if (activeIndex > -1) {\r\n      this.activeRows.splice(activeIndex, 1)\r\n    }\r\n\r\n    if (allIndex > -1) {\r\n      this.rows.splice(allIndex, 1)\r\n    }\r\n\r\n    this.setActiveRows(this.activeRows)\r\n\r\n    this.displayRowIterator((rows) => {\r\n      const displayIndex = rows.indexOf(row)\r\n\r\n      if (displayIndex > -1) {\r\n        rows.splice(displayIndex, 1)\r\n      }\r\n    })\r\n\r\n    if (!blockRedraw) {\r\n      this.reRenderInPosition()\r\n    }\r\n\r\n    this.regenerateRowPositions()\r\n\r\n    this.dispatchExternal('rowDeleted', row.getComponent())\r\n\r\n    if (!this.displayRowsCount) {\r\n      this.tableEmpty()\r\n    }\r\n\r\n    if (this.subscribedExternal('dataChanged')) {\r\n      this.dispatchExternal('dataChanged', this.getData())\r\n    }\r\n  }\r\n\r\n  addRow(data, pos, index, blockRedraw) {\r\n    const row = this.addRowActual(data, pos, index, blockRedraw)\r\n    return row\r\n  }\r\n\r\n  // add multiple rows\r\n  addRows(data, pos, index, refreshDisplayOnly) {\r\n    const rows = []\r\n\r\n    return new Promise((resolve, reject) => {\r\n      pos = this.findAddRowPos(pos)\r\n\r\n      if (!Array.isArray(data)) {\r\n        data = [data]\r\n      }\r\n\r\n      if ((typeof index === 'undefined' && pos) || (typeof index !== 'undefined' && !pos)) {\r\n        data.reverse()\r\n      }\r\n\r\n      data.forEach((item, i) => {\r\n        const row = this.addRow(item, pos, index, true)\r\n        rows.push(row)\r\n        this.dispatch('row-added', row, item, pos, index)\r\n      })\r\n\r\n      this.refreshActiveData(refreshDisplayOnly ? 'displayPipeline' : false, false, true)\r\n\r\n      this.regenerateRowPositions()\r\n\r\n      if (this.displayRowsCount) {\r\n        this._clearPlaceholder()\r\n      }\r\n\r\n      resolve(rows)\r\n    })\r\n  }\r\n\r\n  findAddRowPos(pos) {\r\n    if (typeof pos === 'undefined') {\r\n      pos = this.table.options.addRowPos\r\n    }\r\n\r\n    if (pos === 'pos') {\r\n      pos = true\r\n    }\r\n\r\n    if (pos === 'bottom') {\r\n      pos = false\r\n    }\r\n\r\n    return pos\r\n  }\r\n\r\n  addRowActual(data, pos, index, blockRedraw) {\r\n    const row = data instanceof Row ? data : new Row(data || {}, this)\r\n    let top = this.findAddRowPos(pos)\r\n    let allIndex = -1\r\n    let activeIndex\r\n    let chainResult\r\n\r\n    if (!index) {\r\n      chainResult = this.chain('row-adding-position', [row, top], null, { index, top })\r\n\r\n      index = chainResult.index\r\n      top = chainResult.top\r\n    }\r\n\r\n    if (typeof index !== 'undefined') {\r\n      index = this.findRow(index)\r\n    }\r\n\r\n    index = this.chain('row-adding-index', [row, index, top], null, index)\r\n\r\n    if (index) {\r\n      allIndex = this.rows.indexOf(index)\r\n    }\r\n\r\n    if (index && allIndex > -1) {\r\n      activeIndex = this.activeRows.indexOf(index)\r\n\r\n      this.displayRowIterator(function (rows) {\r\n        const displayIndex = rows.indexOf(index)\r\n\r\n        if (displayIndex > -1) {\r\n          rows.splice(top ? displayIndex : displayIndex + 1, 0, row)\r\n        }\r\n      })\r\n\r\n      if (activeIndex > -1) {\r\n        this.activeRows.splice(top ? activeIndex : activeIndex + 1, 0, row)\r\n      }\r\n\r\n      this.rows.splice(top ? allIndex : allIndex + 1, 0, row)\r\n    } else {\r\n      if (top) {\r\n        this.displayRowIterator(function (rows) {\r\n          rows.unshift(row)\r\n        })\r\n\r\n        this.activeRows.unshift(row)\r\n        this.rows.unshift(row)\r\n      } else {\r\n        this.displayRowIterator(function (rows) {\r\n          rows.push(row)\r\n        })\r\n\r\n        this.activeRows.push(row)\r\n        this.rows.push(row)\r\n      }\r\n    }\r\n\r\n    this.setActiveRows(this.activeRows)\r\n\r\n    this.dispatchExternal('rowAdded', row.getComponent())\r\n\r\n    if (this.subscribedExternal('dataChanged')) {\r\n      this.dispatchExternal('dataChanged', this.table.rowManager.getData())\r\n    }\r\n\r\n    if (!blockRedraw) {\r\n      this.reRenderInPosition()\r\n    }\r\n\r\n    return row\r\n  }\r\n\r\n  moveRow(from, to, after) {\r\n    this.dispatch('row-move', from, to, after)\r\n\r\n    this.moveRowActual(from, to, after)\r\n\r\n    this.regenerateRowPositions()\r\n\r\n    this.dispatch('row-moved', from, to, after)\r\n    this.dispatchExternal('rowMoved', from.getComponent())\r\n  }\r\n\r\n  moveRowActual(from, to, after) {\r\n    this.moveRowInArray(this.rows, from, to, after)\r\n    this.moveRowInArray(this.activeRows, from, to, after)\r\n\r\n    this.displayRowIterator((rows) => {\r\n      this.moveRowInArray(rows, from, to, after)\r\n    })\r\n\r\n    this.dispatch('row-moving', from, to, after)\r\n  }\r\n\r\n  moveRowInArray(rows, from, to, after) {\r\n    let fromIndex, toIndex, start, end\r\n\r\n    if (from !== to) {\r\n      fromIndex = rows.indexOf(from)\r\n\r\n      if (fromIndex > -1) {\r\n        rows.splice(fromIndex, 1)\r\n\r\n        toIndex = rows.indexOf(to)\r\n\r\n        if (toIndex > -1) {\r\n          if (after) {\r\n            rows.splice(toIndex + 1, 0, from)\r\n          } else {\r\n            rows.splice(toIndex, 0, from)\r\n          }\r\n        } else {\r\n          rows.splice(fromIndex, 0, from)\r\n        }\r\n      }\r\n\r\n      // restyle rows\r\n      if (rows === this.getDisplayRows()) {\r\n        start = fromIndex < toIndex ? fromIndex : toIndex\r\n        end = toIndex > fromIndex ? toIndex : fromIndex + 1\r\n\r\n        for (let i = start; i <= end; i++) {\r\n          if (rows[i]) {\r\n            this.styleRow(rows[i], i)\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  clearData() {\r\n    this.setData([])\r\n  }\r\n\r\n  getRowIndex(row) {\r\n    return this.findRowIndex(row, this.rows)\r\n  }\r\n\r\n  getDisplayRowIndex(row) {\r\n    const index = this.getDisplayRows().indexOf(row)\r\n    return index > -1 ? index : false\r\n  }\r\n\r\n  nextDisplayRow(row, rowOnly) {\r\n    const index = this.getDisplayRowIndex(row)\r\n    let nextRow = false\r\n\r\n    if (index !== false && index < this.displayRowsCount - 1) {\r\n      nextRow = this.getDisplayRows()[index + 1]\r\n    }\r\n\r\n    if (nextRow && (!(nextRow instanceof Row) || nextRow.type != 'row')) {\r\n      return this.nextDisplayRow(nextRow, rowOnly)\r\n    }\r\n\r\n    return nextRow\r\n  }\r\n\r\n  prevDisplayRow(row, rowOnly) {\r\n    const index = this.getDisplayRowIndex(row)\r\n    let prevRow = false\r\n\r\n    if (index) {\r\n      prevRow = this.getDisplayRows()[index - 1]\r\n    }\r\n\r\n    if (rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != 'row')) {\r\n      return this.prevDisplayRow(prevRow, rowOnly)\r\n    }\r\n\r\n    return prevRow\r\n  }\r\n\r\n  findRowIndex(row, list) {\r\n    let rowIndex\r\n\r\n    row = this.findRow(row)\r\n\r\n    if (row) {\r\n      rowIndex = list.indexOf(row)\r\n\r\n      if (rowIndex > -1) {\r\n        return rowIndex\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  getData(active, transform) {\r\n    const output = []\r\n    const rows = this.getRows(active)\r\n\r\n    rows.forEach(function (row) {\r\n      if (row.type == 'row') {\r\n        output.push(row.getData(transform || 'data'))\r\n      }\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  getComponents(active) {\r\n    const output = []\r\n    const rows = this.getRows(active)\r\n\r\n    rows.forEach(function (row) {\r\n      output.push(row.getComponent())\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  getDataCount(active) {\r\n    const rows = this.getRows(active)\r\n\r\n    return rows.length\r\n  }\r\n\r\n  scrollHorizontal(left) {\r\n    this.scrollLeft = left\r\n    this.element.scrollLeft = left\r\n\r\n    this.dispatch('scroll-horizontal', left)\r\n  }\r\n\r\n  registerDataPipelineHandler(handler, priority) {\r\n    if (typeof priority !== 'undefined') {\r\n      this.dataPipeline.push({ handler, priority })\r\n      this.dataPipeline.sort((a, b) => {\r\n        return a.priority - b.priority\r\n      })\r\n    } else {\r\n      console.error('Data pipeline handlers must have a priority in order to be registered')\r\n    }\r\n  }\r\n\r\n  registerDisplayPipelineHandler(handler, priority) {\r\n    if (typeof priority !== 'undefined') {\r\n      this.displayPipeline.push({ handler, priority })\r\n      this.displayPipeline.sort((a, b) => {\r\n        return a.priority - b.priority\r\n      })\r\n    } else {\r\n      console.error('Display pipeline handlers must have a priority in order to be registered')\r\n    }\r\n  }\r\n\r\n  // set active data set\r\n  refreshActiveData(handler, skipStage, renderInPosition) {\r\n    const table = this.table\r\n    let stage = ''\r\n    let index = 0\r\n    const cascadeOrder = ['all', 'dataPipeline', 'display', 'displayPipeline', 'end']\r\n\r\n    if (!this.table.destroyed) {\r\n      if (typeof handler === 'function') {\r\n        index = this.dataPipeline.findIndex((item) => {\r\n          return item.handler === handler\r\n        })\r\n\r\n        if (index > -1) {\r\n          stage = 'dataPipeline'\r\n\r\n          if (skipStage) {\r\n            if (index == this.dataPipeline.length - 1) {\r\n              stage = 'display'\r\n            } else {\r\n              index++\r\n            }\r\n          }\r\n        } else {\r\n          index = this.displayPipeline.findIndex((item) => {\r\n            return item.handler === handler\r\n          })\r\n\r\n          if (index > -1) {\r\n            stage = 'displayPipeline'\r\n\r\n            if (skipStage) {\r\n              if (index == this.displayPipeline.length - 1) {\r\n                stage = 'end'\r\n              } else {\r\n                index++\r\n              }\r\n            }\r\n          } else {\r\n            console.error('Unable to refresh data, invalid handler provided', handler)\r\n            return\r\n          }\r\n        }\r\n      } else {\r\n        stage = handler || 'all'\r\n        index = 0\r\n      }\r\n\r\n      if (this.redrawBlock) {\r\n        if (\r\n          !this.redrawBlockRestoreConfig ||\r\n          (this.redrawBlockRestoreConfig &&\r\n            ((this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index) ||\r\n              cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage)))\r\n        ) {\r\n          this.redrawBlockRestoreConfig = {\r\n            handler,\r\n            skipStage,\r\n            renderInPosition,\r\n            stage,\r\n            index\r\n          }\r\n        }\r\n      } else {\r\n        if (Helpers.elVisible(this.element)) {\r\n          if (renderInPosition) {\r\n            this.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition))\r\n          } else {\r\n            this.refreshPipelines(handler, stage, index, renderInPosition)\r\n\r\n            if (!handler) {\r\n              this.table.columnManager.renderer.renderColumns()\r\n            }\r\n\r\n            this.renderTable()\r\n\r\n            if (table.options.layoutColumnsOnNewData) {\r\n              this.table.columnManager.redraw(true)\r\n            }\r\n          }\r\n        } else {\r\n          this.refreshPipelines(handler, stage, index, renderInPosition)\r\n        }\r\n\r\n        this.dispatch('data-refreshed')\r\n      }\r\n    }\r\n  }\r\n\r\n  refreshPipelines(handler, stage, index, renderInPosition) {\r\n    this.dispatch('data-refreshing')\r\n\r\n    if (!handler || !this.activeRowsPipeline[0]) {\r\n      this.activeRowsPipeline[0] = this.rows.slice(0)\r\n    }\r\n\r\n    // cascade through data refresh stages\r\n    switch (stage) {\r\n      case 'all':\r\n      // handle case where all data needs refreshing\r\n\r\n      case 'dataPipeline':\r\n        for (let i = index; i < this.dataPipeline.length; i++) {\r\n          const result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0))\r\n\r\n          this.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0)\r\n        }\r\n\r\n        this.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length])\r\n\r\n      case 'display':\r\n        index = 0\r\n        this.resetDisplayRows()\r\n\r\n      case 'displayPipeline':\r\n        for (let i = index; i < this.displayPipeline.length; i++) {\r\n          const result = this.displayPipeline[i].handler(\r\n            (i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0),\r\n            renderInPosition\r\n          )\r\n\r\n          this.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i)\r\n        }\r\n\r\n      case 'end':\r\n        // case to handle scenario when trying to skip past end stage\r\n        this.regenerateRowPositions()\r\n    }\r\n\r\n    if (this.getDisplayRows().length) {\r\n      this._clearPlaceholder()\r\n    }\r\n  }\r\n\r\n  // regenerate row positions\r\n  regenerateRowPositions() {\r\n    const rows = this.getDisplayRows()\r\n    let index = 1\r\n\r\n    rows.forEach((row) => {\r\n      if (row.type === 'row') {\r\n        row.setPosition(index)\r\n        index++\r\n      }\r\n    })\r\n  }\r\n\r\n  setActiveRows(activeRows) {\r\n    this.activeRows = this.activeRows = Object.assign([], activeRows)\r\n    this.activeRowsCount = this.activeRows.length\r\n  }\r\n\r\n  // reset display rows array\r\n  resetDisplayRows() {\r\n    this.displayRows = []\r\n\r\n    this.displayRows.push(this.activeRows.slice(0))\r\n\r\n    this.displayRowsCount = this.displayRows[0].length\r\n  }\r\n\r\n  // set display row pipeline data\r\n  setDisplayRows(displayRows, index) {\r\n    this.displayRows[index] = displayRows\r\n\r\n    if (index == this.displayRows.length - 1) {\r\n      this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length\r\n    }\r\n  }\r\n\r\n  getDisplayRows(index) {\r\n    if (typeof index === 'undefined') {\r\n      return this.displayRows.length ? this.displayRows[this.displayRows.length - 1] : []\r\n    } else {\r\n      return this.displayRows[index] || []\r\n    }\r\n  }\r\n\r\n  getVisibleRows(chain, viewable) {\r\n    let rows = Object.assign([], this.renderer.visibleRows(!viewable))\r\n\r\n    if (chain) {\r\n      rows = this.chain('rows-visible', [viewable], rows, rows)\r\n    }\r\n\r\n    return rows\r\n  }\r\n\r\n  // repeat action across display rows\r\n  displayRowIterator(callback) {\r\n    this.activeRowsPipeline.forEach(callback)\r\n    this.displayRows.forEach(callback)\r\n\r\n    this.displayRowsCount = this.displayRows[this.displayRows.length - 1].length\r\n  }\r\n\r\n  // return only actual rows (not group headers etc)\r\n  getRows(type) {\r\n    let rows = []\r\n\r\n    switch (type) {\r\n      case 'active':\r\n        rows = this.activeRows\r\n        break\r\n\r\n      case 'display':\r\n        rows = this.table.rowManager.getDisplayRows()\r\n        break\r\n\r\n      case 'visible':\r\n        rows = this.getVisibleRows(false, true)\r\n        break\r\n\r\n      default:\r\n        rows = this.chain('rows-retrieve', type, null, this.rows) || this.rows\r\n    }\r\n\r\n    return rows\r\n  }\r\n\r\n  /// ////////////// Table Rendering /////////////////\r\n  // trigger rerender of table in current position\r\n  reRenderInPosition(callback) {\r\n    if (this.redrawBlock) {\r\n      if (callback) {\r\n        callback()\r\n      } else {\r\n        this.redrawBlockRenderInPosition = true\r\n      }\r\n    } else {\r\n      this.dispatchExternal('renderStarted')\r\n\r\n      this.renderer.rerenderRows(callback)\r\n\r\n      if (!this.fixedHeight) {\r\n        this.adjustTableSize()\r\n      }\r\n\r\n      this.scrollBarCheck()\r\n\r\n      this.dispatchExternal('renderComplete')\r\n    }\r\n  }\r\n\r\n  scrollBarCheck() {\r\n    let scrollbarWidth = 0\r\n\r\n    // adjust for vertical scrollbar moving table when present\r\n    if (this.element.scrollHeight > this.element.clientHeight) {\r\n      scrollbarWidth = this.element.offsetWidth - this.element.clientWidth\r\n    }\r\n\r\n    if (scrollbarWidth !== this.scrollbarWidth) {\r\n      this.scrollbarWidth = scrollbarWidth\r\n      this.dispatch('scrollbar-vertical', scrollbarWidth)\r\n    }\r\n  }\r\n\r\n  initializeRenderer() {\r\n    let renderClass\r\n\r\n    const renderers = {\r\n      virtual: RendererVirtualDomVertical,\r\n      basic: RendererBasicVertical\r\n    }\r\n\r\n    if (typeof this.table.options.renderVertical === 'string') {\r\n      renderClass = renderers[this.table.options.renderVertical]\r\n    } else {\r\n      renderClass = this.table.options.renderVertical\r\n    }\r\n\r\n    if (renderClass) {\r\n      this.renderMode = this.table.options.renderVertical\r\n\r\n      this.renderer = new renderClass(this.table, this.element, this.tableElement)\r\n      this.renderer.initialize()\r\n\r\n      if (\r\n        (this.table.element.clientHeight || this.table.options.height) &&\r\n        !(this.table.options.minHeight && this.table.options.maxHeight)\r\n      ) {\r\n        this.fixedHeight = true\r\n      } else {\r\n        this.fixedHeight = false\r\n      }\r\n    } else {\r\n      console.error('Unable to find matching renderer:', this.table.options.renderVertical)\r\n    }\r\n  }\r\n\r\n  getRenderMode() {\r\n    return this.renderMode\r\n  }\r\n\r\n  renderTable() {\r\n    this.dispatchExternal('renderStarted')\r\n\r\n    this.element.scrollTop = 0\r\n\r\n    this._clearTable()\r\n\r\n    if (this.displayRowsCount) {\r\n      this.renderer.renderRows()\r\n\r\n      if (this.firstRender) {\r\n        this.firstRender = false\r\n\r\n        if (!this.fixedHeight) {\r\n          this.adjustTableSize()\r\n        }\r\n\r\n        this.layoutRefresh(true)\r\n      }\r\n    } else {\r\n      this.renderEmptyScroll()\r\n    }\r\n\r\n    if (!this.fixedHeight) {\r\n      this.adjustTableSize()\r\n    }\r\n\r\n    this.dispatch('table-layout')\r\n\r\n    if (!this.displayRowsCount) {\r\n      this._showPlaceholder()\r\n    }\r\n\r\n    this.scrollBarCheck()\r\n\r\n    this.dispatchExternal('renderComplete')\r\n  }\r\n\r\n  // show scrollbars on empty table div\r\n  renderEmptyScroll() {\r\n    if (this.placeholder) {\r\n      this.tableElement.style.display = 'none'\r\n    } else {\r\n      this.tableElement.style.minWidth = this.table.columnManager.getWidth() + 'px'\r\n      // this.tableElement.style.minHeight = \"1px\";\r\n      // this.tableElement.style.visibility = \"hidden\";\r\n    }\r\n  }\r\n\r\n  _clearTable() {\r\n    this._clearPlaceholder()\r\n\r\n    this.scrollTop = 0\r\n    this.scrollLeft = 0\r\n\r\n    this.renderer.clearRows()\r\n  }\r\n\r\n  tableEmpty() {\r\n    this.renderEmptyScroll()\r\n    this._showPlaceholder()\r\n  }\r\n\r\n  checkPlaceholder() {\r\n    if (this.displayRowsCount) {\r\n      this._clearPlaceholder()\r\n    } else {\r\n      this.tableEmpty()\r\n    }\r\n  }\r\n\r\n  _showPlaceholder() {\r\n    if (this.placeholder) {\r\n      if (this.placeholder && this.placeholder.parentNode) {\r\n        this.placeholder.parentNode.removeChild(this.placeholder)\r\n      }\r\n\r\n      this.initializePlaceholder()\r\n\r\n      this.placeholder.setAttribute('tabulator-render-mode', this.renderMode)\r\n\r\n      this.getElement().appendChild(this.placeholder)\r\n      this._positionPlaceholder()\r\n\r\n      this.adjustTableSize()\r\n    }\r\n  }\r\n\r\n  _clearPlaceholder() {\r\n    if (this.placeholder && this.placeholder.parentNode) {\r\n      this.placeholder.parentNode.removeChild(this.placeholder)\r\n    }\r\n\r\n    // clear empty table placeholder min\r\n    this.tableElement.style.minWidth = ''\r\n    this.tableElement.style.display = ''\r\n  }\r\n\r\n  _positionPlaceholder() {\r\n    if (this.placeholder && this.placeholder.parentNode) {\r\n      this.placeholder.style.width = this.table.columnManager.getWidth() + 'px'\r\n      this.placeholderContents.style.width = this.table.rowManager.element.clientWidth + 'px'\r\n      this.placeholderContents.style.marginLeft = this.scrollLeft + 'px'\r\n    }\r\n  }\r\n\r\n  styleRow(row, index) {\r\n    const rowEl = row.getElement()\r\n\r\n    if (index % 2) {\r\n      rowEl.classList.add('tabulator-row-even')\r\n      rowEl.classList.remove('tabulator-row-odd')\r\n    } else {\r\n      rowEl.classList.add('tabulator-row-odd')\r\n      rowEl.classList.remove('tabulator-row-even')\r\n    }\r\n  }\r\n\r\n  // normalize height of active rows\r\n  normalizeHeight(force) {\r\n    this.activeRows.forEach(function (row) {\r\n      row.normalizeHeight(force)\r\n    })\r\n  }\r\n\r\n  // adjust the height of the table holder to fit in the Tabulator element\r\n  adjustTableSize() {\r\n    const initialHeight = this.element.clientHeight\r\n    let minHeight\r\n    let resized = false\r\n\r\n    if (this.renderer.verticalFillMode === 'fill') {\r\n      const otherHeight = Math.floor(\r\n        this.table.columnManager.getElement().getBoundingClientRect().height +\r\n          (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external\r\n            ? this.table.footerManager.getElement().getBoundingClientRect().height\r\n            : 0)\r\n      )\r\n\r\n      if (this.fixedHeight) {\r\n        minHeight = isNaN(this.table.options.minHeight)\r\n          ? this.table.options.minHeight\r\n          : this.table.options.minHeight + 'px'\r\n\r\n        const height = 'calc(100% - ' + otherHeight + 'px)'\r\n        this.element.style.minHeight = minHeight || 'calc(100% - ' + otherHeight + 'px)'\r\n        this.element.style.height = height\r\n        this.element.style.maxHeight = height\r\n      } else {\r\n        this.element.style.height = ''\r\n        this.element.style.height = this.table.element.clientHeight - otherHeight + 'px'\r\n        this.element.scrollTop = this.scrollTop\r\n      }\r\n\r\n      this.renderer.resize()\r\n\r\n      // check if the table has changed size when dealing with variable height tables\r\n      if (!this.fixedHeight && initialHeight != this.element.clientHeight) {\r\n        resized = true\r\n        if (!this.redrawing) {\r\n          // prevent recursive redraws\r\n          this.redrawing = true\r\n          if (this.subscribed('table-resize')) {\r\n            this.dispatch('table-resize')\r\n          } else {\r\n            this.redraw()\r\n          }\r\n          this.redrawing = false\r\n        }\r\n      }\r\n\r\n      this.scrollBarCheck()\r\n    }\r\n\r\n    this._positionPlaceholder()\r\n    return resized\r\n  }\r\n\r\n  // reinitialize all rows\r\n  reinitialize() {\r\n    this.rows.forEach(function (row) {\r\n      row.reinitialize(true)\r\n    })\r\n  }\r\n\r\n  // prevent table from being redrawn\r\n  blockRedraw() {\r\n    this.redrawBlock = true\r\n    this.redrawBlockRestoreConfig = false\r\n  }\r\n\r\n  // restore table redrawing\r\n  restoreRedraw() {\r\n    this.redrawBlock = false\r\n\r\n    if (this.redrawBlockRestoreConfig) {\r\n      this.refreshActiveData(\r\n        this.redrawBlockRestoreConfig.handler,\r\n        this.redrawBlockRestoreConfig.skipStage,\r\n        this.redrawBlockRestoreConfig.renderInPosition\r\n      )\r\n\r\n      this.redrawBlockRestoreConfig = false\r\n    } else {\r\n      if (this.redrawBlockRenderInPosition) {\r\n        this.reRenderInPosition()\r\n      }\r\n    }\r\n\r\n    this.redrawBlockRenderInPosition = false\r\n  }\r\n\r\n  // redraw table\r\n  redraw(force) {\r\n    this.adjustTableSize()\r\n    this.table.tableWidth = this.table.element.clientWidth\r\n\r\n    if (!force) {\r\n      this.reRenderInPosition()\r\n      this.scrollHorizontal(this.scrollLeft)\r\n    } else {\r\n      this.renderTable()\r\n    }\r\n  }\r\n\r\n  resetScroll() {\r\n    this.element.scrollLeft = 0\r\n    this.element.scrollTop = 0\r\n\r\n    if (this.table.browser === 'ie') {\r\n      const event = document.createEvent('Event')\r\n      event.initEvent('scroll', false, true)\r\n      this.element.dispatchEvent(event)\r\n    } else {\r\n      this.element.dispatchEvent(new Event('scroll'))\r\n    }\r\n  }\r\n}\r\n","import CoreFeature from './CoreFeature.js'\r\n\r\nexport default class FooterManager extends CoreFeature {\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.active = false\r\n    this.element = this.createElement() // containing element\r\n    this.containerElement = this.createContainerElement() // containing element\r\n    this.external = false\r\n  }\r\n\r\n  initialize() {\r\n    this.initializeElement()\r\n  }\r\n\r\n  createElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-footer')\r\n\r\n    return el\r\n  }\r\n\r\n  createContainerElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-footer-contents')\r\n\r\n    this.element.appendChild(el)\r\n\r\n    return el\r\n  }\r\n\r\n  initializeElement() {\r\n    if (this.table.options.footerElement) {\r\n      switch (typeof this.table.options.footerElement) {\r\n        case 'string':\r\n          if (this.table.options.footerElement[0] === '<') {\r\n            this.containerElement.innerHTML = this.table.options.footerElement\r\n          } else {\r\n            this.external = true\r\n            this.containerElement = document.querySelector(this.table.options.footerElement)\r\n          }\r\n          break\r\n\r\n        default:\r\n          this.element = this.table.options.footerElement\r\n          break\r\n      }\r\n    }\r\n  }\r\n\r\n  getElement() {\r\n    return this.element\r\n  }\r\n\r\n  append(element) {\r\n    this.activate()\r\n\r\n    this.containerElement.appendChild(element)\r\n    this.table.rowManager.adjustTableSize()\r\n  }\r\n\r\n  prepend(element) {\r\n    this.activate()\r\n\r\n    this.element.insertBefore(element, this.element.firstChild)\r\n    this.table.rowManager.adjustTableSize()\r\n  }\r\n\r\n  remove(element) {\r\n    element.parentNode.removeChild(element)\r\n    this.deactivate()\r\n  }\r\n\r\n  deactivate(force) {\r\n    if (!this.element.firstChild || force) {\r\n      if (!this.external) {\r\n        this.element.parentNode.removeChild(this.element)\r\n      }\r\n      this.active = false\r\n    }\r\n  }\r\n\r\n  activate() {\r\n    if (!this.active) {\r\n      this.active = true\r\n      if (!this.external) {\r\n        this.table.element.appendChild(this.getElement())\r\n        this.table.element.style.display = ''\r\n      }\r\n    }\r\n  }\r\n\r\n  redraw() {\r\n    this.dispatch('footer-redraw')\r\n  }\r\n}\r\n","import CoreFeature from '../CoreFeature.js'\r\nimport Row from '../row/Row.js'\r\n\r\nexport default class InteractionManager extends CoreFeature {\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.el = null\r\n\r\n    this.abortClasses = ['tabulator-headers', 'tabulator-table']\r\n\r\n    this.previousTargets = {}\r\n\r\n    this.listeners = [\r\n      'click',\r\n      'dblclick',\r\n      'contextmenu',\r\n      'mouseenter',\r\n      'mouseleave',\r\n      'mouseover',\r\n      'mouseout',\r\n      'mousemove',\r\n      'mouseup',\r\n      'mousedown',\r\n      'touchstart',\r\n      'touchend'\r\n    ]\r\n\r\n    this.componentMap = {\r\n      'tabulator-cell': 'cell',\r\n      'tabulator-row': 'row',\r\n      'tabulator-group': 'group',\r\n      'tabulator-col': 'column'\r\n    }\r\n\r\n    this.pseudoTrackers = {\r\n      row: {\r\n        subscriber: null,\r\n        target: null\r\n      },\r\n      cell: {\r\n        subscriber: null,\r\n        target: null\r\n      },\r\n      group: {\r\n        subscriber: null,\r\n        target: null\r\n      },\r\n      column: {\r\n        subscriber: null,\r\n        target: null\r\n      }\r\n    }\r\n\r\n    this.pseudoTracking = false\r\n  }\r\n\r\n  initialize() {\r\n    this.el = this.table.element\r\n\r\n    this.buildListenerMap()\r\n    this.bindSubscriptionWatchers()\r\n  }\r\n\r\n  buildListenerMap() {\r\n    const listenerMap = {}\r\n\r\n    this.listeners.forEach((listener) => {\r\n      listenerMap[listener] = {\r\n        handler: null,\r\n        components: []\r\n      }\r\n    })\r\n\r\n    this.listeners = listenerMap\r\n  }\r\n\r\n  bindPseudoEvents() {\r\n    Object.keys(this.pseudoTrackers).forEach((key) => {\r\n      this.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key)\r\n      this.subscribe(key + '-mouseover', this.pseudoTrackers[key].subscriber)\r\n    })\r\n\r\n    this.pseudoTracking = true\r\n  }\r\n\r\n  pseudoMouseEnter(key, e, target) {\r\n    if (this.pseudoTrackers[key].target !== target) {\r\n      if (this.pseudoTrackers[key].target) {\r\n        this.dispatch(key + '-mouseleave', e, this.pseudoTrackers[key].target)\r\n      }\r\n\r\n      this.pseudoMouseLeave(key, e)\r\n\r\n      this.pseudoTrackers[key].target = target\r\n\r\n      this.dispatch(key + '-mouseenter', e, target)\r\n    }\r\n  }\r\n\r\n  pseudoMouseLeave(key, e) {\r\n    let leaveList = Object.keys(this.pseudoTrackers)\r\n    const linkedKeys = {\r\n      row: ['cell'],\r\n      cell: ['row']\r\n    }\r\n\r\n    leaveList = leaveList.filter((item) => {\r\n      const links = linkedKeys[key]\r\n      return item !== key && (!links || (links && !links.includes(item)))\r\n    })\r\n\r\n    leaveList.forEach((key) => {\r\n      const target = this.pseudoTrackers[key].target\r\n\r\n      if (this.pseudoTrackers[key].target) {\r\n        this.dispatch(key + '-mouseleave', e, target)\r\n\r\n        this.pseudoTrackers[key].target = null\r\n      }\r\n    })\r\n  }\r\n\r\n  bindSubscriptionWatchers() {\r\n    const listeners = Object.keys(this.listeners)\r\n    const components = Object.values(this.componentMap)\r\n\r\n    for (const comp of components) {\r\n      for (const listener of listeners) {\r\n        const key = comp + '-' + listener\r\n\r\n        this.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener))\r\n      }\r\n    }\r\n\r\n    this.subscribe('table-destroy', this.clearWatchers.bind(this))\r\n  }\r\n\r\n  subscriptionChanged(component, key, added) {\r\n    const listener = this.listeners[key].components\r\n    const index = listener.indexOf(component)\r\n    let changed = false\r\n\r\n    if (added) {\r\n      if (index === -1) {\r\n        listener.push(component)\r\n        changed = true\r\n      }\r\n    } else {\r\n      if (!this.subscribed(component + '-' + key)) {\r\n        if (index > -1) {\r\n          listener.splice(index, 1)\r\n          changed = true\r\n        }\r\n      }\r\n    }\r\n\r\n    if ((key === 'mouseenter' || key === 'mouseleave') && !this.pseudoTracking) {\r\n      this.bindPseudoEvents()\r\n    }\r\n\r\n    if (changed) {\r\n      this.updateEventListeners()\r\n    }\r\n  }\r\n\r\n  updateEventListeners() {\r\n    for (const key in this.listeners) {\r\n      const listener = this.listeners[key]\r\n\r\n      if (listener.components.length) {\r\n        if (!listener.handler) {\r\n          listener.handler = this.track.bind(this, key)\r\n          this.el.addEventListener(key, listener.handler)\r\n          // this.el.addEventListener(key, listener.handler, {passive: true})\r\n        }\r\n      } else {\r\n        if (listener.handler) {\r\n          this.el.removeEventListener(key, listener.handler)\r\n          listener.handler = null\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  track(type, e) {\r\n    const path = (e.composedPath && e.composedPath()) || e.path\r\n\r\n    let targets = this.findTargets(path)\r\n    targets = this.bindComponents(type, targets)\r\n\r\n    this.triggerEvents(type, e, targets)\r\n\r\n    if (this.pseudoTracking && (type == 'mouseover' || type == 'mouseleave') && !Object.keys(targets).length) {\r\n      this.pseudoMouseLeave('none', e)\r\n    }\r\n  }\r\n\r\n  findTargets(path) {\r\n    const targets = {}\r\n\r\n    const componentMap = Object.keys(this.componentMap)\r\n\r\n    for (const el of path) {\r\n      const classList = el.classList ? [...el.classList] : []\r\n\r\n      const abort = classList.filter((item) => {\r\n        return this.abortClasses.includes(item)\r\n      })\r\n\r\n      if (abort.length) {\r\n        break\r\n      }\r\n\r\n      const elTargets = classList.filter((item) => {\r\n        return componentMap.includes(item)\r\n      })\r\n\r\n      for (const target of elTargets) {\r\n        if (!targets[this.componentMap[target]]) {\r\n          targets[this.componentMap[target]] = el\r\n        }\r\n      }\r\n    }\r\n\r\n    if (targets.group && targets.group === targets.row) {\r\n      delete targets.row\r\n    }\r\n\r\n    return targets\r\n  }\r\n\r\n  bindComponents(type, targets) {\r\n    // ensure row component is looked up before cell\r\n    const keys = Object.keys(targets).reverse()\r\n    const listener = this.listeners[type]\r\n    const matches = {}\r\n    const output = {}\r\n    const targetMatches = {}\r\n\r\n    for (const key of keys) {\r\n      let component\r\n      const target = targets[key]\r\n      const previousTarget = this.previousTargets[key]\r\n\r\n      if (previousTarget && previousTarget.target === target) {\r\n        component = previousTarget.component\r\n      } else {\r\n        switch (key) {\r\n          case 'row':\r\n          case 'group':\r\n            if (\r\n              listener.components.includes('row') ||\r\n              listener.components.includes('cell') ||\r\n              listener.components.includes('group')\r\n            ) {\r\n              const rows = this.table.rowManager.getVisibleRows(true)\r\n\r\n              component = rows.find((row) => {\r\n                return row.getElement() === target\r\n              })\r\n\r\n              if (targets.row && targets.row.parentNode && targets.row.parentNode.closest('.tabulator-row')) {\r\n                targets[key] = false\r\n              }\r\n            }\r\n            break\r\n\r\n          case 'column':\r\n            if (listener.components.includes('column')) {\r\n              component = this.table.columnManager.findColumn(target)\r\n            }\r\n            break\r\n\r\n          case 'cell':\r\n            if (listener.components.includes('cell')) {\r\n              if (matches.row instanceof Row) {\r\n                component = matches.row.findCell(target)\r\n              } else {\r\n                if (targets.row) {\r\n                  console.warn(\r\n                    'Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?'\r\n                  )\r\n                }\r\n              }\r\n            }\r\n            break\r\n        }\r\n      }\r\n\r\n      if (component) {\r\n        matches[key] = component\r\n        targetMatches[key] = {\r\n          target,\r\n          component\r\n        }\r\n      }\r\n    }\r\n\r\n    this.previousTargets = targetMatches\r\n\r\n    // reverse order keys are set in so events trigger in correct sequence\r\n    Object.keys(targets).forEach((key) => {\r\n      const value = matches[key]\r\n      output[key] = value\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  triggerEvents(type, e, targets) {\r\n    const listener = this.listeners[type]\r\n\r\n    for (const key in targets) {\r\n      if (targets[key] && listener.components.includes(key)) {\r\n        this.dispatch(key + '-' + type, e, targets[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  clearWatchers() {\r\n    for (const key in this.listeners) {\r\n      const listener = this.listeners[key]\r\n\r\n      if (listener.handler) {\r\n        this.el.removeEventListener(key, listener.handler)\r\n        listener.handler = null\r\n      }\r\n    }\r\n  }\r\n}\r\n","export default class ComponentFunctionBinder {\r\n  constructor(table) {\r\n    this.table = table\r\n\r\n    this.bindings = {}\r\n  }\r\n\r\n  bind(type, funcName, handler) {\r\n    if (!this.bindings[type]) {\r\n      this.bindings[type] = {}\r\n    }\r\n\r\n    if (this.bindings[type][funcName]) {\r\n      console.warn(\r\n        'Unable to bind component handler, a matching function name is already bound',\r\n        type,\r\n        funcName,\r\n        handler\r\n      )\r\n    } else {\r\n      this.bindings[type][funcName] = handler\r\n    }\r\n  }\r\n\r\n  handle(type, component, name) {\r\n    if (this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function') {\r\n      return this.bindings[type][name].bind(null, component)\r\n    } else {\r\n      if (name !== 'then' && typeof name === 'string' && !name.startsWith('_')) {\r\n        if (this.table.options.debugInvalidComponentFuncs) {\r\n          console.error(\r\n            'The ' +\r\n              type +\r\n              ' component does not have a ' +\r\n              name +\r\n              ' function, have you checked that you have the correct Tabulator module installed?'\r\n          )\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import CoreFeature from '../CoreFeature.js'\r\n\r\nexport default class DataLoader extends CoreFeature {\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.requestOrder = 0 // prevent requests coming out of sequence if overridden by another load request\r\n    this.loading = false\r\n  }\r\n\r\n  initialize() {}\r\n\r\n  load(data, params, config, replace, silent, columnsChanged) {\r\n    const requestNo = ++this.requestOrder\r\n\r\n    if (this.table.destroyed) {\r\n      return Promise.resolve()\r\n    }\r\n\r\n    this.dispatchExternal('dataLoading', data)\r\n\r\n    // parse json data to array\r\n    if (data && (data.indexOf('{') == 0 || data.indexOf('[') == 0)) {\r\n      data = JSON.parse(data)\r\n    }\r\n\r\n    if (this.confirm('data-loading', [data, params, config, silent])) {\r\n      this.loading = true\r\n\r\n      if (!silent) {\r\n        this.alertLoader()\r\n      }\r\n\r\n      // get params for request\r\n      params = this.chain('data-params', [data, config, silent], params || {}, params || {})\r\n\r\n      params = this.mapParams(params, this.table.options.dataSendParams)\r\n\r\n      const result = this.chain('data-load', [data, params, config, silent], false, Promise.resolve([]))\r\n\r\n      return result\r\n        .then((response) => {\r\n          if (!this.table.destroyed) {\r\n            if (!Array.isArray(response) && typeof response === 'object') {\r\n              response = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams))\r\n            }\r\n\r\n            const rowData = this.chain('data-loaded', [response], null, response)\r\n\r\n            if (requestNo == this.requestOrder) {\r\n              this.clearAlert()\r\n\r\n              if (rowData !== false) {\r\n                this.dispatchExternal('dataLoaded', rowData)\r\n                this.table.rowManager.setData(\r\n                  rowData,\r\n                  replace,\r\n                  typeof columnsChanged === 'undefined' ? !replace : columnsChanged\r\n                )\r\n              }\r\n            } else {\r\n              console.warn(\r\n                'Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made'\r\n              )\r\n            }\r\n          } else {\r\n            console.warn('Data Load Response Blocked - Table has been destroyed')\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error('Data Load Error: ', error)\r\n          this.dispatchExternal('dataLoadError', error)\r\n\r\n          if (!silent) {\r\n            this.alertError()\r\n          }\r\n\r\n          setTimeout(() => {\r\n            this.clearAlert()\r\n          }, this.table.options.dataLoaderErrorTimeout)\r\n        })\r\n        .finally(() => {\r\n          this.loading = false\r\n        })\r\n    } else {\r\n      this.dispatchExternal('dataLoaded', data)\r\n\r\n      if (!data) {\r\n        data = []\r\n      }\r\n\r\n      this.table.rowManager.setData(data, replace, typeof columnsChanged === 'undefined' ? !replace : columnsChanged)\r\n      return Promise.resolve()\r\n    }\r\n  }\r\n\r\n  mapParams(params, map) {\r\n    const output = {}\r\n\r\n    for (const key in params) {\r\n      output[map.hasOwnProperty(key) ? map[key] : key] = params[key]\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  objectInvert(obj) {\r\n    const output = {}\r\n\r\n    for (const key in obj) {\r\n      output[obj[key]] = key\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  blockActiveLoad() {\r\n    this.requestOrder++\r\n  }\r\n\r\n  alertLoader() {\r\n    const shouldLoad =\r\n      typeof this.table.options.dataLoader === 'function'\r\n        ? this.table.options.dataLoader()\r\n        : this.table.options.dataLoader\r\n\r\n    if (shouldLoad) {\r\n      this.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText('data|loading'))\r\n    }\r\n  }\r\n\r\n  alertError() {\r\n    this.table.alertManager.alert(this.table.options.dataLoaderError || this.langText('data|error'), 'error')\r\n  }\r\n\r\n  clearAlert() {\r\n    this.table.alertManager.clear()\r\n  }\r\n}\r\n","export default class ExternalEventBus {\r\n  constructor(table, optionsList, debug) {\r\n    this.table = table\r\n    this.events = {}\r\n    this.optionsList = optionsList || {}\r\n    this.subscriptionNotifiers = {}\r\n\r\n    this.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this)\r\n    this.debug = debug\r\n  }\r\n\r\n  subscriptionChange(key, callback) {\r\n    if (!this.subscriptionNotifiers[key]) {\r\n      this.subscriptionNotifiers[key] = []\r\n    }\r\n\r\n    this.subscriptionNotifiers[key].push(callback)\r\n\r\n    if (this.subscribed(key)) {\r\n      this._notifySubscriptionChange(key, true)\r\n    }\r\n  }\r\n\r\n  subscribe(key, callback) {\r\n    if (!this.events[key]) {\r\n      this.events[key] = []\r\n    }\r\n\r\n    this.events[key].push(callback)\r\n\r\n    this._notifySubscriptionChange(key, true)\r\n  }\r\n\r\n  unsubscribe(key, callback) {\r\n    let index\r\n\r\n    if (this.events[key]) {\r\n      if (callback) {\r\n        index = this.events[key].findIndex((item) => {\r\n          return item === callback\r\n        })\r\n\r\n        if (index > -1) {\r\n          this.events[key].splice(index, 1)\r\n        } else {\r\n          console.warn('Cannot remove event, no matching event found:', key, callback)\r\n          return\r\n        }\r\n      } else {\r\n        delete this.events[key]\r\n      }\r\n    } else {\r\n      console.warn('Cannot remove event, no events set on:', key)\r\n      return\r\n    }\r\n\r\n    this._notifySubscriptionChange(key, false)\r\n  }\r\n\r\n  subscribed(key) {\r\n    return this.events[key] && this.events[key].length\r\n  }\r\n\r\n  _notifySubscriptionChange(key, subscribed) {\r\n    const notifiers = this.subscriptionNotifiers[key]\r\n\r\n    if (notifiers) {\r\n      notifiers.forEach((callback) => {\r\n        callback(subscribed)\r\n      })\r\n    }\r\n  }\r\n\r\n  _dispatch() {\r\n    const args = Array.from(arguments)\r\n    const key = args.shift()\r\n    let result\r\n\r\n    if (this.events[key]) {\r\n      this.events[key].forEach((callback, i) => {\r\n        const callResult = callback.apply(this.table, args)\r\n\r\n        if (!i) {\r\n          result = callResult\r\n        }\r\n      })\r\n    }\r\n\r\n    return result\r\n  }\r\n\r\n  _debugDispatch() {\r\n    const args = Array.from(arguments)\r\n    const key = args[0]\r\n\r\n    args[0] = 'ExternalEvent:' + args[0]\r\n\r\n    if (this.debug === true || this.debug.includes(key)) {\r\n      console.log(...args)\r\n    }\r\n\r\n    return this._dispatch(...arguments)\r\n  }\r\n}\r\n","export default class InternalEventBus {\r\n  constructor(debug) {\r\n    this.events = {}\r\n    this.subscriptionNotifiers = {}\r\n\r\n    this.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this)\r\n    this.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this)\r\n    this.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this)\r\n    this.debug = debug\r\n  }\r\n\r\n  subscriptionChange(key, callback) {\r\n    if (!this.subscriptionNotifiers[key]) {\r\n      this.subscriptionNotifiers[key] = []\r\n    }\r\n\r\n    this.subscriptionNotifiers[key].push(callback)\r\n\r\n    if (this.subscribed(key)) {\r\n      this._notifySubscriptionChange(key, true)\r\n    }\r\n  }\r\n\r\n  subscribe(key, callback, priority = 10000) {\r\n    if (!this.events[key]) {\r\n      this.events[key] = []\r\n    }\r\n\r\n    this.events[key].push({ callback, priority })\r\n\r\n    this.events[key].sort((a, b) => {\r\n      return a.priority - b.priority\r\n    })\r\n\r\n    this._notifySubscriptionChange(key, true)\r\n  }\r\n\r\n  unsubscribe(key, callback) {\r\n    let index\r\n\r\n    if (this.events[key]) {\r\n      if (callback) {\r\n        index = this.events[key].findIndex((item) => {\r\n          return item.callback === callback\r\n        })\r\n\r\n        if (index > -1) {\r\n          this.events[key].splice(index, 1)\r\n        } else {\r\n          console.warn('Cannot remove event, no matching event found:', key, callback)\r\n          return\r\n        }\r\n      }\r\n    } else {\r\n      console.warn('Cannot remove event, no events set on:', key)\r\n      return\r\n    }\r\n\r\n    this._notifySubscriptionChange(key, false)\r\n  }\r\n\r\n  subscribed(key) {\r\n    return this.events[key] && this.events[key].length\r\n  }\r\n\r\n  _chain(key, args, initialValue, fallback) {\r\n    let value = initialValue\r\n\r\n    if (!Array.isArray(args)) {\r\n      args = [args]\r\n    }\r\n\r\n    if (this.subscribed(key)) {\r\n      this.events[key].forEach((subscriber, i) => {\r\n        value = subscriber.callback.apply(this, args.concat([value]))\r\n      })\r\n\r\n      return value\r\n    } else {\r\n      return typeof fallback === 'function' ? fallback() : fallback\r\n    }\r\n  }\r\n\r\n  _confirm(key, args) {\r\n    let confirmed = false\r\n\r\n    if (!Array.isArray(args)) {\r\n      args = [args]\r\n    }\r\n\r\n    if (this.subscribed(key)) {\r\n      this.events[key].forEach((subscriber, i) => {\r\n        if (subscriber.callback.apply(this, args)) {\r\n          confirmed = true\r\n        }\r\n      })\r\n    }\r\n\r\n    return confirmed\r\n  }\r\n\r\n  _notifySubscriptionChange(key, subscribed) {\r\n    const notifiers = this.subscriptionNotifiers[key]\r\n\r\n    if (notifiers) {\r\n      notifiers.forEach((callback) => {\r\n        callback(subscribed)\r\n      })\r\n    }\r\n  }\r\n\r\n  _dispatch() {\r\n    const args = Array.from(arguments)\r\n    const key = args.shift()\r\n\r\n    if (this.events[key]) {\r\n      this.events[key].forEach((subscriber) => {\r\n        subscriber.callback.apply(this, args)\r\n      })\r\n    }\r\n  }\r\n\r\n  _debugDispatch() {\r\n    const args = Array.from(arguments)\r\n    const key = args[0]\r\n\r\n    args[0] = 'InternalEvent:' + key\r\n\r\n    if (this.debug === true || this.debug.includes(key)) {\r\n      console.log(...args)\r\n    }\r\n\r\n    return this._dispatch(...arguments)\r\n  }\r\n\r\n  _debugChain() {\r\n    const args = Array.from(arguments)\r\n    const key = args[0]\r\n\r\n    args[0] = 'InternalEvent:' + key\r\n\r\n    if (this.debug === true || this.debug.includes(key)) {\r\n      console.log(...args)\r\n    }\r\n\r\n    return this._chain(...arguments)\r\n  }\r\n\r\n  _debugConfirm() {\r\n    const args = Array.from(arguments)\r\n    const key = args[0]\r\n\r\n    args[0] = 'InternalEvent:' + key\r\n\r\n    if (this.debug === true || this.debug.includes(key)) {\r\n      console.log(...args)\r\n    }\r\n\r\n    return this._confirm(...arguments)\r\n  }\r\n}\r\n","import CoreFeature from '../CoreFeature.js'\r\n\r\nexport default class DeprecationAdvisor extends CoreFeature {\r\n  constructor(table) {\r\n    super(table)\r\n  }\r\n\r\n  _warnUser() {\r\n    if (this.options('debugDeprecation')) {\r\n      console.warn(...arguments)\r\n    }\r\n  }\r\n\r\n  check(oldOption, newOption, convert) {\r\n    let msg = ''\r\n\r\n    if (typeof this.options(oldOption) !== 'undefined') {\r\n      msg = 'Deprecated Setup Option - Use of the %c' + oldOption + '%c option is now deprecated'\r\n\r\n      if (newOption) {\r\n        msg = msg + ', Please use the %c' + newOption + '%c option instead'\r\n        this._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;', 'font-weight: bold;', 'font-weight: normal;')\r\n\r\n        if (convert) {\r\n          this.table.options[newOption] = this.table.options[oldOption]\r\n        }\r\n      } else {\r\n        this._warnUser(msg, 'font-weight: bold;', 'font-weight: normal;')\r\n      }\r\n\r\n      return false\r\n    } else {\r\n      return true\r\n    }\r\n  }\r\n\r\n  checkMsg(oldOption, msg) {\r\n    if (typeof this.options(oldOption) !== 'undefined') {\r\n      this._warnUser(\r\n        '%cDeprecated Setup Option - Use of the %c' + oldOption + ' %c option is now deprecated, ' + msg,\r\n        'font-weight: normal;',\r\n        'font-weight: bold;',\r\n        'font-weight: normal;'\r\n      )\r\n\r\n      return false\r\n    } else {\r\n      return true\r\n    }\r\n  }\r\n\r\n  msg(msg) {\r\n    this._warnUser(msg)\r\n  }\r\n}\r\n","import CoreFeature from '../CoreFeature.js'\r\n\r\nexport default class DependencyRegistry extends CoreFeature {\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.deps = {}\r\n\r\n    this.props = {}\r\n  }\r\n\r\n  initialize() {\r\n    this.deps = Object.assign({}, this.options('dependencies'))\r\n  }\r\n\r\n  lookup(key, prop, silent) {\r\n    if (Array.isArray(key)) {\r\n      for (const item of key) {\r\n        var match = this.lookup(item, prop, true)\r\n\r\n        if (match) {\r\n          break\r\n        }\r\n      }\r\n\r\n      if (match) {\r\n        return match\r\n      } else {\r\n        this.error(key)\r\n      }\r\n    } else {\r\n      if (prop) {\r\n        return this.lookupProp(key, prop, silent)\r\n      } else {\r\n        return this.lookupKey(key, silent)\r\n      }\r\n    }\r\n  }\r\n\r\n  lookupProp(key, prop, silent) {\r\n    let dependency\r\n\r\n    if (this.props[key] && this.props[key][prop]) {\r\n      return this.props[key][prop]\r\n    } else {\r\n      dependency = this.lookupKey(key, silent)\r\n\r\n      if (dependency) {\r\n        if (!this.props[key]) {\r\n          this.props[key] = {}\r\n        }\r\n\r\n        this.props[key][prop] = dependency[prop] || dependency\r\n        return this.props[key][prop]\r\n      }\r\n    }\r\n  }\r\n\r\n  lookupKey(key, silent) {\r\n    let dependency\r\n\r\n    if (this.deps[key]) {\r\n      dependency = this.deps[key]\r\n    } else if (window[key]) {\r\n      this.deps[key] = window[key]\r\n      dependency = this.deps[key]\r\n    } else {\r\n      if (!silent) {\r\n        this.error(key)\r\n      }\r\n    }\r\n\r\n    return dependency\r\n  }\r\n\r\n  error(key) {\r\n    console.error(\r\n      'Unable to find dependency',\r\n      key,\r\n      'Please check documentation and ensure you have imported the required library into your project'\r\n    )\r\n  }\r\n}\r\n","import CoreFeature from '../CoreFeature.js'\r\nimport Helpers from './Helpers.js'\r\n\r\nexport default class Popup extends CoreFeature {\r\n  constructor(table, element, parent) {\r\n    super(table)\r\n\r\n    this.element = element\r\n    this.container = this._lookupContainer()\r\n\r\n    this.parent = parent\r\n\r\n    this.reversedX = false\r\n    this.childPopup = null\r\n    this.blurable = false\r\n    this.blurCallback = null\r\n    this.blurEventsBound = false\r\n    this.renderedCallback = null\r\n\r\n    this.visible = false\r\n    this.hideable = true\r\n\r\n    this.element.classList.add('tabulator-popup-container')\r\n\r\n    this.blurEvent = this.hide.bind(this, false)\r\n    this.escEvent = this._escapeCheck.bind(this)\r\n\r\n    this.destroyBinding = this.tableDestroyed.bind(this)\r\n    this.destroyed = false\r\n  }\r\n\r\n  tableDestroyed() {\r\n    this.destroyed = true\r\n    this.hide(true)\r\n  }\r\n\r\n  _lookupContainer() {\r\n    let container = this.table.options.popupContainer\r\n\r\n    if (typeof container === 'string') {\r\n      container = document.querySelector(container)\r\n\r\n      if (!container) {\r\n        console.warn(\r\n          'Menu Error - no container element found matching selector:',\r\n          this.table.options.popupContainer,\r\n          '(defaulting to document body)'\r\n        )\r\n      }\r\n    } else if (container === true) {\r\n      container = this.table.element\r\n    }\r\n\r\n    if (container && !this._checkContainerIsParent(container)) {\r\n      container = false\r\n      console.warn(\r\n        'Menu Error - container element does not contain this table:',\r\n        this.table.options.popupContainer,\r\n        '(defaulting to document body)'\r\n      )\r\n    }\r\n\r\n    if (!container) {\r\n      container = document.body\r\n    }\r\n\r\n    return container\r\n  }\r\n\r\n  _checkContainerIsParent(container, element = this.table.element) {\r\n    if (container === element) {\r\n      return true\r\n    } else {\r\n      return element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false\r\n    }\r\n  }\r\n\r\n  renderCallback(callback) {\r\n    this.renderedCallback = callback\r\n  }\r\n\r\n  containerEventCoords(e) {\r\n    const touch = !(e instanceof MouseEvent)\r\n\r\n    let x = touch ? e.touches[0].pageX : e.pageX\r\n    let y = touch ? e.touches[0].pageY : e.pageY\r\n\r\n    if (this.container !== document.body) {\r\n      const parentOffset = Helpers.elOffset(this.container)\r\n\r\n      x -= parentOffset.left\r\n      y -= parentOffset.top\r\n    }\r\n\r\n    return { x, y }\r\n  }\r\n\r\n  elementPositionCoords(element, position = 'right') {\r\n    const offset = Helpers.elOffset(element)\r\n    let containerOffset\r\n    let x\r\n    let y\r\n\r\n    if (this.container !== document.body) {\r\n      containerOffset = Helpers.elOffset(this.container)\r\n\r\n      offset.left -= containerOffset.left\r\n      offset.top -= containerOffset.top\r\n    }\r\n\r\n    switch (position) {\r\n      case 'right':\r\n        x = offset.left + element.offsetWidth\r\n        y = offset.top - 1\r\n        break\r\n\r\n      case 'bottom':\r\n        x = offset.left\r\n        y = offset.top + element.offsetHeight\r\n        break\r\n\r\n      case 'left':\r\n        x = offset.left\r\n        y = offset.top - 1\r\n        break\r\n\r\n      case 'top':\r\n        x = offset.left\r\n        y = offset.top\r\n        break\r\n\r\n      case 'center':\r\n        x = offset.left + element.offsetWidth / 2\r\n        y = offset.top + element.offsetHeight / 2\r\n        break\r\n    }\r\n\r\n    return { x, y, offset }\r\n  }\r\n\r\n  show(origin, position) {\r\n    let x, y, parentEl, parentOffset, coords\r\n\r\n    if (this.destroyed || this.table.destroyed) {\r\n      return this\r\n    }\r\n\r\n    if (origin instanceof HTMLElement) {\r\n      parentEl = origin\r\n      coords = this.elementPositionCoords(origin, position)\r\n\r\n      parentOffset = coords.offset\r\n      x = coords.x\r\n      y = coords.y\r\n    } else if (typeof origin === 'number') {\r\n      parentOffset = { top: 0, left: 0 }\r\n      x = origin\r\n      y = position\r\n    } else {\r\n      coords = this.containerEventCoords(origin)\r\n\r\n      x = coords.x\r\n      y = coords.y\r\n\r\n      this.reversedX = false\r\n    }\r\n\r\n    this.element.style.top = y + 'px'\r\n    this.element.style.left = x + 'px'\r\n\r\n    this.container.appendChild(this.element)\r\n\r\n    if (typeof this.renderedCallback === 'function') {\r\n      this.renderedCallback()\r\n    }\r\n\r\n    this._fitToScreen(x, y, parentEl, parentOffset, position)\r\n\r\n    this.visible = true\r\n\r\n    this.subscribe('table-destroy', this.destroyBinding)\r\n\r\n    this.element.addEventListener('mousedown', (e) => {\r\n      e.stopPropagation()\r\n    })\r\n\r\n    return this\r\n  }\r\n\r\n  _fitToScreen(x, y, parentEl, parentOffset, position) {\r\n    const scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop\r\n\r\n    // move menu to start on right edge if it is too close to the edge of the screen\r\n    if (x + this.element.offsetWidth >= this.container.offsetWidth || this.reversedX) {\r\n      this.element.style.left = ''\r\n\r\n      if (parentEl) {\r\n        this.element.style.right = this.container.offsetWidth - parentOffset.left + 'px'\r\n      } else {\r\n        this.element.style.right = this.container.offsetWidth - x + 'px'\r\n      }\r\n\r\n      this.reversedX = true\r\n    }\r\n\r\n    // move menu to start on bottom edge if it is too close to the edge of the screen\r\n    const offsetHeight = Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0)\r\n    if (y + this.element.offsetHeight > offsetHeight) {\r\n      if (parentEl) {\r\n        switch (position) {\r\n          case 'bottom':\r\n            this.element.style.top =\r\n              parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1 + 'px'\r\n            break\r\n\r\n          default:\r\n            this.element.style.top =\r\n              parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1 + 'px'\r\n        }\r\n      } else {\r\n        this.element.style.height = offsetHeight + 'px'\r\n      }\r\n    }\r\n  }\r\n\r\n  isVisible() {\r\n    return this.visible\r\n  }\r\n\r\n  hideOnBlur(callback) {\r\n    this.blurable = true\r\n\r\n    if (this.visible) {\r\n      setTimeout(() => {\r\n        if (this.visible) {\r\n          this.table.rowManager.element.addEventListener('scroll', this.blurEvent)\r\n          this.subscribe('cell-editing', this.blurEvent)\r\n          document.body.addEventListener('click', this.blurEvent)\r\n          document.body.addEventListener('contextmenu', this.blurEvent)\r\n          document.body.addEventListener('mousedown', this.blurEvent)\r\n          window.addEventListener('resize', this.blurEvent)\r\n          document.body.addEventListener('keydown', this.escEvent)\r\n\r\n          this.blurEventsBound = true\r\n        }\r\n      }, 100)\r\n\r\n      this.blurCallback = callback\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  _escapeCheck(e) {\r\n    if (e.keyCode == 27) {\r\n      this.hide()\r\n    }\r\n  }\r\n\r\n  blockHide() {\r\n    this.hideable = false\r\n  }\r\n\r\n  restoreHide() {\r\n    this.hideable = true\r\n  }\r\n\r\n  hide(silent = false) {\r\n    if (this.visible && this.hideable) {\r\n      if (this.blurable && this.blurEventsBound) {\r\n        document.body.removeEventListener('keydown', this.escEvent)\r\n        document.body.removeEventListener('click', this.blurEvent)\r\n        document.body.removeEventListener('contextmenu', this.blurEvent)\r\n        document.body.removeEventListener('mousedown', this.blurEvent)\r\n        window.removeEventListener('resize', this.blurEvent)\r\n        this.table.rowManager.element.removeEventListener('scroll', this.blurEvent)\r\n        this.unsubscribe('cell-editing', this.blurEvent)\r\n\r\n        this.blurEventsBound = false\r\n      }\r\n\r\n      if (this.childPopup) {\r\n        this.childPopup.hide()\r\n      }\r\n\r\n      if (this.parent) {\r\n        this.parent.childPopup = null\r\n      }\r\n\r\n      if (this.element.parentNode) {\r\n        this.element.parentNode.removeChild(this.element)\r\n      }\r\n\r\n      this.visible = false\r\n\r\n      if (this.blurCallback && !silent) {\r\n        this.blurCallback()\r\n      }\r\n\r\n      this.unsubscribe('table-destroy', this.destroyBinding)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  child(element) {\r\n    if (this.childPopup) {\r\n      this.childPopup.hide()\r\n    }\r\n\r\n    this.childPopup = new Popup(this.table, element, this)\r\n\r\n    return this.childPopup\r\n  }\r\n}\r\n","import CoreFeature from './CoreFeature.js'\r\nimport Popup from './tools/Popup.js'\r\n\r\nexport default class Module extends CoreFeature {\r\n  constructor(table, name) {\r\n    super(table)\r\n\r\n    this._handler = null\r\n  }\r\n\r\n  initialize() {\r\n    // setup module when table is initialized, to be overridden in module\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// /// Options Registration ///////\r\n  /// ////////////////////////////////\r\n\r\n  registerTableOption(key, value) {\r\n    this.table.optionsList.register(key, value)\r\n  }\r\n\r\n  registerColumnOption(key, value) {\r\n    this.table.columnManager.optionsList.register(key, value)\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// Public Function Registration ///\r\n  /// ////////////////////////////////\r\n\r\n  registerTableFunction(name, func) {\r\n    if (typeof this.table[name] === 'undefined') {\r\n      this.table[name] = (...args) => {\r\n        this.table.initGuard(name)\r\n\r\n        return func(...args)\r\n      }\r\n    } else {\r\n      console.warn('Unable to bind table function, name already in use', name)\r\n    }\r\n  }\r\n\r\n  registerComponentFunction(component, func, handler) {\r\n    return this.table.componentFunctionBinder.bind(component, func, handler)\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// /////// Data Pipeline //////////\r\n  /// ////////////////////////////////\r\n\r\n  registerDataHandler(handler, priority) {\r\n    this.table.rowManager.registerDataPipelineHandler(handler, priority)\r\n    this._handler = handler\r\n  }\r\n\r\n  registerDisplayHandler(handler, priority) {\r\n    this.table.rowManager.registerDisplayPipelineHandler(handler, priority)\r\n    this._handler = handler\r\n  }\r\n\r\n  displayRows(adjust) {\r\n    let index = this.table.rowManager.displayRows.length - 1\r\n    let lookupIndex\r\n\r\n    if (this._handler) {\r\n      lookupIndex = this.table.rowManager.displayPipeline.findIndex((item) => {\r\n        return item.handler === this._handler\r\n      })\r\n\r\n      if (lookupIndex > -1) {\r\n        index = lookupIndex\r\n      }\r\n    }\r\n\r\n    if (adjust) {\r\n      index = index + adjust\r\n    }\r\n\r\n    if (this._handler) {\r\n      if (index > -1) {\r\n        return this.table.rowManager.getDisplayRows(index)\r\n      } else {\r\n        return this.activeRows()\r\n      }\r\n    }\r\n  }\r\n\r\n  activeRows() {\r\n    return this.table.rowManager.activeRows\r\n  }\r\n\r\n  refreshData(renderInPosition, handler) {\r\n    if (!handler) {\r\n      handler = this._handler\r\n    }\r\n\r\n    if (handler) {\r\n      this.table.rowManager.refreshActiveData(handler, false, renderInPosition)\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ///// Footer Management ////////\r\n  /// ////////////////////////////////\r\n\r\n  footerAppend(element) {\r\n    return this.table.footerManager.append(element)\r\n  }\r\n\r\n  footerPrepend(element) {\r\n    return this.table.footerManager.prepend(element)\r\n  }\r\n\r\n  footerRemove(element) {\r\n    return this.table.footerManager.remove(element)\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ///// Popups Management ////////\r\n  /// ////////////////////////////////\r\n\r\n  popup(menuEl, menuContainer) {\r\n    return new Popup(this.table, menuEl, menuContainer)\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ///// Alert Management ////////\r\n  /// ////////////////////////////////\r\n\r\n  alert(content, type) {\r\n    return this.table.alertManager.alert(content, type)\r\n  }\r\n\r\n  clearAlert() {\r\n    return this.table.alertManager.clear()\r\n  }\r\n}\r\n","// resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\r\nexport default function (columns, forced) {\r\n  columns.forEach(function (column) {\r\n    column.reinitializeWidth()\r\n  })\r\n\r\n  if (this.table.options.responsiveLayout && this.table.modExists('responsiveLayout', true)) {\r\n    this.table.modules.responsiveLayout.update()\r\n  }\r\n}\r\n","import fitData from './modes/fitData.js'\r\nimport fitDataGeneral from './modes/fitDataGeneral.js'\r\nimport fitDataStretch from './modes/fitDataStretch.js'\r\nimport fitColumns from './modes/fitColumns.js'\r\n\r\nexport default {\r\n  fitData,\r\n  fitDataFill: fitDataGeneral,\r\n  fitDataTable: fitDataGeneral,\r\n  fitDataStretch,\r\n  fitColumns\r\n}\r\n","// resize columns to fit data they contain\r\nexport default function (columns, forced) {\r\n  if (forced) {\r\n    this.table.columnManager.renderer.reinitializeColumnWidths(columns)\r\n  }\r\n\r\n  if (this.table.options.responsiveLayout && this.table.modExists('responsiveLayout', true)) {\r\n    this.table.modules.responsiveLayout.update()\r\n  }\r\n}\r\n","// resize columns to fit data the contain and stretch last column to fill table\r\nexport default function (columns, forced) {\r\n  let colsWidth = 0\r\n  const tableWidth = this.table.rowManager.element.clientWidth\r\n  let gap = 0\r\n  let lastCol = false\r\n\r\n  columns.forEach((column, i) => {\r\n    if (!column.widthFixed) {\r\n      column.reinitializeWidth()\r\n    }\r\n\r\n    if (this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible) {\r\n      lastCol = column\r\n    }\r\n\r\n    if (column.visible) {\r\n      colsWidth += column.getWidth()\r\n    }\r\n  })\r\n\r\n  if (lastCol) {\r\n    gap = tableWidth - colsWidth + lastCol.getWidth()\r\n\r\n    if (this.table.options.responsiveLayout && this.table.modExists('responsiveLayout', true)) {\r\n      lastCol.setWidth(0)\r\n      this.table.modules.responsiveLayout.update()\r\n    }\r\n\r\n    if (gap > 0) {\r\n      lastCol.setWidth(gap)\r\n    } else {\r\n      lastCol.reinitializeWidth()\r\n    }\r\n  } else {\r\n    if (this.table.options.responsiveLayout && this.table.modExists('responsiveLayout', true)) {\r\n      this.table.modules.responsiveLayout.update()\r\n    }\r\n  }\r\n}\r\n","// resize columns to fit\r\nexport default function (columns, forced) {\r\n  let totalWidth = this.table.rowManager.element.getBoundingClientRect().width // table element width\r\n  let fixedWidth = 0 // total width of columns with a defined width\r\n  let flexWidth = 0 // total width available to flexible columns\r\n  let flexGrowUnits = 0 // total number of widthGrow blocks across all columns\r\n  let flexColWidth = 0 // desired width of flexible columns\r\n  const flexColumns = [] // array of flexible width columns\r\n  const fixedShrinkColumns = [] // array of fixed width columns that can shrink\r\n  let flexShrinkUnits = 0 // total number of widthShrink blocks across all columns\r\n  let overflowWidth = 0 // horizontal overflow width\r\n  let gapFill = 0 // number of pixels to be added to final column to close and half pixel gaps\r\n\r\n  function calcWidth(width) {\r\n    let colWidth\r\n\r\n    if (typeof width === 'string') {\r\n      if (width.indexOf('%') > -1) {\r\n        colWidth = (totalWidth / 100) * parseInt(width)\r\n      } else {\r\n        colWidth = parseInt(width)\r\n      }\r\n    } else {\r\n      colWidth = width\r\n    }\r\n\r\n    return colWidth\r\n  }\r\n\r\n  // ensure columns resize to take up the correct amount of space\r\n  function scaleColumns(columns, freeSpace, colWidth, shrinkCols) {\r\n    const oversizeCols = []\r\n    let oversizeSpace = 0\r\n    let remainingSpace = 0\r\n    let nextColWidth = 0\r\n    let remainingFlexGrowUnits = flexGrowUnits\r\n    let gap = 0\r\n    let changeUnits = 0\r\n    const undersizeCols = []\r\n\r\n    function calcGrow(col) {\r\n      return colWidth * (col.column.definition.widthGrow || 1)\r\n    }\r\n\r\n    function calcShrink(col) {\r\n      return calcWidth(col.width) - colWidth * (col.column.definition.widthShrink || 0)\r\n    }\r\n\r\n    columns.forEach(function (col, i) {\r\n      const width = shrinkCols ? calcShrink(col) : calcGrow(col)\r\n      if (col.column.minWidth >= width) {\r\n        oversizeCols.push(col)\r\n      } else {\r\n        if (col.column.maxWidth && col.column.maxWidth < width) {\r\n          col.width = col.column.maxWidth\r\n          freeSpace -= col.column.maxWidth\r\n\r\n          remainingFlexGrowUnits -= shrinkCols\r\n            ? col.column.definition.widthShrink || 1\r\n            : col.column.definition.widthGrow || 1\r\n\r\n          if (remainingFlexGrowUnits) {\r\n            colWidth = Math.floor(freeSpace / remainingFlexGrowUnits)\r\n          }\r\n        } else {\r\n          undersizeCols.push(col)\r\n          changeUnits += shrinkCols ? col.column.definition.widthShrink || 1 : col.column.definition.widthGrow || 1\r\n        }\r\n      }\r\n    })\r\n\r\n    if (oversizeCols.length) {\r\n      oversizeCols.forEach(function (col) {\r\n        oversizeSpace += shrinkCols ? col.width - col.column.minWidth : col.column.minWidth\r\n        col.width = col.column.minWidth\r\n      })\r\n\r\n      remainingSpace = freeSpace - oversizeSpace\r\n\r\n      nextColWidth = changeUnits ? Math.floor(remainingSpace / changeUnits) : remainingSpace\r\n\r\n      gap = scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols)\r\n    } else {\r\n      gap = changeUnits ? freeSpace - Math.floor(freeSpace / changeUnits) * changeUnits : freeSpace\r\n\r\n      undersizeCols.forEach(function (column) {\r\n        column.width = shrinkCols ? calcShrink(column) : calcGrow(column)\r\n      })\r\n    }\r\n\r\n    return gap\r\n  }\r\n\r\n  if (this.table.options.responsiveLayout && this.table.modExists('responsiveLayout', true)) {\r\n    this.table.modules.responsiveLayout.update()\r\n  }\r\n\r\n  // adjust for vertical scrollbar if present\r\n  if (this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight) {\r\n    totalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth\r\n  }\r\n\r\n  columns.forEach(function (column) {\r\n    let width, minWidth, colWidth\r\n\r\n    if (column.visible) {\r\n      width = column.definition.width\r\n      minWidth = parseInt(column.minWidth)\r\n\r\n      if (width) {\r\n        colWidth = calcWidth(width)\r\n\r\n        fixedWidth += colWidth > minWidth ? colWidth : minWidth\r\n\r\n        if (column.definition.widthShrink) {\r\n          fixedShrinkColumns.push({\r\n            column,\r\n            width: colWidth > minWidth ? colWidth : minWidth\r\n          })\r\n          flexShrinkUnits += column.definition.widthShrink\r\n        }\r\n      } else {\r\n        flexColumns.push({\r\n          column,\r\n          width: 0\r\n        })\r\n        flexGrowUnits += column.definition.widthGrow || 1\r\n      }\r\n    }\r\n  })\r\n\r\n  // calculate available space\r\n  flexWidth = totalWidth - fixedWidth\r\n\r\n  // calculate correct column size\r\n  flexColWidth = Math.floor(flexWidth / flexGrowUnits)\r\n\r\n  // generate column widths\r\n  gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false)\r\n\r\n  // increase width of last column to account for rounding errors\r\n  if (flexColumns.length && gapFill > 0) {\r\n    flexColumns[flexColumns.length - 1].width += gapFill\r\n  }\r\n\r\n  // calculate space for columns to be shrunk into\r\n  flexColumns.forEach(function (col) {\r\n    flexWidth -= col.width\r\n  })\r\n\r\n  overflowWidth = Math.abs(gapFill) + flexWidth\r\n\r\n  // shrink oversize columns if there is no available space\r\n  if (overflowWidth > 0 && flexShrinkUnits) {\r\n    gapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true)\r\n  }\r\n\r\n  // decrease width of last column to account for rounding errors\r\n  if (gapFill && fixedShrinkColumns.length) {\r\n    fixedShrinkColumns[fixedShrinkColumns.length - 1].width -= gapFill\r\n  }\r\n\r\n  flexColumns.forEach(function (col) {\r\n    col.column.setWidth(col.width)\r\n  })\r\n\r\n  fixedShrinkColumns.forEach(function (col) {\r\n    col.column.setWidth(col.width)\r\n  })\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultModes from './defaults/modes.js'\r\n\r\nexport default class Layout extends Module {\r\n  static moduleName = 'layout'\r\n\r\n  // load defaults\r\n  static modes = defaultModes\r\n\r\n  constructor(table) {\r\n    super(table, 'layout')\r\n\r\n    this.mode = null\r\n\r\n    this.registerTableOption('layout', 'fitData') // layout type\r\n    this.registerTableOption('layoutColumnsOnNewData', false) // update column widths on setData\r\n\r\n    this.registerColumnOption('widthGrow')\r\n    this.registerColumnOption('widthShrink')\r\n  }\r\n\r\n  // initialize layout system\r\n  initialize() {\r\n    const layout = this.table.options.layout\r\n\r\n    if (Layout.modes[layout]) {\r\n      this.mode = layout\r\n    } else {\r\n      console.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout)\r\n      this.mode = 'fitData'\r\n    }\r\n\r\n    this.table.element.setAttribute('tabulator-layout', this.mode)\r\n    this.subscribe('column-init', this.initializeColumn.bind(this))\r\n  }\r\n\r\n  initializeColumn(column) {\r\n    if (column.definition.widthGrow) {\r\n      column.definition.widthGrow = Number(column.definition.widthGrow)\r\n    }\r\n    if (column.definition.widthShrink) {\r\n      column.definition.widthShrink = Number(column.definition.widthShrink)\r\n    }\r\n  }\r\n\r\n  getMode() {\r\n    return this.mode\r\n  }\r\n\r\n  // trigger table layout\r\n  layout(dataChanged) {\r\n    const variableHeight = this.table.columnManager.columnsByIndex.find(\r\n      (column) => column.definition.variableHeight || column.definition.formatter === 'textarea'\r\n    )\r\n\r\n    this.dispatch('layout-refreshing')\r\n    Layout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex, dataChanged)\r\n\r\n    if (variableHeight) {\r\n      this.table.rowManager.normalizeHeight(true)\r\n    }\r\n\r\n    this.dispatch('layout-refreshed')\r\n  }\r\n}\r\n","export default {\r\n  default: {\r\n    // hold default locale text\r\n    groups: {\r\n      item: 'item',\r\n      items: 'items'\r\n    },\r\n    columns: {},\r\n    data: {\r\n      loading: 'Loading',\r\n      error: 'Error'\r\n    },\r\n    pagination: {\r\n      page_size: 'Page Size',\r\n      page_title: 'Show Page',\r\n      first: 'First',\r\n      first_title: 'First Page',\r\n      last: 'Last',\r\n      last_title: 'Last Page',\r\n      prev: 'Prev',\r\n      prev_title: 'Prev Page',\r\n      next: 'Next',\r\n      next_title: 'Next Page',\r\n      all: 'All',\r\n      counter: {\r\n        showing: 'Showing',\r\n        of: 'of',\r\n        rows: 'rows',\r\n        pages: 'pages'\r\n      }\r\n    },\r\n    headerFilters: {\r\n      default: 'filter column...',\r\n      columns: {}\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport Helpers from '../../core/tools/Helpers.js'\r\n\r\nimport defaultLangs from './defaults/langs.js'\r\n\r\nexport default class Localize extends Module {\r\n  static moduleName = 'localize'\r\n\r\n  // load defaults\r\n  static langs = defaultLangs\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.locale = 'default' // current locale\r\n    this.lang = false // current language\r\n    this.bindings = {} // update events to call when locale is changed\r\n    this.langList = {}\r\n\r\n    this.registerTableOption('locale', false) // current system language\r\n    this.registerTableOption('langs', {})\r\n  }\r\n\r\n  initialize() {\r\n    this.langList = Helpers.deepClone(Localize.langs)\r\n\r\n    if (this.table.options.columnDefaults.headerFilterPlaceholder !== false) {\r\n      this.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder)\r\n    }\r\n\r\n    for (const locale in this.table.options.langs) {\r\n      this.installLang(locale, this.table.options.langs[locale])\r\n    }\r\n\r\n    this.setLocale(this.table.options.locale)\r\n\r\n    this.registerTableFunction('setLocale', this.setLocale.bind(this))\r\n    this.registerTableFunction('getLocale', this.getLocale.bind(this))\r\n    this.registerTableFunction('getLang', this.getLang.bind(this))\r\n  }\r\n\r\n  // set header placeholder\r\n  setHeaderFilterPlaceholder(placeholder) {\r\n    this.langList.default.headerFilters.default = placeholder\r\n  }\r\n\r\n  // setup a lang description object\r\n  installLang(locale, lang) {\r\n    if (this.langList[locale]) {\r\n      this._setLangProp(this.langList[locale], lang)\r\n    } else {\r\n      this.langList[locale] = lang\r\n    }\r\n  }\r\n\r\n  _setLangProp(lang, values) {\r\n    for (const key in values) {\r\n      if (lang[key] && typeof lang[key] === 'object') {\r\n        this._setLangProp(lang[key], values[key])\r\n      } else {\r\n        lang[key] = values[key]\r\n      }\r\n    }\r\n  }\r\n\r\n  // set current locale\r\n  setLocale(desiredLocale) {\r\n    desiredLocale = desiredLocale || 'default'\r\n\r\n    // fill in any matching language values\r\n    function traverseLang(trans, path) {\r\n      for (const prop in trans) {\r\n        if (typeof trans[prop] === 'object') {\r\n          if (!path[prop]) {\r\n            path[prop] = {}\r\n          }\r\n          traverseLang(trans[prop], path[prop])\r\n        } else {\r\n          path[prop] = trans[prop]\r\n        }\r\n      }\r\n    }\r\n\r\n    // determining correct locale to load\r\n    if (desiredLocale === true && navigator.language) {\r\n      // get local from system\r\n      desiredLocale = navigator.language.toLowerCase()\r\n    }\r\n\r\n    if (desiredLocale) {\r\n      // if locale is not set, check for matching top level locale else use default\r\n      if (!this.langList[desiredLocale]) {\r\n        const prefix = desiredLocale.split('-')[0]\r\n\r\n        if (this.langList[prefix]) {\r\n          console.warn(\r\n            'Localization Error - Exact matching locale not found, using closest match: ',\r\n            desiredLocale,\r\n            prefix\r\n          )\r\n          desiredLocale = prefix\r\n        } else {\r\n          console.warn('Localization Error - Matching locale not found, using default: ', desiredLocale)\r\n          desiredLocale = 'default'\r\n        }\r\n      }\r\n    }\r\n\r\n    this.locale = desiredLocale\r\n\r\n    // load default lang template\r\n    this.lang = Helpers.deepClone(this.langList.default || {})\r\n\r\n    if (desiredLocale != 'default') {\r\n      traverseLang(this.langList[desiredLocale], this.lang)\r\n    }\r\n\r\n    this.dispatchExternal('localized', this.locale, this.lang)\r\n\r\n    this._executeBindings()\r\n  }\r\n\r\n  // get current locale\r\n  getLocale(locale) {\r\n    return this.locale\r\n  }\r\n\r\n  // get lang object for given local or current if none provided\r\n  getLang(locale) {\r\n    return locale ? this.langList[locale] : this.lang\r\n  }\r\n\r\n  // get text for current locale\r\n  getText(path, value) {\r\n    const fillPath = value ? path + '|' + value : path\r\n    const pathArray = fillPath.split('|')\r\n    const text = this._getLangElement(pathArray, this.locale)\r\n\r\n    // if(text === false){\r\n    // \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\r\n    // }\r\n\r\n    return text || ''\r\n  }\r\n\r\n  // traverse langs object and find localized copy\r\n  _getLangElement(path, locale) {\r\n    let root = this.lang\r\n\r\n    path.forEach(function (level) {\r\n      let rootPath\r\n\r\n      if (root) {\r\n        rootPath = root[level]\r\n\r\n        if (typeof rootPath !== 'undefined') {\r\n          root = rootPath\r\n        } else {\r\n          root = false\r\n        }\r\n      }\r\n    })\r\n\r\n    return root\r\n  }\r\n\r\n  // set update binding\r\n  bind(path, callback) {\r\n    if (!this.bindings[path]) {\r\n      this.bindings[path] = []\r\n    }\r\n\r\n    this.bindings[path].push(callback)\r\n\r\n    callback(this.getText(path), this.lang)\r\n  }\r\n\r\n  // iterate through bindings and trigger updates\r\n  _executeBindings() {\r\n    for (const path in this.bindings) {\r\n      this.bindings[path].forEach((binding) => {\r\n        binding(this.getText(path), this.lang)\r\n      })\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nexport default class Comms extends Module {\r\n  static moduleName = 'comms'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n  }\r\n\r\n  initialize() {\r\n    this.registerTableFunction('tableComms', this.receive.bind(this))\r\n  }\r\n\r\n  getConnections(selectors) {\r\n    const connections = []\r\n    let connection\r\n\r\n    connection = this.table.constructor.registry.lookupTable(selectors)\r\n\r\n    connection.forEach((con) => {\r\n      if (this.table !== con) {\r\n        connections.push(con)\r\n      }\r\n    })\r\n\r\n    return connections\r\n  }\r\n\r\n  send(selectors, module, action, data) {\r\n    const connections = this.getConnections(selectors)\r\n\r\n    connections.forEach((connection) => {\r\n      connection.tableComms(this.table.element, module, action, data)\r\n    })\r\n\r\n    if (!connections.length && selectors) {\r\n      console.warn('Table Connection Error - No tables matching selector found', selectors)\r\n    }\r\n  }\r\n\r\n  receive(table, module, action, data) {\r\n    if (this.table.modExists(module)) {\r\n      return this.table.modules[module].commsReceived(table, action, data)\r\n    } else {\r\n      console.warn('Inter-table Comms Error - no such module:', module)\r\n    }\r\n  }\r\n}\r\n","export default class TableRegistry {\r\n  static registry = {\r\n    tables: [],\r\n\r\n    register(table) {\r\n      TableRegistry.registry.tables.push(table)\r\n    },\r\n\r\n    deregister(table) {\r\n      const index = TableRegistry.registry.tables.indexOf(table)\r\n\r\n      if (index > -1) {\r\n        TableRegistry.registry.tables.splice(index, 1)\r\n      }\r\n    },\r\n\r\n    lookupTable(query, silent) {\r\n      let results = []\r\n      let matches\r\n      let match\r\n\r\n      if (typeof query === 'string') {\r\n        matches = document.querySelectorAll(query)\r\n\r\n        if (matches.length) {\r\n          for (let i = 0; i < matches.length; i++) {\r\n            match = TableRegistry.registry.matchElement(matches[i])\r\n\r\n            if (match) {\r\n              results.push(match)\r\n            }\r\n          }\r\n        }\r\n      } else if (\r\n        (typeof HTMLElement !== 'undefined' && query instanceof HTMLElement) ||\r\n        query instanceof TableRegistry\r\n      ) {\r\n        match = TableRegistry.registry.matchElement(query)\r\n\r\n        if (match) {\r\n          results.push(match)\r\n        }\r\n      } else if (Array.isArray(query)) {\r\n        query.forEach(function (item) {\r\n          results = results.concat(TableRegistry.registry.lookupTable(item))\r\n        })\r\n      } else {\r\n        if (!silent) {\r\n          console.warn('Table Connection Error - Invalid Selector', query)\r\n        }\r\n      }\r\n\r\n      return results\r\n    },\r\n\r\n    matchElement(element) {\r\n      return TableRegistry.registry.tables.find(function (table) {\r\n        return element instanceof TableRegistry ? table === element : table.element === element\r\n      })\r\n    }\r\n  }\r\n\r\n  static findTable(query) {\r\n    const results = TableRegistry.registry.lookupTable(query, true)\r\n    return Array.isArray(results) && !results.length ? false : results\r\n  }\r\n}\r\n","import * as coreModules from '../modules/core.js'\r\nimport TableRegistry from './TableRegistry.js'\r\n\r\nexport default class ModuleBinder extends TableRegistry {\r\n  static moduleBindings = {}\r\n  static moduleExtensions = {}\r\n  static modulesRegistered = false\r\n\r\n  static defaultModules = false\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  static initializeModuleBinder(defaultModules) {\r\n    if (!ModuleBinder.modulesRegistered) {\r\n      ModuleBinder.modulesRegistered = true\r\n      ModuleBinder._registerModules(coreModules, true)\r\n\r\n      if (defaultModules) {\r\n        ModuleBinder._registerModules(defaultModules)\r\n      }\r\n    }\r\n  }\r\n\r\n  static _extendModule(name, property, values) {\r\n    if (ModuleBinder.moduleBindings[name]) {\r\n      const source = ModuleBinder.moduleBindings[name][property]\r\n\r\n      if (source) {\r\n        if (typeof values === 'object') {\r\n          for (const key in values) {\r\n            source[key] = values[key]\r\n          }\r\n        } else {\r\n          console.warn('Module Error - Invalid value type, it must be an object')\r\n        }\r\n      } else {\r\n        console.warn('Module Error - property does not exist:', property)\r\n      }\r\n    } else {\r\n      console.warn('Module Error - module does not exist:', name)\r\n    }\r\n  }\r\n\r\n  static _registerModules(modules, core) {\r\n    const mods = Object.values(modules)\r\n\r\n    if (core) {\r\n      mods.forEach((mod) => {\r\n        mod.prototype.moduleCore = true\r\n      })\r\n    }\r\n\r\n    ModuleBinder._registerModule(mods)\r\n  }\r\n\r\n  static _registerModule(modules) {\r\n    if (!Array.isArray(modules)) {\r\n      modules = [modules]\r\n    }\r\n\r\n    modules.forEach((mod) => {\r\n      ModuleBinder._registerModuleBinding(mod)\r\n      ModuleBinder._registerModuleExtensions(mod)\r\n    })\r\n  }\r\n\r\n  static _registerModuleBinding(mod) {\r\n    if (mod.moduleName) {\r\n      ModuleBinder.moduleBindings[mod.moduleName] = mod\r\n    } else {\r\n      console.error('Unable to bind module, no moduleName defined', mod.moduleName)\r\n    }\r\n  }\r\n\r\n  static _registerModuleExtensions(mod) {\r\n    const extensions = mod.moduleExtensions\r\n\r\n    if (mod.moduleExtensions) {\r\n      for (const modKey in extensions) {\r\n        const ext = extensions[modKey]\r\n\r\n        if (ModuleBinder.moduleBindings[modKey]) {\r\n          for (const propKey in ext) {\r\n            ModuleBinder._extendModule(modKey, propKey, ext[propKey])\r\n          }\r\n        } else {\r\n          if (!ModuleBinder.moduleExtensions[modKey]) {\r\n            ModuleBinder.moduleExtensions[modKey] = {}\r\n          }\r\n\r\n          for (const propKey in ext) {\r\n            if (!ModuleBinder.moduleExtensions[modKey][propKey]) {\r\n              ModuleBinder.moduleExtensions[modKey][propKey] = {}\r\n            }\r\n\r\n            Object.assign(ModuleBinder.moduleExtensions[modKey][propKey], ext[propKey])\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    ModuleBinder._extendModuleFromQueue(mod)\r\n  }\r\n\r\n  static _extendModuleFromQueue(mod) {\r\n    const extensions = ModuleBinder.moduleExtensions[mod.moduleName]\r\n\r\n    if (extensions) {\r\n      for (const propKey in extensions) {\r\n        ModuleBinder._extendModule(mod.moduleName, propKey, extensions[propKey])\r\n      }\r\n    }\r\n  }\r\n\r\n  // ensure that module are bound to instantiated function\r\n  _bindModules() {\r\n    const orderedStartMods = []\r\n    const orderedEndMods = []\r\n    const unOrderedMods = []\r\n\r\n    this.modules = {}\r\n\r\n    for (const name in ModuleBinder.moduleBindings) {\r\n      const mod = ModuleBinder.moduleBindings[name]\r\n      const module = new mod(this)\r\n\r\n      this.modules[name] = module\r\n\r\n      if (mod.prototype.moduleCore) {\r\n        this.modulesCore.push(module)\r\n      } else {\r\n        if (mod.moduleInitOrder) {\r\n          if (mod.moduleInitOrder < 0) {\r\n            orderedStartMods.push(module)\r\n          } else {\r\n            orderedEndMods.push(module)\r\n          }\r\n        } else {\r\n          unOrderedMods.push(module)\r\n        }\r\n      }\r\n    }\r\n\r\n    orderedStartMods.sort((a, b) => (a.moduleInitOrder > b.moduleInitOrder ? 1 : -1))\r\n    orderedEndMods.sort((a, b) => (a.moduleInitOrder > b.moduleInitOrder ? 1 : -1))\r\n\r\n    this.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods))\r\n  }\r\n}\r\n","import CoreFeature from '../CoreFeature.js'\r\n\r\nexport default class Alert extends CoreFeature {\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.element = this._createAlertElement()\r\n    this.msgElement = this._createMsgElement()\r\n    this.type = null\r\n\r\n    this.element.appendChild(this.msgElement)\r\n  }\r\n\r\n  _createAlertElement() {\r\n    const el = document.createElement('div')\r\n    el.classList.add('tabulator-alert')\r\n    return el\r\n  }\r\n\r\n  _createMsgElement() {\r\n    const el = document.createElement('div')\r\n    el.classList.add('tabulator-alert-msg')\r\n    el.setAttribute('role', 'alert')\r\n    return el\r\n  }\r\n\r\n  _typeClass() {\r\n    return 'tabulator-alert-state-' + this.type\r\n  }\r\n\r\n  alert(content, type = 'msg') {\r\n    if (content) {\r\n      this.clear()\r\n\r\n      this.dispatch('alert-show', type)\r\n\r\n      this.type = type\r\n\r\n      while (this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild)\r\n\r\n      this.msgElement.classList.add(this._typeClass())\r\n\r\n      if (typeof content === 'function') {\r\n        content = content()\r\n      }\r\n\r\n      if (content instanceof HTMLElement) {\r\n        this.msgElement.appendChild(content)\r\n      } else {\r\n        this.msgElement.innerHTML = content\r\n      }\r\n\r\n      this.table.element.appendChild(this.element)\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.dispatch('alert-hide', this.type)\r\n\r\n    if (this.element.parentNode) {\r\n      this.element.parentNode.removeChild(this.element)\r\n    }\r\n\r\n    this.msgElement.classList.remove(this._typeClass())\r\n  }\r\n}\r\n","'use strict'\r\n\r\nimport defaultOptions from './defaults/options.js'\r\n\r\nimport ColumnManager from './ColumnManager.js'\r\nimport RowManager from './RowManager.js'\r\nimport FooterManager from './FooterManager.js'\r\n\r\nimport InteractionMonitor from './tools/InteractionMonitor.js'\r\nimport ComponentFunctionBinder from './tools/ComponentFunctionBinder.js'\r\nimport DataLoader from './tools/DataLoader.js'\r\n\r\nimport ExternalEventBus from './tools/ExternalEventBus.js'\r\nimport InternalEventBus from './tools/InternalEventBus.js'\r\n\r\nimport DeprecationAdvisor from './tools/DeprecationAdvisor.js'\r\nimport DependencyRegistry from './tools/DependencyRegistry.js'\r\n\r\nimport ModuleBinder from './tools/ModuleBinder.js'\r\n\r\nimport OptionsList from './tools/OptionsList.js'\r\n\r\nimport Alert from './tools/Alert.js'\r\n\r\nclass Tabulator extends ModuleBinder {\r\n  // default setup options\r\n  static defaultOptions = defaultOptions\r\n\r\n  static extendModule() {\r\n    Tabulator.initializeModuleBinder()\r\n    Tabulator._extendModule(...arguments)\r\n  }\r\n\r\n  static registerModule() {\r\n    Tabulator.initializeModuleBinder()\r\n    Tabulator._registerModule(...arguments)\r\n  }\r\n\r\n  constructor(element, options, modules) {\r\n    super()\r\n\r\n    Tabulator.initializeModuleBinder(modules)\r\n\r\n    this.options = {}\r\n\r\n    this.columnManager = null // hold Column Manager\r\n    this.rowManager = null // hold Row Manager\r\n    this.footerManager = null // holder Footer Manager\r\n    this.alertManager = null // hold Alert Manager\r\n    this.vdomHoz = null // holder horizontal virtual dom\r\n    this.externalEvents = null // handle external event messaging\r\n    this.eventBus = null // handle internal event messaging\r\n    this.interactionMonitor = false // track user interaction\r\n    this.browser = '' // hold current browser type\r\n    this.browserSlow = false // handle reduced functionality for slower browsers\r\n    this.browserMobile = false // check if running on mobile, prevent resize cancelling edit on keyboard appearance\r\n    this.rtl = false // check if the table is in RTL mode\r\n    this.originalElement = null // hold original table element if it has been replaced\r\n\r\n    this.componentFunctionBinder = new ComponentFunctionBinder(this) // bind component functions\r\n    this.dataLoader = false // bind component functions\r\n\r\n    this.modules = {} // hold all modules bound to this table\r\n    this.modulesCore = [] // hold core modules bound to this table (for initialization purposes)\r\n    this.modulesRegular = [] // hold regular modules bound to this table (for initialization purposes)\r\n\r\n    this.deprecationAdvisor = new DeprecationAdvisor(this)\r\n    this.optionsList = new OptionsList(this, 'table constructor')\r\n\r\n    this.dependencyRegistry = new DependencyRegistry(this)\r\n\r\n    this.initialized = false\r\n    this.destroyed = false\r\n\r\n    if (this.initializeElement(element)) {\r\n      this.initializeCoreSystems(options)\r\n\r\n      // delay table creation to allow event bindings immediately after the constructor\r\n      setTimeout(() => {\r\n        this._create()\r\n      })\r\n    }\r\n\r\n    this.constructor.registry.register(this) // register table for inter-device communication\r\n  }\r\n\r\n  initializeElement(element) {\r\n    if (typeof HTMLElement !== 'undefined' && element instanceof HTMLElement) {\r\n      this.element = element\r\n      return true\r\n    } else if (typeof element === 'string') {\r\n      this.element = document.querySelector(element)\r\n\r\n      if (this.element) {\r\n        return true\r\n      } else {\r\n        console.error('Tabulator Creation Error - no element found matching selector: ', element)\r\n        return false\r\n      }\r\n    } else {\r\n      console.error('Tabulator Creation Error - Invalid element provided:', element)\r\n      return false\r\n    }\r\n  }\r\n\r\n  initializeCoreSystems(options) {\r\n    this.columnManager = new ColumnManager(this)\r\n    this.rowManager = new RowManager(this)\r\n    this.footerManager = new FooterManager(this)\r\n    this.dataLoader = new DataLoader(this)\r\n    this.alertManager = new Alert(this)\r\n\r\n    this._bindModules()\r\n\r\n    this.options = this.optionsList.generate(Tabulator.defaultOptions, options)\r\n\r\n    this._clearObjectPointers()\r\n\r\n    this._mapDeprecatedFunctionality()\r\n\r\n    this.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal)\r\n    this.eventBus = new InternalEventBus(this.options.debugEventsInternal)\r\n\r\n    this.interactionMonitor = new InteractionMonitor(this)\r\n\r\n    this.dataLoader.initialize()\r\n    this.footerManager.initialize()\r\n\r\n    this.dependencyRegistry.initialize()\r\n  }\r\n\r\n  // convert deprecated functionality to new functions\r\n  _mapDeprecatedFunctionality() {\r\n    // all previously deprecated functionality removed in the 6.0 release\r\n  }\r\n\r\n  _clearSelection() {\r\n    this.element.classList.add('tabulator-block-select')\r\n\r\n    if (window.getSelection) {\r\n      if (window.getSelection().empty) {\r\n        // Chrome\r\n        window.getSelection().empty()\r\n      } else if (window.getSelection().removeAllRanges) {\r\n        // Firefox\r\n        window.getSelection().removeAllRanges()\r\n      }\r\n    } else if (document.selection) {\r\n      // IE?\r\n      document.selection.empty()\r\n    }\r\n\r\n    this.element.classList.remove('tabulator-block-select')\r\n  }\r\n\r\n  // create table\r\n  _create() {\r\n    this.externalEvents.dispatch('tableBuilding')\r\n    this.eventBus.dispatch('table-building')\r\n\r\n    this._rtlCheck()\r\n\r\n    this._buildElement()\r\n\r\n    this._initializeTable()\r\n\r\n    this.initialized = true\r\n\r\n    this._loadInitialData().finally(() => {\r\n      this.eventBus.dispatch('table-initialized')\r\n      this.externalEvents.dispatch('tableBuilt')\r\n    })\r\n  }\r\n\r\n  _rtlCheck() {\r\n    const style = window.getComputedStyle(this.element)\r\n\r\n    switch (this.options.textDirection) {\r\n      case 'auto':\r\n        if (style.direction !== 'rtl') {\r\n          break\r\n        }\r\n\r\n      case 'rtl':\r\n        this.element.classList.add('tabulator-rtl')\r\n        this.rtl = true\r\n        break\r\n\r\n      case 'ltr':\r\n        this.element.classList.add('tabulator-ltr')\r\n\r\n      default:\r\n        this.rtl = false\r\n    }\r\n  }\r\n\r\n  // clear pointers to objects in default config object\r\n  _clearObjectPointers() {\r\n    this.options.columns = this.options.columns.slice(0)\r\n\r\n    if (Array.isArray(this.options.data) && !this.options.reactiveData) {\r\n      this.options.data = this.options.data.slice(0)\r\n    }\r\n  }\r\n\r\n  // build tabulator element\r\n  _buildElement() {\r\n    let element = this.element\r\n    const options = this.options\r\n    let newElement\r\n\r\n    if (element.tagName === 'TABLE') {\r\n      this.originalElement = this.element\r\n      newElement = document.createElement('div')\r\n\r\n      // transfer attributes to new element\r\n      const attributes = element.attributes\r\n\r\n      // loop through attributes and apply them on div\r\n      for (const i in attributes) {\r\n        if (typeof attributes[i] === 'object') {\r\n          newElement.setAttribute(attributes[i].name, attributes[i].value)\r\n        }\r\n      }\r\n\r\n      // replace table with div element\r\n      element.parentNode.replaceChild(newElement, element)\r\n\r\n      this.element = element = newElement\r\n    }\r\n\r\n    element.classList.add('tabulator')\r\n    element.setAttribute('role', 'grid')\r\n\r\n    // empty element\r\n    while (element.firstChild) element.removeChild(element.firstChild)\r\n\r\n    // set table height\r\n    if (options.height) {\r\n      options.height = isNaN(options.height) ? options.height : options.height + 'px'\r\n      element.style.height = options.height\r\n    }\r\n\r\n    // set table min height\r\n    if (options.minHeight !== false) {\r\n      options.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + 'px'\r\n      element.style.minHeight = options.minHeight\r\n    }\r\n\r\n    // set table maxHeight\r\n    if (options.maxHeight !== false) {\r\n      options.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + 'px'\r\n      element.style.maxHeight = options.maxHeight\r\n    }\r\n  }\r\n\r\n  // initialize core systems and modules\r\n  _initializeTable() {\r\n    const element = this.element\r\n    const options = this.options\r\n\r\n    this.interactionMonitor.initialize()\r\n\r\n    this.columnManager.initialize()\r\n    this.rowManager.initialize()\r\n\r\n    this._detectBrowser()\r\n\r\n    // initialize core modules\r\n    this.modulesCore.forEach((mod) => {\r\n      mod.initialize()\r\n    })\r\n\r\n    // build table elements\r\n    element.appendChild(this.columnManager.getElement())\r\n    element.appendChild(this.rowManager.getElement())\r\n\r\n    if (options.footerElement) {\r\n      this.footerManager.activate()\r\n    }\r\n\r\n    if (options.autoColumns && options.data) {\r\n      this.columnManager.generateColumnsFromRowData(this.options.data)\r\n    }\r\n\r\n    // initialize regular modules\r\n    this.modulesRegular.forEach((mod) => {\r\n      mod.initialize()\r\n    })\r\n\r\n    this.columnManager.setColumns(options.columns)\r\n\r\n    this.eventBus.dispatch('table-built')\r\n  }\r\n\r\n  _loadInitialData() {\r\n    return this.dataLoader.load(this.options.data).finally(() => {\r\n      this.columnManager.verticalAlignHeaders()\r\n    })\r\n  }\r\n\r\n  // deconstructor\r\n  destroy() {\r\n    const element = this.element\r\n\r\n    this.destroyed = true\r\n\r\n    this.constructor.registry.deregister(this) // deregister table from inter-device communication\r\n\r\n    this.eventBus.dispatch('table-destroy')\r\n\r\n    // clear row data\r\n    this.rowManager.destroy()\r\n\r\n    // clear DOM\r\n    while (element.firstChild) element.removeChild(element.firstChild)\r\n    element.classList.remove('tabulator')\r\n    element.removeAttribute('tabulator-layout')\r\n\r\n    this.externalEvents.dispatch('tableDestroyed')\r\n  }\r\n\r\n  _detectBrowser() {\r\n    const ua = navigator.userAgent || navigator.vendor || window.opera\r\n\r\n    if (ua.indexOf('Trident') > -1) {\r\n      this.browser = 'ie'\r\n      this.browserSlow = true\r\n    } else if (ua.indexOf('Edge') > -1) {\r\n      this.browser = 'edge'\r\n      this.browserSlow = true\r\n    } else if (ua.indexOf('Firefox') > -1) {\r\n      this.browser = 'firefox'\r\n      this.browserSlow = false\r\n    } else if (ua.indexOf('Mac OS') > -1) {\r\n      this.browser = 'safari'\r\n      this.browserSlow = false\r\n    } else {\r\n      this.browser = 'other'\r\n      this.browserSlow = false\r\n    }\r\n\r\n    this.browserMobile =\r\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(\r\n        ua\r\n      ) ||\r\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(\r\n        ua.slice(0, 4)\r\n      )\r\n  }\r\n\r\n  initGuard(func, msg) {\r\n    let stack, line\r\n\r\n    if (this.options.debugInitialization && !this.initialized) {\r\n      if (!func) {\r\n        stack = new Error().stack.split('\\n')\r\n\r\n        line = stack[0] == 'Error' ? stack[2] : stack[1]\r\n\r\n        if (line[0] == ' ') {\r\n          func = line.trim().split(' ')[1].split('.')[1]\r\n        } else {\r\n          func = line.trim().split('@')[0]\r\n        }\r\n      }\r\n\r\n      console.warn(\r\n        'Table Not Initialized - Calling the ' +\r\n          func +\r\n          ' function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.' +\r\n          (msg ? ' ' + msg : '')\r\n      )\r\n    }\r\n\r\n    return this.initialized\r\n  }\r\n\r\n  /// /////////////// Data Handling //////////////////\r\n  // block table redrawing\r\n  blockRedraw() {\r\n    this.initGuard()\r\n\r\n    this.eventBus.dispatch('redraw-blocking')\r\n\r\n    this.rowManager.blockRedraw()\r\n    this.columnManager.blockRedraw()\r\n\r\n    this.eventBus.dispatch('redraw-blocked')\r\n  }\r\n\r\n  // restore table redrawing\r\n  restoreRedraw() {\r\n    this.initGuard()\r\n\r\n    this.eventBus.dispatch('redraw-restoring')\r\n\r\n    this.rowManager.restoreRedraw()\r\n    this.columnManager.restoreRedraw()\r\n\r\n    this.eventBus.dispatch('redraw-restored')\r\n  }\r\n\r\n  // load data\r\n  setData(data, params, config) {\r\n    this.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\")\r\n\r\n    return this.dataLoader.load(data, params, config, false)\r\n  }\r\n\r\n  // clear data\r\n  clearData() {\r\n    this.initGuard()\r\n\r\n    this.dataLoader.blockActiveLoad()\r\n    this.rowManager.clearData()\r\n  }\r\n\r\n  // get table data array\r\n  getData(active) {\r\n    return this.rowManager.getData(active)\r\n  }\r\n\r\n  // get table data array count\r\n  getDataCount(active) {\r\n    return this.rowManager.getDataCount(active)\r\n  }\r\n\r\n  // replace data, keeping table in position with same sort\r\n  replaceData(data, params, config) {\r\n    this.initGuard()\r\n\r\n    return this.dataLoader.load(data, params, config, true, true)\r\n  }\r\n\r\n  // update table data\r\n  updateData(data) {\r\n    let responses = 0\r\n\r\n    this.initGuard()\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.dataLoader.blockActiveLoad()\r\n\r\n      if (typeof data === 'string') {\r\n        data = JSON.parse(data)\r\n      }\r\n\r\n      if (data && data.length > 0) {\r\n        data.forEach((item) => {\r\n          const row = this.rowManager.findRow(item[this.options.index])\r\n\r\n          if (row) {\r\n            responses++\r\n\r\n            row\r\n              .updateData(item)\r\n              .then(() => {\r\n                responses--\r\n\r\n                if (!responses) {\r\n                  resolve()\r\n                }\r\n              })\r\n              .catch((e) => {\r\n                reject('Update Error - Unable to update row', item, e)\r\n              })\r\n          } else {\r\n            reject('Update Error - Unable to find row', item)\r\n          }\r\n        })\r\n      } else {\r\n        console.warn('Update Error - No data provided')\r\n        reject('Update Error - No data provided')\r\n      }\r\n    })\r\n  }\r\n\r\n  addData(data, pos, index) {\r\n    this.initGuard()\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.dataLoader.blockActiveLoad()\r\n\r\n      if (typeof data === 'string') {\r\n        data = JSON.parse(data)\r\n      }\r\n\r\n      if (data) {\r\n        this.rowManager.addRows(data, pos, index).then((rows) => {\r\n          const output = []\r\n\r\n          rows.forEach(function (row) {\r\n            output.push(row.getComponent())\r\n          })\r\n\r\n          resolve(output)\r\n        })\r\n      } else {\r\n        console.warn('Update Error - No data provided')\r\n        reject('Update Error - No data provided')\r\n      }\r\n    })\r\n  }\r\n\r\n  // update table data\r\n  updateOrAddData(data) {\r\n    const rows = []\r\n    let responses = 0\r\n\r\n    this.initGuard()\r\n\r\n    return new Promise((resolve, reject) => {\r\n      this.dataLoader.blockActiveLoad()\r\n\r\n      if (typeof data === 'string') {\r\n        data = JSON.parse(data)\r\n      }\r\n\r\n      if (data && data.length > 0) {\r\n        data.forEach((item) => {\r\n          const row = this.rowManager.findRow(item[this.options.index])\r\n\r\n          responses++\r\n\r\n          if (row) {\r\n            row.updateData(item).then(() => {\r\n              responses--\r\n              rows.push(row.getComponent())\r\n\r\n              if (!responses) {\r\n                resolve(rows)\r\n              }\r\n            })\r\n          } else {\r\n            this.rowManager.addRows(item).then((newRows) => {\r\n              responses--\r\n              rows.push(newRows[0].getComponent())\r\n\r\n              if (!responses) {\r\n                resolve(rows)\r\n              }\r\n            })\r\n          }\r\n        })\r\n      } else {\r\n        console.warn('Update Error - No data provided')\r\n        reject('Update Error - No data provided')\r\n      }\r\n    })\r\n  }\r\n\r\n  // get row object\r\n  getRow(index) {\r\n    const row = this.rowManager.findRow(index)\r\n\r\n    if (row) {\r\n      return row.getComponent()\r\n    } else {\r\n      console.warn('Find Error - No matching row found:', index)\r\n      return false\r\n    }\r\n  }\r\n\r\n  // get row object\r\n  getRowFromPosition(position) {\r\n    const row = this.rowManager.getRowFromPosition(position)\r\n\r\n    if (row) {\r\n      return row.getComponent()\r\n    } else {\r\n      console.warn('Find Error - No matching row found:', position)\r\n      return false\r\n    }\r\n  }\r\n\r\n  // delete row from table\r\n  deleteRow(index) {\r\n    const foundRows = []\r\n\r\n    this.initGuard()\r\n\r\n    if (!Array.isArray(index)) {\r\n      index = [index]\r\n    }\r\n\r\n    // find matching rows\r\n    for (const item of index) {\r\n      const row = this.rowManager.findRow(item, true)\r\n\r\n      if (row) {\r\n        foundRows.push(row)\r\n      } else {\r\n        console.error('Delete Error - No matching row found:', item)\r\n        return Promise.reject('Delete Error - No matching row found')\r\n      }\r\n    }\r\n\r\n    // sort rows into correct order to ensure smooth delete from table\r\n    foundRows.sort((a, b) => {\r\n      return this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1\r\n    })\r\n\r\n    // delete rows\r\n    foundRows.forEach((row) => {\r\n      row.delete()\r\n    })\r\n\r\n    this.rowManager.reRenderInPosition()\r\n\r\n    return Promise.resolve()\r\n  }\r\n\r\n  // add row to table\r\n  addRow(data, pos, index) {\r\n    this.initGuard()\r\n\r\n    if (typeof data === 'string') {\r\n      data = JSON.parse(data)\r\n    }\r\n\r\n    return this.rowManager.addRows(data, pos, index, true).then((rows) => {\r\n      return rows[0].getComponent()\r\n    })\r\n  }\r\n\r\n  // update a row if it exists otherwise create it\r\n  updateOrAddRow(index, data) {\r\n    const row = this.rowManager.findRow(index)\r\n\r\n    this.initGuard()\r\n\r\n    if (typeof data === 'string') {\r\n      data = JSON.parse(data)\r\n    }\r\n\r\n    if (row) {\r\n      return row.updateData(data).then(() => {\r\n        return row.getComponent()\r\n      })\r\n    } else {\r\n      return this.rowManager.addRows(data).then((rows) => {\r\n        return rows[0].getComponent()\r\n      })\r\n    }\r\n  }\r\n\r\n  // update row data\r\n  updateRow(index, data) {\r\n    const row = this.rowManager.findRow(index)\r\n\r\n    this.initGuard()\r\n\r\n    if (typeof data === 'string') {\r\n      data = JSON.parse(data)\r\n    }\r\n\r\n    if (row) {\r\n      return row.updateData(data).then(() => {\r\n        return Promise.resolve(row.getComponent())\r\n      })\r\n    } else {\r\n      console.warn('Update Error - No matching row found:', index)\r\n      return Promise.reject('Update Error - No matching row found')\r\n    }\r\n  }\r\n\r\n  // scroll to row in DOM\r\n  scrollToRow(index, position, ifVisible) {\r\n    const row = this.rowManager.findRow(index)\r\n\r\n    if (row) {\r\n      return this.rowManager.scrollToRow(row, position, ifVisible)\r\n    } else {\r\n      console.warn('Scroll Error - No matching row found:', index)\r\n      return Promise.reject('Scroll Error - No matching row found')\r\n    }\r\n  }\r\n\r\n  moveRow(from, to, after) {\r\n    const fromRow = this.rowManager.findRow(from)\r\n\r\n    this.initGuard()\r\n\r\n    if (fromRow) {\r\n      fromRow.moveToRow(to, after)\r\n    } else {\r\n      console.warn('Move Error - No matching row found:', from)\r\n    }\r\n  }\r\n\r\n  getRows(active) {\r\n    return this.rowManager.getComponents(active)\r\n  }\r\n\r\n  // get position of row in table\r\n  getRowPosition(index) {\r\n    const row = this.rowManager.findRow(index)\r\n\r\n    if (row) {\r\n      return row.getPosition()\r\n    } else {\r\n      console.warn('Position Error - No matching row found:', index)\r\n      return false\r\n    }\r\n  }\r\n\r\n  /// //////////// Column Functions  ///////////////\r\n  setColumns(definition) {\r\n    this.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\")\r\n\r\n    this.columnManager.setColumns(definition)\r\n  }\r\n\r\n  getColumns(structured) {\r\n    return this.columnManager.getComponents(structured)\r\n  }\r\n\r\n  getColumn(field) {\r\n    const column = this.columnManager.findColumn(field)\r\n\r\n    if (column) {\r\n      return column.getComponent()\r\n    } else {\r\n      console.warn('Find Error - No matching column found:', field)\r\n      return false\r\n    }\r\n  }\r\n\r\n  getColumnDefinitions() {\r\n    return this.columnManager.getDefinitionTree()\r\n  }\r\n\r\n  showColumn(field) {\r\n    const column = this.columnManager.findColumn(field)\r\n\r\n    this.initGuard()\r\n\r\n    if (column) {\r\n      column.show()\r\n    } else {\r\n      console.warn('Column Show Error - No matching column found:', field)\r\n      return false\r\n    }\r\n  }\r\n\r\n  hideColumn(field) {\r\n    const column = this.columnManager.findColumn(field)\r\n\r\n    this.initGuard()\r\n\r\n    if (column) {\r\n      column.hide()\r\n    } else {\r\n      console.warn('Column Hide Error - No matching column found:', field)\r\n      return false\r\n    }\r\n  }\r\n\r\n  toggleColumn(field) {\r\n    const column = this.columnManager.findColumn(field)\r\n\r\n    this.initGuard()\r\n\r\n    if (column) {\r\n      if (column.visible) {\r\n        column.hide()\r\n      } else {\r\n        column.show()\r\n      }\r\n    } else {\r\n      console.warn('Column Visibility Toggle Error - No matching column found:', field)\r\n      return false\r\n    }\r\n  }\r\n\r\n  addColumn(definition, before, field) {\r\n    const column = this.columnManager.findColumn(field)\r\n\r\n    this.initGuard()\r\n\r\n    return this.columnManager.addColumn(definition, before, column).then((column) => {\r\n      return column.getComponent()\r\n    })\r\n  }\r\n\r\n  deleteColumn(field) {\r\n    const column = this.columnManager.findColumn(field)\r\n\r\n    this.initGuard()\r\n\r\n    if (column) {\r\n      return column.delete()\r\n    } else {\r\n      console.warn('Column Delete Error - No matching column found:', field)\r\n      return Promise.reject()\r\n    }\r\n  }\r\n\r\n  updateColumnDefinition(field, definition) {\r\n    const column = this.columnManager.findColumn(field)\r\n\r\n    this.initGuard()\r\n\r\n    if (column) {\r\n      return column.updateDefinition(definition)\r\n    } else {\r\n      console.warn('Column Update Error - No matching column found:', field)\r\n      return Promise.reject()\r\n    }\r\n  }\r\n\r\n  moveColumn(from, to, after) {\r\n    const fromColumn = this.columnManager.findColumn(from)\r\n    const toColumn = this.columnManager.findColumn(to)\r\n\r\n    this.initGuard()\r\n\r\n    if (fromColumn) {\r\n      if (toColumn) {\r\n        this.columnManager.moveColumn(fromColumn, toColumn, after)\r\n      } else {\r\n        console.warn('Move Error - No matching column found:', toColumn)\r\n      }\r\n    } else {\r\n      console.warn('Move Error - No matching column found:', from)\r\n    }\r\n  }\r\n\r\n  // scroll to column in DOM\r\n  scrollToColumn(field, position, ifVisible) {\r\n    return new Promise((resolve, reject) => {\r\n      const column = this.columnManager.findColumn(field)\r\n\r\n      if (column) {\r\n        return this.columnManager.scrollToColumn(column, position, ifVisible)\r\n      } else {\r\n        console.warn('Scroll Error - No matching column found:', field)\r\n        return Promise.reject('Scroll Error - No matching column found')\r\n      }\r\n    })\r\n  }\r\n\r\n  /// ///////// General Public Functions ////////////\r\n  // redraw list without updating data\r\n  redraw(force) {\r\n    this.initGuard()\r\n\r\n    this.columnManager.redraw(force)\r\n    this.rowManager.redraw(force)\r\n  }\r\n\r\n  setHeight(height) {\r\n    this.options.height = isNaN(height) ? height : height + 'px'\r\n    this.element.style.height = this.options.height\r\n    this.rowManager.initializeRenderer()\r\n    this.rowManager.redraw(true)\r\n  }\r\n\r\n  /// ///////////////// Event Bus ///////////////////\r\n\r\n  on(key, callback) {\r\n    this.externalEvents.subscribe(key, callback)\r\n  }\r\n\r\n  off(key, callback) {\r\n    this.externalEvents.unsubscribe(key, callback)\r\n  }\r\n\r\n  dispatchEvent() {\r\n    const args = Array.from(arguments)\r\n    args.shift()\r\n\r\n    this.externalEvents.dispatch(...arguments)\r\n  }\r\n\r\n  /// ///////////////// Alerts ///////////////////\r\n\r\n  alert(contents, type) {\r\n    this.initGuard()\r\n\r\n    this.alertManager.alert(contents, type)\r\n  }\r\n\r\n  clearAlert() {\r\n    this.initGuard()\r\n\r\n    this.alertManager.clear()\r\n  }\r\n\r\n  /// /////////// Extension Management //////////////\r\n  modExists(plugin, required) {\r\n    if (this.modules[plugin]) {\r\n      return true\r\n    } else {\r\n      if (required) {\r\n        console.error('Tabulator Module Not Installed: ' + plugin)\r\n      }\r\n      return false\r\n    }\r\n  }\r\n\r\n  module(key) {\r\n    const mod = this.modules[key]\r\n\r\n    if (!mod) {\r\n      console.error('Tabulator module not installed: ' + key)\r\n    }\r\n\r\n    return mod\r\n  }\r\n}\r\n\r\nexport default Tabulator\r\n","export default {\r\n  rownum: function (value, data, type, params, column, row) {\r\n    return row.getPosition()\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\nimport Helpers from '../../core/tools/Helpers.js'\r\n\r\nimport defaultAccessors from './defaults/accessors.js'\r\n\r\nexport default class Accessor extends Module {\r\n  static moduleName = 'accessor'\r\n\r\n  // load defaults\r\n  static accessors = defaultAccessors\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.allowedTypes = ['', 'data', 'download', 'clipboard', 'print', 'htmlOutput'] // list of accessor types\r\n\r\n    this.registerColumnOption('accessor')\r\n    this.registerColumnOption('accessorParams')\r\n    this.registerColumnOption('accessorData')\r\n    this.registerColumnOption('accessorDataParams')\r\n    this.registerColumnOption('accessorDownload')\r\n    this.registerColumnOption('accessorDownloadParams')\r\n    this.registerColumnOption('accessorClipboard')\r\n    this.registerColumnOption('accessorClipboardParams')\r\n    this.registerColumnOption('accessorPrint')\r\n    this.registerColumnOption('accessorPrintParams')\r\n    this.registerColumnOption('accessorHtmlOutput')\r\n    this.registerColumnOption('accessorHtmlOutputParams')\r\n  }\r\n\r\n  initialize() {\r\n    this.subscribe('column-layout', this.initializeColumn.bind(this))\r\n    this.subscribe('row-data-retrieve', this.transformRow.bind(this))\r\n  }\r\n\r\n  // initialize column accessor\r\n  initializeColumn(column) {\r\n    let match = false\r\n    const config = {}\r\n\r\n    this.allowedTypes.forEach((type) => {\r\n      const key = 'accessor' + (type.charAt(0).toUpperCase() + type.slice(1))\r\n      let accessor\r\n\r\n      if (column.definition[key]) {\r\n        accessor = this.lookupAccessor(column.definition[key])\r\n\r\n        if (accessor) {\r\n          match = true\r\n\r\n          config[key] = {\r\n            accessor,\r\n            params: column.definition[key + 'Params'] || {}\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    if (match) {\r\n      column.modules.accessor = config\r\n    }\r\n  }\r\n\r\n  lookupAccessor(value) {\r\n    let accessor = false\r\n\r\n    // set column accessor\r\n    switch (typeof value) {\r\n      case 'string':\r\n        if (Accessor.accessors[value]) {\r\n          accessor = Accessor.accessors[value]\r\n        } else {\r\n          console.warn('Accessor Error - No such accessor found, ignoring: ', value)\r\n        }\r\n        break\r\n\r\n      case 'function':\r\n        accessor = value\r\n        break\r\n    }\r\n\r\n    return accessor\r\n  }\r\n\r\n  // apply accessor to row\r\n  transformRow(row, type) {\r\n    const key = 'accessor' + (type.charAt(0).toUpperCase() + type.slice(1))\r\n    const rowComponent = row.getComponent()\r\n\r\n    // clone data object with deep copy to isolate internal data from returned result\r\n    const data = Helpers.deepClone(row.data || {})\r\n\r\n    this.table.columnManager.traverse(function (column) {\r\n      let value, accessor, params, colComponent\r\n\r\n      if (column.modules.accessor) {\r\n        accessor = column.modules.accessor[key] || column.modules.accessor.accessor || false\r\n\r\n        if (accessor) {\r\n          value = column.getFieldValue(data)\r\n\r\n          if (value != 'undefined') {\r\n            colComponent = column.getComponent()\r\n            params =\r\n              typeof accessor.params === 'function'\r\n                ? accessor.params(value, data, type, colComponent, rowComponent)\r\n                : accessor.params\r\n            column.setFieldValue(data, accessor.accessor(value, data, type, params, colComponent, rowComponent))\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    return data\r\n  }\r\n}\r\n","export default {\r\n  method: 'GET'\r\n}\r\n","function generateParamsList(data, prefix) {\r\n  let output = []\r\n\r\n  prefix = prefix || ''\r\n\r\n  if (Array.isArray(data)) {\r\n    data.forEach((item, i) => {\r\n      output = output.concat(generateParamsList(item, prefix ? prefix + '[' + i + ']' : i))\r\n    })\r\n  } else if (typeof data === 'object') {\r\n    for (const key in data) {\r\n      output = output.concat(generateParamsList(data[key], prefix ? prefix + '[' + key + ']' : key))\r\n    }\r\n  } else {\r\n    output.push({ key: prefix, value: data })\r\n  }\r\n\r\n  return output\r\n}\r\n\r\nfunction serializeParams(params) {\r\n  const output = generateParamsList(params)\r\n  const encoded = []\r\n\r\n  output.forEach(function (item) {\r\n    encoded.push(encodeURIComponent(item.key) + '=' + encodeURIComponent(item.value))\r\n  })\r\n\r\n  return encoded.join('&')\r\n}\r\n\r\nexport default function (url, config, params) {\r\n  if (url) {\r\n    if (params && Object.keys(params).length) {\r\n      if (!config.method || config.method.toLowerCase() == 'get') {\r\n        config.method = 'get'\r\n\r\n        url += (url.includes('?') ? '&' : '?') + serializeParams(params)\r\n      }\r\n    }\r\n  }\r\n\r\n  return url\r\n}\r\n","export default function (url, config, params) {\r\n  let contentType\r\n\r\n  return new Promise((resolve, reject) => {\r\n    // set url\r\n    url = this.urlGenerator.call(this.table, url, config, params)\r\n\r\n    // set body content if not GET request\r\n    if (config.method.toUpperCase() != 'GET') {\r\n      contentType =\r\n        typeof this.table.options.ajaxContentType === 'object'\r\n          ? this.table.options.ajaxContentType\r\n          : this.contentTypeFormatters[this.table.options.ajaxContentType]\r\n      if (contentType) {\r\n        for (const key in contentType.headers) {\r\n          if (!config.headers) {\r\n            config.headers = {}\r\n          }\r\n\r\n          if (typeof config.headers[key] === 'undefined') {\r\n            config.headers[key] = contentType.headers[key]\r\n          }\r\n        }\r\n\r\n        config.body = contentType.body.call(this, url, config, params)\r\n      } else {\r\n        console.warn('Ajax Error - Invalid ajaxContentType value:', this.table.options.ajaxContentType)\r\n      }\r\n    }\r\n\r\n    if (url) {\r\n      // configure headers\r\n      if (typeof config.headers === 'undefined') {\r\n        config.headers = {}\r\n      }\r\n\r\n      if (typeof config.headers.Accept === 'undefined') {\r\n        config.headers.Accept = 'application/json'\r\n      }\r\n\r\n      if (typeof config.headers['X-Requested-With'] === 'undefined') {\r\n        config.headers['X-Requested-With'] = 'XMLHttpRequest'\r\n      }\r\n\r\n      if (typeof config.mode === 'undefined') {\r\n        config.mode = 'cors'\r\n      }\r\n\r\n      if (config.mode == 'cors') {\r\n        if (typeof config.headers.Origin === 'undefined') {\r\n          config.headers.Origin = window.location.origin\r\n        }\r\n\r\n        if (typeof config.credentials === 'undefined') {\r\n          config.credentials = 'same-origin'\r\n        }\r\n      } else {\r\n        if (typeof config.credentials === 'undefined') {\r\n          config.credentials = 'include'\r\n        }\r\n      }\r\n\r\n      // send request\r\n      fetch(url, config)\r\n        .then((response) => {\r\n          if (response.ok) {\r\n            response\r\n              .json()\r\n              .then((data) => {\r\n                resolve(data)\r\n              })\r\n              .catch((error) => {\r\n                reject(error)\r\n                console.warn('Ajax Load Error - Invalid JSON returned', error)\r\n              })\r\n          } else {\r\n            console.error('Ajax Load Error - Connection Error: ' + response.status, response.statusText)\r\n            reject(response)\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error('Ajax Load Error - Connection Error: ', error)\r\n          reject(error)\r\n        })\r\n    } else {\r\n      console.warn('Ajax Load Error - No URL Set')\r\n      resolve([])\r\n    }\r\n  })\r\n}\r\n","function generateParamsList(data, prefix) {\r\n  let output = []\r\n\r\n  prefix = prefix || ''\r\n\r\n  if (Array.isArray(data)) {\r\n    data.forEach((item, i) => {\r\n      output = output.concat(generateParamsList(item, prefix ? prefix + '[' + i + ']' : i))\r\n    })\r\n  } else if (typeof data === 'object') {\r\n    for (const key in data) {\r\n      output = output.concat(generateParamsList(data[key], prefix ? prefix + '[' + key + ']' : key))\r\n    }\r\n  } else {\r\n    output.push({ key: prefix, value: data })\r\n  }\r\n\r\n  return output\r\n}\r\n\r\nexport default {\r\n  json: {\r\n    headers: {\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: function (url, config, params) {\r\n      return JSON.stringify(params)\r\n    }\r\n  },\r\n  form: {\r\n    headers: {},\r\n    body: function (url, config, params) {\r\n      const output = generateParamsList(params)\r\n      const form = new FormData()\r\n\r\n      output.forEach(function (item) {\r\n        form.append(item.key, item.value)\r\n      })\r\n\r\n      return form\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultConfig from './defaults/config.js'\r\nimport defaultURLGenerator from './defaults/urlGenerator.js'\r\nimport defaultLoaderPromise from './defaults/loaderPromise.js'\r\nimport defaultContentTypeFormatters from './defaults/contentTypeFormatters.js'\r\n\r\nexport default class Ajax extends Module {\r\n  static moduleName = 'ajax'\r\n\r\n  // load defaults\r\n  static defaultConfig = defaultConfig\r\n  static defaultURLGenerator = defaultURLGenerator\r\n  static defaultLoaderPromise = defaultLoaderPromise\r\n  static contentTypeFormatters = defaultContentTypeFormatters\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.config = {} // hold config object for ajax request\r\n    this.url = '' // request URL\r\n    this.urlGenerator = false\r\n    this.params = false // request parameters\r\n\r\n    this.loaderPromise = false\r\n\r\n    this.registerTableOption('ajaxURL', false) // url for ajax loading\r\n    this.registerTableOption('ajaxURLGenerator', false)\r\n    this.registerTableOption('ajaxParams', {}) // params for ajax loading\r\n    this.registerTableOption('ajaxConfig', 'get') // ajax request type\r\n    this.registerTableOption('ajaxContentType', 'form') // ajax request type\r\n    this.registerTableOption('ajaxRequestFunc', false) // promise function\r\n\r\n    this.registerTableOption('ajaxRequesting', function () {})\r\n    this.registerTableOption('ajaxResponse', false)\r\n\r\n    this.contentTypeFormatters = Ajax.contentTypeFormatters\r\n  }\r\n\r\n  // initialize setup options\r\n  initialize() {\r\n    this.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise\r\n    this.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator\r\n\r\n    if (this.table.options.ajaxURL) {\r\n      this.setUrl(this.table.options.ajaxURL)\r\n    }\r\n\r\n    this.setDefaultConfig(this.table.options.ajaxConfig)\r\n\r\n    this.registerTableFunction('getAjaxUrl', this.getUrl.bind(this))\r\n\r\n    this.subscribe('data-loading', this.requestDataCheck.bind(this))\r\n    this.subscribe('data-params', this.requestParams.bind(this))\r\n    this.subscribe('data-load', this.requestData.bind(this))\r\n  }\r\n\r\n  requestParams(data, config, silent, params) {\r\n    let ajaxParams = this.table.options.ajaxParams\r\n\r\n    if (ajaxParams) {\r\n      if (typeof ajaxParams === 'function') {\r\n        ajaxParams = ajaxParams.call(this.table)\r\n      }\r\n\r\n      params = Object.assign(Object.assign({}, ajaxParams), params)\r\n    }\r\n\r\n    return params\r\n  }\r\n\r\n  requestDataCheck(data, params, config, silent) {\r\n    return !!((!data && this.url) || typeof data === 'string')\r\n  }\r\n\r\n  requestData(url, params, config, silent, previousData) {\r\n    let ajaxConfig\r\n\r\n    if (!previousData && this.requestDataCheck(url)) {\r\n      if (url) {\r\n        this.setUrl(url)\r\n      }\r\n\r\n      ajaxConfig = this.generateConfig(config)\r\n\r\n      return this.sendRequest(this.url, params, ajaxConfig)\r\n    } else {\r\n      return previousData\r\n    }\r\n  }\r\n\r\n  setDefaultConfig(config = {}) {\r\n    this.config = Object.assign({}, Ajax.defaultConfig)\r\n\r\n    if (typeof config === 'string') {\r\n      this.config.method = config\r\n    } else {\r\n      Object.assign(this.config, config)\r\n    }\r\n  }\r\n\r\n  // load config object\r\n  generateConfig(config = {}) {\r\n    const ajaxConfig = Object.assign({}, this.config)\r\n\r\n    if (typeof config === 'string') {\r\n      ajaxConfig.method = config\r\n    } else {\r\n      Object.assign(ajaxConfig, config)\r\n    }\r\n\r\n    return ajaxConfig\r\n  }\r\n\r\n  // set request url\r\n  setUrl(url) {\r\n    this.url = url\r\n  }\r\n\r\n  // get request url\r\n  getUrl() {\r\n    return this.url\r\n  }\r\n\r\n  // send ajax request\r\n  sendRequest(url, params, config) {\r\n    if (this.table.options.ajaxRequesting.call(this.table, url, params) !== false) {\r\n      return this.loaderPromise(url, config, params).then((data) => {\r\n        if (this.table.options.ajaxResponse) {\r\n          data = this.table.options.ajaxResponse.call(this.table, url, params, data)\r\n        }\r\n\r\n        return data\r\n      })\r\n    } else {\r\n      return Promise.reject()\r\n    }\r\n  }\r\n}\r\n","export default {\r\n  replace: function (data) {\r\n    return this.table.setData(data)\r\n  },\r\n  update: function (data) {\r\n    return this.table.updateOrAddData(data)\r\n  },\r\n  insert: function (data) {\r\n    return this.table.addData(data)\r\n  }\r\n}\r\n","export default {\r\n  table: function (clipboard) {\r\n    const data = []\r\n    let headerFindSuccess = true\r\n    const columns = this.table.columnManager.columns\r\n    let columnMap = []\r\n    const rows = []\r\n\r\n    // get data from clipboard into array of columns and rows.\r\n    clipboard = clipboard.split('\\n')\r\n\r\n    clipboard.forEach(function (row) {\r\n      data.push(row.split('\\t'))\r\n    })\r\n\r\n    if (data.length && !(data.length === 1 && data[0].length < 2)) {\r\n      // check if headers are present by title\r\n      data[0].forEach(function (value) {\r\n        const column = columns.find(function (column) {\r\n          return value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim()\r\n        })\r\n\r\n        if (column) {\r\n          columnMap.push(column)\r\n        } else {\r\n          headerFindSuccess = false\r\n        }\r\n      })\r\n\r\n      // check if column headers are present by field\r\n      if (!headerFindSuccess) {\r\n        headerFindSuccess = true\r\n        columnMap = []\r\n\r\n        data[0].forEach(function (value) {\r\n          const column = columns.find(function (column) {\r\n            return value && column.field && value.trim() && column.field.trim() === value.trim()\r\n          })\r\n\r\n          if (column) {\r\n            columnMap.push(column)\r\n          } else {\r\n            headerFindSuccess = false\r\n          }\r\n        })\r\n\r\n        if (!headerFindSuccess) {\r\n          columnMap = this.table.columnManager.columnsByIndex\r\n        }\r\n      }\r\n\r\n      // remove header row if found\r\n      if (headerFindSuccess) {\r\n        data.shift()\r\n      }\r\n\r\n      data.forEach(function (item) {\r\n        const row = {}\r\n\r\n        item.forEach(function (value, i) {\r\n          if (columnMap[i]) {\r\n            row[columnMap[i].field] = value\r\n          }\r\n        })\r\n\r\n        rows.push(row)\r\n      })\r\n\r\n      return rows\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n}\r\n","import bindings from './keybindings/bindings.js'\r\nimport actions from './keybindings/actions.js'\r\n\r\nexport default {\r\n  keybindings: {\r\n    bindings,\r\n    actions\r\n  }\r\n}\r\n","export default {\r\n  copyToClipboard: ['ctrl + 67', 'meta + 67']\r\n}\r\n","export default {\r\n  copyToClipboard: function (e) {\r\n    if (!this.table.modules.edit.currentCell) {\r\n      if (this.table.modExists('clipboard', true)) {\r\n        this.table.modules.clipboard.copy(false, true)\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultPasteActions from './defaults/pasteActions.js'\r\nimport defaultPasteParsers from './defaults/pasteParsers.js'\r\nimport extensions from './extensions/extensions.js'\r\n\r\nexport default class Clipboard extends Module {\r\n  static moduleName = 'clipboard'\r\n  static moduleExtensions = extensions\r\n\r\n  // load defaults\r\n  static pasteActions = defaultPasteActions\r\n  static pasteParsers = defaultPasteParsers\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.mode = true\r\n    this.pasteParser = function () {}\r\n    this.pasteAction = function () {}\r\n    this.customSelection = false\r\n    this.rowRange = false\r\n    this.blocked = true // block copy actions not originating from this command\r\n\r\n    this.registerTableOption('clipboard', false) // enable clipboard\r\n    this.registerTableOption('clipboardCopyStyled', true) // formatted table data\r\n    this.registerTableOption('clipboardCopyConfig', false) // clipboard config\r\n    this.registerTableOption('clipboardCopyFormatter', false) // DEPRECATED - REMOVE in 5.0\r\n    this.registerTableOption('clipboardCopyRowRange', 'active') // restrict clipboard to visible rows only\r\n    this.registerTableOption('clipboardPasteParser', 'table') // convert pasted clipboard data to rows\r\n    this.registerTableOption('clipboardPasteAction', 'insert') // how to insert pasted data into the table\r\n\r\n    this.registerColumnOption('clipboard')\r\n    this.registerColumnOption('titleClipboard')\r\n  }\r\n\r\n  initialize() {\r\n    this.mode = this.table.options.clipboard\r\n\r\n    this.rowRange = this.table.options.clipboardCopyRowRange\r\n\r\n    if (this.mode === true || this.mode === 'copy') {\r\n      this.table.element.addEventListener('copy', (e) => {\r\n        let plain, html, list\r\n\r\n        if (!this.blocked) {\r\n          e.preventDefault()\r\n\r\n          if (this.customSelection) {\r\n            plain = this.customSelection\r\n\r\n            if (this.table.options.clipboardCopyFormatter) {\r\n              plain = this.table.options.clipboardCopyFormatter('plain', plain)\r\n            }\r\n          } else {\r\n            list = this.table.modules.export.generateExportList(\r\n              this.table.options.clipboardCopyConfig,\r\n              this.table.options.clipboardCopyStyled,\r\n              this.rowRange,\r\n              'clipboard'\r\n            )\r\n\r\n            html = this.table.modules.export.generateHTMLTable(list)\r\n            plain = html ? this.generatePlainContent(list) : ''\r\n\r\n            if (this.table.options.clipboardCopyFormatter) {\r\n              plain = this.table.options.clipboardCopyFormatter('plain', plain)\r\n              html = this.table.options.clipboardCopyFormatter('html', html)\r\n            }\r\n          }\r\n\r\n          if (window.clipboardData && window.clipboardData.setData) {\r\n            window.clipboardData.setData('Text', plain)\r\n          } else if (e.clipboardData && e.clipboardData.setData) {\r\n            e.clipboardData.setData('text/plain', plain)\r\n            if (html) {\r\n              e.clipboardData.setData('text/html', html)\r\n            }\r\n          } else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\r\n            e.originalEvent.clipboardData.setData('text/plain', plain)\r\n            if (html) {\r\n              e.originalEvent.clipboardData.setData('text/html', html)\r\n            }\r\n          }\r\n\r\n          this.dispatchExternal('clipboardCopied', plain, html)\r\n\r\n          this.reset()\r\n        }\r\n      })\r\n    }\r\n\r\n    if (this.mode === true || this.mode === 'paste') {\r\n      this.table.element.addEventListener('paste', (e) => {\r\n        this.paste(e)\r\n      })\r\n    }\r\n\r\n    this.setPasteParser(this.table.options.clipboardPasteParser)\r\n    this.setPasteAction(this.table.options.clipboardPasteAction)\r\n\r\n    this.registerTableFunction('copyToClipboard', this.copy.bind(this))\r\n  }\r\n\r\n  reset() {\r\n    this.blocked = true\r\n    this.customSelection = false\r\n  }\r\n\r\n  generatePlainContent(list) {\r\n    const output = []\r\n\r\n    list.forEach((row) => {\r\n      const rowData = []\r\n\r\n      row.columns.forEach((col) => {\r\n        let value = ''\r\n\r\n        if (col) {\r\n          if (row.type === 'group') {\r\n            col.value = col.component.getKey()\r\n          }\r\n\r\n          if (col.value === null) {\r\n            value = ''\r\n          } else {\r\n            switch (typeof col.value) {\r\n              case 'object':\r\n                value = JSON.stringify(col.value)\r\n                break\r\n\r\n              case 'undefined':\r\n                value = ''\r\n                break\r\n\r\n              default:\r\n                value = col.value\r\n            }\r\n          }\r\n        }\r\n\r\n        rowData.push(value)\r\n      })\r\n\r\n      output.push(rowData.join('\\t'))\r\n    })\r\n\r\n    return output.join('\\n')\r\n  }\r\n\r\n  copy(range, internal) {\r\n    let sel, textRange\r\n    this.blocked = false\r\n    this.customSelection = false\r\n\r\n    if (this.mode === true || this.mode === 'copy') {\r\n      this.rowRange = range || this.table.options.clipboardCopyRowRange\r\n\r\n      if (typeof window.getSelection !== 'undefined' && typeof document.createRange !== 'undefined') {\r\n        range = document.createRange()\r\n        range.selectNodeContents(this.table.element)\r\n        sel = window.getSelection()\r\n\r\n        if (sel.toString() && internal) {\r\n          this.customSelection = sel.toString()\r\n        }\r\n\r\n        sel.removeAllRanges()\r\n        sel.addRange(range)\r\n      } else if (typeof document.selection !== 'undefined' && typeof document.body.createTextRange !== 'undefined') {\r\n        textRange = document.body.createTextRange()\r\n        textRange.moveToElementText(this.table.element)\r\n        textRange.select()\r\n      }\r\n\r\n      document.execCommand('copy')\r\n\r\n      if (sel) {\r\n        sel.removeAllRanges()\r\n      }\r\n    }\r\n  }\r\n\r\n  // PASTE EVENT HANDLING\r\n  setPasteAction(action) {\r\n    switch (typeof action) {\r\n      case 'string':\r\n        this.pasteAction = Clipboard.pasteActions[action]\r\n\r\n        if (!this.pasteAction) {\r\n          console.warn('Clipboard Error - No such paste action found:', action)\r\n        }\r\n        break\r\n\r\n      case 'function':\r\n        this.pasteAction = action\r\n        break\r\n    }\r\n  }\r\n\r\n  setPasteParser(parser) {\r\n    switch (typeof parser) {\r\n      case 'string':\r\n        this.pasteParser = Clipboard.pasteParsers[parser]\r\n\r\n        if (!this.pasteParser) {\r\n          console.warn('Clipboard Error - No such paste parser found:', parser)\r\n        }\r\n        break\r\n\r\n      case 'function':\r\n        this.pasteParser = parser\r\n        break\r\n    }\r\n  }\r\n\r\n  paste(e) {\r\n    let data, rowData, rows\r\n\r\n    if (this.checkPasteOrigin(e)) {\r\n      data = this.getPasteData(e)\r\n\r\n      rowData = this.pasteParser.call(this, data)\r\n\r\n      if (rowData) {\r\n        e.preventDefault()\r\n\r\n        if (this.table.modExists('mutator')) {\r\n          rowData = this.mutateData(rowData)\r\n        }\r\n\r\n        rows = this.pasteAction.call(this, rowData)\r\n\r\n        this.dispatchExternal('clipboardPasted', data, rowData, rows)\r\n      } else {\r\n        this.dispatchExternal('clipboardPasteError', data)\r\n      }\r\n    }\r\n  }\r\n\r\n  mutateData(data) {\r\n    let output = []\r\n\r\n    if (Array.isArray(data)) {\r\n      data.forEach((row) => {\r\n        output.push(this.table.modules.mutator.transformRow(row, 'clipboard'))\r\n      })\r\n    } else {\r\n      output = data\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  checkPasteOrigin(e) {\r\n    let valid = true\r\n    const blocked = this.confirm('clipboard-paste', [e])\r\n\r\n    if (blocked || !['DIV', 'SPAN'].includes(e.target.tagName)) {\r\n      valid = false\r\n    }\r\n\r\n    return valid\r\n  }\r\n\r\n  getPasteData(e) {\r\n    let data\r\n\r\n    if (window.clipboardData && window.clipboardData.getData) {\r\n      data = window.clipboardData.getData('Text')\r\n    } else if (e.clipboardData && e.clipboardData.getData) {\r\n      data = e.clipboardData.getData('text/plain')\r\n    } else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\r\n      data = e.originalEvent.clipboardData.getData('text/plain')\r\n    }\r\n\r\n    return data\r\n  }\r\n}\r\n","export default class CalcComponent {\r\n  constructor(row) {\r\n    this._row = row\r\n\r\n    return new Proxy(this, {\r\n      get: function (target, name, receiver) {\r\n        if (typeof target[name] !== 'undefined') {\r\n          return target[name]\r\n        } else {\r\n          return target._row.table.componentFunctionBinder.handle('row', target._row, name)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  getData(transform) {\r\n    return this._row.getData(transform)\r\n  }\r\n\r\n  getElement() {\r\n    return this._row.getElement()\r\n  }\r\n\r\n  getTable() {\r\n    return this._row.table\r\n  }\r\n\r\n  getCells() {\r\n    const cells = []\r\n\r\n    this._row.getCells().forEach(function (cell) {\r\n      cells.push(cell.getComponent())\r\n    })\r\n\r\n    return cells\r\n  }\r\n\r\n  getCell(column) {\r\n    const cell = this._row.getCell(column)\r\n    return cell ? cell.getComponent() : false\r\n  }\r\n\r\n  _getSelf() {\r\n    return this._row\r\n  }\r\n}\r\n","export default {\r\n  avg: function (values, data, calcParams) {\r\n    let output = 0\r\n    const precision = typeof calcParams.precision !== 'undefined' ? calcParams.precision : 2\r\n\r\n    if (values.length) {\r\n      output = values.reduce(function (sum, value) {\r\n        return Number(sum) + Number(value)\r\n      })\r\n\r\n      output = output / values.length\r\n\r\n      output = precision !== false ? output.toFixed(precision) : output\r\n    }\r\n\r\n    return parseFloat(output).toString()\r\n  },\r\n  max: function (values, data, calcParams) {\r\n    let output = null\r\n    const precision = typeof calcParams.precision !== 'undefined' ? calcParams.precision : false\r\n\r\n    values.forEach(function (value) {\r\n      value = Number(value)\r\n\r\n      if (value > output || output === null) {\r\n        output = value\r\n      }\r\n    })\r\n\r\n    return output !== null ? (precision !== false ? output.toFixed(precision) : output) : ''\r\n  },\r\n  min: function (values, data, calcParams) {\r\n    let output = null\r\n    const precision = typeof calcParams.precision !== 'undefined' ? calcParams.precision : false\r\n\r\n    values.forEach(function (value) {\r\n      value = Number(value)\r\n\r\n      if (value < output || output === null) {\r\n        output = value\r\n      }\r\n    })\r\n\r\n    return output !== null ? (precision !== false ? output.toFixed(precision) : output) : ''\r\n  },\r\n  sum: function (values, data, calcParams) {\r\n    let output = 0\r\n    const precision = typeof calcParams.precision !== 'undefined' ? calcParams.precision : false\r\n\r\n    if (values.length) {\r\n      values.forEach(function (value) {\r\n        value = Number(value)\r\n\r\n        output += !isNaN(value) ? Number(value) : 0\r\n      })\r\n    }\r\n\r\n    return precision !== false ? output.toFixed(precision) : output\r\n  },\r\n  concat: function (values, data, calcParams) {\r\n    let output = 0\r\n\r\n    if (values.length) {\r\n      output = values.reduce(function (sum, value) {\r\n        return String(sum) + String(value)\r\n      })\r\n    }\r\n\r\n    return output\r\n  },\r\n  count: function (values, data, calcParams) {\r\n    let output = 0\r\n\r\n    if (values.length) {\r\n      values.forEach(function (value) {\r\n        if (value) {\r\n          output++\r\n        }\r\n      })\r\n    }\r\n\r\n    return output\r\n  },\r\n  unique: function (values, data, calcParams) {\r\n    const unique = values.filter((value, index) => {\r\n      return (values || value === 0) && values.indexOf(value) === index\r\n    })\r\n\r\n    return unique.length\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport CalcComponent from './CalcComponent.js'\r\n\r\nimport Cell from '../../core/cell/Cell.js'\r\nimport Column from '../../core/column/Column.js'\r\nimport Row from '../../core/row/Row.js'\r\n\r\nimport defaultCalculations from './defaults/calculations.js'\r\n\r\nexport default class ColumnCalcs extends Module {\r\n  static moduleName = 'columnCalcs'\r\n\r\n  // load defaults\r\n  static calculations = defaultCalculations\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.topCalcs = []\r\n    this.botCalcs = []\r\n    this.genColumn = false\r\n    this.topElement = this.createElement()\r\n    this.botElement = this.createElement()\r\n    this.topRow = false\r\n    this.botRow = false\r\n    this.topInitialized = false\r\n    this.botInitialized = false\r\n\r\n    this.blocked = false\r\n    this.recalcAfterBlock = false\r\n\r\n    this.registerTableOption('columnCalcs', true)\r\n\r\n    this.registerColumnOption('topCalc')\r\n    this.registerColumnOption('topCalcParams')\r\n    this.registerColumnOption('topCalcFormatter')\r\n    this.registerColumnOption('topCalcFormatterParams')\r\n    this.registerColumnOption('bottomCalc')\r\n    this.registerColumnOption('bottomCalcParams')\r\n    this.registerColumnOption('bottomCalcFormatter')\r\n    this.registerColumnOption('bottomCalcFormatterParams')\r\n  }\r\n\r\n  createElement() {\r\n    const el = document.createElement('div')\r\n    el.classList.add('tabulator-calcs-holder')\r\n    return el\r\n  }\r\n\r\n  initialize() {\r\n    this.genColumn = new Column({ field: 'value' }, this)\r\n\r\n    this.subscribe('cell-value-changed', this.cellValueChanged.bind(this))\r\n    this.subscribe('column-init', this.initializeColumnCheck.bind(this))\r\n    this.subscribe('row-deleted', this.rowsUpdated.bind(this))\r\n    this.subscribe('scroll-horizontal', this.scrollHorizontal.bind(this))\r\n    this.subscribe('row-added', this.rowsUpdated.bind(this))\r\n    this.subscribe('column-moved', this.recalcActiveRows.bind(this))\r\n    this.subscribe('column-add', this.recalcActiveRows.bind(this))\r\n    this.subscribe('data-refreshed', this.recalcActiveRowsRefresh.bind(this))\r\n    this.subscribe('table-redraw', this.tableRedraw.bind(this))\r\n    this.subscribe('rows-visible', this.visibleRows.bind(this))\r\n    this.subscribe('scrollbar-vertical', this.adjustForScrollbar.bind(this))\r\n\r\n    this.subscribe('redraw-blocked', this.blockRedraw.bind(this))\r\n    this.subscribe('redraw-restored', this.restoreRedraw.bind(this))\r\n\r\n    this.subscribe('table-redrawing', this.resizeHolderWidth.bind(this))\r\n    this.subscribe('column-resized', this.resizeHolderWidth.bind(this))\r\n    this.subscribe('column-show', this.resizeHolderWidth.bind(this))\r\n    this.subscribe('column-hide', this.resizeHolderWidth.bind(this))\r\n\r\n    this.registerTableFunction('getCalcResults', this.getResults.bind(this))\r\n    this.registerTableFunction('recalc', this.userRecalc.bind(this))\r\n\r\n    this.resizeHolderWidth()\r\n  }\r\n\r\n  resizeHolderWidth() {\r\n    this.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + 'px'\r\n  }\r\n\r\n  tableRedraw(force) {\r\n    this.recalc(this.table.rowManager.activeRows)\r\n\r\n    if (force) {\r\n      this.redraw()\r\n    }\r\n  }\r\n\r\n  blockRedraw() {\r\n    this.blocked = true\r\n    this.recalcAfterBlock = false\r\n  }\r\n\r\n  restoreRedraw() {\r\n    this.blocked = false\r\n\r\n    if (this.recalcAfterBlock) {\r\n      this.recalcAfterBlock = false\r\n      this.recalcActiveRowsRefresh()\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Table Functions /////////\r\n  /// ////////////////////////////////\r\n  userRecalc() {\r\n    this.recalc(this.table.rowManager.activeRows)\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Internal Logic //////////\r\n  /// ////////////////////////////////\r\n\r\n  blockCheck() {\r\n    if (this.blocked) {\r\n      this.recalcAfterBlock = true\r\n    }\r\n\r\n    return this.blocked\r\n  }\r\n\r\n  visibleRows(viewable, rows) {\r\n    if (this.topRow) {\r\n      rows.unshift(this.topRow)\r\n    }\r\n\r\n    if (this.botRow) {\r\n      rows.push(this.botRow)\r\n    }\r\n\r\n    return rows\r\n  }\r\n\r\n  rowsUpdated(row) {\r\n    if (this.table.options.groupBy) {\r\n      this.recalcRowGroup(row)\r\n    } else {\r\n      this.recalcActiveRows()\r\n    }\r\n  }\r\n\r\n  recalcActiveRowsRefresh() {\r\n    if (this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree) {\r\n      this.recalcAll()\r\n    } else {\r\n      this.recalcActiveRows()\r\n    }\r\n  }\r\n\r\n  recalcActiveRows() {\r\n    this.recalc(this.table.rowManager.activeRows)\r\n  }\r\n\r\n  cellValueChanged(cell) {\r\n    if (cell.column.definition.topCalc || cell.column.definition.bottomCalc) {\r\n      if (this.table.options.groupBy) {\r\n        if (this.table.options.columnCalcs == 'table' || this.table.options.columnCalcs == 'both') {\r\n          this.recalcActiveRows()\r\n        }\r\n\r\n        if (this.table.options.columnCalcs != 'table') {\r\n          this.recalcRowGroup(cell.row)\r\n        }\r\n      } else {\r\n        this.recalcActiveRows()\r\n      }\r\n    }\r\n  }\r\n\r\n  initializeColumnCheck(column) {\r\n    if (column.definition.topCalc || column.definition.bottomCalc) {\r\n      this.initializeColumn(column)\r\n    }\r\n  }\r\n\r\n  // initialize column calcs\r\n  initializeColumn(column) {\r\n    const def = column.definition\r\n\r\n    const config = {\r\n      topCalcParams: def.topCalcParams || {},\r\n      botCalcParams: def.bottomCalcParams || {}\r\n    }\r\n\r\n    if (def.topCalc) {\r\n      switch (typeof def.topCalc) {\r\n        case 'string':\r\n          if (ColumnCalcs.calculations[def.topCalc]) {\r\n            config.topCalc = ColumnCalcs.calculations[def.topCalc]\r\n          } else {\r\n            console.warn('Column Calc Error - No such calculation found, ignoring: ', def.topCalc)\r\n          }\r\n          break\r\n\r\n        case 'function':\r\n          config.topCalc = def.topCalc\r\n          break\r\n      }\r\n\r\n      if (config.topCalc) {\r\n        column.modules.columnCalcs = config\r\n        this.topCalcs.push(column)\r\n\r\n        if (this.table.options.columnCalcs != 'group') {\r\n          this.initializeTopRow()\r\n        }\r\n      }\r\n    }\r\n\r\n    if (def.bottomCalc) {\r\n      switch (typeof def.bottomCalc) {\r\n        case 'string':\r\n          if (ColumnCalcs.calculations[def.bottomCalc]) {\r\n            config.botCalc = ColumnCalcs.calculations[def.bottomCalc]\r\n          } else {\r\n            console.warn('Column Calc Error - No such calculation found, ignoring: ', def.bottomCalc)\r\n          }\r\n          break\r\n\r\n        case 'function':\r\n          config.botCalc = def.bottomCalc\r\n          break\r\n      }\r\n\r\n      if (config.botCalc) {\r\n        column.modules.columnCalcs = config\r\n        this.botCalcs.push(column)\r\n\r\n        if (this.table.options.columnCalcs != 'group') {\r\n          this.initializeBottomRow()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // dummy functions to handle being mock column manager\r\n  registerColumnField() {}\r\n\r\n  removeCalcs() {\r\n    let changed = false\r\n\r\n    if (this.topInitialized) {\r\n      this.topInitialized = false\r\n      this.topElement.parentNode.removeChild(this.topElement)\r\n      changed = true\r\n    }\r\n\r\n    if (this.botInitialized) {\r\n      this.botInitialized = false\r\n      this.footerRemove(this.botElement)\r\n      changed = true\r\n    }\r\n\r\n    if (changed) {\r\n      this.table.rowManager.adjustTableSize()\r\n    }\r\n  }\r\n\r\n  reinitializeCalcs() {\r\n    if (this.topCalcs.length) {\r\n      this.initializeTopRow()\r\n    }\r\n\r\n    if (this.botCalcs.length) {\r\n      this.initializeBottomRow()\r\n    }\r\n  }\r\n\r\n  initializeTopRow() {\r\n    const fragment = document.createDocumentFragment()\r\n\r\n    if (!this.topInitialized) {\r\n      fragment.appendChild(document.createElement('br'))\r\n      fragment.appendChild(this.topElement)\r\n\r\n      this.table.columnManager\r\n        .getContentsElement()\r\n        .insertBefore(fragment, this.table.columnManager.headersElement.nextSibling)\r\n      this.topInitialized = true\r\n    }\r\n  }\r\n\r\n  initializeBottomRow() {\r\n    if (!this.botInitialized) {\r\n      this.footerPrepend(this.botElement)\r\n      this.botInitialized = true\r\n    }\r\n  }\r\n\r\n  scrollHorizontal(left) {\r\n    if (this.botInitialized && this.botRow) {\r\n      this.botElement.scrollLeft = left\r\n    }\r\n  }\r\n\r\n  recalc(rows) {\r\n    let data, row\r\n\r\n    if (!this.blockCheck()) {\r\n      if (this.topInitialized || this.botInitialized) {\r\n        data = this.rowsToData(rows)\r\n\r\n        if (this.topInitialized) {\r\n          if (this.topRow) {\r\n            this.topRow.deleteCells()\r\n          }\r\n\r\n          row = this.generateRow('top', data)\r\n          this.topRow = row\r\n          while (this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild)\r\n          this.topElement.appendChild(row.getElement())\r\n          row.initialize(true)\r\n        }\r\n\r\n        if (this.botInitialized) {\r\n          if (this.botRow) {\r\n            this.botRow.deleteCells()\r\n          }\r\n\r\n          row = this.generateRow('bottom', data)\r\n          this.botRow = row\r\n          while (this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild)\r\n          this.botElement.appendChild(row.getElement())\r\n          row.initialize(true)\r\n        }\r\n\r\n        this.table.rowManager.adjustTableSize()\r\n\r\n        // set resizable handles\r\n        if (this.table.modExists('frozenColumns')) {\r\n          this.table.modules.frozenColumns.layout()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  recalcRowGroup(row) {\r\n    this.recalcGroup(this.table.modules.groupRows.getRowGroup(row))\r\n  }\r\n\r\n  recalcAll() {\r\n    if (this.topCalcs.length || this.botCalcs.length) {\r\n      if (this.table.options.columnCalcs !== 'group') {\r\n        this.recalcActiveRows()\r\n      }\r\n\r\n      if (this.table.options.groupBy && this.table.options.columnCalcs !== 'table') {\r\n        const groups = this.table.modules.groupRows.getChildGroups()\r\n\r\n        groups.forEach((group) => {\r\n          this.recalcGroup(group)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  recalcGroup(group) {\r\n    let data, rowData\r\n\r\n    if (!this.blockCheck()) {\r\n      if (group) {\r\n        if (group.calcs) {\r\n          if (group.calcs.bottom) {\r\n            data = this.rowsToData(group.rows)\r\n            rowData = this.generateRowData('bottom', data)\r\n\r\n            group.calcs.bottom.updateData(rowData)\r\n            group.calcs.bottom.reinitialize()\r\n          }\r\n\r\n          if (group.calcs.top) {\r\n            data = this.rowsToData(group.rows)\r\n            rowData = this.generateRowData('top', data)\r\n\r\n            group.calcs.top.updateData(rowData)\r\n            group.calcs.top.reinitialize()\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // generate top stats row\r\n  generateTopRow(rows) {\r\n    return this.generateRow('top', this.rowsToData(rows))\r\n  }\r\n\r\n  // generate bottom stats row\r\n  generateBottomRow(rows) {\r\n    return this.generateRow('bottom', this.rowsToData(rows))\r\n  }\r\n\r\n  rowsToData(rows) {\r\n    const data = []\r\n    const hasDataTreeColumnCalcs = this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs\r\n    const dataTree = this.table.modules.dataTree\r\n\r\n    rows.forEach((row) => {\r\n      data.push(row.getData())\r\n\r\n      if (hasDataTreeColumnCalcs && row.modules.dataTree?.open) {\r\n        this.rowsToData(dataTree.getFilteredTreeChildren(row)).forEach((dataRow) => {\r\n          data.push(row)\r\n        })\r\n      }\r\n    })\r\n    return data\r\n  }\r\n\r\n  // generate stats row\r\n  generateRow(pos, data) {\r\n    const rowData = this.generateRowData(pos, data)\r\n    let row\r\n\r\n    if (this.table.modExists('mutator')) {\r\n      this.table.modules.mutator.disable()\r\n    }\r\n\r\n    row = new Row(rowData, this, 'calc')\r\n\r\n    if (this.table.modExists('mutator')) {\r\n      this.table.modules.mutator.enable()\r\n    }\r\n\r\n    row.getElement().classList.add('tabulator-calcs', 'tabulator-calcs-' + pos)\r\n\r\n    row.component = false\r\n\r\n    row.getComponent = () => {\r\n      if (!row.component) {\r\n        row.component = new CalcComponent(row)\r\n      }\r\n\r\n      return row.component\r\n    }\r\n\r\n    row.generateCells = () => {\r\n      const cells = []\r\n\r\n      this.table.columnManager.columnsByIndex.forEach((column) => {\r\n        // set field name of mock column\r\n        this.genColumn.setField(column.getField())\r\n        this.genColumn.hozAlign = column.hozAlign\r\n\r\n        if (column.definition[pos + 'CalcFormatter'] && this.table.modExists('format')) {\r\n          this.genColumn.modules.format = {\r\n            formatter: this.table.modules.format.lookupFormatter(column.definition[pos + 'CalcFormatter']),\r\n            params: column.definition[pos + 'CalcFormatterParams'] || {}\r\n          }\r\n        } else {\r\n          this.genColumn.modules.format = {\r\n            formatter: this.table.modules.format.lookupFormatter('plaintext'),\r\n            params: {}\r\n          }\r\n        }\r\n\r\n        // ensure css class definition is replicated to calculation cell\r\n        this.genColumn.definition.cssClass = column.definition.cssClass\r\n\r\n        // generate cell and assign to correct column\r\n        const cell = new Cell(this.genColumn, row)\r\n        cell.getElement()\r\n        cell.column = column\r\n        cell.setWidth()\r\n\r\n        column.cells.push(cell)\r\n        cells.push(cell)\r\n\r\n        if (!column.visible) {\r\n          cell.hide()\r\n        }\r\n      })\r\n\r\n      row.cells = cells\r\n    }\r\n\r\n    return row\r\n  }\r\n\r\n  // generate stats row\r\n  generateRowData(pos, data) {\r\n    const rowData = {}\r\n    const calcs = pos == 'top' ? this.topCalcs : this.botCalcs\r\n    const type = pos == 'top' ? 'topCalc' : 'botCalc'\r\n    let params\r\n    let paramKey\r\n\r\n    calcs.forEach(function (column) {\r\n      const values = []\r\n\r\n      if (column.modules.columnCalcs && column.modules.columnCalcs[type]) {\r\n        data.forEach(function (item) {\r\n          values.push(column.getFieldValue(item))\r\n        })\r\n\r\n        paramKey = type + 'Params'\r\n        params =\r\n          typeof column.modules.columnCalcs[paramKey] === 'function'\r\n            ? column.modules.columnCalcs[paramKey](values, data)\r\n            : column.modules.columnCalcs[paramKey]\r\n\r\n        column.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params))\r\n      }\r\n    })\r\n\r\n    return rowData\r\n  }\r\n\r\n  hasTopCalcs() {\r\n    return !!this.topCalcs.length\r\n  }\r\n\r\n  hasBottomCalcs() {\r\n    return !!this.botCalcs.length\r\n  }\r\n\r\n  // handle table redraw\r\n  redraw() {\r\n    if (this.topRow) {\r\n      this.topRow.normalizeHeight(true)\r\n    }\r\n    if (this.botRow) {\r\n      this.botRow.normalizeHeight(true)\r\n    }\r\n  }\r\n\r\n  // return the calculated\r\n  getResults() {\r\n    let results = {}\r\n    let groups\r\n\r\n    if (this.table.options.groupBy && this.table.modExists('groupRows')) {\r\n      groups = this.table.modules.groupRows.getGroups(true)\r\n\r\n      groups.forEach((group) => {\r\n        results[group.getKey()] = this.getGroupResults(group)\r\n      })\r\n    } else {\r\n      results = {\r\n        top: this.topRow ? this.topRow.getData() : {},\r\n        bottom: this.botRow ? this.botRow.getData() : {}\r\n      }\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  // get results from a group\r\n  getGroupResults(group) {\r\n    const groupObj = group._getSelf()\r\n    const subGroups = group.getSubGroups()\r\n    const subGroupResults = {}\r\n    let results = {}\r\n\r\n    subGroups.forEach((subgroup) => {\r\n      subGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup)\r\n    })\r\n\r\n    results = {\r\n      top: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\r\n      bottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\r\n      groups: subGroupResults\r\n    }\r\n\r\n    return results\r\n  }\r\n\r\n  adjustForScrollbar(width) {\r\n    if (this.botRow) {\r\n      if (this.table.rtl) {\r\n        this.botElement.style.paddingLeft = width + 'px'\r\n      } else {\r\n        this.botElement.style.paddingRight = width + 'px'\r\n      }\r\n    }\r\n  }\r\n}\r\n","import csv from './downloaders/csv.js'\r\nimport json from './downloaders/json.js'\r\nimport pdf from './downloaders/pdf.js'\r\nimport xlsx from './downloaders/xlsx.js'\r\nimport html from './downloaders/html.js'\r\nimport jsonLines from './downloaders/jsonLines.js'\r\n\r\nexport default {\r\n  csv,\r\n  json,\r\n  jsonLines,\r\n  pdf,\r\n  xlsx,\r\n  html\r\n}\r\n","export default function (list, options = {}, setFileContents) {\r\n  const delimiter = options.delimiter ? options.delimiter : ','\r\n  let fileContents = []\r\n  const headers = []\r\n\r\n  list.forEach((row) => {\r\n    const item = []\r\n\r\n    switch (row.type) {\r\n      case 'group':\r\n        console.warn('Download Warning - CSV downloader cannot process row groups')\r\n        break\r\n\r\n      case 'calc':\r\n        console.warn('Download Warning - CSV downloader cannot process column calculations')\r\n        break\r\n\r\n      case 'header':\r\n        row.columns.forEach((col, i) => {\r\n          if (col && col.depth === 1) {\r\n            headers[i] =\r\n              typeof col.value === 'undefined' || col.value === null\r\n                ? ''\r\n                : '\"' + String(col.value).split('\"').join('\"\"') + '\"'\r\n          }\r\n        })\r\n        break\r\n\r\n      case 'row':\r\n        row.columns.forEach((col) => {\r\n          if (col) {\r\n            switch (typeof col.value) {\r\n              case 'object':\r\n                col.value = col.value !== null ? JSON.stringify(col.value) : ''\r\n                break\r\n\r\n              case 'undefined':\r\n                col.value = ''\r\n                break\r\n            }\r\n\r\n            item.push('\"' + String(col.value).split('\"').join('\"\"') + '\"')\r\n          }\r\n        })\r\n\r\n        fileContents.push(item.join(delimiter))\r\n        break\r\n    }\r\n  })\r\n\r\n  if (headers.length) {\r\n    fileContents.unshift(headers.join(delimiter))\r\n  }\r\n\r\n  fileContents = fileContents.join('\\n')\r\n\r\n  if (options.bom) {\r\n    fileContents = '\\ufeff' + fileContents\r\n  }\r\n\r\n  setFileContents(fileContents, 'text/csv')\r\n}\r\n","export default function (list, options, setFileContents) {\r\n  let fileContents = []\r\n\r\n  list.forEach((row) => {\r\n    const item = {}\r\n\r\n    switch (row.type) {\r\n      case 'header':\r\n        break\r\n\r\n      case 'group':\r\n        console.warn('Download Warning - JSON downloader cannot process row groups')\r\n        break\r\n\r\n      case 'calc':\r\n        console.warn('Download Warning - JSON downloader cannot process column calculations')\r\n        break\r\n\r\n      case 'row':\r\n        row.columns.forEach((col) => {\r\n          if (col) {\r\n            item[col.component.getTitleDownload() || col.component.getField()] = col.value\r\n          }\r\n        })\r\n\r\n        fileContents.push(item)\r\n        break\r\n    }\r\n  })\r\n\r\n  fileContents = JSON.stringify(fileContents, null, '\\t')\r\n\r\n  setFileContents(fileContents, 'application/json')\r\n}\r\n","export default function (list, options, setFileContents) {\r\n  const fileContents = []\r\n\r\n  list.forEach((row) => {\r\n    const item = {}\r\n\r\n    switch (row.type) {\r\n      case 'header':\r\n        break\r\n\r\n      case 'group':\r\n        console.warn('Download Warning - JSON downloader cannot process row groups')\r\n        break\r\n\r\n      case 'calc':\r\n        console.warn('Download Warning - JSON downloader cannot process column calculations')\r\n        break\r\n\r\n      case 'row':\r\n        row.columns.forEach((col) => {\r\n          if (col) {\r\n            item[col.component.getTitleDownload() || col.component.getField()] = col.value\r\n          }\r\n        })\r\n\r\n        fileContents.push(JSON.stringify(item))\r\n        break\r\n    }\r\n  })\r\n\r\n  setFileContents(fileContents.join('\\n'), 'application/x-ndjson')\r\n}\r\n","export default function (list, options = {}, setFileContents) {\r\n  const header = []\r\n  const body = []\r\n  let autoTableParams = {}\r\n  const rowGroupStyles = options.rowGroupStyles || {\r\n    fontStyle: 'bold',\r\n    fontSize: 12,\r\n    cellPadding: 6,\r\n    fillColor: 220\r\n  }\r\n  const rowCalcStyles = options.rowCalcStyles || {\r\n    fontStyle: 'bold',\r\n    fontSize: 10,\r\n    cellPadding: 4,\r\n    fillColor: 232\r\n  }\r\n  const jsPDFParams = options.jsPDF || {}\r\n  const title = options.title ? options.title : ''\r\n  let jspdfLib\r\n  let doc\r\n\r\n  if (!jsPDFParams.orientation) {\r\n    jsPDFParams.orientation = options.orientation || 'landscape'\r\n  }\r\n\r\n  if (!jsPDFParams.unit) {\r\n    jsPDFParams.unit = 'pt'\r\n  }\r\n\r\n  // parse row list\r\n  list.forEach((row) => {\r\n    switch (row.type) {\r\n      case 'header':\r\n        header.push(parseRow(row))\r\n        break\r\n\r\n      case 'group':\r\n        body.push(parseRow(row, rowGroupStyles))\r\n        break\r\n\r\n      case 'calc':\r\n        body.push(parseRow(row, rowCalcStyles))\r\n        break\r\n\r\n      case 'row':\r\n        body.push(parseRow(row))\r\n        break\r\n    }\r\n  })\r\n\r\n  function parseRow(row, styles) {\r\n    const rowData = []\r\n\r\n    row.columns.forEach((col) => {\r\n      let cell\r\n\r\n      if (col) {\r\n        switch (typeof col.value) {\r\n          case 'object':\r\n            col.value = col.value !== null ? JSON.stringify(col.value) : ''\r\n            break\r\n\r\n          case 'undefined':\r\n            col.value = ''\r\n            break\r\n        }\r\n\r\n        cell = {\r\n          content: col.value,\r\n          colSpan: col.width,\r\n          rowSpan: col.height\r\n        }\r\n\r\n        if (styles) {\r\n          cell.styles = styles\r\n        }\r\n\r\n        rowData.push(cell)\r\n      }\r\n    })\r\n\r\n    return rowData\r\n  }\r\n\r\n  // configure PDF\r\n  jspdfLib = this.dependencyRegistry.lookup('jspdf', 'jsPDF')\r\n  doc = new jspdfLib(jsPDFParams) // set document to landscape, better for most tables\r\n\r\n  if (options.autoTable) {\r\n    if (typeof options.autoTable === 'function') {\r\n      autoTableParams = options.autoTable(doc) || {}\r\n    } else {\r\n      autoTableParams = options.autoTable\r\n    }\r\n  }\r\n\r\n  if (title) {\r\n    autoTableParams.didDrawPage = function (data) {\r\n      doc.text(title, 40, 30)\r\n    }\r\n  }\r\n\r\n  autoTableParams.head = header\r\n  autoTableParams.body = body\r\n\r\n  doc.autoTable(autoTableParams)\r\n\r\n  if (options.documentProcessing) {\r\n    options.documentProcessing(doc)\r\n  }\r\n\r\n  setFileContents(doc.output('arraybuffer'), 'application/pdf')\r\n}\r\n","import CoreFeature from '../../../../core/CoreFeature.js'\r\n\r\nexport default function (list, options, setFileContents) {\r\n  const self = this\r\n  const sheetName = options.sheetName || 'Sheet1'\r\n  const XLSXLib = this.dependencyRegistry.lookup('XLSX')\r\n  let workbook = XLSXLib.utils.book_new()\r\n  const tableFeatures = new CoreFeature(this)\r\n  const compression = 'compress' in options ? options.compress : true\r\n  const writeOptions = options.writeOptions || { bookType: 'xlsx', bookSST: true, compression }\r\n  let output\r\n\r\n  writeOptions.type = 'binary'\r\n\r\n  workbook.SheetNames = []\r\n  workbook.Sheets = {}\r\n\r\n  function generateSheet() {\r\n    const rows = []\r\n    const merges = []\r\n    const worksheet = {}\r\n    const range = {\r\n      s: { c: 0, r: 0 },\r\n      e: { c: list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0, r: list.length }\r\n    }\r\n\r\n    // parse row list\r\n    list.forEach((row, i) => {\r\n      const rowData = []\r\n\r\n      row.columns.forEach(function (col, j) {\r\n        if (col) {\r\n          rowData.push(\r\n            !(col.value instanceof Date) && typeof col.value === 'object' ? JSON.stringify(col.value) : col.value\r\n          )\r\n\r\n          if (col.width > 1 || col.height > -1) {\r\n            if (col.height > 1 || col.width > 1) {\r\n              merges.push({ s: { r: i, c: j }, e: { r: i + col.height - 1, c: j + col.width - 1 } })\r\n            }\r\n          }\r\n        } else {\r\n          rowData.push('')\r\n        }\r\n      })\r\n\r\n      rows.push(rowData)\r\n    })\r\n\r\n    // convert rows to worksheet\r\n    XLSXLib.utils.sheet_add_aoa(worksheet, rows)\r\n\r\n    worksheet['!ref'] = XLSXLib.utils.encode_range(range)\r\n\r\n    if (merges.length) {\r\n      worksheet['!merges'] = merges\r\n    }\r\n\r\n    return worksheet\r\n  }\r\n\r\n  if (options.sheetOnly) {\r\n    setFileContents(generateSheet())\r\n    return\r\n  }\r\n\r\n  if (options.sheets) {\r\n    for (var sheet in options.sheets) {\r\n      if (options.sheets[sheet] === true) {\r\n        workbook.SheetNames.push(sheet)\r\n        workbook.Sheets[sheet] = generateSheet()\r\n      } else {\r\n        workbook.SheetNames.push(sheet)\r\n\r\n        tableFeatures.commsSend(options.sheets[sheet], 'download', 'intercept', {\r\n          type: 'xlsx',\r\n          options: { sheetOnly: true },\r\n          active: self.active,\r\n          intercept: function (data) {\r\n            workbook.Sheets[sheet] = data\r\n          }\r\n        })\r\n      }\r\n    }\r\n  } else {\r\n    workbook.SheetNames.push(sheetName)\r\n    workbook.Sheets[sheetName] = generateSheet()\r\n  }\r\n\r\n  if (options.documentProcessing) {\r\n    workbook = options.documentProcessing(workbook)\r\n  }\r\n\r\n  // convert workbook to binary array\r\n  function s2ab(s) {\r\n    const buf = new ArrayBuffer(s.length)\r\n    const view = new Uint8Array(buf)\r\n    for (let i = 0; i != s.length; ++i) view[i] = s.charCodeAt(i) & 0xff\r\n    return buf\r\n  }\r\n\r\n  output = XLSXLib.write(workbook, writeOptions)\r\n\r\n  setFileContents(s2ab(output), 'application/octet-stream')\r\n}\r\n","export default function (list, options, setFileContents) {\r\n  if (this.modExists('export', true)) {\r\n    setFileContents(this.modules.export.generateHTMLTable(list), 'text/html')\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultDownloaders from './defaults/downloaders.js'\r\n\r\nexport default class Download extends Module {\r\n  static moduleName = 'download'\r\n\r\n  // load defaults\r\n  static downloaders = defaultDownloaders\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.registerTableOption('downloadEncoder', function (data, mimeType) {\r\n      return new Blob([data], { type: mimeType })\r\n    }) // function to manipulate download data\r\n    this.registerTableOption('downloadConfig', {}) // download config\r\n    this.registerTableOption('downloadRowRange', 'active') // restrict download to active rows only\r\n\r\n    this.registerColumnOption('download')\r\n    this.registerColumnOption('titleDownload')\r\n  }\r\n\r\n  initialize() {\r\n    this.deprecatedOptionsCheck()\r\n\r\n    this.registerTableFunction('download', this.download.bind(this))\r\n    this.registerTableFunction('downloadToTab', this.downloadToTab.bind(this))\r\n  }\r\n\r\n  deprecatedOptionsCheck() {}\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Table Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  downloadToTab(type, filename, options, active) {\r\n    this.download(type, filename, options, active, true)\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Internal Logic //////////\r\n  /// ////////////////////////////////\r\n\r\n  // trigger file download\r\n  download(type, filename, options, range, interceptCallback) {\r\n    let downloadFunc = false\r\n\r\n    function buildLink(data, mime) {\r\n      if (interceptCallback) {\r\n        if (interceptCallback === true) {\r\n          this.triggerDownload(data, mime, type, filename, true)\r\n        } else {\r\n          interceptCallback(data)\r\n        }\r\n      } else {\r\n        this.triggerDownload(data, mime, type, filename)\r\n      }\r\n    }\r\n\r\n    if (typeof type === 'function') {\r\n      downloadFunc = type\r\n    } else {\r\n      if (Download.downloaders[type]) {\r\n        downloadFunc = Download.downloaders[type]\r\n      } else {\r\n        console.warn('Download Error - No such download type found: ', type)\r\n      }\r\n    }\r\n\r\n    if (downloadFunc) {\r\n      const list = this.generateExportList(range)\r\n\r\n      downloadFunc.call(this.table, list, options || {}, buildLink.bind(this))\r\n    }\r\n  }\r\n\r\n  generateExportList(range) {\r\n    const list = this.table.modules.export.generateExportList(\r\n      this.table.options.downloadConfig,\r\n      false,\r\n      range || this.table.options.downloadRowRange,\r\n      'download'\r\n    )\r\n\r\n    // assign group header formatter\r\n    let groupHeader = this.table.options.groupHeaderDownload\r\n\r\n    if (groupHeader && !Array.isArray(groupHeader)) {\r\n      groupHeader = [groupHeader]\r\n    }\r\n\r\n    list.forEach((row) => {\r\n      let group\r\n\r\n      if (row.type === 'group') {\r\n        group = row.columns[0]\r\n\r\n        if (groupHeader && groupHeader[row.indent]) {\r\n          group.value = groupHeader[row.indent](\r\n            group.value,\r\n            row.component._group.getRowCount(),\r\n            row.component._group.getData(),\r\n            row.component\r\n          )\r\n        }\r\n      }\r\n    })\r\n\r\n    return list\r\n  }\r\n\r\n  triggerDownload(data, mime, type, filename, newTab) {\r\n    const element = document.createElement('a')\r\n    const blob = this.table.options.downloadEncoder(data, mime)\r\n\r\n    if (blob) {\r\n      if (newTab) {\r\n        window.open(window.URL.createObjectURL(blob))\r\n      } else {\r\n        filename = filename || 'Tabulator.' + (typeof type === 'function' ? 'txt' : type)\r\n\r\n        if (navigator.msSaveOrOpenBlob) {\r\n          navigator.msSaveOrOpenBlob(blob, filename)\r\n        } else {\r\n          element.setAttribute('href', window.URL.createObjectURL(blob))\r\n\r\n          // set file title\r\n          element.setAttribute('download', filename)\r\n\r\n          // trigger download\r\n          element.style.display = 'none'\r\n          document.body.appendChild(element)\r\n          element.click()\r\n\r\n          // remove temporary link element\r\n          document.body.removeChild(element)\r\n        }\r\n      }\r\n\r\n      this.dispatchExternal('downloadComplete')\r\n    }\r\n  }\r\n\r\n  commsReceived(table, action, data) {\r\n    switch (action) {\r\n      case 'intercept':\r\n        this.download(data.type, '', data.options, data.active, data.intercept)\r\n        break\r\n    }\r\n  }\r\n}\r\n","export default function maskInput(el, options) {\r\n  const mask = options.mask\r\n  const maskLetter = typeof options.maskLetterChar !== 'undefined' ? options.maskLetterChar : 'A'\r\n  const maskNumber = typeof options.maskNumberChar !== 'undefined' ? options.maskNumberChar : '9'\r\n  const maskWildcard = typeof options.maskWildcardChar !== 'undefined' ? options.maskWildcardChar : '*'\r\n\r\n  function fillSymbols(index) {\r\n    const symbol = mask[index]\r\n    if (typeof symbol !== 'undefined' && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber) {\r\n      el.value = el.value + '' + symbol\r\n      fillSymbols(index + 1)\r\n    }\r\n  }\r\n\r\n  el.addEventListener('keydown', (e) => {\r\n    const index = el.value.length\r\n    const char = e.key\r\n\r\n    if (e.keyCode > 46 && !e.ctrlKey && !e.metaKey) {\r\n      if (index >= mask.length) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        return false\r\n      } else {\r\n        switch (mask[index]) {\r\n          case maskLetter:\r\n            if (char.toUpperCase() == char.toLowerCase()) {\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n              return false\r\n            }\r\n            break\r\n\r\n          case maskNumber:\r\n            if (isNaN(char)) {\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n              return false\r\n            }\r\n            break\r\n\r\n          case maskWildcard:\r\n            break\r\n\r\n          default:\r\n            if (char !== mask[index]) {\r\n              e.preventDefault()\r\n              e.stopPropagation()\r\n              return false\r\n            }\r\n        }\r\n      }\r\n    }\r\n  })\r\n\r\n  el.addEventListener('keyup', (e) => {\r\n    if (e.keyCode > 46) {\r\n      if (options.maskAutoFill) {\r\n        fillSymbols(el.value.length)\r\n      }\r\n    }\r\n  })\r\n\r\n  if (!el.placeholder) {\r\n    el.placeholder = mask\r\n  }\r\n\r\n  if (options.maskAutoFill) {\r\n    fillSymbols(el.value.length)\r\n  }\r\n}\r\n","import maskInput from './inputMask.js'\r\nimport urlBuilder from '../Ajax/defaults/urlGenerator.js'\r\n\r\nexport default class Edit {\r\n  constructor(editor, cell, onRendered, success, cancel, editorParams) {\r\n    this.edit = editor\r\n    this.table = editor.table\r\n    this.cell = cell\r\n    this.params = this._initializeParams(editorParams)\r\n\r\n    this.data = []\r\n    this.displayItems = []\r\n    this.currentItems = []\r\n    this.focusedItem = null\r\n\r\n    this.input = this._createInputElement()\r\n    this.listEl = this._createListElement()\r\n\r\n    this.initialValues = null\r\n\r\n    this.isFilter = cell.getType() === 'header'\r\n\r\n    this.filterTimeout = null\r\n    this.filtered = false\r\n    this.typing = false\r\n\r\n    this.values = []\r\n    this.popup = null\r\n\r\n    this.listIteration = 0\r\n\r\n    this.lastAction = ''\r\n    this.filterTerm = ''\r\n\r\n    this.blurable = true\r\n\r\n    this.actions = {\r\n      success,\r\n      cancel\r\n    }\r\n\r\n    this._deprecatedOptionsCheck()\r\n    this._initializeValue()\r\n\r\n    onRendered(this._onRendered.bind(this))\r\n  }\r\n\r\n  _deprecatedOptionsCheck() {\r\n    // if(this.params.listItemFormatter){\r\n    // \tthis.cell.getTable().deprecationAdvisor.msg(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\r\n    // }\r\n    // if(this.params.sortValuesList){\r\n    // \tthis.cell.getTable().deprecationAdvisor.msg(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\r\n    // }\r\n    // if(this.params.searchFunc){\r\n    // \tthis.cell.getTable().deprecationAdvisor.msg(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\r\n    // }\r\n    // if(this.params.searchingPlaceholder){\r\n    // \tthis.cell.getTable().deprecationAdvisor.msg(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\r\n    // }\r\n  }\r\n\r\n  _initializeValue() {\r\n    let initialValue = this.cell.getValue()\r\n\r\n    if (typeof initialValue === 'undefined' && typeof this.params.defaultValue !== 'undefined') {\r\n      initialValue = this.params.defaultValue\r\n    }\r\n\r\n    this.initialValues = this.params.multiselect ? initialValue : [initialValue]\r\n\r\n    if (this.isFilter) {\r\n      this.input.value = this.initialValues ? this.initialValues.join(',') : ''\r\n      this.headerFilterInitialListGen()\r\n    }\r\n  }\r\n\r\n  _onRendered() {\r\n    const cellEl = this.cell.getElement()\r\n\r\n    function clickStop(e) {\r\n      e.stopPropagation()\r\n    }\r\n\r\n    if (!this.isFilter) {\r\n      this.input.style.height = '100%'\r\n      this.input.focus({ preventScroll: true })\r\n    }\r\n\r\n    cellEl.addEventListener('click', clickStop)\r\n\r\n    setTimeout(() => {\r\n      cellEl.removeEventListener('click', clickStop)\r\n    }, 1000)\r\n\r\n    this.input.addEventListener('mousedown', this._preventPopupBlur.bind(this))\r\n  }\r\n\r\n  _createListElement() {\r\n    const listEl = document.createElement('div')\r\n    listEl.classList.add('tabulator-edit-list')\r\n\r\n    listEl.addEventListener('mousedown', this._preventBlur.bind(this))\r\n    listEl.addEventListener('keydown', this._inputKeyDown.bind(this))\r\n\r\n    return listEl\r\n  }\r\n\r\n  _setListWidth() {\r\n    const element = this.isFilter ? this.input : this.cell.getElement()\r\n\r\n    this.listEl.style.minWidth = element.offsetWidth + 'px'\r\n\r\n    if (this.params.maxWidth) {\r\n      if (this.params.maxWidth === true) {\r\n        this.listEl.style.maxWidth = element.offsetWidth + 'px'\r\n      } else if (typeof this.params.maxWidth === 'number') {\r\n        this.listEl.style.maxWidth = this.params.maxWidth + 'px'\r\n      } else {\r\n        this.listEl.style.maxWidth = this.params.maxWidth\r\n      }\r\n    }\r\n  }\r\n\r\n  _createInputElement() {\r\n    const attribs = this.params.elementAttributes\r\n    const input = document.createElement('input')\r\n\r\n    input.setAttribute('type', this.params.clearable ? 'search' : 'text')\r\n\r\n    input.style.padding = '4px'\r\n    input.style.width = '100%'\r\n    input.style.boxSizing = 'border-box'\r\n\r\n    if (!this.params.autocomplete) {\r\n      input.style.cursor = 'default'\r\n      input.style.caretColor = 'transparent'\r\n      // input.readOnly = (this.edit.currentCell != false);\r\n    }\r\n\r\n    if (attribs && typeof attribs === 'object') {\r\n      for (let key in attribs) {\r\n        if (key.charAt(0) == '+') {\r\n          key = key.slice(1)\r\n          input.setAttribute(key, input.getAttribute(key) + attribs['+' + key])\r\n        } else {\r\n          input.setAttribute(key, attribs[key])\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.params.mask) {\r\n      maskInput(input, this.params)\r\n    }\r\n\r\n    this._bindInputEvents(input)\r\n\r\n    return input\r\n  }\r\n\r\n  _initializeParams(params) {\r\n    const valueKeys = ['values', 'valuesURL', 'valuesLookup']\r\n    let valueCheck\r\n\r\n    params = Object.assign({}, params)\r\n\r\n    params.verticalNavigation = params.verticalNavigation || 'editor'\r\n    params.placeholderLoading =\r\n      typeof params.placeholderLoading === 'undefined' ? 'Searching ...' : params.placeholderLoading\r\n    params.placeholderEmpty =\r\n      typeof params.placeholderEmpty === 'undefined' ? 'No Results Found' : params.placeholderEmpty\r\n    params.filterDelay = typeof params.filterDelay === 'undefined' ? 300 : params.filterDelay\r\n\r\n    params.emptyValue = Object.keys(params).includes('emptyValue') ? params.emptyValue : ''\r\n\r\n    valueCheck = Object.keys(params).filter((key) => valueKeys.includes(key)).length\r\n\r\n    if (!valueCheck) {\r\n      console.warn('list editor config error - either the values, valuesURL, or valuesLookup option must be set')\r\n    } else if (valueCheck > 1) {\r\n      console.warn(\r\n        'list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor'\r\n      )\r\n    }\r\n\r\n    if (params.autocomplete) {\r\n      if (params.multiselect) {\r\n        params.multiselect = false\r\n        console.warn('list editor config error - multiselect option is not available when autocomplete is enabled')\r\n      }\r\n    } else {\r\n      if (params.freetext) {\r\n        params.freetext = false\r\n        console.warn('list editor config error - freetext option is only available when autocomplete is enabled')\r\n      }\r\n\r\n      if (params.filterFunc) {\r\n        params.filterFunc = false\r\n        console.warn('list editor config error - filterFunc option is only available when autocomplete is enabled')\r\n      }\r\n\r\n      if (params.filterRemote) {\r\n        params.filterRemote = false\r\n        console.warn('list editor config error - filterRemote option is only available when autocomplete is enabled')\r\n      }\r\n\r\n      if (params.mask) {\r\n        params.mask = false\r\n        console.warn('list editor config error - mask option is only available when autocomplete is enabled')\r\n      }\r\n\r\n      if (params.allowEmpty) {\r\n        params.allowEmpty = false\r\n        console.warn('list editor config error - allowEmpty option is only available when autocomplete is enabled')\r\n      }\r\n\r\n      if (params.listOnEmpty) {\r\n        params.listOnEmpty = false\r\n        console.warn('list editor config error - listOnEmpty option is only available when autocomplete is enabled')\r\n      }\r\n    }\r\n\r\n    if (params.filterRemote && !(typeof params.valuesLookup === 'function' || params.valuesURL)) {\r\n      params.filterRemote = false\r\n      console.warn(\r\n        'list editor config error - filterRemote option should only be used when values list is populated from a remote source'\r\n      )\r\n    }\r\n    return params\r\n  }\r\n  /// ///////////////////////////////////\r\n  /// /////// Event Handling ////////////\r\n  /// ///////////////////////////////////\r\n\r\n  _bindInputEvents(input) {\r\n    input.addEventListener('focus', this._inputFocus.bind(this))\r\n    input.addEventListener('click', this._inputClick.bind(this))\r\n    input.addEventListener('blur', this._inputBlur.bind(this))\r\n    input.addEventListener('keydown', this._inputKeyDown.bind(this))\r\n    input.addEventListener('search', this._inputSearch.bind(this))\r\n\r\n    if (this.params.autocomplete) {\r\n      input.addEventListener('keyup', this._inputKeyUp.bind(this))\r\n    }\r\n  }\r\n\r\n  _inputFocus(e) {\r\n    this.rebuildOptionsList()\r\n  }\r\n\r\n  _filter() {\r\n    if (this.params.filterRemote) {\r\n      clearTimeout(this.filterTimeout)\r\n\r\n      this.filterTimeout = setTimeout(() => {\r\n        this.rebuildOptionsList()\r\n      }, this.params.filterDelay)\r\n    } else {\r\n      this._filterList()\r\n    }\r\n  }\r\n\r\n  _inputClick(e) {\r\n    e.stopPropagation()\r\n  }\r\n\r\n  _inputBlur(e) {\r\n    if (this.blurable) {\r\n      if (this.popup) {\r\n        this.popup.hide()\r\n      } else {\r\n        this._resolveValue(true)\r\n      }\r\n    }\r\n  }\r\n\r\n  _inputSearch() {\r\n    this._clearChoices()\r\n  }\r\n\r\n  _inputKeyDown(e) {\r\n    switch (e.keyCode) {\r\n      case 38: // up arrow\r\n        this._keyUp(e)\r\n        break\r\n\r\n      case 40: // down arrow\r\n        this._keyDown(e)\r\n        break\r\n\r\n      case 37: // left arrow\r\n      case 39: // right arrow\r\n        this._keySide(e)\r\n        break\r\n\r\n      case 13: // enter\r\n        this._keyEnter()\r\n        break\r\n\r\n      case 27: // escape\r\n        this._keyEsc()\r\n        break\r\n\r\n      case 36: // home\r\n      case 35: // end\r\n        this._keyHomeEnd(e)\r\n        break\r\n\r\n      case 9: // tab\r\n        this._keyTab(e)\r\n        break\r\n\r\n      default:\r\n        this._keySelectLetter(e)\r\n    }\r\n  }\r\n\r\n  _inputKeyUp(e) {\r\n    switch (e.keyCode) {\r\n      case 38: // up arrow\r\n      case 37: // left arrow\r\n      case 39: // up arrow\r\n      case 40: // right arrow\r\n      case 13: // enter\r\n      case 27: // escape\r\n        break\r\n\r\n      default:\r\n        this._keyAutoCompLetter(e)\r\n    }\r\n  }\r\n\r\n  _preventPopupBlur() {\r\n    if (this.popup) {\r\n      this.popup.blockHide()\r\n    }\r\n\r\n    setTimeout(() => {\r\n      if (this.popup) {\r\n        this.popup.restoreHide()\r\n      }\r\n    }, 10)\r\n  }\r\n\r\n  _preventBlur() {\r\n    this.blurable = false\r\n\r\n    setTimeout(() => {\r\n      this.blurable = true\r\n    }, 10)\r\n  }\r\n\r\n  /// ///////////////////////////////////\r\n  /// ///// Keyboard Navigation /////////\r\n  /// ///////////////////////////////////\r\n\r\n  _keyTab(e) {\r\n    if (this.params.autocomplete && this.lastAction === 'typing') {\r\n      this._resolveValue(true)\r\n    } else {\r\n      if (this.focusedItem) {\r\n        this._chooseItem(this.focusedItem, true)\r\n      }\r\n    }\r\n  }\r\n\r\n  _keyUp(e) {\r\n    const index = this.displayItems.indexOf(this.focusedItem)\r\n\r\n    if (this.params.verticalNavigation == 'editor' || (this.params.verticalNavigation == 'hybrid' && index)) {\r\n      e.stopImmediatePropagation()\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n\r\n      if (index > 0) {\r\n        this._focusItem(this.displayItems[index - 1])\r\n      }\r\n    }\r\n  }\r\n\r\n  _keyDown(e) {\r\n    const index = this.displayItems.indexOf(this.focusedItem)\r\n\r\n    if (\r\n      this.params.verticalNavigation == 'editor' ||\r\n      (this.params.verticalNavigation == 'hybrid' && index < this.displayItems.length - 1)\r\n    ) {\r\n      e.stopImmediatePropagation()\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n\r\n      if (index < this.displayItems.length - 1) {\r\n        if (index == -1) {\r\n          this._focusItem(this.displayItems[0])\r\n        } else {\r\n          this._focusItem(this.displayItems[index + 1])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _keySide(e) {\r\n    if (!this.params.autocomplete) {\r\n      e.stopImmediatePropagation()\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  _keyEnter(e) {\r\n    if (this.params.autocomplete && this.lastAction === 'typing') {\r\n      this._resolveValue(true)\r\n    } else {\r\n      if (this.focusedItem) {\r\n        this._chooseItem(this.focusedItem)\r\n      }\r\n    }\r\n  }\r\n\r\n  _keyEsc(e) {\r\n    this._cancel()\r\n  }\r\n\r\n  _keyHomeEnd(e) {\r\n    if (this.params.autocomplete) {\r\n      // prevent table navigation while using input element\r\n      e.stopImmediatePropagation()\r\n    }\r\n  }\r\n\r\n  _keySelectLetter(e) {\r\n    if (!this.params.autocomplete) {\r\n      // if(this.edit.currentCell === false){\r\n      e.preventDefault()\r\n      // }\r\n\r\n      if (e.keyCode >= 38 && e.keyCode <= 90) {\r\n        this._scrollToValue(e.keyCode)\r\n      }\r\n    }\r\n  }\r\n\r\n  _keyAutoCompLetter(e) {\r\n    this._filter()\r\n    this.lastAction = 'typing'\r\n    this.typing = true\r\n  }\r\n\r\n  _scrollToValue(char) {\r\n    clearTimeout(this.filterTimeout)\r\n\r\n    const character = String.fromCharCode(char).toLowerCase()\r\n    this.filterTerm += character.toLowerCase()\r\n\r\n    const match = this.displayItems.find((item) => {\r\n      return typeof item.label !== 'undefined' && item.label.toLowerCase().startsWith(this.filterTerm)\r\n    })\r\n\r\n    if (match) {\r\n      this._focusItem(match)\r\n    }\r\n\r\n    this.filterTimeout = setTimeout(() => {\r\n      this.filterTerm = ''\r\n    }, 800)\r\n  }\r\n\r\n  _focusItem(item) {\r\n    this.lastAction = 'focus'\r\n\r\n    if (this.focusedItem && this.focusedItem.element) {\r\n      this.focusedItem.element.classList.remove('focused')\r\n    }\r\n\r\n    this.focusedItem = item\r\n\r\n    if (item && item.element) {\r\n      item.element.classList.add('focused')\r\n      item.element.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' })\r\n    }\r\n  }\r\n\r\n  /// ///////////////////////////////////\r\n  /// //// Data List Generation /////////\r\n  /// ///////////////////////////////////\r\n  headerFilterInitialListGen() {\r\n    this._generateOptions(true)\r\n  }\r\n\r\n  rebuildOptionsList() {\r\n    this._generateOptions()\r\n      .then(this._sortOptions.bind(this))\r\n      .then(this._buildList.bind(this))\r\n      .then(this._showList.bind(this))\r\n      .catch((e) => {\r\n        if (!Number.isInteger(e)) {\r\n          console.error('List generation error', e)\r\n        }\r\n      })\r\n  }\r\n\r\n  _filterList() {\r\n    this._buildList(this._filterOptions())\r\n    this._showList()\r\n  }\r\n\r\n  _generateOptions(silent) {\r\n    let values = []\r\n    const iteration = ++this.listIteration\r\n\r\n    this.filtered = false\r\n\r\n    if (this.params.values) {\r\n      values = this.params.values\r\n    } else if (this.params.valuesURL) {\r\n      values = this._ajaxRequest(this.params.valuesURL, this.input.value)\r\n    } else {\r\n      if (typeof this.params.valuesLookup === 'function') {\r\n        values = this.params.valuesLookup(this.cell, this.input.value)\r\n      } else if (this.params.valuesLookup) {\r\n        values = this._uniqueColumnValues(this.params.valuesLookupField)\r\n      }\r\n    }\r\n\r\n    if (values instanceof Promise) {\r\n      if (!silent) {\r\n        this._addPlaceholder(this.params.placeholderLoading)\r\n      }\r\n\r\n      return values.then().then((responseValues) => {\r\n        if (this.listIteration === iteration) {\r\n          return this._parseList(responseValues)\r\n        } else {\r\n          return Promise.reject(iteration)\r\n        }\r\n      })\r\n    } else {\r\n      return Promise.resolve(this._parseList(values))\r\n    }\r\n  }\r\n\r\n  _addPlaceholder(contents) {\r\n    let placeholder = document.createElement('div')\r\n\r\n    if (typeof contents === 'function') {\r\n      contents = contents(this.cell.getComponent(), this.listEl)\r\n    }\r\n\r\n    if (contents) {\r\n      this._clearList()\r\n\r\n      if (contents instanceof HTMLElement) {\r\n        placeholder = contents\r\n      } else {\r\n        placeholder.classList.add('tabulator-edit-list-placeholder')\r\n        placeholder.innerHTML = contents\r\n      }\r\n\r\n      this.listEl.appendChild(placeholder)\r\n\r\n      this._showList()\r\n    }\r\n  }\r\n\r\n  _ajaxRequest(url, term) {\r\n    const params = this.params.filterRemote ? { term } : {}\r\n    url = urlBuilder(url, {}, params)\r\n\r\n    return fetch(url)\r\n      .then((response) => {\r\n        if (response.ok) {\r\n          return response.json().catch((error) => {\r\n            console.warn('List Ajax Load Error - Invalid JSON returned', error)\r\n            return Promise.reject(error)\r\n          })\r\n        } else {\r\n          console.error('List Ajax Load Error - Connection Error: ' + response.status, response.statusText)\r\n          return Promise.reject(response)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.error('List Ajax Load Error - Connection Error: ', error)\r\n        return Promise.reject(error)\r\n      })\r\n  }\r\n\r\n  _uniqueColumnValues(field) {\r\n    let output = {}\r\n    const data = this.table.getData(this.params.valuesLookup)\r\n    let column\r\n\r\n    if (field) {\r\n      column = this.table.columnManager.getColumnByField(field)\r\n    } else {\r\n      column = this.cell.getColumn()._getSelf()\r\n    }\r\n\r\n    if (column) {\r\n      data.forEach((row) => {\r\n        const val = column.getFieldValue(row)\r\n\r\n        if (!this._emptyValueCheck(val)) {\r\n          if (this.params.multiselect && Array.isArray(val)) {\r\n            val.forEach((item) => {\r\n              if (!this._emptyValueCheck(item)) {\r\n                output[item] = true\r\n              }\r\n            })\r\n          } else {\r\n            output[val] = true\r\n          }\r\n        }\r\n      })\r\n    } else {\r\n      console.warn('unable to find matching column to create select lookup list:', field)\r\n      output = []\r\n    }\r\n\r\n    return Object.keys(output)\r\n  }\r\n\r\n  _emptyValueCheck(value) {\r\n    return value === null || typeof value === 'undefined' || value === ''\r\n  }\r\n\r\n  _parseList(inputValues) {\r\n    const data = []\r\n\r\n    if (!Array.isArray(inputValues)) {\r\n      inputValues = Object.entries(inputValues).map(([key, value]) => {\r\n        return {\r\n          label: value,\r\n          value: key\r\n        }\r\n      })\r\n    }\r\n\r\n    inputValues.forEach((value) => {\r\n      if (typeof value !== 'object') {\r\n        value = {\r\n          label: value,\r\n          value\r\n        }\r\n      }\r\n\r\n      this._parseListItem(value, data, 0)\r\n    })\r\n\r\n    if (!this.currentItems.length && this.params.freetext) {\r\n      this.input.value = this.initialValues\r\n      this.typing = true\r\n      this.lastAction = 'typing'\r\n    }\r\n\r\n    this.data = data\r\n\r\n    return data\r\n  }\r\n\r\n  _parseListItem(option, data, level) {\r\n    let item = {}\r\n\r\n    if (option.options) {\r\n      item = this._parseListGroup(option, level + 1)\r\n    } else {\r\n      item = {\r\n        label: option.label,\r\n        value: option.value,\r\n        itemParams: option.itemParams,\r\n        elementAttributes: option.elementAttributes,\r\n        element: false,\r\n        selected: false,\r\n        visible: true,\r\n        level,\r\n        original: option\r\n      }\r\n\r\n      if (this.initialValues && this.initialValues.indexOf(option.value) > -1) {\r\n        this._chooseItem(item, true)\r\n      }\r\n    }\r\n\r\n    data.push(item)\r\n  }\r\n\r\n  _parseListGroup(option, level) {\r\n    const item = {\r\n      label: option.label,\r\n      group: true,\r\n      itemParams: option.itemParams,\r\n      elementAttributes: option.elementAttributes,\r\n      element: false,\r\n      visible: true,\r\n      level,\r\n      options: [],\r\n      original: option\r\n    }\r\n\r\n    option.options.forEach((child) => {\r\n      this._parseListItem(child, item.options, level)\r\n    })\r\n\r\n    return item\r\n  }\r\n\r\n  _sortOptions(options) {\r\n    let sorter\r\n\r\n    if (this.params.sort) {\r\n      sorter = typeof this.params.sort === 'function' ? this.params.sort : this._defaultSortFunction.bind(this)\r\n\r\n      this._sortGroup(sorter, options)\r\n    }\r\n\r\n    return options\r\n  }\r\n\r\n  _sortGroup(sorter, options) {\r\n    options.sort((a, b) => {\r\n      return sorter(a.label, b.label, a.value, b.value, a.original, b.original)\r\n    })\r\n\r\n    options.forEach((option) => {\r\n      if (option.group) {\r\n        this._sortGroup(sorter, option.options)\r\n      }\r\n    })\r\n  }\r\n\r\n  _defaultSortFunction(as, bs) {\r\n    let a\r\n    let b\r\n    let a1\r\n    let b1\r\n    let i = 0\r\n    let L\r\n    const rx = /(\\d+)|(\\D+)/g\r\n    const rd = /\\d/\r\n    let emptyAlign = 0\r\n\r\n    if (this.params.sort === 'desc') {\r\n      ;[as, bs] = [bs, as]\r\n    }\r\n\r\n    // handle empty values\r\n    if (!as && as !== 0) {\r\n      emptyAlign = !bs && bs !== 0 ? 0 : -1\r\n    } else if (!bs && bs !== 0) {\r\n      emptyAlign = 1\r\n    } else {\r\n      if (isFinite(as) && isFinite(bs)) return as - bs\r\n      a = String(as).toLowerCase()\r\n      b = String(bs).toLowerCase()\r\n      if (a === b) return 0\r\n      if (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1\r\n      a = a.match(rx)\r\n      b = b.match(rx)\r\n      L = a.length > b.length ? b.length : a.length\r\n      while (i < L) {\r\n        a1 = a[i]\r\n        b1 = b[i++]\r\n        if (a1 !== b1) {\r\n          if (isFinite(a1) && isFinite(b1)) {\r\n            if (a1.charAt(0) === '0') a1 = '.' + a1\r\n            if (b1.charAt(0) === '0') b1 = '.' + b1\r\n            return a1 - b1\r\n          } else return a1 > b1 ? 1 : -1\r\n        }\r\n      }\r\n\r\n      return a.length > b.length\r\n    }\r\n\r\n    return emptyAlign\r\n  }\r\n\r\n  _filterOptions() {\r\n    const filterFunc = this.params.filterFunc || this._defaultFilterFunc\r\n    const term = this.input.value\r\n\r\n    if (term) {\r\n      this.filtered = true\r\n\r\n      this.data.forEach((item) => {\r\n        this._filterItem(filterFunc, term, item)\r\n      })\r\n    } else {\r\n      this.filtered = false\r\n    }\r\n\r\n    return this.data\r\n  }\r\n\r\n  _filterItem(func, term, item) {\r\n    let matches = false\r\n\r\n    if (!item.group) {\r\n      item.visible = func(term, item.label, item.value, item.original)\r\n    } else {\r\n      item.options.forEach((option) => {\r\n        if (this._filterItem(func, term, option)) {\r\n          matches = true\r\n        }\r\n      })\r\n\r\n      item.visible = matches\r\n    }\r\n\r\n    return item.visible\r\n  }\r\n\r\n  _defaultFilterFunc(term, label, value, item) {\r\n    term = String(term).toLowerCase()\r\n\r\n    if (label !== null && typeof label !== 'undefined') {\r\n      if (String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase().indexOf(term) > -1) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /// ///////////////////////////////////\r\n  /// //////// Display List /////////////\r\n  /// ///////////////////////////////////\r\n\r\n  _clearList() {\r\n    while (this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild)\r\n\r\n    this.displayItems = []\r\n  }\r\n\r\n  _buildList(data) {\r\n    this._clearList()\r\n\r\n    data.forEach((option) => {\r\n      this._buildItem(option)\r\n    })\r\n\r\n    if (!this.displayItems.length) {\r\n      this._addPlaceholder(this.params.placeholderEmpty)\r\n    }\r\n  }\r\n\r\n  _buildItem(item) {\r\n    let el = item.element\r\n    let contents\r\n\r\n    if (!this.filtered || item.visible) {\r\n      if (!el) {\r\n        el = document.createElement('div')\r\n        el.tabIndex = 0\r\n\r\n        contents = this.params.itemFormatter\r\n          ? this.params.itemFormatter(item.label, item.value, item.original, el)\r\n          : item.label\r\n\r\n        if (contents instanceof HTMLElement) {\r\n          el.appendChild(contents)\r\n        } else {\r\n          el.innerHTML = contents\r\n        }\r\n\r\n        if (item.group) {\r\n          el.classList.add('tabulator-edit-list-group')\r\n        } else {\r\n          el.classList.add('tabulator-edit-list-item')\r\n        }\r\n\r\n        el.classList.add('tabulator-edit-list-group-level-' + item.level)\r\n\r\n        if (item.elementAttributes && typeof item.elementAttributes === 'object') {\r\n          for (let key in item.elementAttributes) {\r\n            if (key.charAt(0) == '+') {\r\n              key = key.slice(1)\r\n              el.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes['+' + key])\r\n            } else {\r\n              el.setAttribute(key, item.elementAttributes[key])\r\n            }\r\n          }\r\n        }\r\n\r\n        if (item.group) {\r\n          el.addEventListener('click', this._groupClick.bind(this, item))\r\n        } else {\r\n          el.addEventListener('click', this._itemClick.bind(this, item))\r\n        }\r\n\r\n        el.addEventListener('mousedown', this._preventBlur.bind(this))\r\n\r\n        item.element = el\r\n      }\r\n\r\n      this._styleItem(item)\r\n\r\n      this.listEl.appendChild(el)\r\n\r\n      if (item.group) {\r\n        item.options.forEach((option) => {\r\n          this._buildItem(option)\r\n        })\r\n      } else {\r\n        this.displayItems.push(item)\r\n      }\r\n    }\r\n  }\r\n\r\n  _showList() {\r\n    const startVis = this.popup && this.popup.isVisible()\r\n\r\n    if (this.input.parentNode) {\r\n      if (this.params.autocomplete && this.input.value === '' && !this.params.listOnEmpty) {\r\n        if (this.popup) {\r\n          this.popup.hide(true)\r\n        }\r\n        return\r\n      }\r\n\r\n      this._setListWidth()\r\n\r\n      if (!this.popup) {\r\n        this.popup = this.edit.popup(this.listEl)\r\n      }\r\n\r\n      this.popup.show(this.cell.getElement(), 'bottom')\r\n\r\n      if (!startVis) {\r\n        setTimeout(() => {\r\n          this.popup.hideOnBlur(this._resolveValue.bind(this, true))\r\n        }, 10)\r\n      }\r\n    }\r\n  }\r\n\r\n  _styleItem(item) {\r\n    if (item && item.element) {\r\n      if (item.selected) {\r\n        item.element.classList.add('active')\r\n      } else {\r\n        item.element.classList.remove('active')\r\n      }\r\n    }\r\n  }\r\n\r\n  /// ///////////////////////////////////\r\n  /// ////// User Interaction ///////////\r\n  /// ///////////////////////////////////\r\n\r\n  _itemClick(item, e) {\r\n    e.stopPropagation()\r\n\r\n    this._chooseItem(item)\r\n  }\r\n\r\n  _groupClick(item, e) {\r\n    e.stopPropagation()\r\n  }\r\n\r\n  /// ///////////////////////////////////\r\n  /// /// Current Item Management ///////\r\n  /// ///////////////////////////////////\r\n\r\n  _cancel() {\r\n    this.popup.hide(true)\r\n    this.actions.cancel()\r\n  }\r\n\r\n  _clearChoices() {\r\n    this.typing = true\r\n\r\n    this.currentItems.forEach((item) => {\r\n      item.selected = false\r\n      this._styleItem(item)\r\n    })\r\n\r\n    this.currentItems = []\r\n\r\n    this.focusedItem = null\r\n  }\r\n\r\n  _chooseItem(item, silent) {\r\n    let index\r\n\r\n    this.typing = false\r\n\r\n    if (this.params.multiselect) {\r\n      index = this.currentItems.indexOf(item)\r\n\r\n      if (index > -1) {\r\n        this.currentItems.splice(index, 1)\r\n        item.selected = false\r\n      } else {\r\n        this.currentItems.push(item)\r\n        item.selected = true\r\n      }\r\n\r\n      this.input.value = this.currentItems.map((item) => item.label).join(',')\r\n\r\n      this._styleItem(item)\r\n    } else {\r\n      this.currentItems = [item]\r\n      item.selected = true\r\n\r\n      this.input.value = item.label\r\n\r\n      this._styleItem(item)\r\n\r\n      if (!silent) {\r\n        this._resolveValue()\r\n      }\r\n    }\r\n\r\n    this._focusItem(item)\r\n  }\r\n\r\n  _resolveValue(blur) {\r\n    let output, initialValue\r\n\r\n    if (this.popup) {\r\n      this.popup.hide(true)\r\n    }\r\n\r\n    if (this.params.multiselect) {\r\n      output = this.currentItems.map((item) => item.value)\r\n    } else {\r\n      if (blur && this.params.autocomplete && this.typing) {\r\n        if (this.params.freetext || (this.params.allowEmpty && this.input.value === '')) {\r\n          output = this.input.value\r\n        } else {\r\n          this.actions.cancel()\r\n          return\r\n        }\r\n      } else {\r\n        if (this.currentItems[0]) {\r\n          output = this.currentItems[0].value\r\n        } else {\r\n          initialValue = Array.isArray(this.initialValues) ? this.initialValues[0] : this.initialValues\r\n\r\n          if (initialValue === null || typeof initialValue === 'undefined' || initialValue === '') {\r\n            output = initialValue\r\n          } else {\r\n            output = this.params.emptyValue\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (output === '') {\r\n      output = this.params.emptyValue\r\n    }\r\n\r\n    this.actions.success(output)\r\n\r\n    if (this.isFilter) {\r\n      this.initialValues = output && !Array.isArray(output) ? [output] : output\r\n      this.currentItems = []\r\n    }\r\n  }\r\n}\r\n","import input from './editors/input.js'\r\nimport textarea from './editors/textarea.js'\r\nimport number from './editors/number.js'\r\nimport range from './editors/range.js'\r\nimport date from './editors/date.js'\r\nimport time from './editors/time.js'\r\nimport datetime from './editors/datetime.js'\r\nimport list from './editors/list.js'\r\nimport star from './editors/star.js'\r\nimport progress from './editors/progress.js'\r\nimport tickCross from './editors/tickCross.js'\r\nimport adaptable from './editors/adaptable.js'\r\n\r\nexport default {\r\n  input,\r\n  textarea,\r\n  number,\r\n  range,\r\n  date,\r\n  time,\r\n  datetime,\r\n  list,\r\n  star,\r\n  progress,\r\n  tickCross,\r\n  adaptable\r\n}\r\n","import maskInput from '../../inputMask.js'\r\n\r\n// input element\r\nexport default function (cell, onRendered, success, cancel, editorParams) {\r\n  // create and style input\r\n  let cellValue = cell.getValue()\r\n  const input = document.createElement('input')\r\n\r\n  input.setAttribute('type', editorParams.search ? 'search' : 'text')\r\n\r\n  input.style.padding = '4px'\r\n  input.style.width = '100%'\r\n  input.style.boxSizing = 'border-box'\r\n\r\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes === 'object') {\r\n    for (let key in editorParams.elementAttributes) {\r\n      if (key.charAt(0) == '+') {\r\n        key = key.slice(1)\r\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes['+' + key])\r\n      } else {\r\n        input.setAttribute(key, editorParams.elementAttributes[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  input.value = typeof cellValue !== 'undefined' ? cellValue : ''\r\n\r\n  onRendered(function () {\r\n    if (cell.getType() === 'cell') {\r\n      input.focus({ preventScroll: true })\r\n      input.style.height = '100%'\r\n\r\n      if (editorParams.selectContents) {\r\n        input.select()\r\n      }\r\n    }\r\n  })\r\n\r\n  function onChange(e) {\r\n    if (((cellValue === null || typeof cellValue === 'undefined') && input.value !== '') || input.value !== cellValue) {\r\n      if (success(input.value)) {\r\n        cellValue = input.value // persist value if successfully validated incase editor is used as header filter\r\n      }\r\n    } else {\r\n      cancel()\r\n    }\r\n  }\r\n\r\n  // submit new value on blur or change\r\n  input.addEventListener('change', onChange)\r\n  input.addEventListener('blur', onChange)\r\n\r\n  // submit new value on enter\r\n  input.addEventListener('keydown', function (e) {\r\n    switch (e.keyCode) {\r\n      // case 9:\r\n      case 13:\r\n        onChange(e)\r\n        break\r\n\r\n      case 27:\r\n        cancel()\r\n        break\r\n\r\n      case 35:\r\n      case 36:\r\n        e.stopPropagation()\r\n        break\r\n    }\r\n  })\r\n\r\n  if (editorParams.mask) {\r\n    maskInput(input, editorParams)\r\n  }\r\n\r\n  return input\r\n}\r\n","import maskInput from '../../inputMask.js'\r\n\r\n// resizable text area element\r\nexport default function (cell, onRendered, success, cancel, editorParams) {\r\n  let cellValue = cell.getValue()\r\n  const vertNav = editorParams.verticalNavigation || 'hybrid'\r\n  const value = String(cellValue !== null && typeof cellValue !== 'undefined' ? cellValue : '')\r\n  const input = document.createElement('textarea')\r\n  let scrollHeight = 0\r\n\r\n  // create and style input\r\n  input.style.display = 'block'\r\n  input.style.padding = '2px'\r\n  input.style.height = '100%'\r\n  input.style.width = '100%'\r\n  input.style.boxSizing = 'border-box'\r\n  input.style.whiteSpace = 'pre-wrap'\r\n  input.style.resize = 'none'\r\n\r\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes === 'object') {\r\n    for (let key in editorParams.elementAttributes) {\r\n      if (key.charAt(0) == '+') {\r\n        key = key.slice(1)\r\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes['+' + key])\r\n      } else {\r\n        input.setAttribute(key, editorParams.elementAttributes[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  input.value = value\r\n\r\n  onRendered(function () {\r\n    if (cell.getType() === 'cell') {\r\n      input.focus({ preventScroll: true })\r\n      input.style.height = '100%'\r\n\r\n      input.scrollHeight\r\n      input.style.height = input.scrollHeight + 'px'\r\n      cell.getRow().normalizeHeight()\r\n\r\n      if (editorParams.selectContents) {\r\n        input.select()\r\n      }\r\n    }\r\n  })\r\n\r\n  function onChange(e) {\r\n    if (((cellValue === null || typeof cellValue === 'undefined') && input.value !== '') || input.value !== cellValue) {\r\n      if (success(input.value)) {\r\n        cellValue = input.value // persist value if successfully validated incase editor is used as header filter\r\n      }\r\n\r\n      setTimeout(function () {\r\n        cell.getRow().normalizeHeight()\r\n      }, 300)\r\n    } else {\r\n      cancel()\r\n    }\r\n  }\r\n\r\n  // submit new value on blur or change\r\n  input.addEventListener('change', onChange)\r\n  input.addEventListener('blur', onChange)\r\n\r\n  input.addEventListener('keyup', function () {\r\n    input.style.height = ''\r\n\r\n    const heightNow = input.scrollHeight\r\n\r\n    input.style.height = heightNow + 'px'\r\n\r\n    if (heightNow != scrollHeight) {\r\n      scrollHeight = heightNow\r\n      cell.getRow().normalizeHeight()\r\n    }\r\n  })\r\n\r\n  input.addEventListener('keydown', function (e) {\r\n    switch (e.keyCode) {\r\n      case 13:\r\n        if (e.shiftKey && editorParams.shiftEnterSubmit) {\r\n          onChange(e)\r\n        }\r\n        break\r\n\r\n      case 27:\r\n        cancel()\r\n        break\r\n\r\n      case 38: // up arrow\r\n        if (vertNav == 'editor' || (vertNav == 'hybrid' && input.selectionStart)) {\r\n          e.stopImmediatePropagation()\r\n          e.stopPropagation()\r\n        }\r\n\r\n        break\r\n\r\n      case 40: // down arrow\r\n        if (vertNav == 'editor' || (vertNav == 'hybrid' && input.selectionStart !== input.value.length)) {\r\n          e.stopImmediatePropagation()\r\n          e.stopPropagation()\r\n        }\r\n        break\r\n\r\n      case 35:\r\n      case 36:\r\n        e.stopPropagation()\r\n        break\r\n    }\r\n  })\r\n\r\n  if (editorParams.mask) {\r\n    maskInput(input, editorParams)\r\n  }\r\n\r\n  return input\r\n}\r\n","import maskInput from '../../inputMask.js'\r\n\r\n// input element with type of number\r\nexport default function (cell, onRendered, success, cancel, editorParams) {\r\n  let cellValue = cell.getValue()\r\n  const vertNav = editorParams.verticalNavigation || 'editor'\r\n  const input = document.createElement('input')\r\n\r\n  input.setAttribute('type', 'number')\r\n\r\n  if (typeof editorParams.max !== 'undefined') {\r\n    input.setAttribute('max', editorParams.max)\r\n  }\r\n\r\n  if (typeof editorParams.min !== 'undefined') {\r\n    input.setAttribute('min', editorParams.min)\r\n  }\r\n\r\n  if (typeof editorParams.step !== 'undefined') {\r\n    input.setAttribute('step', editorParams.step)\r\n  }\r\n\r\n  // create and style input\r\n  input.style.padding = '4px'\r\n  input.style.width = '100%'\r\n  input.style.boxSizing = 'border-box'\r\n\r\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes === 'object') {\r\n    for (let key in editorParams.elementAttributes) {\r\n      if (key.charAt(0) == '+') {\r\n        key = key.slice(1)\r\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes['+' + key])\r\n      } else {\r\n        input.setAttribute(key, editorParams.elementAttributes[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  input.value = cellValue\r\n\r\n  const blurFunc = function (e) {\r\n    onChange()\r\n  }\r\n\r\n  onRendered(function () {\r\n    if (cell.getType() === 'cell') {\r\n      // submit new value on blur\r\n      input.removeEventListener('blur', blurFunc)\r\n\r\n      input.focus({ preventScroll: true })\r\n      input.style.height = '100%'\r\n\r\n      // submit new value on blur\r\n      input.addEventListener('blur', blurFunc)\r\n\r\n      if (editorParams.selectContents) {\r\n        input.select()\r\n      }\r\n    }\r\n  })\r\n\r\n  function onChange() {\r\n    let value = input.value\r\n\r\n    if (!isNaN(value) && value !== '') {\r\n      value = Number(value)\r\n    }\r\n\r\n    if (value !== cellValue) {\r\n      if (success(value)) {\r\n        cellValue = value // persist value if successfully validated incase editor is used as header filter\r\n      }\r\n    } else {\r\n      cancel()\r\n    }\r\n  }\r\n\r\n  // submit new value on enter\r\n  input.addEventListener('keydown', function (e) {\r\n    switch (e.keyCode) {\r\n      case 13:\r\n        // case 9:\r\n        onChange()\r\n        break\r\n\r\n      case 27:\r\n        cancel()\r\n        break\r\n\r\n      case 38: // up arrow\r\n      case 40: // down arrow\r\n        if (vertNav == 'editor') {\r\n          e.stopImmediatePropagation()\r\n          e.stopPropagation()\r\n        }\r\n        break\r\n\r\n      case 35:\r\n      case 36:\r\n        e.stopPropagation()\r\n        break\r\n    }\r\n  })\r\n\r\n  if (editorParams.mask) {\r\n    maskInput(input, editorParams)\r\n  }\r\n\r\n  return input\r\n}\r\n","// input element with type of number\r\nexport default function (cell, onRendered, success, cancel, editorParams) {\r\n  let cellValue = cell.getValue()\r\n  const input = document.createElement('input')\r\n\r\n  input.setAttribute('type', 'range')\r\n\r\n  if (typeof editorParams.max !== 'undefined') {\r\n    input.setAttribute('max', editorParams.max)\r\n  }\r\n\r\n  if (typeof editorParams.min !== 'undefined') {\r\n    input.setAttribute('min', editorParams.min)\r\n  }\r\n\r\n  if (typeof editorParams.step !== 'undefined') {\r\n    input.setAttribute('step', editorParams.step)\r\n  }\r\n\r\n  // create and style input\r\n  input.style.padding = '4px'\r\n  input.style.width = '100%'\r\n  input.style.boxSizing = 'border-box'\r\n\r\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes === 'object') {\r\n    for (let key in editorParams.elementAttributes) {\r\n      if (key.charAt(0) == '+') {\r\n        key = key.slice(1)\r\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes['+' + key])\r\n      } else {\r\n        input.setAttribute(key, editorParams.elementAttributes[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  input.value = cellValue\r\n\r\n  onRendered(function () {\r\n    if (cell.getType() === 'cell') {\r\n      input.focus({ preventScroll: true })\r\n      input.style.height = '100%'\r\n    }\r\n  })\r\n\r\n  function onChange() {\r\n    let value = input.value\r\n\r\n    if (!isNaN(value) && value !== '') {\r\n      value = Number(value)\r\n    }\r\n\r\n    if (value != cellValue) {\r\n      if (success(value)) {\r\n        cellValue = value // persist value if successfully validated incase editor is used as header filter\r\n      }\r\n    } else {\r\n      cancel()\r\n    }\r\n  }\r\n\r\n  // submit new value on blur\r\n  input.addEventListener('blur', function (e) {\r\n    onChange()\r\n  })\r\n\r\n  // submit new value on enter\r\n  input.addEventListener('keydown', function (e) {\r\n    switch (e.keyCode) {\r\n      case 13:\r\n        // case 9:\r\n        onChange()\r\n        break\r\n\r\n      case 27:\r\n        cancel()\r\n        break\r\n    }\r\n  })\r\n\r\n  return input\r\n}\r\n","// input element\r\nexport default function (cell, onRendered, success, cancel, editorParams) {\r\n  const inputFormat = editorParams.format\r\n  const vertNav = editorParams.verticalNavigation || 'editor'\r\n  const DT = inputFormat ? window.DateTime || luxon.DateTime : null\r\n\r\n  // create and style input\r\n  let cellValue = cell.getValue()\r\n  const input = document.createElement('input')\r\n\r\n  function convertDate(value) {\r\n    let newDatetime\r\n\r\n    if (DT.isDateTime(value)) {\r\n      newDatetime = value\r\n    } else if (inputFormat === 'iso') {\r\n      newDatetime = DT.fromISO(String(value))\r\n    } else {\r\n      newDatetime = DT.fromFormat(String(value), inputFormat)\r\n    }\r\n\r\n    return newDatetime.toFormat('yyyy-MM-dd')\r\n  }\r\n\r\n  input.type = 'date'\r\n  input.style.padding = '4px'\r\n  input.style.width = '100%'\r\n  input.style.boxSizing = 'border-box'\r\n\r\n  if (editorParams.max) {\r\n    input.setAttribute('max', inputFormat ? convertDate(editorParams.max) : editorParams.max)\r\n  }\r\n\r\n  if (editorParams.min) {\r\n    input.setAttribute('min', inputFormat ? convertDate(editorParams.min) : editorParams.min)\r\n  }\r\n\r\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes === 'object') {\r\n    for (let key in editorParams.elementAttributes) {\r\n      if (key.charAt(0) == '+') {\r\n        key = key.slice(1)\r\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes['+' + key])\r\n      } else {\r\n        input.setAttribute(key, editorParams.elementAttributes[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  cellValue = typeof cellValue !== 'undefined' ? cellValue : ''\r\n\r\n  if (inputFormat) {\r\n    if (DT) {\r\n      cellValue = convertDate(cellValue)\r\n    } else {\r\n      console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\")\r\n    }\r\n  }\r\n\r\n  input.value = cellValue\r\n\r\n  onRendered(function () {\r\n    if (cell.getType() === 'cell') {\r\n      input.focus({ preventScroll: true })\r\n      input.style.height = '100%'\r\n\r\n      if (editorParams.selectContents) {\r\n        input.select()\r\n      }\r\n    }\r\n  })\r\n\r\n  function onChange() {\r\n    let value = input.value\r\n    let luxDate\r\n\r\n    if (((cellValue === null || typeof cellValue === 'undefined') && value !== '') || value !== cellValue) {\r\n      if (value && inputFormat) {\r\n        luxDate = DT.fromFormat(String(value), 'yyyy-MM-dd')\r\n\r\n        switch (inputFormat) {\r\n          case true:\r\n            value = luxDate\r\n            break\r\n\r\n          case 'iso':\r\n            value = luxDate.toISO()\r\n            break\r\n\r\n          default:\r\n            value = luxDate.toFormat(inputFormat)\r\n        }\r\n      }\r\n\r\n      if (success(value)) {\r\n        cellValue = input.value // persist value if successfully validated incase editor is used as header filter\r\n      }\r\n    } else {\r\n      cancel()\r\n    }\r\n  }\r\n\r\n  // submit new value on blur\r\n  input.addEventListener('blur', function (e) {\r\n    if (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\r\n      onChange() // only on a \"true\" blur; not when focusing browser's date/time picker\r\n    }\r\n  })\r\n\r\n  // submit new value on enter\r\n  input.addEventListener('keydown', function (e) {\r\n    switch (e.keyCode) {\r\n      // case 9:\r\n      case 13:\r\n        onChange()\r\n        break\r\n\r\n      case 27:\r\n        cancel()\r\n        break\r\n\r\n      case 35:\r\n      case 36:\r\n        e.stopPropagation()\r\n        break\r\n\r\n      case 38: // up arrow\r\n      case 40: // down arrow\r\n        if (vertNav == 'editor') {\r\n          e.stopImmediatePropagation()\r\n          e.stopPropagation()\r\n        }\r\n        break\r\n    }\r\n  })\r\n\r\n  return input\r\n}\r\n","// input element\r\nexport default function (cell, onRendered, success, cancel, editorParams) {\r\n  const inputFormat = editorParams.format\r\n  const vertNav = editorParams.verticalNavigation || 'editor'\r\n  const DT = inputFormat ? window.DateTime || luxon.DateTime : null\r\n  let newDatetime\r\n\r\n  // create and style input\r\n  let cellValue = cell.getValue()\r\n  const input = document.createElement('input')\r\n\r\n  input.type = 'time'\r\n  input.style.padding = '4px'\r\n  input.style.width = '100%'\r\n  input.style.boxSizing = 'border-box'\r\n\r\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes === 'object') {\r\n    for (let key in editorParams.elementAttributes) {\r\n      if (key.charAt(0) == '+') {\r\n        key = key.slice(1)\r\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes['+' + key])\r\n      } else {\r\n        input.setAttribute(key, editorParams.elementAttributes[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  cellValue = typeof cellValue !== 'undefined' ? cellValue : ''\r\n\r\n  if (inputFormat) {\r\n    if (DT) {\r\n      if (DT.isDateTime(cellValue)) {\r\n        newDatetime = cellValue\r\n      } else if (inputFormat === 'iso') {\r\n        newDatetime = DT.fromISO(String(cellValue))\r\n      } else {\r\n        newDatetime = DT.fromFormat(String(cellValue), inputFormat)\r\n      }\r\n\r\n      cellValue = newDatetime.toFormat('HH:mm')\r\n    } else {\r\n      console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\")\r\n    }\r\n  }\r\n\r\n  input.value = cellValue\r\n\r\n  onRendered(function () {\r\n    if (cell.getType() == 'cell') {\r\n      input.focus({ preventScroll: true })\r\n      input.style.height = '100%'\r\n\r\n      if (editorParams.selectContents) {\r\n        input.select()\r\n      }\r\n    }\r\n  })\r\n\r\n  function onChange() {\r\n    let value = input.value\r\n    let luxTime\r\n\r\n    if (((cellValue === null || typeof cellValue === 'undefined') && value !== '') || value !== cellValue) {\r\n      if (value && inputFormat) {\r\n        luxTime = DT.fromFormat(String(value), 'hh:mm')\r\n\r\n        switch (inputFormat) {\r\n          case true:\r\n            value = luxTime\r\n            break\r\n\r\n          case 'iso':\r\n            value = luxTime.toISO()\r\n            break\r\n\r\n          default:\r\n            value = luxTime.toFormat(inputFormat)\r\n        }\r\n      }\r\n\r\n      if (success(value)) {\r\n        cellValue = input.value // persist value if successfully validated incase editor is used as header filter\r\n      }\r\n    } else {\r\n      cancel()\r\n    }\r\n  }\r\n\r\n  // submit new value on blur\r\n  input.addEventListener('blur', function (e) {\r\n    if (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\r\n      onChange() // only on a \"true\" blur; not when focusing browser's date/time picker\r\n    }\r\n  })\r\n\r\n  // submit new value on enter\r\n  input.addEventListener('keydown', function (e) {\r\n    switch (e.keyCode) {\r\n      // case 9:\r\n      case 13:\r\n        onChange()\r\n        break\r\n\r\n      case 27:\r\n        cancel()\r\n        break\r\n\r\n      case 35:\r\n      case 36:\r\n        e.stopPropagation()\r\n        break\r\n\r\n      case 38: // up arrow\r\n      case 40: // down arrow\r\n        if (vertNav == 'editor') {\r\n          e.stopImmediatePropagation()\r\n          e.stopPropagation()\r\n        }\r\n        break\r\n    }\r\n  })\r\n\r\n  return input\r\n}\r\n","// input element\r\nexport default function (cell, onRendered, success, cancel, editorParams) {\r\n  const inputFormat = editorParams.format\r\n  const vertNav = editorParams.verticalNavigation || 'editor'\r\n  const DT = inputFormat ? this.table.dependencyRegistry.lookup(['luxon', 'DateTime'], 'DateTime') : null\r\n  let newDatetime\r\n\r\n  // create and style input\r\n  let cellValue = cell.getValue()\r\n  const input = document.createElement('input')\r\n\r\n  input.type = 'datetime-local'\r\n  input.style.padding = '4px'\r\n  input.style.width = '100%'\r\n  input.style.boxSizing = 'border-box'\r\n\r\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes === 'object') {\r\n    for (let key in editorParams.elementAttributes) {\r\n      if (key.charAt(0) == '+') {\r\n        key = key.slice(1)\r\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes['+' + key])\r\n      } else {\r\n        input.setAttribute(key, editorParams.elementAttributes[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  cellValue = typeof cellValue !== 'undefined' ? cellValue : ''\r\n\r\n  if (inputFormat) {\r\n    if (DT) {\r\n      if (DT.isDateTime(cellValue)) {\r\n        newDatetime = cellValue\r\n      } else if (inputFormat === 'iso') {\r\n        newDatetime = DT.fromISO(String(cellValue))\r\n      } else {\r\n        newDatetime = DT.fromFormat(String(cellValue), inputFormat)\r\n      }\r\n\r\n      cellValue = newDatetime.toFormat('yyyy-MM-dd') + 'T' + newDatetime.toFormat('HH:mm')\r\n    } else {\r\n      console.error(\"Editor Error - 'date' editor 'format' param is dependant on luxon.js\")\r\n    }\r\n  }\r\n\r\n  input.value = cellValue\r\n\r\n  onRendered(function () {\r\n    if (cell.getType() === 'cell') {\r\n      input.focus({ preventScroll: true })\r\n      input.style.height = '100%'\r\n\r\n      if (editorParams.selectContents) {\r\n        input.select()\r\n      }\r\n    }\r\n  })\r\n\r\n  function onChange() {\r\n    let value = input.value\r\n    let luxDateTime\r\n\r\n    if (((cellValue === null || typeof cellValue === 'undefined') && value !== '') || value !== cellValue) {\r\n      if (value && inputFormat) {\r\n        luxDateTime = DT.fromISO(String(value))\r\n\r\n        switch (inputFormat) {\r\n          case true:\r\n            value = luxDateTime\r\n            break\r\n\r\n          case 'iso':\r\n            value = luxDateTime.toISO()\r\n            break\r\n\r\n          default:\r\n            value = luxDateTime.toFormat(inputFormat)\r\n        }\r\n      }\r\n\r\n      if (success(value)) {\r\n        cellValue = input.value // persist value if successfully validated incase editor is used as header filter\r\n      }\r\n    } else {\r\n      cancel()\r\n    }\r\n  }\r\n\r\n  // submit new value on blur\r\n  input.addEventListener('blur', function (e) {\r\n    if (e.relatedTarget || e.rangeParent || e.explicitOriginalTarget !== input) {\r\n      onChange() // only on a \"true\" blur; not when focusing browser's date/time picker\r\n    }\r\n  })\r\n\r\n  // submit new value on enter\r\n  input.addEventListener('keydown', function (e) {\r\n    switch (e.keyCode) {\r\n      // case 9:\r\n      case 13:\r\n        onChange()\r\n        break\r\n\r\n      case 27:\r\n        cancel()\r\n        break\r\n\r\n      case 35:\r\n      case 36:\r\n        e.stopPropagation()\r\n        break\r\n\r\n      case 38: // up arrow\r\n      case 40: // down arrow\r\n        if (vertNav == 'editor') {\r\n          e.stopImmediatePropagation()\r\n          e.stopPropagation()\r\n        }\r\n        break\r\n    }\r\n  })\r\n\r\n  return input\r\n}\r\n","import List from '../../List.js'\r\n\r\nexport default function (cell, onRendered, success, cancel, editorParams) {\r\n  const list = new List(this, cell, onRendered, success, cancel, editorParams)\r\n\r\n  return list.input\r\n}\r\n","// star rating\r\nexport default function (cell, onRendered, success, cancel, editorParams) {\r\n  const self = this\r\n  const element = cell.getElement()\r\n  let value = cell.getValue()\r\n  const maxStars = element.getElementsByTagName('svg').length || 5\r\n  const size = element.getElementsByTagName('svg')[0]\r\n    ? element.getElementsByTagName('svg')[0].getAttribute('width')\r\n    : 14\r\n  const stars = []\r\n  const starsHolder = document.createElement('div')\r\n  const star = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\r\n\r\n  // change star type\r\n  function starChange(val) {\r\n    stars.forEach(function (star, i) {\r\n      if (i < val) {\r\n        if (self.table.browser == 'ie') {\r\n          star.setAttribute('class', 'tabulator-star-active')\r\n        } else {\r\n          star.classList.replace('tabulator-star-inactive', 'tabulator-star-active')\r\n        }\r\n\r\n        star.innerHTML =\r\n          '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>'\r\n      } else {\r\n        if (self.table.browser == 'ie') {\r\n          star.setAttribute('class', 'tabulator-star-inactive')\r\n        } else {\r\n          star.classList.replace('tabulator-star-active', 'tabulator-star-inactive')\r\n        }\r\n\r\n        star.innerHTML =\r\n          '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>'\r\n      }\r\n    })\r\n  }\r\n\r\n  // build stars\r\n  function buildStar(i) {\r\n    const starHolder = document.createElement('span')\r\n    const nextStar = star.cloneNode(true)\r\n\r\n    stars.push(nextStar)\r\n\r\n    starHolder.addEventListener('mouseenter', function (e) {\r\n      e.stopPropagation()\r\n      e.stopImmediatePropagation()\r\n      starChange(i)\r\n    })\r\n\r\n    starHolder.addEventListener('mousemove', function (e) {\r\n      e.stopPropagation()\r\n      e.stopImmediatePropagation()\r\n    })\r\n\r\n    starHolder.addEventListener('click', function (e) {\r\n      e.stopPropagation()\r\n      e.stopImmediatePropagation()\r\n      success(i)\r\n      element.blur()\r\n    })\r\n\r\n    starHolder.appendChild(nextStar)\r\n    starsHolder.appendChild(starHolder)\r\n  }\r\n\r\n  // handle keyboard navigation value change\r\n  function changeValue(val) {\r\n    value = val\r\n    starChange(val)\r\n  }\r\n\r\n  // style cell\r\n  element.style.whiteSpace = 'nowrap'\r\n  element.style.overflow = 'hidden'\r\n  element.style.textOverflow = 'ellipsis'\r\n\r\n  // style holding element\r\n  starsHolder.style.verticalAlign = 'middle'\r\n  starsHolder.style.display = 'inline-block'\r\n  starsHolder.style.padding = '4px'\r\n\r\n  // style star\r\n  star.setAttribute('width', size)\r\n  star.setAttribute('height', size)\r\n  star.setAttribute('viewBox', '0 0 512 512')\r\n  star.setAttribute('xml:space', 'preserve')\r\n  star.style.padding = '0 1px'\r\n\r\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes === 'object') {\r\n    for (let key in editorParams.elementAttributes) {\r\n      if (key.charAt(0) == '+') {\r\n        key = key.slice(1)\r\n        starsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes['+' + key])\r\n      } else {\r\n        starsHolder.setAttribute(key, editorParams.elementAttributes[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  // create correct number of stars\r\n  for (let i = 1; i <= maxStars; i++) {\r\n    buildStar(i)\r\n  }\r\n\r\n  // ensure value does not exceed number of stars\r\n  value = Math.min(parseInt(value), maxStars)\r\n\r\n  // set initial styling of stars\r\n  starChange(value)\r\n\r\n  starsHolder.addEventListener('mousemove', function (e) {\r\n    starChange(0)\r\n  })\r\n\r\n  starsHolder.addEventListener('click', function (e) {\r\n    success(0)\r\n  })\r\n\r\n  element.addEventListener('blur', function (e) {\r\n    cancel()\r\n  })\r\n\r\n  // allow key based navigation\r\n  element.addEventListener('keydown', function (e) {\r\n    switch (e.keyCode) {\r\n      case 39: // right arrow\r\n        changeValue(value + 1)\r\n        break\r\n\r\n      case 37: // left arrow\r\n        changeValue(value - 1)\r\n        break\r\n\r\n      case 13: // enter\r\n        success(value)\r\n        break\r\n\r\n      case 27: // escape\r\n        cancel()\r\n        break\r\n    }\r\n  })\r\n\r\n  return starsHolder\r\n}\r\n","// draggable progress bar\r\nexport default function (cell, onRendered, success, cancel, editorParams) {\r\n  const element = cell.getElement()\r\n  const max =\r\n    typeof editorParams.max === 'undefined'\r\n      ? (element.getElementsByTagName('div')[0] && element.getElementsByTagName('div')[0].getAttribute('max')) || 100\r\n      : editorParams.max\r\n  const min =\r\n    typeof editorParams.min === 'undefined'\r\n      ? (element.getElementsByTagName('div')[0] && element.getElementsByTagName('div')[0].getAttribute('min')) || 0\r\n      : editorParams.min\r\n  const percent = (max - min) / 100\r\n  let value = cell.getValue() || 0\r\n  const handle = document.createElement('div')\r\n  const bar = document.createElement('div')\r\n  let mouseDrag\r\n  let mouseDragWidth\r\n\r\n  // set new value\r\n  function updateValue() {\r\n    const style = window.getComputedStyle(element, null)\r\n\r\n    const calcVal =\r\n      percent *\r\n        Math.round(\r\n          bar.offsetWidth /\r\n            ((element.clientWidth -\r\n              parseInt(style.getPropertyValue('padding-left')) -\r\n              parseInt(style.getPropertyValue('padding-right'))) /\r\n              100)\r\n        ) +\r\n      min\r\n    success(calcVal)\r\n    element.setAttribute('aria-valuenow', calcVal)\r\n    element.setAttribute('aria-label', value)\r\n  }\r\n\r\n  // style handle\r\n  handle.style.position = 'absolute'\r\n  handle.style.right = '0'\r\n  handle.style.top = '0'\r\n  handle.style.bottom = '0'\r\n  handle.style.width = '5px'\r\n  handle.classList.add('tabulator-progress-handle')\r\n\r\n  // style bar\r\n  bar.style.display = 'inline-block'\r\n  bar.style.position = 'relative'\r\n  // bar.style.top = \"8px\";\r\n  // bar.style.bottom = \"8px\";\r\n  // bar.style.left = \"4px\";\r\n  // bar.style.marginRight = \"4px\";\r\n  bar.style.height = '100%'\r\n  bar.style.backgroundColor = '#488CE9'\r\n  bar.style.maxWidth = '100%'\r\n  bar.style.minWidth = '0%'\r\n\r\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes === 'object') {\r\n    for (let key in editorParams.elementAttributes) {\r\n      if (key.charAt(0) == '+') {\r\n        key = key.slice(1)\r\n        bar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes['+' + key])\r\n      } else {\r\n        bar.setAttribute(key, editorParams.elementAttributes[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  // style cell\r\n  element.style.padding = '4px 4px'\r\n\r\n  // make sure value is in range\r\n  value = Math.min(parseFloat(value), max)\r\n  value = Math.max(parseFloat(value), min)\r\n\r\n  // workout percentage\r\n  value = Math.round((value - min) / percent)\r\n  // bar.style.right = value + \"%\";\r\n  bar.style.width = value + '%'\r\n\r\n  element.setAttribute('aria-valuemin', min)\r\n  element.setAttribute('aria-valuemax', max)\r\n\r\n  bar.appendChild(handle)\r\n\r\n  handle.addEventListener('mousedown', function (e) {\r\n    mouseDrag = e.screenX\r\n    mouseDragWidth = bar.offsetWidth\r\n  })\r\n\r\n  handle.addEventListener('mouseover', function () {\r\n    handle.style.cursor = 'ew-resize'\r\n  })\r\n\r\n  element.addEventListener('mousemove', function (e) {\r\n    if (mouseDrag) {\r\n      bar.style.width = mouseDragWidth + e.screenX - mouseDrag + 'px'\r\n    }\r\n  })\r\n\r\n  element.addEventListener('mouseup', function (e) {\r\n    if (mouseDrag) {\r\n      e.stopPropagation()\r\n      e.stopImmediatePropagation()\r\n\r\n      mouseDrag = false\r\n      mouseDragWidth = false\r\n\r\n      updateValue()\r\n    }\r\n  })\r\n\r\n  // allow key based navigation\r\n  element.addEventListener('keydown', function (e) {\r\n    switch (e.keyCode) {\r\n      case 39: // right arrow\r\n        e.preventDefault()\r\n        bar.style.width = bar.clientWidth + element.clientWidth / 100 + 'px'\r\n        break\r\n\r\n      case 37: // left arrow\r\n        e.preventDefault()\r\n        bar.style.width = bar.clientWidth - element.clientWidth / 100 + 'px'\r\n        break\r\n\r\n      case 9: // tab\r\n      case 13: // enter\r\n        updateValue()\r\n        break\r\n\r\n      case 27: // escape\r\n        cancel()\r\n        break\r\n    }\r\n  })\r\n\r\n  element.addEventListener('blur', function () {\r\n    cancel()\r\n  })\r\n\r\n  return bar\r\n}\r\n","// checkbox\r\nexport default function (cell, onRendered, success, cancel, editorParams) {\r\n  const value = cell.getValue()\r\n  const input = document.createElement('input')\r\n  const tristate = editorParams.tristate\r\n  const indetermValue = typeof editorParams.indeterminateValue === 'undefined' ? null : editorParams.indeterminateValue\r\n  let indetermState = false\r\n  const trueValueSet = Object.keys(editorParams).includes('trueValue')\r\n  const falseValueSet = Object.keys(editorParams).includes('falseValue')\r\n\r\n  input.setAttribute('type', 'checkbox')\r\n  input.style.marginTop = '5px'\r\n  input.style.boxSizing = 'border-box'\r\n\r\n  if (editorParams.elementAttributes && typeof editorParams.elementAttributes === 'object') {\r\n    for (let key in editorParams.elementAttributes) {\r\n      if (key.charAt(0) == '+') {\r\n        key = key.slice(1)\r\n        input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes['+' + key])\r\n      } else {\r\n        input.setAttribute(key, editorParams.elementAttributes[key])\r\n      }\r\n    }\r\n  }\r\n\r\n  input.value = value\r\n\r\n  if (tristate && (typeof value === 'undefined' || value === indetermValue || value === '')) {\r\n    indetermState = true\r\n    input.indeterminate = true\r\n  }\r\n\r\n  if (this.table.browser != 'firefox' && this.table.browser != 'safari') {\r\n    // prevent blur issue on mac firefox\r\n    onRendered(function () {\r\n      if (cell.getType() === 'cell') {\r\n        input.focus({ preventScroll: true })\r\n      }\r\n    })\r\n  }\r\n\r\n  input.checked = trueValueSet\r\n    ? value === editorParams.trueValue\r\n    : value === true || value === 'true' || value === 'True' || value === 1\r\n\r\n  function setValue(blur) {\r\n    let checkedValue = input.checked\r\n\r\n    if (trueValueSet && checkedValue) {\r\n      checkedValue = editorParams.trueValue\r\n    } else if (falseValueSet && !checkedValue) {\r\n      checkedValue = editorParams.falseValue\r\n    }\r\n\r\n    if (tristate) {\r\n      if (!blur) {\r\n        if (input.checked && !indetermState) {\r\n          input.checked = false\r\n          input.indeterminate = true\r\n          indetermState = true\r\n          return indetermValue\r\n        } else {\r\n          indetermState = false\r\n          return checkedValue\r\n        }\r\n      } else {\r\n        if (indetermState) {\r\n          return indetermValue\r\n        } else {\r\n          return checkedValue\r\n        }\r\n      }\r\n    } else {\r\n      return checkedValue\r\n    }\r\n  }\r\n\r\n  // submit new value on blur\r\n  input.addEventListener('change', function (e) {\r\n    success(setValue())\r\n  })\r\n\r\n  input.addEventListener('blur', function (e) {\r\n    success(setValue(true))\r\n  })\r\n\r\n  // submit new value on enter\r\n  input.addEventListener('keydown', function (e) {\r\n    if (e.keyCode == 13) {\r\n      success(setValue())\r\n    }\r\n    if (e.keyCode == 27) {\r\n      cancel()\r\n    }\r\n  })\r\n\r\n  return input\r\n}\r\n","export default function (cell, onRendered, success, cancel, params) {\r\n  const column = cell._getSelf().column\r\n  let lookup\r\n  let editorFunc\r\n  let editorParams\r\n\r\n  function defaultLookup(cell) {\r\n    const value = cell.getValue()\r\n    let editor = 'input'\r\n\r\n    switch (typeof value) {\r\n      case 'number':\r\n        editor = 'number'\r\n        break\r\n\r\n      case 'boolean':\r\n        editor = 'tickCross'\r\n        break\r\n\r\n      case 'string':\r\n        if (value.includes('\\n')) {\r\n          editor = 'textarea'\r\n        }\r\n        break\r\n    }\r\n\r\n    return editor\r\n  }\r\n\r\n  lookup = params.editorLookup ? params.editorLookup(cell) : defaultLookup(cell)\r\n\r\n  if (params.paramsLookup) {\r\n    editorParams =\r\n      typeof params.paramsLookup === 'function' ? params.paramsLookup(lookup, cell) : params.paramsLookup[lookup]\r\n  }\r\n\r\n  editorFunc = this.table.modules.edit.lookupEditor(lookup, column)\r\n\r\n  return editorFunc.call(this, cell, onRendered, success, cancel, editorParams || {})\r\n}\r\n","import Module from '../../core/Module.js'\r\nimport Helpers from '../../core/tools/Helpers.js'\r\n\r\nimport defaultEditors from './defaults/editors.js'\r\n\r\nexport default class Edit extends Module {\r\n  static moduleName = 'edit'\r\n\r\n  // load defaults\r\n  static editors = defaultEditors\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.currentCell = false // hold currently editing cell\r\n    this.mouseClick = false // hold mousedown state to prevent click binding being overridden by editor opening\r\n    this.recursionBlock = false // prevent focus recursion\r\n    this.invalidEdit = false\r\n    this.editedCells = []\r\n    this.convertEmptyValues = false\r\n\r\n    this.editors = Edit.editors\r\n\r\n    this.registerTableOption('editTriggerEvent', 'focus')\r\n    this.registerTableOption('editorEmptyValue')\r\n    this.registerTableOption('editorEmptyValueFunc', this.emptyValueCheck.bind(this))\r\n\r\n    this.registerColumnOption('editable')\r\n    this.registerColumnOption('editor')\r\n    this.registerColumnOption('editorParams')\r\n    this.registerColumnOption('editorEmptyValue')\r\n    this.registerColumnOption('editorEmptyValueFunc')\r\n\r\n    this.registerColumnOption('cellEditing')\r\n    this.registerColumnOption('cellEdited')\r\n    this.registerColumnOption('cellEditCancelled')\r\n\r\n    this.registerTableFunction('getEditedCells', this.getEditedCells.bind(this))\r\n    this.registerTableFunction('clearCellEdited', this.clearCellEdited.bind(this))\r\n    this.registerTableFunction('navigatePrev', this.navigatePrev.bind(this))\r\n    this.registerTableFunction('navigateNext', this.navigateNext.bind(this))\r\n    this.registerTableFunction('navigateLeft', this.navigateLeft.bind(this))\r\n    this.registerTableFunction('navigateRight', this.navigateRight.bind(this))\r\n    this.registerTableFunction('navigateUp', this.navigateUp.bind(this))\r\n    this.registerTableFunction('navigateDown', this.navigateDown.bind(this))\r\n\r\n    this.registerComponentFunction('cell', 'isEdited', this.cellIsEdited.bind(this))\r\n    this.registerComponentFunction('cell', 'clearEdited', this.clearEdited.bind(this))\r\n    this.registerComponentFunction('cell', 'edit', this.editCell.bind(this))\r\n    this.registerComponentFunction('cell', 'cancelEdit', this.cellCancelEdit.bind(this))\r\n\r\n    this.registerComponentFunction('cell', 'navigatePrev', this.navigatePrev.bind(this))\r\n    this.registerComponentFunction('cell', 'navigateNext', this.navigateNext.bind(this))\r\n    this.registerComponentFunction('cell', 'navigateLeft', this.navigateLeft.bind(this))\r\n    this.registerComponentFunction('cell', 'navigateRight', this.navigateRight.bind(this))\r\n    this.registerComponentFunction('cell', 'navigateUp', this.navigateUp.bind(this))\r\n    this.registerComponentFunction('cell', 'navigateDown', this.navigateDown.bind(this))\r\n  }\r\n\r\n  initialize() {\r\n    this.subscribe('cell-init', this.bindEditor.bind(this))\r\n    this.subscribe('cell-delete', this.clearEdited.bind(this))\r\n    this.subscribe('cell-value-changed', this.updateCellClass.bind(this))\r\n    this.subscribe('column-layout', this.initializeColumnCheck.bind(this))\r\n    this.subscribe('column-delete', this.columnDeleteCheck.bind(this))\r\n    this.subscribe('row-deleting', this.rowDeleteCheck.bind(this))\r\n    this.subscribe('row-layout', this.rowEditableCheck.bind(this))\r\n    this.subscribe('data-refreshing', this.cancelEdit.bind(this))\r\n    this.subscribe('clipboard-paste', this.pasteBlocker.bind(this))\r\n\r\n    this.subscribe('keybinding-nav-prev', this.navigatePrev.bind(this, undefined))\r\n    this.subscribe('keybinding-nav-next', this.keybindingNavigateNext.bind(this))\r\n\r\n    // this.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\r\n    // this.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\r\n    this.subscribe('keybinding-nav-up', this.navigateUp.bind(this, undefined))\r\n    this.subscribe('keybinding-nav-down', this.navigateDown.bind(this, undefined))\r\n\r\n    if (Object.keys(this.table.options).includes('editorEmptyValue')) {\r\n      this.convertEmptyValues = true\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Paste Negation //////////\r\n  /// ////////////////////////////////\r\n\r\n  pasteBlocker(e) {\r\n    if (this.currentCell) {\r\n      return true\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// /// Keybinding Functions ///////\r\n  /// ////////////////////////////////\r\n\r\n  keybindingNavigateNext(e) {\r\n    const cell = this.currentCell\r\n    let newRow = this.options('tabEndNewRow')\r\n\r\n    if (cell) {\r\n      if (!this.navigateNext(cell, e)) {\r\n        if (newRow) {\r\n          cell.getElement().firstChild.blur()\r\n\r\n          if (!this.invalidEdit) {\r\n            if (newRow === true) {\r\n              newRow = this.table.addRow({})\r\n            } else {\r\n              if (typeof newRow === 'function') {\r\n                newRow = this.table.addRow(newRow(cell.row.getComponent()))\r\n              } else {\r\n                newRow = this.table.addRow(Object.assign({}, newRow))\r\n              }\r\n            }\r\n\r\n            newRow.then(() => {\r\n              setTimeout(() => {\r\n                cell.getComponent().navigateNext()\r\n              })\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Cell Functions //////////\r\n  /// ////////////////////////////////\r\n\r\n  cellIsEdited(cell) {\r\n    return !!cell.modules.edit && cell.modules.edit.edited\r\n  }\r\n\r\n  cellCancelEdit(cell) {\r\n    if (cell === this.currentCell) {\r\n      this.table.modules.edit.cancelEdit()\r\n    } else {\r\n      console.warn('Cancel Editor Error - This cell is not currently being edited ')\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Table Functions /////////\r\n  /// ////////////////////////////////\r\n  updateCellClass(cell) {\r\n    if (this.allowEdit(cell)) {\r\n      cell.getElement().classList.add('tabulator-editable')\r\n    } else {\r\n      cell.getElement().classList.remove('tabulator-editable')\r\n    }\r\n  }\r\n\r\n  clearCellEdited(cells) {\r\n    if (!cells) {\r\n      cells = this.table.modules.edit.getEditedCells()\r\n    }\r\n\r\n    if (!Array.isArray(cells)) {\r\n      cells = [cells]\r\n    }\r\n\r\n    cells.forEach((cell) => {\r\n      this.table.modules.edit.clearEdited(cell._getSelf())\r\n    })\r\n  }\r\n\r\n  navigatePrev(cell = this.currentCell, e) {\r\n    let nextCell, prevRow\r\n\r\n    if (cell) {\r\n      if (e) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      nextCell = this.navigateLeft()\r\n\r\n      if (nextCell) {\r\n        return true\r\n      } else {\r\n        prevRow = this.table.rowManager.prevDisplayRow(cell.row, true)\r\n\r\n        if (prevRow) {\r\n          nextCell = this.findPrevEditableCell(prevRow, prevRow.cells.length)\r\n\r\n          if (nextCell) {\r\n            nextCell.getComponent().edit()\r\n            return true\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  navigateNext(cell = this.currentCell, e) {\r\n    let nextCell, nextRow\r\n\r\n    if (cell) {\r\n      if (e) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      nextCell = this.navigateRight()\r\n\r\n      if (nextCell) {\r\n        return true\r\n      } else {\r\n        nextRow = this.table.rowManager.nextDisplayRow(cell.row, true)\r\n\r\n        if (nextRow) {\r\n          nextCell = this.findNextEditableCell(nextRow, -1)\r\n\r\n          if (nextCell) {\r\n            nextCell.getComponent().edit()\r\n            return true\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  navigateLeft(cell = this.currentCell, e) {\r\n    let index, nextCell\r\n\r\n    if (cell) {\r\n      if (e) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      index = cell.getIndex()\r\n      nextCell = this.findPrevEditableCell(cell.row, index)\r\n\r\n      if (nextCell) {\r\n        nextCell.getComponent().edit()\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  navigateRight(cell = this.currentCell, e) {\r\n    let index, nextCell\r\n\r\n    if (cell) {\r\n      if (e) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      index = cell.getIndex()\r\n      nextCell = this.findNextEditableCell(cell.row, index)\r\n\r\n      if (nextCell) {\r\n        nextCell.getComponent().edit()\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  navigateUp(cell = this.currentCell, e) {\r\n    let index, nextRow\r\n\r\n    if (cell) {\r\n      if (e) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      index = cell.getIndex()\r\n      nextRow = this.table.rowManager.prevDisplayRow(cell.row, true)\r\n\r\n      if (nextRow) {\r\n        nextRow.cells[index].getComponent().edit()\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  navigateDown(cell = this.currentCell, e) {\r\n    let index, nextRow\r\n\r\n    if (cell) {\r\n      if (e) {\r\n        e.preventDefault()\r\n      }\r\n\r\n      index = cell.getIndex()\r\n      nextRow = this.table.rowManager.nextDisplayRow(cell.row, true)\r\n\r\n      if (nextRow) {\r\n        nextRow.cells[index].getComponent().edit()\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  findNextEditableCell(row, index) {\r\n    let nextCell = false\r\n\r\n    if (index < row.cells.length - 1) {\r\n      for (let i = index + 1; i < row.cells.length; i++) {\r\n        const cell = row.cells[i]\r\n\r\n        if (cell.column.modules.edit && Helpers.elVisible(cell.getElement())) {\r\n          const allowEdit = this.allowEdit(cell)\r\n\r\n          if (allowEdit) {\r\n            nextCell = cell\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return nextCell\r\n  }\r\n\r\n  findPrevEditableCell(row, index) {\r\n    let prevCell = false\r\n\r\n    if (index > 0) {\r\n      for (let i = index - 1; i >= 0; i--) {\r\n        const cell = row.cells[i]\r\n\r\n        if (cell.column.modules.edit && Helpers.elVisible(cell.getElement())) {\r\n          const allowEdit = this.allowEdit(cell)\r\n\r\n          if (allowEdit) {\r\n            prevCell = cell\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return prevCell\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Internal Logic //////////\r\n  /// ////////////////////////////////\r\n\r\n  initializeColumnCheck(column) {\r\n    if (typeof column.definition.editor !== 'undefined') {\r\n      this.initializeColumn(column)\r\n    }\r\n  }\r\n\r\n  columnDeleteCheck(column) {\r\n    if (this.currentCell && this.currentCell.column === column) {\r\n      this.cancelEdit()\r\n    }\r\n  }\r\n\r\n  rowDeleteCheck(row) {\r\n    if (this.currentCell && this.currentCell.row === row) {\r\n      this.cancelEdit()\r\n    }\r\n  }\r\n\r\n  rowEditableCheck(row) {\r\n    row.getCells().forEach((cell) => {\r\n      if (cell.column.modules.edit && typeof cell.column.modules.edit.check === 'function') {\r\n        this.updateCellClass(cell)\r\n      }\r\n    })\r\n  }\r\n\r\n  // initialize column editor\r\n  initializeColumn(column) {\r\n    const convertEmpty = Object.keys(column.definition).includes('editorEmptyValue')\r\n\r\n    const config = {\r\n      editor: false,\r\n      blocked: false,\r\n      check: column.definition.editable,\r\n      params: column.definition.editorParams || {},\r\n      convertEmptyValues: convertEmpty,\r\n      editorEmptyValue: column.definition.editorEmptyValue,\r\n      editorEmptyValueFunc: column.definition.editorEmptyValueFunc\r\n    }\r\n\r\n    // set column editor\r\n    config.editor = this.lookupEditor(column.definition.editor, column)\r\n\r\n    if (config.editor) {\r\n      column.modules.edit = config\r\n    }\r\n  }\r\n\r\n  lookupEditor(editor, column) {\r\n    let editorFunc\r\n\r\n    switch (typeof editor) {\r\n      case 'string':\r\n        if (this.editors[editor]) {\r\n          editorFunc = this.editors[editor]\r\n        } else {\r\n          console.warn('Editor Error - No such editor found: ', editor)\r\n        }\r\n        break\r\n\r\n      case 'function':\r\n        editorFunc = editor\r\n        break\r\n\r\n      case 'boolean':\r\n        if (editor === true) {\r\n          if (typeof column.definition.formatter !== 'function') {\r\n            if (this.editors[column.definition.formatter]) {\r\n              editorFunc = this.editors[column.definition.formatter]\r\n            } else {\r\n              editorFunc = this.editors.input\r\n            }\r\n          } else {\r\n            console.warn(\r\n              'Editor Error - Cannot auto lookup editor for a custom formatter: ',\r\n              column.definition.formatter\r\n            )\r\n          }\r\n        }\r\n        break\r\n    }\r\n\r\n    return editorFunc\r\n  }\r\n\r\n  getCurrentCell() {\r\n    return this.currentCell ? this.currentCell.getComponent() : false\r\n  }\r\n\r\n  clearEditor(cancel) {\r\n    const cell = this.currentCell\r\n    let cellEl\r\n\r\n    this.invalidEdit = false\r\n\r\n    if (cell) {\r\n      this.currentCell = false\r\n\r\n      cellEl = cell.getElement()\r\n\r\n      this.dispatch('edit-editor-clear', cell, cancel)\r\n\r\n      cellEl.classList.remove('tabulator-editing')\r\n\r\n      while (cellEl.firstChild) cellEl.removeChild(cellEl.firstChild)\r\n\r\n      cell.row.getElement().classList.remove('tabulator-editing')\r\n\r\n      cell.table.element.classList.remove('tabulator-editing')\r\n    }\r\n  }\r\n\r\n  cancelEdit() {\r\n    if (this.currentCell) {\r\n      const cell = this.currentCell\r\n      const component = this.currentCell.getComponent()\r\n\r\n      this.clearEditor(true)\r\n      cell.setValueActual(cell.getValue())\r\n      cell.cellRendered()\r\n\r\n      if (cell.column.definition.editor == 'textarea' || cell.column.definition.variableHeight) {\r\n        cell.row.normalizeHeight(true)\r\n      }\r\n\r\n      if (cell.column.definition.cellEditCancelled) {\r\n        cell.column.definition.cellEditCancelled.call(this.table, component)\r\n      }\r\n\r\n      this.dispatch('edit-cancelled', cell)\r\n      this.dispatchExternal('cellEditCancelled', component)\r\n    }\r\n  }\r\n\r\n  // return a formatted value for a cell\r\n  bindEditor(cell) {\r\n    if (cell.column.modules.edit) {\r\n      const self = this\r\n      const element = cell.getElement(true)\r\n\r\n      this.updateCellClass(cell)\r\n      element.setAttribute('tabindex', 0)\r\n\r\n      element.addEventListener('mousedown', function (e) {\r\n        if (e.button === 2) {\r\n          e.preventDefault()\r\n        } else {\r\n          self.mouseClick = true\r\n        }\r\n      })\r\n\r\n      if (this.options('editTriggerEvent') === 'dblclick') {\r\n        element.addEventListener('dblclick', function (e) {\r\n          if (!element.classList.contains('tabulator-editing')) {\r\n            element.focus({ preventScroll: true })\r\n            self.edit(cell, e, false)\r\n          }\r\n        })\r\n      }\r\n\r\n      if (this.options('editTriggerEvent') === 'focus' || this.options('editTriggerEvent') === 'click') {\r\n        element.addEventListener('click', function (e) {\r\n          if (!element.classList.contains('tabulator-editing')) {\r\n            element.focus({ preventScroll: true })\r\n            self.edit(cell, e, false)\r\n          }\r\n        })\r\n      }\r\n\r\n      if (this.options('editTriggerEvent') === 'focus') {\r\n        element.addEventListener('focus', function (e) {\r\n          if (!self.recursionBlock) {\r\n            self.edit(cell, e, false)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  focusCellNoEvent(cell, block) {\r\n    this.recursionBlock = true\r\n\r\n    if (!(block && this.table.browser === 'ie')) {\r\n      cell.getElement().focus({ preventScroll: true })\r\n    }\r\n\r\n    this.recursionBlock = false\r\n  }\r\n\r\n  editCell(cell, forceEdit) {\r\n    this.focusCellNoEvent(cell)\r\n    this.edit(cell, false, forceEdit)\r\n  }\r\n\r\n  focusScrollAdjust(cell) {\r\n    if (this.table.rowManager.getRenderMode() == 'virtual') {\r\n      const topEdge = this.table.rowManager.element.scrollTop\r\n      const bottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop\r\n      const rowEl = cell.row.getElement()\r\n\r\n      if (rowEl.offsetTop < topEdge) {\r\n        this.table.rowManager.element.scrollTop -= topEdge - rowEl.offsetTop\r\n      } else {\r\n        if (rowEl.offsetTop + rowEl.offsetHeight > bottomEdge) {\r\n          this.table.rowManager.element.scrollTop += rowEl.offsetTop + rowEl.offsetHeight - bottomEdge\r\n        }\r\n      }\r\n\r\n      let leftEdge = this.table.rowManager.element.scrollLeft\r\n      let rightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft\r\n      const cellEl = cell.getElement()\r\n\r\n      if (this.table.modExists('frozenColumns')) {\r\n        leftEdge += parseInt(this.table.modules.frozenColumns.leftMargin || 0)\r\n        rightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin || 0)\r\n      }\r\n\r\n      if (this.table.options.renderHorizontal === 'virtual') {\r\n        leftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft)\r\n        rightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft)\r\n      }\r\n\r\n      if (cellEl.offsetLeft < leftEdge) {\r\n        this.table.rowManager.element.scrollLeft -= leftEdge - cellEl.offsetLeft\r\n      } else {\r\n        if (cellEl.offsetLeft + cellEl.offsetWidth > rightEdge) {\r\n          this.table.rowManager.element.scrollLeft += cellEl.offsetLeft + cellEl.offsetWidth - rightEdge\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  allowEdit(cell) {\r\n    let check = !!cell.column.modules.edit\r\n\r\n    if (cell.column.modules.edit) {\r\n      switch (typeof cell.column.modules.edit.check) {\r\n        case 'function':\r\n          if (cell.row.initialized) {\r\n            check = cell.column.modules.edit.check(cell.getComponent())\r\n          }\r\n          break\r\n\r\n        case 'string':\r\n          check = !!cell.row.data[cell.column.modules.edit.check]\r\n          break\r\n\r\n        case 'boolean':\r\n          check = cell.column.modules.edit.check\r\n          break\r\n      }\r\n    }\r\n\r\n    return check\r\n  }\r\n\r\n  edit(cell, e, forceEdit) {\r\n    const self = this\r\n    let allowEdit = true\r\n    let rendered = function () {}\r\n    const element = cell.getElement()\r\n    let editFinished = false\r\n    let cellEditor\r\n    let component\r\n    let params\r\n\r\n    // prevent editing if another cell is refusing to leave focus (eg. validation fail)\r\n\r\n    if (this.currentCell) {\r\n      if (!this.invalidEdit && this.currentCell !== cell) {\r\n        this.cancelEdit()\r\n      }\r\n      return\r\n    }\r\n\r\n    // handle successful value change\r\n    function success(value) {\r\n      if (self.currentCell === cell && !editFinished) {\r\n        const valid = self.chain('edit-success', [cell, value], true, true)\r\n\r\n        if (valid === true || self.table.options.validationMode === 'highlight') {\r\n          editFinished = true\r\n\r\n          self.clearEditor()\r\n\r\n          if (!cell.modules.edit) {\r\n            cell.modules.edit = {}\r\n          }\r\n\r\n          cell.modules.edit.edited = true\r\n\r\n          if (self.editedCells.indexOf(cell) == -1) {\r\n            self.editedCells.push(cell)\r\n          }\r\n\r\n          value = self.transformEmptyValues(value, cell)\r\n\r\n          cell.setValue(value, true)\r\n\r\n          return valid === true\r\n        } else {\r\n          editFinished = true\r\n          self.invalidEdit = true\r\n          self.focusCellNoEvent(cell, true)\r\n          rendered()\r\n\r\n          setTimeout(() => {\r\n            editFinished = false\r\n          }, 10)\r\n          return false\r\n        }\r\n      } else {\r\n        // console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\r\n      }\r\n    }\r\n\r\n    // handle aborted edit\r\n    function cancel() {\r\n      // editFinished = true;\r\n\r\n      if (self.currentCell === cell && !editFinished) {\r\n        self.cancelEdit()\r\n      } else {\r\n        // console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\r\n      }\r\n    }\r\n\r\n    function onRendered(callback) {\r\n      rendered = callback\r\n    }\r\n\r\n    if (!cell.column.modules.edit.blocked) {\r\n      if (e) {\r\n        e.stopPropagation()\r\n      }\r\n\r\n      allowEdit = this.allowEdit(cell)\r\n\r\n      if (allowEdit || forceEdit) {\r\n        self.cancelEdit()\r\n\r\n        self.currentCell = cell\r\n\r\n        this.focusScrollAdjust(cell)\r\n\r\n        component = cell.getComponent()\r\n\r\n        if (this.mouseClick) {\r\n          this.mouseClick = false\r\n\r\n          if (cell.column.definition.cellClick) {\r\n            cell.column.definition.cellClick.call(this.table, e, component)\r\n          }\r\n        }\r\n\r\n        if (cell.column.definition.cellEditing) {\r\n          cell.column.definition.cellEditing.call(this.table, component)\r\n        }\r\n\r\n        this.dispatch('cell-editing', cell)\r\n        this.dispatchExternal('cellEditing', component)\r\n\r\n        params =\r\n          typeof cell.column.modules.edit.params === 'function'\r\n            ? cell.column.modules.edit.params(component)\r\n            : cell.column.modules.edit.params\r\n\r\n        cellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params)\r\n\r\n        // if editor returned, add to DOM, if false, abort edit\r\n        if (this.currentCell && cellEditor !== false) {\r\n          if (cellEditor instanceof Node) {\r\n            element.classList.add('tabulator-editing')\r\n            cell.row.getElement().classList.add('tabulator-editing')\r\n            cell.table.element.classList.add('tabulator-editing')\r\n            while (element.firstChild) element.removeChild(element.firstChild)\r\n            element.appendChild(cellEditor)\r\n\r\n            // trigger onRendered Callback\r\n            rendered()\r\n\r\n            // prevent editing from triggering rowClick event\r\n            const children = element.children\r\n\r\n            for (let i = 0; i < children.length; i++) {\r\n              children[i].addEventListener('click', function (e) {\r\n                e.stopPropagation()\r\n              })\r\n            }\r\n          } else {\r\n            console.warn('Edit Error - Editor should return an instance of Node, the editor returned:', cellEditor)\r\n            this.blur(element)\r\n            return false\r\n          }\r\n        } else {\r\n          this.blur(element)\r\n          return false\r\n        }\r\n\r\n        return true\r\n      } else {\r\n        this.mouseClick = false\r\n        this.blur(element)\r\n        return false\r\n      }\r\n    } else {\r\n      this.mouseClick = false\r\n      this.blur(element)\r\n      return false\r\n    }\r\n  }\r\n\r\n  emptyValueCheck(value) {\r\n    return value === '' || value === null || typeof value === 'undefined'\r\n  }\r\n\r\n  transformEmptyValues(value, cell) {\r\n    const mod = cell.column.modules.edit\r\n    const convert = mod.convertEmptyValues || this.convertEmptyValues\r\n    let checkFunc\r\n\r\n    if (convert) {\r\n      checkFunc = mod.editorEmptyValueFunc || this.options('editorEmptyValueFunc')\r\n\r\n      if (checkFunc && checkFunc(value)) {\r\n        value = mod.convertEmptyValues ? mod.editorEmptyValue : this.options('editorEmptyValue')\r\n      }\r\n    }\r\n\r\n    return value\r\n  }\r\n\r\n  blur(element) {\r\n    if (!this.confirm('edit-blur', [element])) {\r\n      element.blur()\r\n    }\r\n  }\r\n\r\n  getEditedCells() {\r\n    const output = []\r\n\r\n    this.editedCells.forEach((cell) => {\r\n      output.push(cell.getComponent())\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  clearEdited(cell) {\r\n    let editIndex\r\n\r\n    if (cell.modules.edit && cell.modules.edit.edited) {\r\n      cell.modules.edit.edited = false\r\n\r\n      this.dispatch('edit-edited-clear', cell)\r\n    }\r\n\r\n    editIndex = this.editedCells.indexOf(cell)\r\n\r\n    if (editIndex > -1) {\r\n      this.editedCells.splice(editIndex, 1)\r\n    }\r\n  }\r\n}\r\n","export default class ExportRow {\r\n  constructor(type, columns, component, indent) {\r\n    this.type = type\r\n    this.columns = columns\r\n    this.component = component || false\r\n    this.indent = indent || 0\r\n  }\r\n}\r\n","export default class ExportColumn {\r\n  constructor(value, component, width, height, depth) {\r\n    this.value = value\r\n    this.component = component || false\r\n    this.width = width\r\n    this.height = height\r\n    this.depth = depth\r\n  }\r\n}\r\n","export default {}\r\n","export default {\r\n  visible: function () {\r\n    return this.rowManager.getVisibleRows(false, true)\r\n  },\r\n  all: function () {\r\n    return this.rowManager.rows\r\n  },\r\n  selected: function () {\r\n    return this.modules.selectRow.selectedRows\r\n  },\r\n  active: function () {\r\n    if (this.options.pagination) {\r\n      return this.rowManager.getDisplayRows(this.rowManager.displayRows.length - 2)\r\n    } else {\r\n      return this.rowManager.getDisplayRows()\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport ExportRow from './ExportRow.js'\r\nimport ExportColumn from './ExportColumn.js'\r\n\r\nimport columnLookups from './defaults/columnLookups.js'\r\nimport rowLookups from './defaults/rowLookups.js'\r\n\r\nexport default class Export extends Module {\r\n  static moduleName = 'export'\r\n\r\n  static columnLookups = columnLookups\r\n  static rowLookups = rowLookups\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.config = {}\r\n    this.cloneTableStyle = true\r\n    this.colVisProp = ''\r\n    this.colVisPropAttach = ''\r\n\r\n    this.registerTableOption('htmlOutputConfig', false) // html output config\r\n\r\n    this.registerColumnOption('htmlOutput')\r\n    this.registerColumnOption('titleHtmlOutput')\r\n  }\r\n\r\n  initialize() {\r\n    this.registerTableFunction('getHtml', this.getHtml.bind(this))\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Internal Logic //////////\r\n  /// ////////////////////////////////\r\n\r\n  generateExportList(config, style, range, colVisProp) {\r\n    let headers, body, columns, colLookup\r\n\r\n    this.cloneTableStyle = style\r\n    this.config = config || {}\r\n    this.colVisProp = colVisProp\r\n    this.colVisPropAttach = this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1)\r\n\r\n    colLookup = Export.columnLookups[range]\r\n\r\n    if (colLookup) {\r\n      columns = colLookup.call(this.table)\r\n      columns = columns.filter((col) => this.columnVisCheck(col))\r\n    }\r\n\r\n    headers =\r\n      this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders(columns)) : []\r\n\r\n    if (columns) {\r\n      columns = columns.map((col) => col.getComponent())\r\n    }\r\n\r\n    body = this.bodyToExportRows(this.rowLookup(range), columns)\r\n\r\n    return headers.concat(body)\r\n  }\r\n\r\n  generateTable(config, style, range, colVisProp) {\r\n    const list = this.generateExportList(config, style, range, colVisProp)\r\n\r\n    return this.generateTableElement(list)\r\n  }\r\n\r\n  rowLookup(range) {\r\n    let rows = []\r\n    let rowLookup\r\n\r\n    if (typeof range === 'function') {\r\n      range.call(this.table).forEach((row) => {\r\n        row = this.table.rowManager.findRow(row)\r\n\r\n        if (row) {\r\n          rows.push(row)\r\n        }\r\n      })\r\n    } else {\r\n      rowLookup = Export.rowLookups[range] || Export.rowLookups.active\r\n\r\n      rows = rowLookup.call(this.table)\r\n    }\r\n\r\n    return Object.assign([], rows)\r\n  }\r\n\r\n  generateColumnGroupHeaders(columns) {\r\n    const output = []\r\n\r\n    if (!columns) {\r\n      columns =\r\n        this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex\r\n    }\r\n\r\n    columns.forEach((column) => {\r\n      const colData = this.processColumnGroup(column)\r\n\r\n      if (colData) {\r\n        output.push(colData)\r\n      }\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  processColumnGroup(column) {\r\n    const subGroups = column.columns\r\n    let maxDepth = 0\r\n    const title = column.definition['title' + this.colVisPropAttach] || column.definition.title\r\n\r\n    const groupData = {\r\n      title,\r\n      column,\r\n      depth: 1\r\n    }\r\n\r\n    if (subGroups.length) {\r\n      groupData.subGroups = []\r\n      groupData.width = 0\r\n\r\n      subGroups.forEach((subGroup) => {\r\n        const subGroupData = this.processColumnGroup(subGroup)\r\n\r\n        if (subGroupData) {\r\n          groupData.width += subGroupData.width\r\n          groupData.subGroups.push(subGroupData)\r\n\r\n          if (subGroupData.depth > maxDepth) {\r\n            maxDepth = subGroupData.depth\r\n          }\r\n        }\r\n      })\r\n\r\n      groupData.depth += maxDepth\r\n\r\n      if (!groupData.width) {\r\n        return false\r\n      }\r\n    } else {\r\n      if (this.columnVisCheck(column)) {\r\n        groupData.width = 1\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n\r\n    return groupData\r\n  }\r\n\r\n  columnVisCheck(column) {\r\n    let visProp = column.definition[this.colVisProp]\r\n\r\n    if (this.config.rowHeaders === false && column.isRowHeader) {\r\n      return false\r\n    }\r\n\r\n    if (typeof visProp === 'function') {\r\n      visProp = visProp.call(this.table, column.getComponent())\r\n    }\r\n\r\n    if (visProp === false || visProp === true) {\r\n      return visProp\r\n    }\r\n\r\n    return column.visible && column.field\r\n  }\r\n\r\n  headersToExportRows(columns) {\r\n    const headers = []\r\n    let headerDepth = 0\r\n    const exportRows = []\r\n\r\n    function parseColumnGroup(column, level) {\r\n      const depth = headerDepth - level\r\n\r\n      if (typeof headers[level] === 'undefined') {\r\n        headers[level] = []\r\n      }\r\n\r\n      column.height = column.subGroups ? 1 : depth - column.depth + 1\r\n\r\n      headers[level].push(column)\r\n\r\n      if (column.height > 1) {\r\n        for (let i = 1; i < column.height; i++) {\r\n          if (typeof headers[level + i] === 'undefined') {\r\n            headers[level + i] = []\r\n          }\r\n\r\n          headers[level + i].push(false)\r\n        }\r\n      }\r\n\r\n      if (column.width > 1) {\r\n        for (let i = 1; i < column.width; i++) {\r\n          headers[level].push(false)\r\n        }\r\n      }\r\n\r\n      if (column.subGroups) {\r\n        column.subGroups.forEach(function (subGroup) {\r\n          parseColumnGroup(subGroup, level + 1)\r\n        })\r\n      }\r\n    }\r\n\r\n    // calculate maximum header depth\r\n    columns.forEach(function (column) {\r\n      if (column.depth > headerDepth) {\r\n        headerDepth = column.depth\r\n      }\r\n    })\r\n\r\n    columns.forEach(function (column) {\r\n      parseColumnGroup(column, 0)\r\n    })\r\n\r\n    headers.forEach((header) => {\r\n      const columns = []\r\n\r\n      header.forEach((col) => {\r\n        if (col) {\r\n          const title = typeof col.title === 'undefined' ? '' : col.title\r\n          columns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth))\r\n        } else {\r\n          columns.push(null)\r\n        }\r\n      })\r\n\r\n      exportRows.push(new ExportRow('header', columns))\r\n    })\r\n\r\n    return exportRows\r\n  }\r\n\r\n  bodyToExportRows(rows, columns = []) {\r\n    const exportRows = []\r\n\r\n    if (columns.length === 0) {\r\n      this.table.columnManager.columnsByIndex.forEach((column) => {\r\n        if (this.columnVisCheck(column)) {\r\n          columns.push(column.getComponent())\r\n        }\r\n      })\r\n    }\r\n\r\n    if (this.config.columnCalcs !== false && this.table.modExists('columnCalcs')) {\r\n      if (this.table.modules.columnCalcs.topInitialized) {\r\n        rows.unshift(this.table.modules.columnCalcs.topRow)\r\n      }\r\n\r\n      if (this.table.modules.columnCalcs.botInitialized) {\r\n        rows.push(this.table.modules.columnCalcs.botRow)\r\n      }\r\n    }\r\n\r\n    rows = rows.filter((row) => {\r\n      switch (row.type) {\r\n        case 'group':\r\n          return this.config.rowGroups !== false\r\n\r\n        case 'calc':\r\n          return this.config.columnCalcs !== false\r\n\r\n        case 'row':\r\n          return !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent)\r\n      }\r\n\r\n      return true\r\n    })\r\n\r\n    rows.forEach((row, i) => {\r\n      const rowData = row.getData(this.colVisProp)\r\n      const exportCols = []\r\n      let indent = 0\r\n\r\n      switch (row.type) {\r\n        case 'group':\r\n          indent = row.level\r\n          exportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1))\r\n          break\r\n\r\n        case 'calc':\r\n        case 'row':\r\n          columns.forEach((col) => {\r\n            exportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1))\r\n          })\r\n\r\n          if (this.table.options.dataTree && this.config.dataTree !== false) {\r\n            indent = row.modules.dataTree.index\r\n          }\r\n          break\r\n      }\r\n\r\n      exportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent))\r\n    })\r\n\r\n    return exportRows\r\n  }\r\n\r\n  generateTableElement(list) {\r\n    const table = document.createElement('table')\r\n    const headerEl = document.createElement('thead')\r\n    const bodyEl = document.createElement('tbody')\r\n    const styles = this.lookupTableStyles()\r\n    const rowFormatter = this.table.options['rowFormatter' + this.colVisPropAttach]\r\n    const setup = {}\r\n\r\n    setup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter\r\n\r\n    if (this.table.options.dataTree && this.config.dataTree !== false && this.table.modExists('columnCalcs')) {\r\n      setup.treeElementField = this.table.modules.dataTree.elementField\r\n    }\r\n\r\n    // assign group header formatter\r\n    setup.groupHeader = this.table.options['groupHeader' + this.colVisPropAttach]\r\n\r\n    if (setup.groupHeader && !Array.isArray(setup.groupHeader)) {\r\n      setup.groupHeader = [setup.groupHeader]\r\n    }\r\n\r\n    table.classList.add('tabulator-print-table')\r\n\r\n    this.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\r\n      'border-top',\r\n      'border-left',\r\n      'border-right',\r\n      'border-bottom',\r\n      'background-color',\r\n      'color',\r\n      'font-weight',\r\n      'font-family',\r\n      'font-size'\r\n    ])\r\n\r\n    if (list.length > 1000) {\r\n      console.warn('It may take a long time to render an HTML table with more than 1000 rows')\r\n    }\r\n\r\n    list.forEach((row, i) => {\r\n      let rowEl\r\n\r\n      switch (row.type) {\r\n        case 'header':\r\n          headerEl.appendChild(this.generateHeaderElement(row, setup, styles))\r\n          break\r\n\r\n        case 'group':\r\n          bodyEl.appendChild(this.generateGroupElement(row, setup, styles))\r\n          break\r\n\r\n        case 'calc':\r\n          bodyEl.appendChild(this.generateCalcElement(row, setup, styles))\r\n          break\r\n\r\n        case 'row':\r\n          rowEl = this.generateRowElement(row, setup, styles)\r\n\r\n          this.mapElementStyles(i % 2 && styles.evenRow ? styles.evenRow : styles.oddRow, rowEl, [\r\n            'border-top',\r\n            'border-left',\r\n            'border-right',\r\n            'border-bottom',\r\n            'color',\r\n            'font-weight',\r\n            'font-family',\r\n            'font-size',\r\n            'background-color'\r\n          ])\r\n          bodyEl.appendChild(rowEl)\r\n          break\r\n      }\r\n    })\r\n\r\n    if (headerEl.innerHTML) {\r\n      table.appendChild(headerEl)\r\n    }\r\n\r\n    table.appendChild(bodyEl)\r\n\r\n    this.mapElementStyles(this.table.element, table, ['border-top', 'border-left', 'border-right', 'border-bottom'])\r\n    return table\r\n  }\r\n\r\n  lookupTableStyles() {\r\n    const styles = {}\r\n\r\n    // lookup row styles\r\n    if (this.cloneTableStyle && window.getComputedStyle) {\r\n      styles.oddRow = this.table.element.querySelector('.tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)')\r\n      styles.evenRow = this.table.element.querySelector(\r\n        '.tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)'\r\n      )\r\n      styles.calcRow = this.table.element.querySelector('.tabulator-row.tabulator-calcs')\r\n      styles.firstRow = this.table.element.querySelector('.tabulator-row:not(.tabulator-group):not(.tabulator-calcs)')\r\n      styles.firstGroup = this.table.element.getElementsByClassName('tabulator-group')[0]\r\n\r\n      if (styles.firstRow) {\r\n        styles.styleCells = styles.firstRow.getElementsByClassName('tabulator-cell')\r\n        styles.styleRowHeader = styles.firstRow.getElementsByClassName('tabulator-row-header')[0]\r\n        styles.firstCell = styles.styleCells[0]\r\n        styles.lastCell = styles.styleCells[styles.styleCells.length - 1]\r\n      }\r\n    }\r\n\r\n    return styles\r\n  }\r\n\r\n  generateHeaderElement(row, setup, styles) {\r\n    const rowEl = document.createElement('tr')\r\n\r\n    row.columns.forEach((column) => {\r\n      if (column) {\r\n        const cellEl = document.createElement('th')\r\n        const classNames = column.component._column.definition.cssClass\r\n          ? column.component._column.definition.cssClass.split(' ')\r\n          : []\r\n\r\n        cellEl.colSpan = column.width\r\n        cellEl.rowSpan = column.height\r\n\r\n        cellEl.innerHTML = column.value\r\n\r\n        if (this.cloneTableStyle) {\r\n          cellEl.style.boxSizing = 'border-box'\r\n        }\r\n\r\n        classNames.forEach(function (className) {\r\n          cellEl.classList.add(className)\r\n        })\r\n\r\n        this.mapElementStyles(column.component.getElement(), cellEl, [\r\n          'text-align',\r\n          'border-left',\r\n          'border-right',\r\n          'background-color',\r\n          'color',\r\n          'font-weight',\r\n          'font-family',\r\n          'font-size'\r\n        ])\r\n        this.mapElementStyles(column.component._column.contentElement, cellEl, [\r\n          'padding-top',\r\n          'padding-left',\r\n          'padding-right',\r\n          'padding-bottom'\r\n        ])\r\n\r\n        if (column.component._column.visible) {\r\n          this.mapElementStyles(column.component.getElement(), cellEl, ['width'])\r\n        } else {\r\n          if (column.component._column.definition.width) {\r\n            cellEl.style.width = column.component._column.definition.width + 'px'\r\n          }\r\n        }\r\n\r\n        if (column.component._column.parent && column.component._column.parent.isGroup) {\r\n          this.mapElementStyles(column.component._column.parent.groupElement, cellEl, ['border-top'])\r\n        } else {\r\n          this.mapElementStyles(column.component.getElement(), cellEl, ['border-top'])\r\n        }\r\n\r\n        if (column.component._column.isGroup) {\r\n          this.mapElementStyles(column.component.getElement(), cellEl, ['border-bottom'])\r\n        } else {\r\n          this.mapElementStyles(this.table.columnManager.getElement(), cellEl, ['border-bottom'])\r\n        }\r\n\r\n        rowEl.appendChild(cellEl)\r\n      }\r\n    })\r\n\r\n    return rowEl\r\n  }\r\n\r\n  generateGroupElement(row, setup, styles) {\r\n    const rowEl = document.createElement('tr')\r\n    const cellEl = document.createElement('td')\r\n    const group = row.columns[0]\r\n\r\n    rowEl.classList.add('tabulator-print-table-row')\r\n\r\n    if (setup.groupHeader && setup.groupHeader[row.indent]) {\r\n      group.value = setup.groupHeader[row.indent](\r\n        group.value,\r\n        row.component._group.getRowCount(),\r\n        row.component._group.getData(),\r\n        row.component\r\n      )\r\n    } else {\r\n      if (setup.groupHeader !== false) {\r\n        group.value = row.component._group.generator(\r\n          group.value,\r\n          row.component._group.getRowCount(),\r\n          row.component._group.getData(),\r\n          row.component\r\n        )\r\n      }\r\n    }\r\n\r\n    cellEl.colSpan = group.width\r\n    cellEl.innerHTML = group.value\r\n\r\n    rowEl.classList.add('tabulator-print-table-group')\r\n    rowEl.classList.add('tabulator-group-level-' + row.indent)\r\n\r\n    if (group.component.isVisible()) {\r\n      rowEl.classList.add('tabulator-group-visible')\r\n    }\r\n\r\n    this.mapElementStyles(styles.firstGroup, rowEl, [\r\n      'border-top',\r\n      'border-left',\r\n      'border-right',\r\n      'border-bottom',\r\n      'color',\r\n      'font-weight',\r\n      'font-family',\r\n      'font-size',\r\n      'background-color'\r\n    ])\r\n    this.mapElementStyles(styles.firstGroup, cellEl, ['padding-top', 'padding-left', 'padding-right', 'padding-bottom'])\r\n\r\n    rowEl.appendChild(cellEl)\r\n\r\n    return rowEl\r\n  }\r\n\r\n  generateCalcElement(row, setup, styles) {\r\n    const rowEl = this.generateRowElement(row, setup, styles)\r\n\r\n    rowEl.classList.add('tabulator-print-table-calcs')\r\n    this.mapElementStyles(styles.calcRow, rowEl, [\r\n      'border-top',\r\n      'border-left',\r\n      'border-right',\r\n      'border-bottom',\r\n      'color',\r\n      'font-weight',\r\n      'font-family',\r\n      'font-size',\r\n      'background-color'\r\n    ])\r\n\r\n    return rowEl\r\n  }\r\n\r\n  generateRowElement(row, setup, styles) {\r\n    const rowEl = document.createElement('tr')\r\n\r\n    rowEl.classList.add('tabulator-print-table-row')\r\n\r\n    row.columns.forEach((col, i) => {\r\n      if (col) {\r\n        const cellEl = document.createElement('td')\r\n        const column = col.component._column\r\n        const table = this.table\r\n        const index = table.columnManager.findColumnIndex(column)\r\n        let value = col.value\r\n        let cellStyle\r\n        let styleProps\r\n\r\n        var cellWrapper = {\r\n          modules: {},\r\n          getValue: function () {\r\n            return value\r\n          },\r\n          getField: function () {\r\n            return column.definition.field\r\n          },\r\n          getElement: function () {\r\n            return cellEl\r\n          },\r\n          getType: function () {\r\n            return 'cell'\r\n          },\r\n          getColumn: function () {\r\n            return column.getComponent()\r\n          },\r\n          getData: function () {\r\n            return row.component.getData()\r\n          },\r\n          getRow: function () {\r\n            return row.component\r\n          },\r\n          getTable: function () {\r\n            return table\r\n          },\r\n          getComponent: function () {\r\n            return cellWrapper\r\n          },\r\n          column\r\n        }\r\n\r\n        const classNames = column.definition.cssClass ? column.definition.cssClass.split(' ') : []\r\n\r\n        classNames.forEach(function (className) {\r\n          cellEl.classList.add(className)\r\n        })\r\n\r\n        if (this.table.modExists('format') && this.config.formatCells !== false) {\r\n          value = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp)\r\n        } else {\r\n          switch (typeof value) {\r\n            case 'object':\r\n              value = value !== null ? JSON.stringify(value) : ''\r\n              break\r\n\r\n            case 'undefined':\r\n              value = ''\r\n              break\r\n          }\r\n        }\r\n\r\n        if (value instanceof Node) {\r\n          cellEl.appendChild(value)\r\n        } else {\r\n          cellEl.innerHTML = value\r\n        }\r\n\r\n        styleProps = [\r\n          'padding-top',\r\n          'padding-left',\r\n          'padding-right',\r\n          'padding-bottom',\r\n          'border-top',\r\n          'border-left',\r\n          'border-right',\r\n          'border-bottom',\r\n          'color',\r\n          'font-weight',\r\n          'font-family',\r\n          'font-size',\r\n          'text-align'\r\n        ]\r\n\r\n        if (column.isRowHeader) {\r\n          cellStyle = styles.styleRowHeader\r\n          styleProps.push('background-color')\r\n        } else {\r\n          cellStyle = styles.styleCells && styles.styleCells[index] ? styles.styleCells[index] : styles.firstCell\r\n        }\r\n\r\n        if (cellStyle) {\r\n          this.mapElementStyles(cellStyle, cellEl, styleProps)\r\n\r\n          if (column.definition.align) {\r\n            cellEl.style.textAlign = column.definition.align\r\n          }\r\n        }\r\n\r\n        if (this.table.options.dataTree && this.config.dataTree !== false) {\r\n          if (\r\n            (setup.treeElementField && setup.treeElementField == column.field) ||\r\n            (!setup.treeElementField && i == 0)\r\n          ) {\r\n            if (row.component._row.modules.dataTree.controlEl) {\r\n              cellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild)\r\n            }\r\n            if (row.component._row.modules.dataTree.branchEl) {\r\n              cellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild)\r\n            }\r\n          }\r\n        }\r\n\r\n        rowEl.appendChild(cellEl)\r\n\r\n        if (cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback) {\r\n          cellWrapper.modules.format.renderedCallback()\r\n        }\r\n      }\r\n    })\r\n\r\n    if (setup.rowFormatter && row.type === 'row' && this.config.formatCells !== false) {\r\n      const formatComponent = Object.assign(row.component)\r\n\r\n      formatComponent.getElement = function () {\r\n        return rowEl\r\n      }\r\n\r\n      setup.rowFormatter(row.component)\r\n    }\r\n\r\n    return rowEl\r\n  }\r\n\r\n  generateHTMLTable(list) {\r\n    const holder = document.createElement('div')\r\n\r\n    holder.appendChild(this.generateTableElement(list))\r\n\r\n    return holder.innerHTML\r\n  }\r\n\r\n  getHtml(visible, style, config, colVisProp) {\r\n    const list = this.generateExportList(\r\n      config || this.table.options.htmlOutputConfig,\r\n      style,\r\n      visible,\r\n      colVisProp || 'htmlOutput'\r\n    )\r\n\r\n    return this.generateHTMLTable(list)\r\n  }\r\n\r\n  mapElementStyles(from, to, props) {\r\n    if (this.cloneTableStyle && from && to) {\r\n      const lookup = {\r\n        'background-color': 'backgroundColor',\r\n        color: 'fontColor',\r\n        width: 'width',\r\n        'font-weight': 'fontWeight',\r\n        'font-family': 'fontFamily',\r\n        'font-size': 'fontSize',\r\n        'text-align': 'textAlign',\r\n        'border-top': 'borderTop',\r\n        'border-left': 'borderLeft',\r\n        'border-right': 'borderRight',\r\n        'border-bottom': 'borderBottom',\r\n        'padding-top': 'paddingTop',\r\n        'padding-left': 'paddingLeft',\r\n        'padding-right': 'paddingRight',\r\n        'padding-bottom': 'paddingBottom'\r\n      }\r\n\r\n      if (window.getComputedStyle) {\r\n        const fromStyle = window.getComputedStyle(from)\r\n\r\n        props.forEach(function (prop) {\r\n          if (!to.style[lookup[prop]]) {\r\n            to.style[lookup[prop]] = fromStyle.getPropertyValue(prop)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n","export default {\r\n  // equal to\r\n  '=': function (filterVal, rowVal, rowData, filterParams) {\r\n    return rowVal == filterVal\r\n  },\r\n\r\n  // less than\r\n  '<': function (filterVal, rowVal, rowData, filterParams) {\r\n    return rowVal < filterVal\r\n  },\r\n\r\n  // less than or equal to\r\n  '<=': function (filterVal, rowVal, rowData, filterParams) {\r\n    return rowVal <= filterVal\r\n  },\r\n\r\n  // greater than\r\n  '>': function (filterVal, rowVal, rowData, filterParams) {\r\n    return rowVal > filterVal\r\n  },\r\n\r\n  // greater than or equal to\r\n  '>=': function (filterVal, rowVal, rowData, filterParams) {\r\n    return rowVal >= filterVal\r\n  },\r\n\r\n  // not equal to\r\n  '!=': function (filterVal, rowVal, rowData, filterParams) {\r\n    return rowVal != filterVal\r\n  },\r\n\r\n  regex: function (filterVal, rowVal, rowData, filterParams) {\r\n    if (typeof filterVal === 'string') {\r\n      filterVal = new RegExp(filterVal)\r\n    }\r\n\r\n    return filterVal.test(rowVal)\r\n  },\r\n\r\n  // contains the string\r\n  like: function (filterVal, rowVal, rowData, filterParams) {\r\n    if (filterVal === null || typeof filterVal === 'undefined') {\r\n      return rowVal === filterVal\r\n    } else {\r\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\r\n        return String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n  },\r\n\r\n  // contains the keywords\r\n  keywords: function (filterVal, rowVal, rowData, filterParams) {\r\n    const keywords = filterVal\r\n      .toLowerCase()\r\n      .split(typeof filterParams.separator === 'undefined' ? ' ' : filterParams.separator)\r\n    const value = String(rowVal === null || typeof rowVal === 'undefined' ? '' : rowVal).toLowerCase()\r\n    const matches = []\r\n\r\n    keywords.forEach((keyword) => {\r\n      if (value.includes(keyword)) {\r\n        matches.push(true)\r\n      }\r\n    })\r\n\r\n    return filterParams.matchAll ? matches.length === keywords.length : !!matches.length\r\n  },\r\n\r\n  // starts with the string\r\n  starts: function (filterVal, rowVal, rowData, filterParams) {\r\n    if (filterVal === null || typeof filterVal === 'undefined') {\r\n      return rowVal === filterVal\r\n    } else {\r\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\r\n        return String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase())\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n  },\r\n\r\n  // ends with the string\r\n  ends: function (filterVal, rowVal, rowData, filterParams) {\r\n    if (filterVal === null || typeof filterVal === 'undefined') {\r\n      return rowVal === filterVal\r\n    } else {\r\n      if (typeof rowVal !== 'undefined' && rowVal !== null) {\r\n        return String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase())\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n  },\r\n\r\n  // in array\r\n  in: function (filterVal, rowVal, rowData, filterParams) {\r\n    if (Array.isArray(filterVal)) {\r\n      return filterVal.length ? filterVal.indexOf(rowVal) > -1 : true\r\n    } else {\r\n      console.warn('Filter Error - filter value is not an array:', filterVal)\r\n      return false\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultFilters from './defaults/filters.js'\r\n\r\nexport default class Filter extends Module {\r\n  static moduleName = 'filter'\r\n\r\n  // load defaults\r\n  static filters = defaultFilters\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.filterList = [] // hold filter list\r\n    this.headerFilters = {} // hold column filters\r\n    this.headerFilterColumns = [] // hold columns that use header filters\r\n\r\n    this.prevHeaderFilterChangeCheck = ''\r\n    this.prevHeaderFilterChangeCheck = '{}'\r\n\r\n    this.changed = false // has filtering changed since last render\r\n    this.tableInitialized = false\r\n\r\n    this.registerTableOption('filterMode', 'local') // local or remote filtering\r\n\r\n    this.registerTableOption('initialFilter', false) // initial filtering criteria\r\n    this.registerTableOption('initialHeaderFilter', false) // initial header filtering criteria\r\n    this.registerTableOption('headerFilterLiveFilterDelay', 300) // delay before updating column after user types in header filter\r\n    this.registerTableOption('placeholderHeaderFilter', false) // placeholder when header filter is empty\r\n\r\n    this.registerColumnOption('headerFilter')\r\n    this.registerColumnOption('headerFilterPlaceholder')\r\n    this.registerColumnOption('headerFilterParams')\r\n    this.registerColumnOption('headerFilterEmptyCheck')\r\n    this.registerColumnOption('headerFilterFunc')\r\n    this.registerColumnOption('headerFilterFuncParams')\r\n    this.registerColumnOption('headerFilterLiveFilter')\r\n\r\n    this.registerTableFunction('searchRows', this.searchRows.bind(this))\r\n    this.registerTableFunction('searchData', this.searchData.bind(this))\r\n\r\n    this.registerTableFunction('setFilter', this.userSetFilter.bind(this))\r\n    this.registerTableFunction('refreshFilter', this.userRefreshFilter.bind(this))\r\n    this.registerTableFunction('addFilter', this.userAddFilter.bind(this))\r\n    this.registerTableFunction('getFilters', this.getFilters.bind(this))\r\n    this.registerTableFunction('setHeaderFilterFocus', this.userSetHeaderFilterFocus.bind(this))\r\n    this.registerTableFunction('getHeaderFilterValue', this.userGetHeaderFilterValue.bind(this))\r\n    this.registerTableFunction('setHeaderFilterValue', this.userSetHeaderFilterValue.bind(this))\r\n    this.registerTableFunction('getHeaderFilters', this.getHeaderFilters.bind(this))\r\n    this.registerTableFunction('removeFilter', this.userRemoveFilter.bind(this))\r\n    this.registerTableFunction('clearFilter', this.userClearFilter.bind(this))\r\n    this.registerTableFunction('clearHeaderFilter', this.userClearHeaderFilter.bind(this))\r\n\r\n    this.registerComponentFunction('column', 'headerFilterFocus', this.setHeaderFilterFocus.bind(this))\r\n    this.registerComponentFunction('column', 'reloadHeaderFilter', this.reloadHeaderFilter.bind(this))\r\n    this.registerComponentFunction('column', 'getHeaderFilterValue', this.getHeaderFilterValue.bind(this))\r\n    this.registerComponentFunction('column', 'setHeaderFilterValue', this.setHeaderFilterValue.bind(this))\r\n  }\r\n\r\n  initialize() {\r\n    this.subscribe('column-init', this.initializeColumnHeaderFilter.bind(this))\r\n    this.subscribe('column-width-fit-before', this.hideHeaderFilterElements.bind(this))\r\n    this.subscribe('column-width-fit-after', this.showHeaderFilterElements.bind(this))\r\n    this.subscribe('table-built', this.tableBuilt.bind(this))\r\n    this.subscribe('placeholder', this.generatePlaceholder.bind(this))\r\n\r\n    if (this.table.options.filterMode === 'remote') {\r\n      this.subscribe('data-params', this.remoteFilterParams.bind(this))\r\n    }\r\n\r\n    this.registerDataHandler(this.filter.bind(this), 10)\r\n  }\r\n\r\n  tableBuilt() {\r\n    if (this.table.options.initialFilter) {\r\n      this.setFilter(this.table.options.initialFilter)\r\n    }\r\n\r\n    if (this.table.options.initialHeaderFilter) {\r\n      this.table.options.initialHeaderFilter.forEach((item) => {\r\n        const column = this.table.columnManager.findColumn(item.field)\r\n\r\n        if (column) {\r\n          this.setHeaderFilterValue(column, item.value)\r\n        } else {\r\n          console.warn('Column Filter Error - No matching column found:', item.field)\r\n          return false\r\n        }\r\n      })\r\n    }\r\n\r\n    this.tableInitialized = true\r\n  }\r\n\r\n  remoteFilterParams(data, config, silent, params) {\r\n    params.filter = this.getFilters(true, true)\r\n    return params\r\n  }\r\n\r\n  generatePlaceholder(text) {\r\n    if (this.table.options.placeholderHeaderFilter && Object.keys(this.headerFilters).length) {\r\n      return this.table.options.placeholderHeaderFilter\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Table Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  // set standard filters\r\n  userSetFilter(field, type, value, params) {\r\n    this.setFilter(field, type, value, params)\r\n    this.refreshFilter()\r\n  }\r\n\r\n  // set standard filters\r\n  userRefreshFilter() {\r\n    this.refreshFilter()\r\n  }\r\n\r\n  // add filter to array\r\n  userAddFilter(field, type, value, params) {\r\n    this.addFilter(field, type, value, params)\r\n    this.refreshFilter()\r\n  }\r\n\r\n  userSetHeaderFilterFocus(field) {\r\n    const column = this.table.columnManager.findColumn(field)\r\n\r\n    if (column) {\r\n      this.setHeaderFilterFocus(column)\r\n    } else {\r\n      console.warn('Column Filter Focus Error - No matching column found:', field)\r\n      return false\r\n    }\r\n  }\r\n\r\n  userGetHeaderFilterValue(field) {\r\n    const column = this.table.columnManager.findColumn(field)\r\n\r\n    if (column) {\r\n      return this.getHeaderFilterValue(column)\r\n    } else {\r\n      console.warn('Column Filter Error - No matching column found:', field)\r\n    }\r\n  }\r\n\r\n  userSetHeaderFilterValue(field, value) {\r\n    const column = this.table.columnManager.findColumn(field)\r\n\r\n    if (column) {\r\n      this.setHeaderFilterValue(column, value)\r\n    } else {\r\n      console.warn('Column Filter Error - No matching column found:', field)\r\n      return false\r\n    }\r\n  }\r\n\r\n  // remove filter from array\r\n  userRemoveFilter(field, type, value) {\r\n    this.removeFilter(field, type, value)\r\n    this.refreshFilter()\r\n  }\r\n\r\n  // clear filters\r\n  userClearFilter(all) {\r\n    this.clearFilter(all)\r\n    this.refreshFilter()\r\n  }\r\n\r\n  // clear header filters\r\n  userClearHeaderFilter() {\r\n    this.clearHeaderFilter()\r\n    this.refreshFilter()\r\n  }\r\n\r\n  // search for specific row components\r\n  searchRows(field, type, value) {\r\n    return this.search('rows', field, type, value)\r\n  }\r\n\r\n  // search for specific data\r\n  searchData(field, type, value) {\r\n    return this.search('data', field, type, value)\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Internal Logic //////////\r\n  /// ////////////////////////////////\r\n\r\n  initializeColumnHeaderFilter(column) {\r\n    const def = column.definition\r\n\r\n    if (def.headerFilter) {\r\n      this.initializeColumn(column)\r\n    }\r\n  }\r\n\r\n  // initialize column header filter\r\n  initializeColumn(column, value) {\r\n    const self = this\r\n    const field = column.getField()\r\n\r\n    // handle successfully value change\r\n    function success(value) {\r\n      const filterType =\r\n        (column.modules.filter.tagType == 'input' && column.modules.filter.attrType == 'text') ||\r\n        column.modules.filter.tagType == 'textarea'\r\n          ? 'partial'\r\n          : 'match'\r\n      let type = ''\r\n      let filterChangeCheck = ''\r\n      let filterFunc\r\n\r\n      if (typeof column.modules.filter.prevSuccess === 'undefined' || column.modules.filter.prevSuccess !== value) {\r\n        column.modules.filter.prevSuccess = value\r\n\r\n        if (!column.modules.filter.emptyFunc(value)) {\r\n          column.modules.filter.value = value\r\n\r\n          switch (typeof column.definition.headerFilterFunc) {\r\n            case 'string':\r\n              if (Filter.filters[column.definition.headerFilterFunc]) {\r\n                type = column.definition.headerFilterFunc\r\n                filterFunc = function (data) {\r\n                  let params = column.definition.headerFilterFuncParams || {}\r\n                  const fieldVal = column.getFieldValue(data)\r\n\r\n                  params = typeof params === 'function' ? params(value, fieldVal, data) : params\r\n\r\n                  return Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params)\r\n                }\r\n              } else {\r\n                console.warn(\r\n                  'Header Filter Error - Matching filter function not found: ',\r\n                  column.definition.headerFilterFunc\r\n                )\r\n              }\r\n              break\r\n\r\n            case 'function':\r\n              filterFunc = function (data) {\r\n                let params = column.definition.headerFilterFuncParams || {}\r\n                const fieldVal = column.getFieldValue(data)\r\n\r\n                params = typeof params === 'function' ? params(value, fieldVal, data) : params\r\n\r\n                return column.definition.headerFilterFunc(value, fieldVal, data, params)\r\n              }\r\n\r\n              type = filterFunc\r\n              break\r\n          }\r\n\r\n          if (!filterFunc) {\r\n            switch (filterType) {\r\n              case 'partial':\r\n                filterFunc = function (data) {\r\n                  const colVal = column.getFieldValue(data)\r\n\r\n                  if (typeof colVal !== 'undefined' && colVal !== null) {\r\n                    return String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1\r\n                  } else {\r\n                    return false\r\n                  }\r\n                }\r\n                type = 'like'\r\n                break\r\n\r\n              default:\r\n                filterFunc = function (data) {\r\n                  return column.getFieldValue(data) == value\r\n                }\r\n                type = '='\r\n            }\r\n          }\r\n\r\n          self.headerFilters[field] = { value, func: filterFunc, type }\r\n        } else {\r\n          delete self.headerFilters[field]\r\n        }\r\n\r\n        column.modules.filter.value = value\r\n\r\n        filterChangeCheck = JSON.stringify(self.headerFilters)\r\n\r\n        if (self.prevHeaderFilterChangeCheck !== filterChangeCheck) {\r\n          self.prevHeaderFilterChangeCheck = filterChangeCheck\r\n\r\n          self.trackChanges()\r\n          self.refreshFilter()\r\n        }\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    column.modules.filter = {\r\n      success,\r\n      attrType: false,\r\n      tagType: false,\r\n      emptyFunc: false\r\n    }\r\n\r\n    this.generateHeaderFilterElement(column)\r\n  }\r\n\r\n  generateHeaderFilterElement(column, initialValue, reinitialize) {\r\n    const self = this\r\n    const success = column.modules.filter.success\r\n    const field = column.getField()\r\n    let filterElement\r\n    let editor\r\n    let editorElement\r\n    let cellWrapper\r\n    let typingTimer\r\n    let searchTrigger\r\n    let params\r\n    let onRenderedCallback\r\n\r\n    column.modules.filter.value = initialValue\r\n\r\n    // handle aborted edit\r\n    function cancel() {}\r\n\r\n    function onRendered(callback) {\r\n      onRenderedCallback = callback\r\n    }\r\n\r\n    if (column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode) {\r\n      column.contentElement.removeChild(column.modules.filter.headerElement.parentNode)\r\n    }\r\n\r\n    if (field) {\r\n      // set empty value function\r\n      column.modules.filter.emptyFunc =\r\n        column.definition.headerFilterEmptyCheck ||\r\n        function (value) {\r\n          return !value && value !== 0\r\n        }\r\n\r\n      filterElement = document.createElement('div')\r\n      filterElement.classList.add('tabulator-header-filter')\r\n\r\n      // set column editor\r\n      switch (typeof column.definition.headerFilter) {\r\n        case 'string':\r\n          if (self.table.modules.edit.editors[column.definition.headerFilter]) {\r\n            editor = self.table.modules.edit.editors[column.definition.headerFilter]\r\n\r\n            if (\r\n              (column.definition.headerFilter === 'tick' || column.definition.headerFilter === 'tickCross') &&\r\n              !column.definition.headerFilterEmptyCheck\r\n            ) {\r\n              column.modules.filter.emptyFunc = function (value) {\r\n                return value !== true && value !== false\r\n              }\r\n            }\r\n          } else {\r\n            console.warn('Filter Error - Cannot build header filter, No such editor found: ', column.definition.editor)\r\n          }\r\n          break\r\n\r\n        case 'function':\r\n          editor = column.definition.headerFilter\r\n          break\r\n\r\n        case 'boolean':\r\n          if (column.modules.edit && column.modules.edit.editor) {\r\n            editor = column.modules.edit.editor\r\n          } else {\r\n            if (column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]) {\r\n              editor = self.table.modules.edit.editors[column.definition.formatter]\r\n\r\n              if (\r\n                (column.definition.formatter === 'tick' || column.definition.formatter === 'tickCross') &&\r\n                !column.definition.headerFilterEmptyCheck\r\n              ) {\r\n                column.modules.filter.emptyFunc = function (value) {\r\n                  return value !== true && value !== false\r\n                }\r\n              }\r\n            } else {\r\n              editor = self.table.modules.edit.editors.input\r\n            }\r\n          }\r\n          break\r\n      }\r\n\r\n      if (editor) {\r\n        cellWrapper = {\r\n          getValue: function () {\r\n            return typeof initialValue !== 'undefined' ? initialValue : ''\r\n          },\r\n          getField: function () {\r\n            return column.definition.field\r\n          },\r\n          getElement: function () {\r\n            return filterElement\r\n          },\r\n          getColumn: function () {\r\n            return column.getComponent()\r\n          },\r\n          getTable: () => {\r\n            return this.table\r\n          },\r\n          getType: () => {\r\n            return 'header'\r\n          },\r\n          getRow: function () {\r\n            return {\r\n              normalizeHeight: function () {}\r\n            }\r\n          }\r\n        }\r\n\r\n        params = column.definition.headerFilterParams || {}\r\n\r\n        params = typeof params === 'function' ? params.call(self.table, cellWrapper) : params\r\n\r\n        editorElement = editor.call(this.table.modules.edit, cellWrapper, onRendered, success, cancel, params)\r\n\r\n        if (!editorElement) {\r\n          console.warn('Filter Error - Cannot add filter to ' + field + ' column, editor returned a value of false')\r\n          return\r\n        }\r\n\r\n        if (!(editorElement instanceof Node)) {\r\n          console.warn(\r\n            'Filter Error - Cannot add filter to ' +\r\n              field +\r\n              ' column, editor should return an instance of Node, the editor returned:',\r\n            editorElement\r\n          )\r\n          return\r\n        }\r\n\r\n        // set Placeholder Text\r\n        self.langBind('headerFilters|columns|' + column.definition.field, function (value) {\r\n          editorElement.setAttribute(\r\n            'placeholder',\r\n            typeof value !== 'undefined' && value\r\n              ? value\r\n              : column.definition.headerFilterPlaceholder || self.langText('headerFilters|default')\r\n          )\r\n        })\r\n\r\n        // focus on element on click\r\n        editorElement.addEventListener('click', function (e) {\r\n          e.stopPropagation()\r\n          editorElement.focus()\r\n        })\r\n\r\n        editorElement.addEventListener('focus', (e) => {\r\n          const left = this.table.columnManager.contentsElement.scrollLeft\r\n\r\n          const headerPos = this.table.rowManager.element.scrollLeft\r\n\r\n          if (left !== headerPos) {\r\n            this.table.rowManager.scrollHorizontal(left)\r\n            this.table.columnManager.scrollHorizontal(left)\r\n          }\r\n        })\r\n\r\n        // live update filters as user types\r\n        typingTimer = false\r\n\r\n        searchTrigger = function (e) {\r\n          if (typingTimer) {\r\n            clearTimeout(typingTimer)\r\n          }\r\n\r\n          typingTimer = setTimeout(function () {\r\n            success(editorElement.value)\r\n          }, self.table.options.headerFilterLiveFilterDelay)\r\n        }\r\n\r\n        column.modules.filter.headerElement = editorElement\r\n        column.modules.filter.attrType = editorElement.hasAttribute('type')\r\n          ? editorElement.getAttribute('type').toLowerCase()\r\n          : ''\r\n        column.modules.filter.tagType = editorElement.tagName.toLowerCase()\r\n\r\n        if (column.definition.headerFilterLiveFilter !== false) {\r\n          if (\r\n            !(\r\n              column.definition.headerFilter === 'autocomplete' ||\r\n              column.definition.headerFilter === 'tickCross' ||\r\n              ((column.definition.editor === 'autocomplete' || column.definition.editor === 'tickCross') &&\r\n                column.definition.headerFilter === true)\r\n            )\r\n          ) {\r\n            editorElement.addEventListener('keyup', searchTrigger)\r\n            editorElement.addEventListener('search', searchTrigger)\r\n\r\n            // update number filtered columns on change\r\n            if (column.modules.filter.attrType == 'number') {\r\n              editorElement.addEventListener('change', function (e) {\r\n                success(editorElement.value)\r\n              })\r\n            }\r\n\r\n            // change text inputs to search inputs to allow for clearing of field\r\n            if (column.modules.filter.attrType == 'text' && this.table.browser !== 'ie') {\r\n              editorElement.setAttribute('type', 'search')\r\n              // editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\r\n            }\r\n          }\r\n\r\n          // prevent input and select elements from propagating click to column sorters etc\r\n          if (\r\n            column.modules.filter.tagType == 'input' ||\r\n            column.modules.filter.tagType == 'select' ||\r\n            column.modules.filter.tagType == 'textarea'\r\n          ) {\r\n            editorElement.addEventListener('mousedown', function (e) {\r\n              e.stopPropagation()\r\n            })\r\n          }\r\n        }\r\n\r\n        filterElement.appendChild(editorElement)\r\n\r\n        column.contentElement.appendChild(filterElement)\r\n\r\n        if (!reinitialize) {\r\n          self.headerFilterColumns.push(column)\r\n        }\r\n\r\n        if (onRenderedCallback) {\r\n          onRenderedCallback()\r\n        }\r\n      }\r\n    } else {\r\n      console.warn('Filter Error - Cannot add header filter, column has no field set:', column.definition.title)\r\n    }\r\n  }\r\n\r\n  // hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\r\n  hideHeaderFilterElements() {\r\n    this.headerFilterColumns.forEach(function (column) {\r\n      if (column.modules.filter && column.modules.filter.headerElement) {\r\n        column.modules.filter.headerElement.style.display = 'none'\r\n      }\r\n    })\r\n  }\r\n\r\n  // show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\r\n  showHeaderFilterElements() {\r\n    this.headerFilterColumns.forEach(function (column) {\r\n      if (column.modules.filter && column.modules.filter.headerElement) {\r\n        column.modules.filter.headerElement.style.display = ''\r\n      }\r\n    })\r\n  }\r\n\r\n  // programmatically set focus of header filter\r\n  setHeaderFilterFocus(column) {\r\n    if (column.modules.filter && column.modules.filter.headerElement) {\r\n      column.modules.filter.headerElement.focus()\r\n    } else {\r\n      console.warn('Column Filter Focus Error - No header filter set on column:', column.getField())\r\n    }\r\n  }\r\n\r\n  // programmatically get value of header filter\r\n  getHeaderFilterValue(column) {\r\n    if (column.modules.filter && column.modules.filter.headerElement) {\r\n      return column.modules.filter.value\r\n    } else {\r\n      console.warn('Column Filter Error - No header filter set on column:', column.getField())\r\n    }\r\n  }\r\n\r\n  // programmatically set value of header filter\r\n  setHeaderFilterValue(column, value) {\r\n    if (column) {\r\n      if (column.modules.filter && column.modules.filter.headerElement) {\r\n        this.generateHeaderFilterElement(column, value, true)\r\n        column.modules.filter.success(value)\r\n      } else {\r\n        console.warn('Column Filter Error - No header filter set on column:', column.getField())\r\n      }\r\n    }\r\n  }\r\n\r\n  reloadHeaderFilter(column) {\r\n    if (column) {\r\n      if (column.modules.filter && column.modules.filter.headerElement) {\r\n        this.generateHeaderFilterElement(column, column.modules.filter.value, true)\r\n      } else {\r\n        console.warn('Column Filter Error - No header filter set on column:', column.getField())\r\n      }\r\n    }\r\n  }\r\n\r\n  refreshFilter() {\r\n    if (this.tableInitialized) {\r\n      if (this.table.options.filterMode === 'remote') {\r\n        this.reloadData(null, false, false)\r\n      } else {\r\n        this.refreshData(true)\r\n      }\r\n    }\r\n\r\n    // TODO - Persist left position of row manager\r\n    // left = this.scrollLeft;\r\n    // this.scrollHorizontal(left);\r\n  }\r\n\r\n  // check if the filters has changed since last use\r\n  trackChanges() {\r\n    this.changed = true\r\n    this.dispatch('filter-changed')\r\n  }\r\n\r\n  // check if the filters has changed since last use\r\n  hasChanged() {\r\n    const changed = this.changed\r\n    this.changed = false\r\n    return changed\r\n  }\r\n\r\n  // set standard filters\r\n  setFilter(field, type, value, params) {\r\n    this.filterList = []\r\n\r\n    if (!Array.isArray(field)) {\r\n      field = [{ field, type, value, params }]\r\n    }\r\n\r\n    this.addFilter(field)\r\n  }\r\n\r\n  // add filter to array\r\n  addFilter(field, type, value, params) {\r\n    let changed = false\r\n\r\n    if (!Array.isArray(field)) {\r\n      field = [{ field, type, value, params }]\r\n    }\r\n\r\n    field.forEach((filter) => {\r\n      filter = this.findFilter(filter)\r\n\r\n      if (filter) {\r\n        this.filterList.push(filter)\r\n        changed = true\r\n      }\r\n    })\r\n\r\n    if (changed) {\r\n      this.trackChanges()\r\n    }\r\n  }\r\n\r\n  findFilter(filter) {\r\n    let column\r\n\r\n    if (Array.isArray(filter)) {\r\n      return this.findSubFilters(filter)\r\n    }\r\n\r\n    let filterFunc = false\r\n\r\n    if (typeof filter.field === 'function') {\r\n      filterFunc = function (data) {\r\n        return filter.field(data, filter.type || {}) // pass params to custom filter function\r\n      }\r\n    } else {\r\n      if (Filter.filters[filter.type]) {\r\n        column = this.table.columnManager.getColumnByField(filter.field)\r\n\r\n        if (column) {\r\n          filterFunc = function (data) {\r\n            return Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {})\r\n          }\r\n        } else {\r\n          filterFunc = function (data) {\r\n            return Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {})\r\n          }\r\n        }\r\n      } else {\r\n        console.warn('Filter Error - No such filter type found, ignoring: ', filter.type)\r\n      }\r\n    }\r\n\r\n    filter.func = filterFunc\r\n\r\n    return filter.func ? filter : false\r\n  }\r\n\r\n  findSubFilters(filters) {\r\n    const output = []\r\n\r\n    filters.forEach((filter) => {\r\n      filter = this.findFilter(filter)\r\n\r\n      if (filter) {\r\n        output.push(filter)\r\n      }\r\n    })\r\n\r\n    return output.length ? output : false\r\n  }\r\n\r\n  // get all filters\r\n  getFilters(all, ajax) {\r\n    let output = []\r\n\r\n    if (all) {\r\n      output = this.getHeaderFilters()\r\n    }\r\n\r\n    if (ajax) {\r\n      output.forEach(function (item) {\r\n        if (typeof item.type === 'function') {\r\n          item.type = 'function'\r\n        }\r\n      })\r\n    }\r\n\r\n    output = output.concat(this.filtersToArray(this.filterList, ajax))\r\n\r\n    return output\r\n  }\r\n\r\n  // filter to Object\r\n  filtersToArray(filterList, ajax) {\r\n    const output = []\r\n\r\n    filterList.forEach((filter) => {\r\n      let item\r\n\r\n      if (Array.isArray(filter)) {\r\n        output.push(this.filtersToArray(filter, ajax))\r\n      } else {\r\n        item = { field: filter.field, type: filter.type, value: filter.value }\r\n\r\n        if (ajax) {\r\n          if (typeof item.type === 'function') {\r\n            item.type = 'function'\r\n          }\r\n        }\r\n\r\n        output.push(item)\r\n      }\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  // get all filters\r\n  getHeaderFilters() {\r\n    const output = []\r\n\r\n    for (const key in this.headerFilters) {\r\n      output.push({ field: key, type: this.headerFilters[key].type, value: this.headerFilters[key].value })\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  // remove filter from array\r\n  removeFilter(field, type, value) {\r\n    if (!Array.isArray(field)) {\r\n      field = [{ field, type, value }]\r\n    }\r\n\r\n    field.forEach((filter) => {\r\n      let index = -1\r\n\r\n      if (typeof filter.field === 'object') {\r\n        index = this.filterList.findIndex((element) => {\r\n          return filter === element\r\n        })\r\n      } else {\r\n        index = this.filterList.findIndex((element) => {\r\n          return filter.field === element.field && filter.type === element.type && filter.value === element.value\r\n        })\r\n      }\r\n\r\n      if (index > -1) {\r\n        this.filterList.splice(index, 1)\r\n      } else {\r\n        console.warn('Filter Error - No matching filter type found, ignoring: ', filter.type)\r\n      }\r\n    })\r\n\r\n    this.trackChanges()\r\n  }\r\n\r\n  // clear filters\r\n  clearFilter(all) {\r\n    this.filterList = []\r\n\r\n    if (all) {\r\n      this.clearHeaderFilter()\r\n    }\r\n\r\n    this.trackChanges()\r\n  }\r\n\r\n  // clear header filters\r\n  clearHeaderFilter() {\r\n    this.headerFilters = {}\r\n    this.prevHeaderFilterChangeCheck = '{}'\r\n\r\n    this.headerFilterColumns.forEach((column) => {\r\n      if (typeof column.modules.filter.value !== 'undefined') {\r\n        delete column.modules.filter.value\r\n      }\r\n      column.modules.filter.prevSuccess = undefined\r\n      this.reloadHeaderFilter(column)\r\n    })\r\n\r\n    this.trackChanges()\r\n  }\r\n\r\n  // search data and return matching rows\r\n  search(searchType, field, type, value) {\r\n    const activeRows = []\r\n    const filterList = []\r\n\r\n    if (!Array.isArray(field)) {\r\n      field = [{ field, type, value }]\r\n    }\r\n\r\n    field.forEach((filter) => {\r\n      filter = this.findFilter(filter)\r\n\r\n      if (filter) {\r\n        filterList.push(filter)\r\n      }\r\n    })\r\n\r\n    this.table.rowManager.rows.forEach((row) => {\r\n      let match = true\r\n\r\n      filterList.forEach((filter) => {\r\n        if (!this.filterRecurse(filter, row.getData())) {\r\n          match = false\r\n        }\r\n      })\r\n\r\n      if (match) {\r\n        activeRows.push(searchType === 'data' ? row.getData('data') : row.getComponent())\r\n      }\r\n    })\r\n\r\n    return activeRows\r\n  }\r\n\r\n  // filter row array\r\n  filter(rowList, filters) {\r\n    let activeRows = []\r\n    const activeRowComponents = []\r\n\r\n    if (this.subscribedExternal('dataFiltering')) {\r\n      this.dispatchExternal('dataFiltering', this.getFilters(true))\r\n    }\r\n\r\n    if (\r\n      this.table.options.filterMode !== 'remote' &&\r\n      (this.filterList.length || Object.keys(this.headerFilters).length)\r\n    ) {\r\n      rowList.forEach((row) => {\r\n        if (this.filterRow(row)) {\r\n          activeRows.push(row)\r\n        }\r\n      })\r\n    } else {\r\n      activeRows = rowList.slice(0)\r\n    }\r\n\r\n    if (this.subscribedExternal('dataFiltered')) {\r\n      activeRows.forEach((row) => {\r\n        activeRowComponents.push(row.getComponent())\r\n      })\r\n\r\n      this.dispatchExternal('dataFiltered', this.getFilters(true), activeRowComponents)\r\n    }\r\n\r\n    return activeRows\r\n  }\r\n\r\n  // filter individual row\r\n  filterRow(row, filters) {\r\n    let match = true\r\n    const data = row.getData()\r\n\r\n    this.filterList.forEach((filter) => {\r\n      if (!this.filterRecurse(filter, data)) {\r\n        match = false\r\n      }\r\n    })\r\n\r\n    for (const field in this.headerFilters) {\r\n      if (!this.headerFilters[field].func(data)) {\r\n        match = false\r\n      }\r\n    }\r\n\r\n    return match\r\n  }\r\n\r\n  filterRecurse(filter, data) {\r\n    let match = false\r\n\r\n    if (Array.isArray(filter)) {\r\n      filter.forEach((subFilter) => {\r\n        if (this.filterRecurse(subFilter, data)) {\r\n          match = true\r\n        }\r\n      })\r\n    } else {\r\n      match = filter.func(data)\r\n    }\r\n\r\n    return match\r\n  }\r\n}\r\n","import plaintext from './formatters/plaintext.js'\r\nimport html from './formatters/html.js'\r\nimport textarea from './formatters/textarea.js'\r\nimport money from './formatters/money.js'\r\nimport link from './formatters/link.js'\r\nimport image from './formatters/image.js'\r\nimport tickCross from './formatters/tickCross.js'\r\nimport datetime from './formatters/datetime.js'\r\nimport datetimediff from './formatters/datetimediff.js'\r\nimport lookup from './formatters/lookup.js'\r\nimport star from './formatters/star.js'\r\nimport traffic from './formatters/traffic.js'\r\nimport progress from './formatters/progress.js'\r\nimport color from './formatters/color.js'\r\nimport buttonTick from './formatters/buttonTick.js'\r\nimport buttonCross from './formatters/buttonCross.js'\r\nimport toggle from './formatters/toggle.js'\r\nimport rownum from './formatters/rownum.js'\r\nimport handle from './formatters/handle.js'\r\nimport adaptable from './formatters/adaptable.js'\r\nimport array from './formatters/array.js'\r\nimport json from './formatters/json.js'\r\n\r\nexport default {\r\n  plaintext,\r\n  html,\r\n  textarea,\r\n  money,\r\n  link,\r\n  image,\r\n  tickCross,\r\n  datetime,\r\n  datetimediff,\r\n  lookup,\r\n  star,\r\n  traffic,\r\n  progress,\r\n  color,\r\n  buttonTick,\r\n  buttonCross,\r\n  toggle,\r\n  rownum,\r\n  handle,\r\n  adaptable,\r\n  array,\r\n  json\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  return this.emptyToSpace(this.sanitizeHTML(cell.getValue()))\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  return cell.getValue()\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  cell.getElement().style.whiteSpace = 'pre-wrap'\r\n  return this.emptyToSpace(this.sanitizeHTML(cell.getValue()))\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  let floatVal = parseFloat(cell.getValue())\r\n  let sign = ''\r\n  let number\r\n  let integer\r\n  let decimal\r\n  let rgx\r\n  let value\r\n\r\n  const decimalSym = formatterParams.decimal || '.'\r\n  const thousandSym = formatterParams.thousand || ','\r\n  const negativeSign = formatterParams.negativeSign || '-'\r\n  const symbol = formatterParams.symbol || ''\r\n  const after = !!formatterParams.symbolAfter\r\n  const precision = typeof formatterParams.precision !== 'undefined' ? formatterParams.precision : 2\r\n\r\n  if (isNaN(floatVal)) {\r\n    return this.emptyToSpace(this.sanitizeHTML(cell.getValue()))\r\n  }\r\n\r\n  if (floatVal < 0) {\r\n    floatVal = Math.abs(floatVal)\r\n    sign = negativeSign\r\n  }\r\n\r\n  number = precision !== false ? floatVal.toFixed(precision) : floatVal\r\n  number = String(number).split('.')\r\n\r\n  integer = number[0]\r\n  decimal = number.length > 1 ? decimalSym + number[1] : ''\r\n\r\n  if (formatterParams.thousand !== false) {\r\n    rgx = /(\\d+)(\\d{3})/\r\n\r\n    while (rgx.test(integer)) {\r\n      integer = integer.replace(rgx, '$1' + thousandSym + '$2')\r\n    }\r\n  }\r\n\r\n  value = integer + decimal\r\n\r\n  if (sign === true) {\r\n    value = '(' + value + ')'\r\n    return after ? value + symbol : symbol + value\r\n  } else {\r\n    return after ? sign + value + symbol : sign + symbol + value\r\n  }\r\n}\r\n","import Helpers from '../../../../core/tools/Helpers.js'\r\n\r\nexport default function (cell, formatterParams, onRendered) {\r\n  let value = cell.getValue()\r\n  const urlPrefix = formatterParams.urlPrefix || ''\r\n  let download = formatterParams.download\r\n  let label = value\r\n  const el = document.createElement('a')\r\n  let data\r\n\r\n  function labelTraverse(path, data) {\r\n    const item = path.shift()\r\n    const value = data[item]\r\n\r\n    if (path.length && typeof value === 'object') {\r\n      return labelTraverse(path, value)\r\n    }\r\n\r\n    return value\r\n  }\r\n\r\n  if (formatterParams.labelField) {\r\n    data = cell.getData()\r\n    label = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data)\r\n  }\r\n\r\n  if (formatterParams.label) {\r\n    switch (typeof formatterParams.label) {\r\n      case 'string':\r\n        label = formatterParams.label\r\n        break\r\n\r\n      case 'function':\r\n        label = formatterParams.label(cell)\r\n        break\r\n    }\r\n  }\r\n\r\n  if (label) {\r\n    if (formatterParams.urlField) {\r\n      data = cell.getData()\r\n\r\n      value = Helpers.retrieveNestedData(this.table.options.nestedFieldSeparator, formatterParams.urlField, data)\r\n    }\r\n\r\n    if (formatterParams.url) {\r\n      switch (typeof formatterParams.url) {\r\n        case 'string':\r\n          value = formatterParams.url\r\n          break\r\n\r\n        case 'function':\r\n          value = formatterParams.url(cell)\r\n          break\r\n      }\r\n    }\r\n\r\n    el.setAttribute('href', urlPrefix + value)\r\n\r\n    if (formatterParams.target) {\r\n      el.setAttribute('target', formatterParams.target)\r\n    }\r\n\r\n    if (formatterParams.download) {\r\n      if (typeof download === 'function') {\r\n        download = download(cell)\r\n      } else {\r\n        download = download === true ? '' : download\r\n      }\r\n\r\n      el.setAttribute('download', download)\r\n    }\r\n\r\n    el.innerHTML = this.emptyToSpace(this.sanitizeHTML(label))\r\n\r\n    return el\r\n  } else {\r\n    return '&nbsp;'\r\n  }\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  const el = document.createElement('img')\r\n  let src = cell.getValue()\r\n\r\n  if (formatterParams.urlPrefix) {\r\n    src = formatterParams.urlPrefix + cell.getValue()\r\n  }\r\n\r\n  if (formatterParams.urlSuffix) {\r\n    src = src + formatterParams.urlSuffix\r\n  }\r\n\r\n  el.setAttribute('src', src)\r\n\r\n  switch (typeof formatterParams.height) {\r\n    case 'number':\r\n      el.style.height = formatterParams.height + 'px'\r\n      break\r\n\r\n    case 'string':\r\n      el.style.height = formatterParams.height\r\n      break\r\n  }\r\n\r\n  switch (typeof formatterParams.width) {\r\n    case 'number':\r\n      el.style.width = formatterParams.width + 'px'\r\n      break\r\n\r\n    case 'string':\r\n      el.style.width = formatterParams.width\r\n      break\r\n  }\r\n\r\n  el.addEventListener('load', function () {\r\n    cell.getRow().normalizeHeight()\r\n  })\r\n\r\n  return el\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  const value = cell.getValue()\r\n  const element = cell.getElement()\r\n  const empty = formatterParams.allowEmpty\r\n  const truthy = formatterParams.allowTruthy\r\n  const trueValueSet = Object.keys(formatterParams).includes('trueValue')\r\n  const tick =\r\n    typeof formatterParams.tickElement !== 'undefined'\r\n      ? formatterParams.tickElement\r\n      : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>'\r\n  const cross =\r\n    typeof formatterParams.crossElement !== 'undefined'\r\n      ? formatterParams.crossElement\r\n      : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>'\r\n\r\n  if (\r\n    (trueValueSet && value === formatterParams.trueValue) ||\r\n    (!trueValueSet &&\r\n      ((truthy && value) || value === true || value === 'true' || value === 'True' || value === 1 || value === '1'))\r\n  ) {\r\n    element.setAttribute('aria-checked', true)\r\n    return tick || ''\r\n  } else {\r\n    if (empty && (value === 'null' || value === '' || value === null || typeof value === 'undefined')) {\r\n      element.setAttribute('aria-checked', 'mixed')\r\n      return ''\r\n    } else {\r\n      element.setAttribute('aria-checked', false)\r\n      return cross || ''\r\n    }\r\n  }\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  const DT = this.table.dependencyRegistry.lookup(['luxon', 'DateTime'], 'DateTime')\r\n  const inputFormat = formatterParams.inputFormat || 'yyyy-MM-dd HH:mm:ss'\r\n  const outputFormat = formatterParams.outputFormat || 'dd/MM/yyyy HH:mm:ss'\r\n  const invalid = typeof formatterParams.invalidPlaceholder !== 'undefined' ? formatterParams.invalidPlaceholder : ''\r\n  const value = cell.getValue()\r\n\r\n  if (typeof DT !== 'undefined') {\r\n    let newDatetime\r\n\r\n    if (DT.isDateTime(value)) {\r\n      newDatetime = value\r\n    } else if (inputFormat === 'iso') {\r\n      newDatetime = DT.fromISO(String(value))\r\n    } else {\r\n      newDatetime = DT.fromFormat(String(value), inputFormat)\r\n    }\r\n\r\n    if (newDatetime.isValid) {\r\n      if (formatterParams.timezone) {\r\n        newDatetime = newDatetime.setZone(formatterParams.timezone)\r\n      }\r\n\r\n      return newDatetime.toFormat(outputFormat)\r\n    } else {\r\n      if (invalid === true || !value) {\r\n        return value\r\n      } else if (typeof invalid === 'function') {\r\n        return invalid(value)\r\n      } else {\r\n        return invalid\r\n      }\r\n    }\r\n  } else {\r\n    console.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\")\r\n  }\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  const DT = this.table.dependencyRegistry.lookup(['luxon', 'DateTime'], 'DateTime')\r\n  const inputFormat = formatterParams.inputFormat || 'yyyy-MM-dd HH:mm:ss'\r\n  const invalid = typeof formatterParams.invalidPlaceholder !== 'undefined' ? formatterParams.invalidPlaceholder : ''\r\n  const suffix = typeof formatterParams.suffix !== 'undefined' ? formatterParams.suffix : false\r\n  const unit = typeof formatterParams.unit !== 'undefined' ? formatterParams.unit : 'days'\r\n  const humanize = typeof formatterParams.humanize !== 'undefined' ? formatterParams.humanize : false\r\n  const date = typeof formatterParams.date !== 'undefined' ? formatterParams.date : DT.now()\r\n  const value = cell.getValue()\r\n\r\n  if (typeof DT !== 'undefined') {\r\n    let newDatetime\r\n\r\n    if (DT.isDateTime(value)) {\r\n      newDatetime = value\r\n    } else if (inputFormat === 'iso') {\r\n      newDatetime = DT.fromISO(String(value))\r\n    } else {\r\n      newDatetime = DT.fromFormat(String(value), inputFormat)\r\n    }\r\n\r\n    if (newDatetime.isValid) {\r\n      if (humanize) {\r\n        return newDatetime.diff(date, unit).toHuman() + (suffix ? ' ' + suffix : '')\r\n      } else {\r\n        return parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? ' ' + suffix : '')\r\n      }\r\n    } else {\r\n      if (invalid === true) {\r\n        return value\r\n      } else if (typeof invalid === 'function') {\r\n        return invalid(value)\r\n      } else {\r\n        return invalid\r\n      }\r\n    }\r\n  } else {\r\n    console.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\")\r\n  }\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  const value = cell.getValue()\r\n\r\n  if (typeof formatterParams[value] === 'undefined') {\r\n    console.warn('Missing display value for ' + value)\r\n    return value\r\n  }\r\n\r\n  return formatterParams[value]\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  let value = cell.getValue()\r\n  const element = cell.getElement()\r\n  const maxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5\r\n  const stars = document.createElement('span')\r\n  const star = document.createElementNS('http://www.w3.org/2000/svg', 'svg')\r\n  const starActive =\r\n    '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>'\r\n  const starInactive =\r\n    '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>'\r\n\r\n  // style stars holder\r\n  stars.style.verticalAlign = 'middle'\r\n\r\n  // style star\r\n  star.setAttribute('width', '14')\r\n  star.setAttribute('height', '14')\r\n  star.setAttribute('viewBox', '0 0 512 512')\r\n  star.setAttribute('xml:space', 'preserve')\r\n  star.style.padding = '0 1px'\r\n\r\n  value = value && !isNaN(value) ? parseInt(value) : 0\r\n\r\n  value = Math.max(0, Math.min(value, maxStars))\r\n\r\n  for (let i = 1; i <= maxStars; i++) {\r\n    const nextStar = star.cloneNode(true)\r\n    nextStar.innerHTML = i <= value ? starActive : starInactive\r\n\r\n    stars.appendChild(nextStar)\r\n  }\r\n\r\n  element.style.whiteSpace = 'nowrap'\r\n  element.style.overflow = 'hidden'\r\n  element.style.textOverflow = 'ellipsis'\r\n\r\n  element.setAttribute('aria-label', value)\r\n\r\n  return stars\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  const value = this.sanitizeHTML(cell.getValue()) || 0\r\n  const el = document.createElement('span')\r\n  const max = formatterParams && formatterParams.max ? formatterParams.max : 100\r\n  const min = formatterParams && formatterParams.min ? formatterParams.min : 0\r\n  const colors =\r\n    formatterParams && typeof formatterParams.color !== 'undefined' ? formatterParams.color : ['red', 'orange', 'green']\r\n  let color = '#666666'\r\n  let percent\r\n  let percentValue\r\n\r\n  if (isNaN(value) || typeof cell.getValue() === 'undefined') {\r\n    return\r\n  }\r\n\r\n  el.classList.add('tabulator-traffic-light')\r\n\r\n  // make sure value is in range\r\n  percentValue = parseFloat(value) <= max ? parseFloat(value) : max\r\n  percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min\r\n\r\n  // workout percentage\r\n  percent = (max - min) / 100\r\n  percentValue = Math.round((percentValue - min) / percent)\r\n\r\n  // set color\r\n  switch (typeof colors) {\r\n    case 'string':\r\n      color = colors\r\n      break\r\n    case 'function':\r\n      color = colors(value)\r\n      break\r\n    case 'object':\r\n      if (Array.isArray(colors)) {\r\n        const unit = 100 / colors.length\r\n        let index = Math.floor(percentValue / unit)\r\n\r\n        index = Math.min(index, colors.length - 1)\r\n        index = Math.max(index, 0)\r\n        color = colors[index]\r\n        break\r\n      }\r\n  }\r\n\r\n  el.style.backgroundColor = color\r\n\r\n  return el\r\n}\r\n","import CellComponent from '../../../../core/cell/CellComponent.js'\r\n\r\nexport default function (cell, formatterParams = {}, onRendered) {\r\n  // progress bar\r\n  const value = this.sanitizeHTML(cell.getValue()) || 0\r\n  let element = cell.getElement()\r\n  const max = formatterParams.max ? formatterParams.max : 100\r\n  const min = formatterParams.min ? formatterParams.min : 0\r\n  const legendAlign = formatterParams.legendAlign ? formatterParams.legendAlign : 'center'\r\n  let percent\r\n  let percentValue\r\n  let color\r\n  let legend\r\n  let legendColor\r\n\r\n  // make sure value is in range\r\n  percentValue = parseFloat(value) <= max ? parseFloat(value) : max\r\n  percentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min\r\n\r\n  // workout percentage\r\n  percent = (max - min) / 100\r\n  percentValue = Math.round((percentValue - min) / percent)\r\n\r\n  // set bar color\r\n  switch (typeof formatterParams.color) {\r\n    case 'string':\r\n      color = formatterParams.color\r\n      break\r\n    case 'function':\r\n      color = formatterParams.color(value)\r\n      break\r\n    case 'object':\r\n      if (Array.isArray(formatterParams.color)) {\r\n        const unit = 100 / formatterParams.color.length\r\n        let index = Math.floor(percentValue / unit)\r\n\r\n        index = Math.min(index, formatterParams.color.length - 1)\r\n        index = Math.max(index, 0)\r\n        color = formatterParams.color[index]\r\n        break\r\n      }\r\n    default:\r\n      color = '#2DC214'\r\n  }\r\n\r\n  // generate legend\r\n  switch (typeof formatterParams.legend) {\r\n    case 'string':\r\n      legend = formatterParams.legend\r\n      break\r\n    case 'function':\r\n      legend = formatterParams.legend(value)\r\n      break\r\n    case 'boolean':\r\n      legend = value\r\n      break\r\n    default:\r\n      legend = false\r\n  }\r\n\r\n  // set legend color\r\n  switch (typeof formatterParams.legendColor) {\r\n    case 'string':\r\n      legendColor = formatterParams.legendColor\r\n      break\r\n    case 'function':\r\n      legendColor = formatterParams.legendColor(value)\r\n      break\r\n    case 'object':\r\n      if (Array.isArray(formatterParams.legendColor)) {\r\n        const unit = 100 / formatterParams.legendColor.length\r\n        let index = Math.floor(percentValue / unit)\r\n\r\n        index = Math.min(index, formatterParams.legendColor.length - 1)\r\n        index = Math.max(index, 0)\r\n        legendColor = formatterParams.legendColor[index]\r\n      }\r\n      break\r\n    default:\r\n      legendColor = '#000'\r\n  }\r\n\r\n  element.style.minWidth = '30px'\r\n  element.style.position = 'relative'\r\n\r\n  element.setAttribute('aria-label', percentValue)\r\n\r\n  const barEl = document.createElement('div')\r\n  barEl.style.display = 'inline-block'\r\n  barEl.style.width = percentValue + '%'\r\n  barEl.style.backgroundColor = color\r\n  barEl.style.height = '100%'\r\n\r\n  barEl.setAttribute('data-max', max)\r\n  barEl.setAttribute('data-min', min)\r\n\r\n  const barContainer = document.createElement('div')\r\n  barContainer.style.position = 'relative'\r\n  barContainer.style.width = '100%'\r\n  barContainer.style.height = '100%'\r\n\r\n  if (legend) {\r\n    var legendEl = document.createElement('div')\r\n    legendEl.style.position = 'absolute'\r\n    legendEl.style.top = 0\r\n    legendEl.style.left = 0\r\n    legendEl.style.textAlign = legendAlign\r\n    legendEl.style.width = '100%'\r\n    legendEl.style.color = legendColor\r\n    legendEl.innerHTML = legend\r\n  }\r\n\r\n  onRendered(function () {\r\n    // handle custom element needed if formatter is to be included in printed/downloaded output\r\n    if (!(cell instanceof CellComponent)) {\r\n      const holderEl = document.createElement('div')\r\n      holderEl.style.position = 'absolute'\r\n      holderEl.style.top = '4px'\r\n      holderEl.style.bottom = '4px'\r\n      holderEl.style.left = '4px'\r\n      holderEl.style.right = '4px'\r\n\r\n      element.appendChild(holderEl)\r\n\r\n      element = holderEl\r\n    }\r\n\r\n    element.appendChild(barContainer)\r\n    barContainer.appendChild(barEl)\r\n\r\n    if (legend) {\r\n      barContainer.appendChild(legendEl)\r\n    }\r\n  })\r\n\r\n  return ''\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  cell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue())\r\n  return ''\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>'\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  return '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>'\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  const value = cell.getValue()\r\n  const size = formatterParams.size || 15\r\n  const sizePx = size + 'px'\r\n  let containEl\r\n  let switchEl\r\n  const onValue = formatterParams.hasOwnProperty('onValue') ? formatterParams.onValue : true\r\n  const offValue = formatterParams.hasOwnProperty('offValue') ? formatterParams.offValue : false\r\n  const state = formatterParams.onTruthy ? value : value === onValue\r\n\r\n  containEl = document.createElement('div')\r\n  containEl.classList.add('tabulator-toggle')\r\n\r\n  if (state) {\r\n    containEl.classList.add('tabulator-toggle-on')\r\n    containEl.style.flexDirection = 'row-reverse'\r\n\r\n    if (formatterParams.onColor) {\r\n      containEl.style.background = formatterParams.onColor\r\n    }\r\n  } else {\r\n    if (formatterParams.offColor) {\r\n      containEl.style.background = formatterParams.offColor\r\n    }\r\n  }\r\n\r\n  containEl.style.width = 2.5 * size + 'px'\r\n  containEl.style.borderRadius = sizePx\r\n\r\n  if (formatterParams.clickable) {\r\n    containEl.addEventListener('click', (e) => {\r\n      cell.setValue(state ? offValue : onValue)\r\n    })\r\n  }\r\n\r\n  switchEl = document.createElement('div')\r\n  switchEl.classList.add('tabulator-toggle-switch')\r\n\r\n  switchEl.style.height = sizePx\r\n  switchEl.style.width = sizePx\r\n  switchEl.style.borderRadius = sizePx\r\n\r\n  containEl.appendChild(switchEl)\r\n\r\n  return containEl\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  const content = document.createElement('span')\r\n  const row = cell.getRow()\r\n  const table = cell.getTable()\r\n\r\n  row.watchPosition((position) => {\r\n    if (formatterParams.relativeToPage) {\r\n      position += table.modules.page.getPageSize() * (table.modules.page.getPage() - 1)\r\n    }\r\n    content.innerText = position\r\n  })\r\n\r\n  return content\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  cell.getElement().classList.add('tabulator-row-handle')\r\n  return \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\"\r\n}\r\n","export default function (cell, params, onRendered) {\r\n  let lookup, formatterFunc, formatterParams\r\n\r\n  function defaultLookup(cell) {\r\n    const value = cell.getValue()\r\n    let formatter = 'plaintext'\r\n\r\n    switch (typeof value) {\r\n      case 'boolean':\r\n        formatter = 'tickCross'\r\n        break\r\n\r\n      case 'string':\r\n        if (value.includes('\\n')) {\r\n          formatter = 'textarea'\r\n        }\r\n        break\r\n    }\r\n\r\n    return formatter\r\n  }\r\n\r\n  lookup = params.formatterLookup ? params.formatterLookup(cell) : defaultLookup(cell)\r\n\r\n  if (params.paramsLookup) {\r\n    formatterParams =\r\n      typeof params.paramsLookup === 'function' ? params.paramsLookup(lookup, cell) : params.paramsLookup[lookup]\r\n  }\r\n\r\n  formatterFunc = this.table.modules.format.lookupFormatter(lookup)\r\n\r\n  return formatterFunc.call(this, cell, formatterParams || {}, onRendered)\r\n}\r\n","import Helpers from '../../../../core/tools/Helpers.js'\r\n\r\nexport default function (cell, formatterParams, onRendered) {\r\n  const delimiter = formatterParams.delimiter || ','\r\n  let value = cell.getValue()\r\n  const table = this.table\r\n  let valueMap\r\n\r\n  if (formatterParams.valueMap) {\r\n    if (typeof formatterParams.valueMap === 'string') {\r\n      valueMap = function (value) {\r\n        return value.map((item) => {\r\n          return Helpers.retrieveNestedData(table.options.nestedFieldSeparator, formatterParams.valueMap, item)\r\n        })\r\n      }\r\n    } else {\r\n      valueMap = formatterParams.valueMap\r\n    }\r\n  }\r\n\r\n  if (Array.isArray(value)) {\r\n    if (valueMap) {\r\n      value = valueMap(value)\r\n    }\r\n\r\n    return value.join(delimiter)\r\n  } else {\r\n    return value\r\n  }\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  const indent = formatterParams.indent || '\\t'\r\n  const multiline = typeof formatterParams.multiline === 'undefined' ? true : formatterParams.multiline\r\n  const replacer = formatterParams.replacer || null\r\n  const value = cell.getValue()\r\n\r\n  if (multiline) {\r\n    cell.getElement().style.whiteSpace = 'pre-wrap'\r\n  }\r\n\r\n  return JSON.stringify(value, replacer, indent)\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultFormatters from './defaults/formatters.js'\r\n\r\nexport default class Format extends Module {\r\n  static moduleName = 'format'\r\n\r\n  // load defaults\r\n  static formatters = defaultFormatters\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.registerColumnOption('formatter')\r\n    this.registerColumnOption('formatterParams')\r\n\r\n    this.registerColumnOption('formatterPrint')\r\n    this.registerColumnOption('formatterPrintParams')\r\n    this.registerColumnOption('formatterClipboard')\r\n    this.registerColumnOption('formatterClipboardParams')\r\n    this.registerColumnOption('formatterHtmlOutput')\r\n    this.registerColumnOption('formatterHtmlOutputParams')\r\n    this.registerColumnOption('titleFormatter')\r\n    this.registerColumnOption('titleFormatterParams')\r\n  }\r\n\r\n  initialize() {\r\n    this.subscribe('cell-format', this.formatValue.bind(this))\r\n    this.subscribe('cell-rendered', this.cellRendered.bind(this))\r\n    this.subscribe('column-layout', this.initializeColumn.bind(this))\r\n    this.subscribe('column-format', this.formatHeader.bind(this))\r\n  }\r\n\r\n  // initialize column formatter\r\n  initializeColumn(column) {\r\n    column.modules.format = this.lookupTypeFormatter(column, '')\r\n\r\n    if (typeof column.definition.formatterPrint !== 'undefined') {\r\n      column.modules.format.print = this.lookupTypeFormatter(column, 'Print')\r\n    }\r\n\r\n    if (typeof column.definition.formatterClipboard !== 'undefined') {\r\n      column.modules.format.clipboard = this.lookupTypeFormatter(column, 'Clipboard')\r\n    }\r\n\r\n    if (typeof column.definition.formatterHtmlOutput !== 'undefined') {\r\n      column.modules.format.htmlOutput = this.lookupTypeFormatter(column, 'HtmlOutput')\r\n    }\r\n  }\r\n\r\n  lookupTypeFormatter(column, type) {\r\n    const config = { params: column.definition['formatter' + type + 'Params'] || {} }\r\n    const formatter = column.definition['formatter' + type]\r\n\r\n    config.formatter = this.lookupFormatter(formatter)\r\n\r\n    return config\r\n  }\r\n\r\n  lookupFormatter(formatter) {\r\n    let formatterFunc\r\n\r\n    // set column formatter\r\n    switch (typeof formatter) {\r\n      case 'string':\r\n        if (Format.formatters[formatter]) {\r\n          formatterFunc = Format.formatters[formatter]\r\n        } else {\r\n          console.warn('Formatter Error - No such formatter found: ', formatter)\r\n          formatterFunc = Format.formatters.plaintext\r\n        }\r\n        break\r\n\r\n      case 'function':\r\n        formatterFunc = formatter\r\n        break\r\n\r\n      default:\r\n        formatterFunc = Format.formatters.plaintext\r\n        break\r\n    }\r\n\r\n    return formatterFunc\r\n  }\r\n\r\n  cellRendered(cell) {\r\n    if (cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered) {\r\n      cell.modules.format.renderedCallback()\r\n      cell.modules.format.rendered = true\r\n    }\r\n  }\r\n\r\n  // return a formatted value for a column header\r\n  formatHeader(column, title, el) {\r\n    let formatter, params, onRendered, mockCell\r\n\r\n    if (column.definition.titleFormatter) {\r\n      formatter = this.lookupFormatter(column.definition.titleFormatter)\r\n\r\n      onRendered = (callback) => {\r\n        column.titleFormatterRendered = callback\r\n      }\r\n\r\n      mockCell = {\r\n        getValue: function () {\r\n          return title\r\n        },\r\n        getElement: function () {\r\n          return el\r\n        },\r\n        getType: function () {\r\n          return 'header'\r\n        },\r\n        getColumn: function () {\r\n          return column.getComponent()\r\n        },\r\n        getTable: () => {\r\n          return this.table\r\n        }\r\n      }\r\n\r\n      params = column.definition.titleFormatterParams || {}\r\n\r\n      params = typeof params === 'function' ? params() : params\r\n\r\n      return formatter.call(this, mockCell, params, onRendered)\r\n    } else {\r\n      return title\r\n    }\r\n  }\r\n\r\n  // return a formatted value for a cell\r\n  formatValue(cell) {\r\n    const component = cell.getComponent()\r\n    const params =\r\n      typeof cell.column.modules.format.params === 'function'\r\n        ? cell.column.modules.format.params(component)\r\n        : cell.column.modules.format.params\r\n\r\n    function onRendered(callback) {\r\n      if (!cell.modules.format) {\r\n        cell.modules.format = {}\r\n      }\r\n\r\n      cell.modules.format.renderedCallback = callback\r\n      cell.modules.format.rendered = false\r\n    }\r\n\r\n    return cell.column.modules.format.formatter.call(this, component, params, onRendered)\r\n  }\r\n\r\n  formatExportValue(cell, type) {\r\n    const formatter = cell.column.modules.format[type]\r\n    let params\r\n\r\n    if (formatter) {\r\n      params = typeof formatter.params === 'function' ? formatter.params(cell.getComponent()) : formatter.params\r\n\r\n      function onRendered(callback) {\r\n        if (!cell.modules.format) {\r\n          cell.modules.format = {}\r\n        }\r\n\r\n        cell.modules.format.renderedCallback = callback\r\n        cell.modules.format.rendered = false\r\n      }\r\n\r\n      return formatter.formatter.call(this, cell.getComponent(), params, onRendered)\r\n    } else {\r\n      return this.formatValue(cell)\r\n    }\r\n  }\r\n\r\n  sanitizeHTML(value) {\r\n    if (value) {\r\n      const entityMap = {\r\n        '&': '&amp;',\r\n        '<': '&lt;',\r\n        '>': '&gt;',\r\n        '\"': '&quot;',\r\n        \"'\": '&#39;',\r\n        '/': '&#x2F;',\r\n        '`': '&#x60;',\r\n        '=': '&#x3D;'\r\n      }\r\n\r\n      return String(value).replace(/[&<>\"'`=/]/g, function (s) {\r\n        return entityMap[s]\r\n      })\r\n    } else {\r\n      return value\r\n    }\r\n  }\r\n\r\n  emptyToSpace(value) {\r\n    return value === null || typeof value === 'undefined' || value === '' ? '&nbsp;' : value\r\n  }\r\n}\r\n","// public group object\r\nexport default class GroupComponent {\r\n  constructor(group) {\r\n    this._group = group\r\n    this.type = 'GroupComponent'\r\n\r\n    return new Proxy(this, {\r\n      get: function (target, name, receiver) {\r\n        if (typeof target[name] !== 'undefined') {\r\n          return target[name]\r\n        } else {\r\n          return target._group.groupManager.table.componentFunctionBinder.handle('group', target._group, name)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  getKey() {\r\n    return this._group.key\r\n  }\r\n\r\n  getField() {\r\n    return this._group.field\r\n  }\r\n\r\n  getElement() {\r\n    return this._group.element\r\n  }\r\n\r\n  getRows() {\r\n    return this._group.getRows(true)\r\n  }\r\n\r\n  getSubGroups() {\r\n    return this._group.getSubGroups(true)\r\n  }\r\n\r\n  getParentGroup() {\r\n    return this._group.parent ? this._group.parent.getComponent() : false\r\n  }\r\n\r\n  isVisible() {\r\n    return this._group.visible\r\n  }\r\n\r\n  show() {\r\n    this._group.show()\r\n  }\r\n\r\n  hide() {\r\n    this._group.hide()\r\n  }\r\n\r\n  toggle() {\r\n    this._group.toggleVisibility()\r\n  }\r\n\r\n  scrollTo(position, ifVisible) {\r\n    return this._group.groupManager.table.rowManager.scrollToRow(this._group, position, ifVisible)\r\n  }\r\n\r\n  _getSelf() {\r\n    return this._group\r\n  }\r\n\r\n  getTable() {\r\n    return this._group.groupManager.table\r\n  }\r\n}\r\n","import Helpers from '../../core/tools/Helpers.js'\r\nimport GroupComponent from './GroupComponent.js'\r\n\r\n// Group functions\r\nexport default class Group {\r\n  constructor(groupManager, parent, level, key, field, generator, oldGroup) {\r\n    this.groupManager = groupManager\r\n    this.parent = parent\r\n    this.key = key\r\n    this.level = level\r\n    this.field = field\r\n    this.hasSubGroups = level < groupManager.groupIDLookups.length - 1\r\n    this.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow\r\n    this.type = 'group' // type of element\r\n    this.old = oldGroup\r\n    this.rows = []\r\n    this.groups = []\r\n    this.groupList = []\r\n    this.generator = generator\r\n    this.element = false\r\n    this.elementContents = false\r\n    this.height = 0\r\n    this.outerHeight = 0\r\n    this.initialized = false\r\n    this.calcs = {}\r\n    this.initialized = false\r\n    this.modules = {}\r\n    this.arrowElement = false\r\n\r\n    this.visible = oldGroup\r\n      ? oldGroup.visible\r\n      : typeof groupManager.startOpen[level] !== 'undefined'\r\n        ? groupManager.startOpen[level]\r\n        : groupManager.startOpen[0]\r\n\r\n    this.component = null\r\n\r\n    this.createElements()\r\n    this.addBindings()\r\n\r\n    this.createValueGroups()\r\n  }\r\n\r\n  wipe(elementsOnly) {\r\n    if (!elementsOnly) {\r\n      if (this.groupList.length) {\r\n        this.groupList.forEach(function (group) {\r\n          group.wipe()\r\n        })\r\n      } else {\r\n        this.rows.forEach((row) => {\r\n          if (row.modules) {\r\n            delete row.modules.group\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    this.element = false\r\n    this.arrowElement = false\r\n    this.elementContents = false\r\n  }\r\n\r\n  createElements() {\r\n    const arrow = document.createElement('div')\r\n    arrow.classList.add('tabulator-arrow')\r\n\r\n    this.element = document.createElement('div')\r\n    this.element.classList.add('tabulator-row')\r\n    this.element.classList.add('tabulator-group')\r\n    this.element.classList.add('tabulator-group-level-' + this.level)\r\n    this.element.setAttribute('role', 'rowgroup')\r\n\r\n    this.arrowElement = document.createElement('div')\r\n    this.arrowElement.classList.add('tabulator-group-toggle')\r\n    this.arrowElement.appendChild(arrow)\r\n\r\n    // setup movable rows\r\n    if (this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists('moveRow')) {\r\n      this.groupManager.table.modules.moveRow.initializeGroupHeader(this)\r\n    }\r\n  }\r\n\r\n  createValueGroups() {\r\n    const level = this.level + 1\r\n    if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\r\n      this.groupManager.allowedValues[level].forEach((value) => {\r\n        this._createGroup(value, level)\r\n      })\r\n    }\r\n  }\r\n\r\n  addBindings() {\r\n    let toggleElement\r\n\r\n    if (this.groupManager.table.options.groupToggleElement) {\r\n      toggleElement = this.groupManager.table.options.groupToggleElement == 'arrow' ? this.arrowElement : this.element\r\n\r\n      toggleElement.addEventListener('click', (e) => {\r\n        if (this.groupManager.table.options.groupToggleElement === 'arrow') {\r\n          e.stopPropagation()\r\n          e.stopImmediatePropagation()\r\n        }\r\n\r\n        // allow click event to propagate before toggling visibility\r\n        setTimeout(() => {\r\n          this.toggleVisibility()\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  _createGroup(groupID, level) {\r\n    const groupKey = level + '_' + groupID\r\n    const group = new Group(\r\n      this.groupManager,\r\n      this,\r\n      level,\r\n      groupID,\r\n      this.groupManager.groupIDLookups[level].field,\r\n      this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0],\r\n      this.old ? this.old.groups[groupKey] : false\r\n    )\r\n\r\n    this.groups[groupKey] = group\r\n    this.groupList.push(group)\r\n  }\r\n\r\n  _addRowToGroup(row) {\r\n    const level = this.level + 1\r\n\r\n    if (this.hasSubGroups) {\r\n      const groupID = this.groupManager.groupIDLookups[level].func(row.getData())\r\n      const groupKey = level + '_' + groupID\r\n\r\n      if (this.groupManager.allowedValues && this.groupManager.allowedValues[level]) {\r\n        if (this.groups[groupKey]) {\r\n          this.groups[groupKey].addRow(row)\r\n        }\r\n      } else {\r\n        if (!this.groups[groupKey]) {\r\n          this._createGroup(groupID, level)\r\n        }\r\n\r\n        this.groups[groupKey].addRow(row)\r\n      }\r\n    }\r\n  }\r\n\r\n  _addRow(row) {\r\n    this.rows.push(row)\r\n    row.modules.group = this\r\n  }\r\n\r\n  insertRow(row, to, after) {\r\n    const data = this.conformRowData({})\r\n\r\n    row.updateData(data)\r\n\r\n    const toIndex = this.rows.indexOf(to)\r\n\r\n    if (toIndex > -1) {\r\n      if (after) {\r\n        this.rows.splice(toIndex + 1, 0, row)\r\n      } else {\r\n        this.rows.splice(toIndex, 0, row)\r\n      }\r\n    } else {\r\n      if (after) {\r\n        this.rows.push(row)\r\n      } else {\r\n        this.rows.unshift(row)\r\n      }\r\n    }\r\n\r\n    row.modules.group = this\r\n\r\n    // this.generateGroupHeaderContents();\r\n\r\n    if (this.groupManager.table.modExists('columnCalcs') && this.groupManager.table.options.columnCalcs != 'table') {\r\n      this.groupManager.table.modules.columnCalcs.recalcGroup(this)\r\n    }\r\n\r\n    this.groupManager.updateGroupRows(true)\r\n  }\r\n\r\n  scrollHeader(left) {\r\n    if (this.arrowElement) {\r\n      this.arrowElement.style.marginLeft = left\r\n\r\n      this.groupList.forEach(function (child) {\r\n        child.scrollHeader(left)\r\n      })\r\n    }\r\n  }\r\n\r\n  getRowIndex(row) {}\r\n\r\n  // update row data to match grouping constraints\r\n  conformRowData(data) {\r\n    if (this.field) {\r\n      data[this.field] = this.key\r\n    } else {\r\n      console.warn('Data Conforming Error - Cannot conform row data to match new group as groupBy is a function')\r\n    }\r\n\r\n    if (this.parent) {\r\n      data = this.parent.conformRowData(data)\r\n    }\r\n\r\n    return data\r\n  }\r\n\r\n  removeRow(row) {\r\n    const index = this.rows.indexOf(row)\r\n    const el = row.getElement()\r\n\r\n    if (index > -1) {\r\n      this.rows.splice(index, 1)\r\n    }\r\n\r\n    if (!this.groupManager.table.options.groupValues && !this.rows.length) {\r\n      if (this.parent) {\r\n        this.parent.removeGroup(this)\r\n      } else {\r\n        this.groupManager.removeGroup(this)\r\n      }\r\n\r\n      this.groupManager.updateGroupRows(true)\r\n    } else {\r\n      if (el.parentNode) {\r\n        el.parentNode.removeChild(el)\r\n      }\r\n\r\n      if (!this.groupManager.blockRedraw) {\r\n        this.generateGroupHeaderContents()\r\n\r\n        if (\r\n          this.groupManager.table.modExists('columnCalcs') &&\r\n          this.groupManager.table.options.columnCalcs != 'table'\r\n        ) {\r\n          this.groupManager.table.modules.columnCalcs.recalcGroup(this)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  removeGroup(group) {\r\n    const groupKey = group.level + '_' + group.key\r\n    let index\r\n\r\n    if (this.groups[groupKey]) {\r\n      delete this.groups[groupKey]\r\n\r\n      index = this.groupList.indexOf(group)\r\n\r\n      if (index > -1) {\r\n        this.groupList.splice(index, 1)\r\n      }\r\n\r\n      if (!this.groupList.length) {\r\n        if (this.parent) {\r\n          this.parent.removeGroup(this)\r\n        } else {\r\n          this.groupManager.removeGroup(this)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getHeadersAndRows() {\r\n    let output = []\r\n\r\n    output.push(this)\r\n\r\n    this._visSet()\r\n\r\n    if (this.calcs.top) {\r\n      this.calcs.top.detachElement()\r\n      this.calcs.top.deleteCells()\r\n    }\r\n\r\n    if (this.calcs.bottom) {\r\n      this.calcs.bottom.detachElement()\r\n      this.calcs.bottom.deleteCells()\r\n    }\r\n\r\n    if (this.visible) {\r\n      if (this.groupList.length) {\r\n        this.groupList.forEach(function (group) {\r\n          output = output.concat(group.getHeadersAndRows())\r\n        })\r\n      } else {\r\n        if (\r\n          this.groupManager.table.options.columnCalcs != 'table' &&\r\n          this.groupManager.table.modExists('columnCalcs') &&\r\n          this.groupManager.table.modules.columnCalcs.hasTopCalcs()\r\n        ) {\r\n          this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows)\r\n          output.push(this.calcs.top)\r\n        }\r\n\r\n        output = output.concat(this.rows)\r\n\r\n        if (\r\n          this.groupManager.table.options.columnCalcs != 'table' &&\r\n          this.groupManager.table.modExists('columnCalcs') &&\r\n          this.groupManager.table.modules.columnCalcs.hasBottomCalcs()\r\n        ) {\r\n          this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows)\r\n          output.push(this.calcs.bottom)\r\n        }\r\n      }\r\n    } else {\r\n      if (!this.groupList.length && this.groupManager.table.options.columnCalcs != 'table') {\r\n        if (this.groupManager.table.modExists('columnCalcs')) {\r\n          if (this.groupManager.table.modules.columnCalcs.hasTopCalcs()) {\r\n            if (this.groupManager.table.options.groupClosedShowCalcs) {\r\n              this.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows)\r\n              output.push(this.calcs.top)\r\n            }\r\n          }\r\n\r\n          if (this.groupManager.table.modules.columnCalcs.hasBottomCalcs()) {\r\n            if (this.groupManager.table.options.groupClosedShowCalcs) {\r\n              this.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows)\r\n              output.push(this.calcs.bottom)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  getData(visible, transform) {\r\n    const output = []\r\n\r\n    this._visSet()\r\n\r\n    if (!visible || (visible && this.visible)) {\r\n      this.rows.forEach((row) => {\r\n        output.push(row.getData(transform || 'data'))\r\n      })\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  getRowCount() {\r\n    let count = 0\r\n\r\n    if (this.groupList.length) {\r\n      this.groupList.forEach((group) => {\r\n        count += group.getRowCount()\r\n      })\r\n    } else {\r\n      count = this.rows.length\r\n    }\r\n    return count\r\n  }\r\n\r\n  toggleVisibility() {\r\n    if (this.visible) {\r\n      this.hide()\r\n    } else {\r\n      this.show()\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    this.visible = false\r\n\r\n    if (this.groupManager.table.rowManager.getRenderMode() == 'basic' && !this.groupManager.table.options.pagination) {\r\n      this.element.classList.remove('tabulator-group-visible')\r\n\r\n      if (this.groupList.length) {\r\n        this.groupList.forEach((group) => {\r\n          const rows = group.getHeadersAndRows()\r\n\r\n          rows.forEach((row) => {\r\n            row.detachElement()\r\n          })\r\n        })\r\n      } else {\r\n        this.rows.forEach((row) => {\r\n          const rowEl = row.getElement()\r\n          rowEl.parentNode.removeChild(rowEl)\r\n        })\r\n      }\r\n\r\n      this.groupManager.updateGroupRows(true)\r\n    } else {\r\n      this.groupManager.updateGroupRows(true)\r\n    }\r\n\r\n    this.groupManager.table.externalEvents.dispatch('groupVisibilityChanged', this.getComponent(), false)\r\n  }\r\n\r\n  show() {\r\n    this.visible = true\r\n\r\n    if (this.groupManager.table.rowManager.getRenderMode() == 'basic' && !this.groupManager.table.options.pagination) {\r\n      this.element.classList.add('tabulator-group-visible')\r\n\r\n      let prev = this.generateElement()\r\n\r\n      if (this.groupList.length) {\r\n        this.groupList.forEach((group) => {\r\n          const rows = group.getHeadersAndRows()\r\n\r\n          rows.forEach((row) => {\r\n            const rowEl = row.getElement()\r\n            prev.parentNode.insertBefore(rowEl, prev.nextSibling)\r\n            row.initialize()\r\n            prev = rowEl\r\n          })\r\n        })\r\n      } else {\r\n        this.rows.forEach((row) => {\r\n          const rowEl = row.getElement()\r\n          prev.parentNode.insertBefore(rowEl, prev.nextSibling)\r\n          row.initialize()\r\n          prev = rowEl\r\n        })\r\n      }\r\n\r\n      this.groupManager.updateGroupRows(true)\r\n    } else {\r\n      this.groupManager.updateGroupRows(true)\r\n    }\r\n\r\n    this.groupManager.table.externalEvents.dispatch('groupVisibilityChanged', this.getComponent(), true)\r\n  }\r\n\r\n  _visSet() {\r\n    const data = []\r\n\r\n    if (typeof this.visible === 'function') {\r\n      this.rows.forEach(function (row) {\r\n        data.push(row.getData())\r\n      })\r\n\r\n      this.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent())\r\n    }\r\n  }\r\n\r\n  getRowGroup(row) {\r\n    let match = false\r\n    if (this.groupList.length) {\r\n      this.groupList.forEach(function (group) {\r\n        const result = group.getRowGroup(row)\r\n\r\n        if (result) {\r\n          match = result\r\n        }\r\n      })\r\n    } else {\r\n      if (\r\n        this.rows.find(function (item) {\r\n          return item === row\r\n        })\r\n      ) {\r\n        match = this\r\n      }\r\n    }\r\n\r\n    return match\r\n  }\r\n\r\n  getSubGroups(component) {\r\n    const output = []\r\n\r\n    this.groupList.forEach(function (child) {\r\n      output.push(component ? child.getComponent() : child)\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  getRows(component, includeChildren) {\r\n    let output = []\r\n\r\n    if (includeChildren && this.groupList.length) {\r\n      this.groupList.forEach((group) => {\r\n        output = output.concat(group.getRows(component, includeChildren))\r\n      })\r\n    } else {\r\n      this.rows.forEach(function (row) {\r\n        output.push(component ? row.getComponent() : row)\r\n      })\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  generateGroupHeaderContents() {\r\n    const data = []\r\n\r\n    const rows = this.getRows(false, true)\r\n\r\n    rows.forEach(function (row) {\r\n      data.push(row.getData())\r\n    })\r\n\r\n    this.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent())\r\n\r\n    while (this.element.firstChild) this.element.removeChild(this.element.firstChild)\r\n\r\n    if (typeof this.elementContents === 'string') {\r\n      this.element.innerHTML = this.elementContents\r\n    } else {\r\n      this.element.appendChild(this.elementContents)\r\n    }\r\n\r\n    this.element.insertBefore(this.arrowElement, this.element.firstChild)\r\n  }\r\n\r\n  getPath(path = []) {\r\n    path.unshift(this.key)\r\n    if (this.parent) {\r\n      this.parent.getPath(path)\r\n    }\r\n    return path\r\n  }\r\n\r\n  /// /////////// Standard Row Functions //////////////\r\n\r\n  getElement() {\r\n    return this.elementContents ? this.element : this.generateElement()\r\n  }\r\n\r\n  generateElement() {\r\n    this.addBindings = false\r\n\r\n    this._visSet()\r\n\r\n    if (this.visible) {\r\n      this.element.classList.add('tabulator-group-visible')\r\n    } else {\r\n      this.element.classList.remove('tabulator-group-visible')\r\n    }\r\n\r\n    for (let i = 0; i < this.element.childNodes.length; ++i) {\r\n      this.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i])\r\n    }\r\n\r\n    this.generateGroupHeaderContents()\r\n\r\n    // this.addBindings();\r\n\r\n    return this.element\r\n  }\r\n\r\n  detachElement() {\r\n    if (this.element && this.element.parentNode) {\r\n      this.element.parentNode.removeChild(this.element)\r\n    }\r\n  }\r\n\r\n  // normalize the height of elements in the row\r\n  normalizeHeight() {\r\n    this.setHeight(this.element.clientHeight)\r\n  }\r\n\r\n  initialize(force) {\r\n    if (!this.initialized || force) {\r\n      this.normalizeHeight()\r\n      this.initialized = true\r\n    }\r\n  }\r\n\r\n  reinitialize() {\r\n    this.initialized = false\r\n    this.height = 0\r\n\r\n    if (Helpers.elVisible(this.element)) {\r\n      this.initialize(true)\r\n    }\r\n  }\r\n\r\n  setHeight(height) {\r\n    if (this.height != height) {\r\n      this.height = height\r\n      this.outerHeight = this.element.offsetHeight\r\n    }\r\n  }\r\n\r\n  // return rows outer height\r\n  getHeight() {\r\n    return this.outerHeight\r\n  }\r\n\r\n  getGroup() {\r\n    return this\r\n  }\r\n\r\n  reinitializeHeight() {}\r\n\r\n  calcHeight() {}\r\n\r\n  setCellHeight() {}\r\n\r\n  clearCellHeight() {}\r\n\r\n  deinitializeHeight() {}\r\n\r\n  rendered() {}\r\n\r\n  /// ///////////// Object Generation /////////////////\r\n  getComponent() {\r\n    if (!this.component) {\r\n      this.component = new GroupComponent(this)\r\n    }\r\n\r\n    return this.component\r\n  }\r\n}\r\n","export default {\r\n  cellEdit: function (action) {\r\n    action.component.setValueProcessData(action.data.oldValue)\r\n    action.component.cellRendered()\r\n  },\r\n\r\n  rowAdd: function (action) {\r\n    action.component.deleteActual()\r\n\r\n    this.table.rowManager.checkPlaceholder()\r\n  },\r\n\r\n  rowDelete: function (action) {\r\n    const newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index)\r\n\r\n    if (this.table.options.groupBy && this.table.modExists('groupRows')) {\r\n      this.table.modules.groupRows.updateGroupRows(true)\r\n    }\r\n\r\n    this._rebindRow(action.component, newRow)\r\n\r\n    this.table.rowManager.checkPlaceholder()\r\n  },\r\n\r\n  rowMove: function (action) {\r\n    const after = action.data.posFrom - action.data.posTo > 0\r\n\r\n    this.table.rowManager.moveRowActual(\r\n      action.component,\r\n      this.table.rowManager.getRowFromPosition(action.data.posFrom),\r\n      after\r\n    )\r\n\r\n    this.table.rowManager.regenerateRowPositions()\r\n    this.table.rowManager.reRenderInPosition()\r\n  }\r\n}\r\n","export default {\r\n  cellEdit: function (action) {\r\n    action.component.setValueProcessData(action.data.newValue)\r\n    action.component.cellRendered()\r\n  },\r\n\r\n  rowAdd: function (action) {\r\n    const newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index)\r\n\r\n    if (this.table.options.groupBy && this.table.modExists('groupRows')) {\r\n      this.table.modules.groupRows.updateGroupRows(true)\r\n    }\r\n\r\n    this._rebindRow(action.component, newRow)\r\n\r\n    this.table.rowManager.checkPlaceholder()\r\n  },\r\n\r\n  rowDelete: function (action) {\r\n    action.component.deleteActual()\r\n\r\n    this.table.rowManager.checkPlaceholder()\r\n  },\r\n\r\n  rowMove: function (action) {\r\n    this.table.rowManager.moveRowActual(\r\n      action.component,\r\n      this.table.rowManager.getRowFromPosition(action.data.posTo),\r\n      action.data.after\r\n    )\r\n\r\n    this.table.rowManager.regenerateRowPositions()\r\n    this.table.rowManager.reRenderInPosition()\r\n  }\r\n}\r\n","import bindings from './keybindings/bindings.js'\r\nimport actions from './keybindings/actions.js'\r\n\r\nexport default {\r\n  keybindings: {\r\n    bindings,\r\n    actions\r\n  }\r\n}\r\n","export default {\r\n  undo: ['ctrl + 90', 'meta + 90'],\r\n  redo: ['ctrl + 89', 'meta + 89']\r\n}\r\n","export default {\r\n  undo: function (e) {\r\n    let cell = false\r\n    if (this.table.options.history && this.table.modExists('history') && this.table.modExists('edit')) {\r\n      cell = this.table.modules.edit.currentCell\r\n\r\n      if (!cell) {\r\n        e.preventDefault()\r\n        this.table.modules.history.undo()\r\n      }\r\n    }\r\n  },\r\n\r\n  redo: function (e) {\r\n    let cell = false\r\n    if (this.table.options.history && this.table.modExists('history') && this.table.modExists('edit')) {\r\n      cell = this.table.modules.edit.currentCell\r\n\r\n      if (!cell) {\r\n        e.preventDefault()\r\n        this.table.modules.history.redo()\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\nimport Row from '../../core/row/Row.js'\r\nimport Cell from '../../core/cell/Cell.js'\r\n\r\nimport defaultUndoers from './defaults/undoers.js'\r\nimport defaultRedoers from './defaults/redoers.js'\r\nimport extensions from './extensions/extensions.js'\r\n\r\nexport default class History extends Module {\r\n  static moduleName = 'history'\r\n  static moduleExtensions = extensions\r\n\r\n  // load defaults\r\n  static undoers = defaultUndoers\r\n  static redoers = defaultRedoers\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.history = []\r\n    this.index = -1\r\n\r\n    this.registerTableOption('history', false) // enable edit history\r\n  }\r\n\r\n  initialize() {\r\n    if (this.table.options.history) {\r\n      this.subscribe('cell-value-updated', this.cellUpdated.bind(this))\r\n      this.subscribe('cell-delete', this.clearComponentHistory.bind(this))\r\n      this.subscribe('row-delete', this.rowDeleted.bind(this))\r\n      this.subscribe('rows-wipe', this.clear.bind(this))\r\n      this.subscribe('row-added', this.rowAdded.bind(this))\r\n      this.subscribe('row-move', this.rowMoved.bind(this))\r\n    }\r\n\r\n    this.registerTableFunction('undo', this.undo.bind(this))\r\n    this.registerTableFunction('redo', this.redo.bind(this))\r\n    this.registerTableFunction('getHistoryUndoSize', this.getHistoryUndoSize.bind(this))\r\n    this.registerTableFunction('getHistoryRedoSize', this.getHistoryRedoSize.bind(this))\r\n    this.registerTableFunction('clearHistory', this.clear.bind(this))\r\n  }\r\n\r\n  rowMoved(from, to, after) {\r\n    this.action('rowMove', from, { posFrom: from.getPosition(), posTo: to.getPosition(), to, after })\r\n  }\r\n\r\n  rowAdded(row, data, pos, index) {\r\n    this.action('rowAdd', row, { data, pos, index })\r\n  }\r\n\r\n  rowDeleted(row) {\r\n    let index, rows\r\n\r\n    if (this.table.options.groupBy) {\r\n      rows = row.getComponent().getGroup()._getSelf().rows\r\n      index = rows.indexOf(row)\r\n\r\n      if (index) {\r\n        index = rows[index - 1]\r\n      }\r\n    } else {\r\n      index = row.table.rowManager.getRowIndex(row)\r\n\r\n      if (index) {\r\n        index = row.table.rowManager.rows[index - 1]\r\n      }\r\n    }\r\n\r\n    this.action('rowDelete', row, { data: row.getData(), pos: !index, index })\r\n  }\r\n\r\n  cellUpdated(cell) {\r\n    this.action('cellEdit', cell, { oldValue: cell.oldValue, newValue: cell.value })\r\n  }\r\n\r\n  clear() {\r\n    this.history = []\r\n    this.index = -1\r\n  }\r\n\r\n  action(type, component, data) {\r\n    this.history = this.history.slice(0, this.index + 1)\r\n\r\n    this.history.push({\r\n      type,\r\n      component,\r\n      data\r\n    })\r\n\r\n    this.index++\r\n  }\r\n\r\n  getHistoryUndoSize() {\r\n    return this.index + 1\r\n  }\r\n\r\n  getHistoryRedoSize() {\r\n    return this.history.length - (this.index + 1)\r\n  }\r\n\r\n  clearComponentHistory(component) {\r\n    const index = this.history.findIndex(function (item) {\r\n      return item.component === component\r\n    })\r\n\r\n    if (index > -1) {\r\n      this.history.splice(index, 1)\r\n      if (index <= this.index) {\r\n        this.index--\r\n      }\r\n\r\n      this.clearComponentHistory(component)\r\n    }\r\n  }\r\n\r\n  undo() {\r\n    if (this.index > -1) {\r\n      const action = this.history[this.index]\r\n\r\n      History.undoers[action.type].call(this, action)\r\n\r\n      this.index--\r\n\r\n      this.dispatchExternal('historyUndo', action.type, action.component.getComponent(), action.data)\r\n\r\n      return true\r\n    } else {\r\n      console.warn(\r\n        this.options('history') ? 'History Undo Error - No more history to undo' : 'History module not enabled'\r\n      )\r\n      return false\r\n    }\r\n  }\r\n\r\n  redo() {\r\n    if (this.history.length - 1 > this.index) {\r\n      this.index++\r\n\r\n      const action = this.history[this.index]\r\n\r\n      History.redoers[action.type].call(this, action)\r\n\r\n      this.dispatchExternal('historyRedo', action.type, action.component.getComponent(), action.data)\r\n\r\n      return true\r\n    } else {\r\n      console.warn(\r\n        this.options('history') ? 'History Redo Error - No more history to redo' : 'History module not enabled'\r\n      )\r\n      return false\r\n    }\r\n  }\r\n\r\n  // rebind rows to new element after deletion\r\n  _rebindRow(oldRow, newRow) {\r\n    this.history.forEach(function (action) {\r\n      if (action.component instanceof Row) {\r\n        if (action.component === oldRow) {\r\n          action.component = newRow\r\n        }\r\n      } else if (action.component instanceof Cell) {\r\n        if (action.component.row === oldRow) {\r\n          const field = action.component.column.getField()\r\n\r\n          if (field) {\r\n            action.component = newRow.getCell(field)\r\n          }\r\n        }\r\n      }\r\n    })\r\n  }\r\n}\r\n","import csv from './importers/csv.js'\r\nimport json from './importers/json.js'\r\nimport array from './importers/array.js'\r\nimport xlsx from './importers/xlsx.js'\r\n\r\nexport default {\r\n  csv,\r\n  json,\r\n  array,\r\n  xlsx\r\n}\r\n","export default function (input) {\r\n  const data = []\r\n  let row = 0\r\n  let col = 0\r\n  let inQuote = false\r\n\r\n  // Iterate over each character\r\n  for (let index = 0; index < input.length; index++) {\r\n    const char = input[index]\r\n    const nextChar = input[index + 1]\r\n\r\n    // Initialize empty row\r\n    if (!data[row]) {\r\n      data[row] = []\r\n    }\r\n\r\n    // Initialize empty column\r\n    if (!data[row][col]) {\r\n      data[row][col] = ''\r\n    }\r\n\r\n    // Handle quotation mark inside string\r\n    if (char == '\"' && inQuote && nextChar == '\"') {\r\n      data[row][col] += char\r\n      index++\r\n      continue\r\n    }\r\n\r\n    // Begin / End Quote\r\n    if (char == '\"') {\r\n      inQuote = !inQuote\r\n      continue\r\n    }\r\n\r\n    // Next column (if not in quote)\r\n    if (char == ',' && !inQuote) {\r\n      col++\r\n      continue\r\n    }\r\n\r\n    // New row if new line and not in quote (CRLF)\r\n    if (char == '\\r' && nextChar == '\\n' && !inQuote) {\r\n      col = 0\r\n      row++\r\n      index++\r\n      continue\r\n    }\r\n\r\n    // New row if new line and not in quote (CR or LF)\r\n    if ((char == '\\r' || char == '\\n') && !inQuote) {\r\n      col = 0\r\n      row++\r\n      continue\r\n    }\r\n\r\n    // Normal Character, append to column\r\n    data[row][col] += char\r\n  }\r\n\r\n  return data\r\n}\r\n","export default function (input) {\r\n  try {\r\n    return JSON.parse(input)\r\n  } catch (e) {\r\n    console.warn('JSON Import Error - File contents is invalid JSON', e)\r\n    return Promise.reject()\r\n  }\r\n}\r\n","export default function (input) {\r\n  return input\r\n}\r\n","export default function (input) {\r\n  const XLSXLib = this.dependencyRegistry.lookup('XLSX')\r\n  const workbook2 = XLSXLib.read(input)\r\n  const sheet = workbook2.Sheets[workbook2.SheetNames[0]]\r\n\r\n  return XLSXLib.utils.sheet_to_json(sheet, { header: 1 })\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultImporters from './defaults/importers.js'\r\n\r\nexport default class Import extends Module {\r\n  static moduleName = 'import'\r\n\r\n  // load defaults\r\n  static importers = defaultImporters\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.registerTableOption('importFormat')\r\n    this.registerTableOption('importReader', 'text')\r\n    this.registerTableOption('importHeaderTransform')\r\n    this.registerTableOption('importValueTransform')\r\n    this.registerTableOption('importDataValidator')\r\n    this.registerTableOption('importFileValidator')\r\n  }\r\n\r\n  initialize() {\r\n    this.registerTableFunction('import', this.importFromFile.bind(this))\r\n\r\n    if (this.table.options.importFormat) {\r\n      this.subscribe('data-loading', this.loadDataCheck.bind(this), 10)\r\n      this.subscribe('data-load', this.loadData.bind(this), 10)\r\n    }\r\n  }\r\n\r\n  loadDataCheck(data) {\r\n    return (\r\n      this.table.options.importFormat &&\r\n      (typeof data === 'string' || (Array.isArray(data) && data.length && Array.isArray(data)))\r\n    )\r\n  }\r\n\r\n  loadData(data, params, config, silent, previousData) {\r\n    return this.importData(this.lookupImporter(), data)\r\n      .then(this.structureData.bind(this))\r\n      .catch((err) => {\r\n        console.error('Import Error:', err || 'Unable to import data')\r\n        return Promise.reject(err)\r\n      })\r\n  }\r\n\r\n  lookupImporter(importFormat) {\r\n    let importer\r\n\r\n    if (!importFormat) {\r\n      importFormat = this.table.options.importFormat\r\n    }\r\n\r\n    if (typeof importFormat === 'string') {\r\n      importer = Import.importers[importFormat]\r\n    } else {\r\n      importer = importFormat\r\n    }\r\n\r\n    if (!importer) {\r\n      console.error('Import Error - Importer not found:', importFormat)\r\n    }\r\n\r\n    return importer\r\n  }\r\n\r\n  importFromFile(importFormat, extension, importReader) {\r\n    const importer = this.lookupImporter(importFormat)\r\n\r\n    if (importer) {\r\n      return this.pickFile(extension, importReader)\r\n        .then(this.importData.bind(this, importer))\r\n        .then(this.structureData.bind(this))\r\n        .then(this.mutateData.bind(this))\r\n        .then(this.validateData.bind(this))\r\n        .then(this.setData.bind(this))\r\n        .catch((err) => {\r\n          this.dispatch('import-error', err)\r\n          this.dispatchExternal('importError', err)\r\n\r\n          console.error('Import Error:', err || 'Unable to import file')\r\n\r\n          this.table.dataLoader.alertError()\r\n\r\n          setTimeout(() => {\r\n            this.table.dataLoader.clearAlert()\r\n          }, 3000)\r\n\r\n          return Promise.reject(err)\r\n        })\r\n    }\r\n  }\r\n\r\n  pickFile(extensions, importReader) {\r\n    return new Promise((resolve, reject) => {\r\n      const input = document.createElement('input')\r\n      input.type = 'file'\r\n      input.accept = extensions\r\n\r\n      input.addEventListener('change', (e) => {\r\n        const file = input.files[0]\r\n        const reader = new FileReader()\r\n        const valid = this.validateFile(file)\r\n\r\n        if (valid === true) {\r\n          this.dispatch('import-importing', input.files)\r\n          this.dispatchExternal('importImporting', input.files)\r\n\r\n          switch (importReader || this.table.options.importReader) {\r\n            case 'buffer':\r\n              reader.readAsArrayBuffer(file)\r\n              break\r\n\r\n            case 'binary':\r\n              reader.readAsBinaryString(file)\r\n              break\r\n\r\n            case 'url':\r\n              reader.readAsDataURL(file)\r\n              break\r\n\r\n            case 'text':\r\n            default:\r\n              reader.readAsText(file)\r\n          }\r\n\r\n          reader.onload = (e) => {\r\n            resolve(reader.result)\r\n          }\r\n\r\n          reader.onerror = (e) => {\r\n            console.warn('File Load Error - Unable to read file')\r\n            reject(e)\r\n          }\r\n        } else {\r\n          reject(valid)\r\n        }\r\n      })\r\n\r\n      this.dispatch('import-choose')\r\n      this.dispatchExternal('importChoose')\r\n      input.click()\r\n    })\r\n  }\r\n\r\n  importData(importer, fileContents) {\r\n    let data\r\n\r\n    this.table.dataLoader.alertLoader()\r\n\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        data = importer.call(this.table, fileContents)\r\n\r\n        if (data instanceof Promise) {\r\n          resolve(data)\r\n        } else {\r\n          data ? resolve(data) : reject()\r\n        }\r\n      }, 10)\r\n    })\r\n  }\r\n\r\n  structureData(parsedData) {\r\n    let data = []\r\n\r\n    if (Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])) {\r\n      if (this.table.options.autoColumns) {\r\n        data = this.structureArrayToObject(parsedData)\r\n      } else {\r\n        data = this.structureArrayToColumns(parsedData)\r\n      }\r\n\r\n      return data\r\n    } else {\r\n      return parsedData\r\n    }\r\n  }\r\n\r\n  mutateData(data) {\r\n    let output = []\r\n\r\n    if (Array.isArray(data)) {\r\n      data.forEach((row) => {\r\n        output.push(this.table.modules.mutator.transformRow(row, 'import'))\r\n      })\r\n    } else {\r\n      output = data\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  transformHeader(headers) {\r\n    const output = []\r\n\r\n    if (this.table.options.importHeaderTransform) {\r\n      headers.forEach((item) => {\r\n        output.push(this.table.options.importHeaderTransform.call(this.table, item, headers))\r\n      })\r\n    } else {\r\n      return headers\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  transformData(row) {\r\n    const output = []\r\n\r\n    if (this.table.options.importValueTransform) {\r\n      row.forEach((item) => {\r\n        output.push(this.table.options.importValueTransform.call(this.table, item, row))\r\n      })\r\n    } else {\r\n      return row\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  structureArrayToObject(parsedData) {\r\n    const columns = this.transformHeader(parsedData.shift())\r\n\r\n    const data = parsedData.map((values) => {\r\n      const row = {}\r\n\r\n      values = this.transformData(values)\r\n\r\n      columns.forEach((key, i) => {\r\n        row[key] = values[i]\r\n      })\r\n\r\n      return row\r\n    })\r\n\r\n    return data\r\n  }\r\n\r\n  structureArrayToColumns(parsedData) {\r\n    const data = []\r\n    const firstRow = this.transformHeader(parsedData[0])\r\n    const columns = this.table.getColumns()\r\n\r\n    // remove first row if it is the column names\r\n    if (columns[0] && firstRow[0]) {\r\n      if (columns[0].getDefinition().title === firstRow[0]) {\r\n        parsedData.shift()\r\n      }\r\n    }\r\n\r\n    // convert row arrays to objects\r\n    parsedData.forEach((rowData) => {\r\n      const row = {}\r\n\r\n      rowData = this.transformData(rowData)\r\n\r\n      rowData.forEach((value, index) => {\r\n        const column = columns[index]\r\n\r\n        if (column) {\r\n          row[column.getField()] = value\r\n        }\r\n      })\r\n\r\n      data.push(row)\r\n    })\r\n\r\n    return data\r\n  }\r\n\r\n  validateFile(file) {\r\n    if (this.table.options.importFileValidator) {\r\n      return this.table.options.importFileValidator.call(this.table, file)\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  validateData(data) {\r\n    let result\r\n\r\n    if (this.table.options.importDataValidator) {\r\n      result = this.table.options.importDataValidator.call(this.table, data)\r\n\r\n      if (result === true) {\r\n        return data\r\n      } else {\r\n        return Promise.reject(result)\r\n      }\r\n    }\r\n\r\n    return data\r\n  }\r\n\r\n  setData(data) {\r\n    this.dispatch('import-imported', data)\r\n    this.dispatchExternal('importImported', data)\r\n\r\n    this.table.dataLoader.clearAlert()\r\n\r\n    return this.table.setData(data)\r\n  }\r\n}\r\n","export default {\r\n  navPrev: 'shift + 9',\r\n  navNext: 9,\r\n  navUp: 38,\r\n  navDown: 40,\r\n  navLeft: 37,\r\n  navRight: 39,\r\n  scrollPageUp: 33,\r\n  scrollPageDown: 34,\r\n  scrollToStart: 36,\r\n  scrollToEnd: 35\r\n}\r\n","export default {\r\n  keyBlock: function (e) {\r\n    e.stopPropagation()\r\n    e.preventDefault()\r\n  },\r\n\r\n  scrollPageUp: function (e) {\r\n    const rowManager = this.table.rowManager\r\n    const newPos = rowManager.scrollTop - rowManager.element.clientHeight\r\n\r\n    e.preventDefault()\r\n\r\n    if (rowManager.displayRowsCount) {\r\n      if (newPos >= 0) {\r\n        rowManager.element.scrollTop = newPos\r\n      } else {\r\n        rowManager.scrollToRow(rowManager.getDisplayRows()[0])\r\n      }\r\n    }\r\n\r\n    this.table.element.focus()\r\n  },\r\n\r\n  scrollPageDown: function (e) {\r\n    const rowManager = this.table.rowManager\r\n    const newPos = rowManager.scrollTop + rowManager.element.clientHeight\r\n    const scrollMax = rowManager.element.scrollHeight\r\n\r\n    e.preventDefault()\r\n\r\n    if (rowManager.displayRowsCount) {\r\n      if (newPos <= scrollMax) {\r\n        rowManager.element.scrollTop = newPos\r\n      } else {\r\n        rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1])\r\n      }\r\n    }\r\n\r\n    this.table.element.focus()\r\n  },\r\n\r\n  scrollToStart: function (e) {\r\n    const rowManager = this.table.rowManager\r\n\r\n    e.preventDefault()\r\n\r\n    if (rowManager.displayRowsCount) {\r\n      rowManager.scrollToRow(rowManager.getDisplayRows()[0])\r\n    }\r\n\r\n    this.table.element.focus()\r\n  },\r\n\r\n  scrollToEnd: function (e) {\r\n    const rowManager = this.table.rowManager\r\n\r\n    e.preventDefault()\r\n\r\n    if (rowManager.displayRowsCount) {\r\n      rowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1])\r\n    }\r\n\r\n    this.table.element.focus()\r\n  },\r\n\r\n  navPrev: function (e) {\r\n    this.dispatch('keybinding-nav-prev', e)\r\n  },\r\n\r\n  navNext: function (e) {\r\n    this.dispatch('keybinding-nav-next', e)\r\n  },\r\n\r\n  navLeft: function (e) {\r\n    this.dispatch('keybinding-nav-left', e)\r\n  },\r\n\r\n  navRight: function (e) {\r\n    this.dispatch('keybinding-nav-right', e)\r\n  },\r\n\r\n  navUp: function (e) {\r\n    this.dispatch('keybinding-nav-up', e)\r\n  },\r\n\r\n  navDown: function (e) {\r\n    this.dispatch('keybinding-nav-down', e)\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultBindings from './defaults/bindings.js'\r\nimport defaultActions from './defaults/actions.js'\r\n\r\nexport default class Keybindings extends Module {\r\n  static moduleName = 'keybindings'\r\n\r\n  // load defaults\r\n  static bindings = defaultBindings\r\n  static actions = defaultActions\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.watchKeys = null\r\n    this.pressedKeys = null\r\n    this.keyupBinding = false\r\n    this.keydownBinding = false\r\n\r\n    this.registerTableOption('keybindings', {}) // array for keybindings\r\n    this.registerTableOption('tabEndNewRow', false) // create new row when tab to end of table\r\n  }\r\n\r\n  initialize() {\r\n    const bindings = this.table.options.keybindings\r\n    const mergedBindings = {}\r\n\r\n    this.watchKeys = {}\r\n    this.pressedKeys = []\r\n\r\n    if (bindings !== false) {\r\n      Object.assign(mergedBindings, Keybindings.bindings)\r\n      Object.assign(mergedBindings, bindings)\r\n\r\n      this.mapBindings(mergedBindings)\r\n      this.bindEvents()\r\n    }\r\n\r\n    this.subscribe('table-destroy', this.clearBindings.bind(this))\r\n  }\r\n\r\n  mapBindings(bindings) {\r\n    for (const key in bindings) {\r\n      if (Keybindings.actions[key]) {\r\n        if (bindings[key]) {\r\n          if (typeof bindings[key] !== 'object') {\r\n            bindings[key] = [bindings[key]]\r\n          }\r\n\r\n          bindings[key].forEach((binding) => {\r\n            const bindingList = Array.isArray(binding) ? binding : [binding]\r\n\r\n            bindingList.forEach((item) => {\r\n              this.mapBinding(key, item)\r\n            })\r\n          })\r\n        }\r\n      } else {\r\n        console.warn('Key Binding Error - no such action:', key)\r\n      }\r\n    }\r\n  }\r\n\r\n  mapBinding(action, symbolsList) {\r\n    const binding = {\r\n      action: Keybindings.actions[action],\r\n      keys: [],\r\n      ctrl: false,\r\n      shift: false,\r\n      meta: false\r\n    }\r\n\r\n    const symbols = symbolsList.toString().toLowerCase().split(' ').join('').split('+')\r\n\r\n    symbols.forEach((symbol) => {\r\n      switch (symbol) {\r\n        case 'ctrl':\r\n          binding.ctrl = true\r\n          break\r\n\r\n        case 'shift':\r\n          binding.shift = true\r\n          break\r\n\r\n        case 'meta':\r\n          binding.meta = true\r\n          break\r\n\r\n        default:\r\n          symbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol)\r\n          binding.keys.push(symbol)\r\n\r\n          if (!this.watchKeys[symbol]) {\r\n            this.watchKeys[symbol] = []\r\n          }\r\n\r\n          this.watchKeys[symbol].push(binding)\r\n      }\r\n    })\r\n  }\r\n\r\n  bindEvents() {\r\n    const self = this\r\n\r\n    this.keyupBinding = function (e) {\r\n      const code = e.keyCode\r\n      const bindings = self.watchKeys[code]\r\n\r\n      if (bindings) {\r\n        self.pressedKeys.push(code)\r\n\r\n        bindings.forEach(function (binding) {\r\n          self.checkBinding(e, binding)\r\n        })\r\n      }\r\n    }\r\n\r\n    this.keydownBinding = function (e) {\r\n      const code = e.keyCode\r\n      const bindings = self.watchKeys[code]\r\n\r\n      if (bindings) {\r\n        const index = self.pressedKeys.indexOf(code)\r\n\r\n        if (index > -1) {\r\n          self.pressedKeys.splice(index, 1)\r\n        }\r\n      }\r\n    }\r\n\r\n    this.table.element.addEventListener('keydown', this.keyupBinding)\r\n\r\n    this.table.element.addEventListener('keyup', this.keydownBinding)\r\n  }\r\n\r\n  clearBindings() {\r\n    if (this.keyupBinding) {\r\n      this.table.element.removeEventListener('keydown', this.keyupBinding)\r\n    }\r\n\r\n    if (this.keydownBinding) {\r\n      this.table.element.removeEventListener('keyup', this.keydownBinding)\r\n    }\r\n  }\r\n\r\n  checkBinding(e, binding) {\r\n    let match = true\r\n\r\n    if (e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta) {\r\n      binding.keys.forEach((key) => {\r\n        const index = this.pressedKeys.indexOf(key)\r\n\r\n        if (index == -1) {\r\n          match = false\r\n        }\r\n      })\r\n\r\n      if (match) {\r\n        binding.action.call(this, e)\r\n      }\r\n\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n}\r\n","export default {\r\n  delete: function (fromRow, toRow, toTable) {\r\n    fromRow.delete()\r\n  }\r\n}\r\n","export default {\r\n  insert: function (fromRow, toRow, fromTable) {\r\n    this.table.addRow(fromRow.getData(), undefined, toRow)\r\n    return true\r\n  },\r\n\r\n  add: function (fromRow, toRow, fromTable) {\r\n    this.table.addRow(fromRow.getData())\r\n    return true\r\n  },\r\n\r\n  update: function (fromRow, toRow, fromTable) {\r\n    if (toRow) {\r\n      toRow.update(fromRow.getData())\r\n      return true\r\n    }\r\n\r\n    return false\r\n  },\r\n\r\n  replace: function (fromRow, toRow, fromTable) {\r\n    if (toRow) {\r\n      this.table.addRow(fromRow.getData(), undefined, toRow)\r\n      toRow.delete()\r\n      return true\r\n    }\r\n\r\n    return false\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\nimport Helpers from '../../core/tools/Helpers.js'\r\n\r\nimport defaultSenders from './defaults/senders.js'\r\nimport defaultReceivers from './defaults/receivers.js'\r\n\r\nexport default class MoveRows extends Module {\r\n  static moduleName = 'moveRow'\r\n\r\n  // load defaults\r\n  static senders = defaultSenders\r\n  static receivers = defaultReceivers\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.placeholderElement = this.createPlaceholderElement()\r\n    this.hoverElement = false // floating row header element\r\n    this.checkTimeout = false // click check timeout holder\r\n    this.checkPeriod = 150 // period to wait on mousedown to consider this a move and not a click\r\n    this.moving = false // currently moving row\r\n    this.toRow = false // destination row\r\n    this.toRowAfter = false // position of moving row relative to the destination row\r\n    this.hasHandle = false // row has handle instead of fully movable row\r\n    this.startY = 0 // starting Y position within header element\r\n    this.startX = 0 // starting X position within header element\r\n\r\n    this.moveHover = this.moveHover.bind(this)\r\n    this.endMove = this.endMove.bind(this)\r\n    this.tableRowDropEvent = false\r\n\r\n    this.touchMove = false\r\n\r\n    this.connection = false\r\n    this.connectionSelectorsTables = false\r\n    this.connectionSelectorsElements = false\r\n    this.connectionElements = []\r\n    this.connections = []\r\n\r\n    this.connectedTable = false\r\n    this.connectedRow = false\r\n\r\n    this.registerTableOption('movableRows', false) // enable movable rows\r\n    this.registerTableOption('movableRowsConnectedTables', false) // tables for movable rows to be connected to\r\n    this.registerTableOption('movableRowsConnectedElements', false) // other elements for movable rows to be connected to\r\n    this.registerTableOption('movableRowsSender', false)\r\n    this.registerTableOption('movableRowsReceiver', 'insert')\r\n\r\n    this.registerColumnOption('rowHandle')\r\n  }\r\n\r\n  createPlaceholderElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-row')\r\n    el.classList.add('tabulator-row-placeholder')\r\n\r\n    return el\r\n  }\r\n\r\n  initialize() {\r\n    if (this.table.options.movableRows) {\r\n      this.connectionSelectorsTables = this.table.options.movableRowsConnectedTables\r\n      this.connectionSelectorsElements = this.table.options.movableRowsConnectedElements\r\n\r\n      this.connection = this.connectionSelectorsTables || this.connectionSelectorsElements\r\n\r\n      this.subscribe('cell-init', this.initializeCell.bind(this))\r\n      this.subscribe('column-init', this.initializeColumn.bind(this))\r\n      this.subscribe('row-init', this.initializeRow.bind(this))\r\n    }\r\n  }\r\n\r\n  initializeGroupHeader(group) {\r\n    const self = this\r\n    const config = {}\r\n\r\n    // inter table drag drop\r\n    config.mouseup = function (e) {\r\n      self.tableRowDrop(e, group)\r\n    }\r\n\r\n    // same table drag drop\r\n    config.mousemove = function (e) {\r\n      let rowEl\r\n\r\n      if (\r\n        e.pageY - Helpers.elOffset(group.element).top + self.table.rowManager.element.scrollTop >\r\n        group.getHeight() / 2\r\n      ) {\r\n        if (self.toRow !== group || !self.toRowAfter) {\r\n          rowEl = group.getElement()\r\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling)\r\n          self.moveRow(group, true)\r\n        }\r\n      } else {\r\n        if (self.toRow !== group || self.toRowAfter) {\r\n          rowEl = group.getElement()\r\n          if (rowEl.previousSibling) {\r\n            rowEl.parentNode.insertBefore(self.placeholderElement, rowEl)\r\n            self.moveRow(group, false)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    group.modules.moveRow = config\r\n  }\r\n\r\n  initializeRow(row) {\r\n    const self = this\r\n    const config = {}\r\n    let rowEl\r\n\r\n    // inter table drag drop\r\n    config.mouseup = function (e) {\r\n      self.tableRowDrop(e, row)\r\n    }\r\n\r\n    // same table drag drop\r\n    config.mousemove = function (e) {\r\n      const rowEl = row.getElement()\r\n\r\n      if (e.pageY - Helpers.elOffset(rowEl).top + self.table.rowManager.element.scrollTop > row.getHeight() / 2) {\r\n        if (self.toRow !== row || !self.toRowAfter) {\r\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling)\r\n          self.moveRow(row, true)\r\n        }\r\n      } else {\r\n        if (self.toRow !== row || self.toRowAfter) {\r\n          rowEl.parentNode.insertBefore(self.placeholderElement, rowEl)\r\n          self.moveRow(row, false)\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!this.hasHandle) {\r\n      rowEl = row.getElement()\r\n\r\n      rowEl.addEventListener('mousedown', function (e) {\r\n        if (e.which === 1) {\r\n          self.checkTimeout = setTimeout(function () {\r\n            self.startMove(e, row)\r\n          }, self.checkPeriod)\r\n        }\r\n      })\r\n\r\n      rowEl.addEventListener('mouseup', function (e) {\r\n        if (e.which === 1) {\r\n          if (self.checkTimeout) {\r\n            clearTimeout(self.checkTimeout)\r\n          }\r\n        }\r\n      })\r\n\r\n      this.bindTouchEvents(row, row.getElement())\r\n    }\r\n\r\n    row.modules.moveRow = config\r\n  }\r\n\r\n  initializeColumn(column) {\r\n    if (column.definition.rowHandle && this.table.options.movableRows !== false) {\r\n      this.hasHandle = true\r\n    }\r\n  }\r\n\r\n  initializeCell(cell) {\r\n    if (cell.column.definition.rowHandle && this.table.options.movableRows !== false) {\r\n      const self = this\r\n      const cellEl = cell.getElement(true)\r\n\r\n      cellEl.addEventListener('mousedown', function (e) {\r\n        if (e.which === 1) {\r\n          self.checkTimeout = setTimeout(function () {\r\n            self.startMove(e, cell.row)\r\n          }, self.checkPeriod)\r\n        }\r\n      })\r\n\r\n      cellEl.addEventListener('mouseup', function (e) {\r\n        if (e.which === 1) {\r\n          if (self.checkTimeout) {\r\n            clearTimeout(self.checkTimeout)\r\n          }\r\n        }\r\n      })\r\n\r\n      this.bindTouchEvents(cell.row, cellEl)\r\n    }\r\n  }\r\n\r\n  bindTouchEvents(row, element) {\r\n    let startYMove = false // shifting center position of the cell\r\n    let nextRow\r\n    let prevRow\r\n    let nextRowHeight\r\n    let prevRowHeight\r\n    let nextRowHeightLast\r\n    let prevRowHeightLast\r\n\r\n    element.addEventListener(\r\n      'touchstart',\r\n      (e) => {\r\n        this.checkTimeout = setTimeout(() => {\r\n          this.touchMove = true\r\n          nextRow = row.nextRow()\r\n          nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0\r\n          prevRow = row.prevRow()\r\n          prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0\r\n          nextRowHeightLast = 0\r\n          prevRowHeightLast = 0\r\n          startYMove = false\r\n\r\n          this.startMove(e, row)\r\n        }, this.checkPeriod)\r\n      },\r\n      { passive: true }\r\n    )\r\n    ;(this.moving, this.toRow, this.toRowAfter)\r\n    element.addEventListener('touchmove', (e) => {\r\n      let diff, moveToRow\r\n\r\n      if (this.moving) {\r\n        e.preventDefault()\r\n\r\n        this.moveHover(e)\r\n\r\n        if (!startYMove) {\r\n          startYMove = e.touches[0].pageY\r\n        }\r\n\r\n        diff = e.touches[0].pageY - startYMove\r\n\r\n        if (diff > 0) {\r\n          if (nextRow && diff - nextRowHeightLast > nextRowHeight) {\r\n            moveToRow = nextRow\r\n\r\n            if (moveToRow !== row) {\r\n              startYMove = e.touches[0].pageY\r\n              moveToRow\r\n                .getElement()\r\n                .parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling)\r\n              this.moveRow(moveToRow, true)\r\n            }\r\n          }\r\n        } else {\r\n          if (prevRow && -diff - prevRowHeightLast > prevRowHeight) {\r\n            moveToRow = prevRow\r\n\r\n            if (moveToRow !== row) {\r\n              startYMove = e.touches[0].pageY\r\n              moveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement())\r\n              this.moveRow(moveToRow, false)\r\n            }\r\n          }\r\n        }\r\n\r\n        if (moveToRow) {\r\n          nextRow = moveToRow.nextRow()\r\n          nextRowHeightLast = nextRowHeight\r\n          nextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0\r\n          prevRow = moveToRow.prevRow()\r\n          prevRowHeightLast = prevRowHeight\r\n          prevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0\r\n        }\r\n      }\r\n    })\r\n\r\n    element.addEventListener('touchend', (e) => {\r\n      if (this.checkTimeout) {\r\n        clearTimeout(this.checkTimeout)\r\n      }\r\n      if (this.moving) {\r\n        this.endMove(e)\r\n        this.touchMove = false\r\n      }\r\n    })\r\n  }\r\n\r\n  _bindMouseMove() {\r\n    this.table.rowManager.getDisplayRows().forEach((row) => {\r\n      if ((row.type === 'row' || row.type === 'group') && row.modules.moveRow && row.modules.moveRow.mousemove) {\r\n        row.getElement().addEventListener('mousemove', row.modules.moveRow.mousemove)\r\n      }\r\n    })\r\n  }\r\n\r\n  _unbindMouseMove() {\r\n    this.table.rowManager.getDisplayRows().forEach((row) => {\r\n      if ((row.type === 'row' || row.type === 'group') && row.modules.moveRow && row.modules.moveRow.mousemove) {\r\n        row.getElement().removeEventListener('mousemove', row.modules.moveRow.mousemove)\r\n      }\r\n    })\r\n  }\r\n\r\n  startMove(e, row) {\r\n    const element = row.getElement()\r\n\r\n    this.setStartPosition(e, row)\r\n\r\n    this.moving = row\r\n\r\n    this.table.element.classList.add('tabulator-block-select')\r\n\r\n    // create placeholder\r\n    this.placeholderElement.style.width = row.getWidth() + 'px'\r\n    this.placeholderElement.style.height = row.getHeight() + 'px'\r\n\r\n    if (!this.connection) {\r\n      element.parentNode.insertBefore(this.placeholderElement, element)\r\n      element.parentNode.removeChild(element)\r\n    } else {\r\n      this.table.element.classList.add('tabulator-movingrow-sending')\r\n      this.connectToTables(row)\r\n    }\r\n\r\n    // create hover element\r\n    this.hoverElement = element.cloneNode(true)\r\n    this.hoverElement.classList.add('tabulator-moving')\r\n\r\n    if (this.connection) {\r\n      document.body.appendChild(this.hoverElement)\r\n      this.hoverElement.style.left = '0'\r\n      this.hoverElement.style.top = '0'\r\n      this.hoverElement.style.width = this.table.element.clientWidth + 'px'\r\n      this.hoverElement.style.whiteSpace = 'nowrap'\r\n      this.hoverElement.style.overflow = 'hidden'\r\n      this.hoverElement.style.pointerEvents = 'none'\r\n    } else {\r\n      this.table.rowManager.getTableElement().appendChild(this.hoverElement)\r\n\r\n      this.hoverElement.style.left = '0'\r\n      this.hoverElement.style.top = '0'\r\n\r\n      this._bindMouseMove()\r\n    }\r\n\r\n    document.body.addEventListener('mousemove', this.moveHover)\r\n    document.body.addEventListener('mouseup', this.endMove)\r\n\r\n    this.dispatchExternal('rowMoving', row.getComponent())\r\n\r\n    this.moveHover(e)\r\n  }\r\n\r\n  setStartPosition(e, row) {\r\n    const pageX = this.touchMove ? e.touches[0].pageX : e.pageX\r\n    const pageY = this.touchMove ? e.touches[0].pageY : e.pageY\r\n    let element\r\n    let position\r\n\r\n    element = row.getElement()\r\n    if (this.connection) {\r\n      position = element.getBoundingClientRect()\r\n\r\n      this.startX = position.left - pageX + window.pageXOffset\r\n      this.startY = position.top - pageY + window.pageYOffset\r\n    } else {\r\n      this.startY = pageY - element.getBoundingClientRect().top\r\n    }\r\n  }\r\n\r\n  endMove(e) {\r\n    if (!e || e.which === 1 || this.touchMove) {\r\n      this._unbindMouseMove()\r\n\r\n      if (!this.connection) {\r\n        this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling)\r\n        this.placeholderElement.parentNode.removeChild(this.placeholderElement)\r\n      }\r\n\r\n      this.hoverElement.parentNode.removeChild(this.hoverElement)\r\n\r\n      this.table.element.classList.remove('tabulator-block-select')\r\n\r\n      if (this.toRow) {\r\n        this.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter)\r\n      } else {\r\n        this.dispatchExternal('rowMoveCancelled', this.moving.getComponent())\r\n      }\r\n\r\n      this.moving = false\r\n      this.toRow = false\r\n      this.toRowAfter = false\r\n\r\n      document.body.removeEventListener('mousemove', this.moveHover)\r\n      document.body.removeEventListener('mouseup', this.endMove)\r\n\r\n      if (this.connection) {\r\n        this.table.element.classList.remove('tabulator-movingrow-sending')\r\n        this.disconnectFromTables()\r\n      }\r\n    }\r\n  }\r\n\r\n  moveRow(row, after) {\r\n    this.toRow = row\r\n    this.toRowAfter = after\r\n  }\r\n\r\n  moveHover(e) {\r\n    if (this.connection) {\r\n      this.moveHoverConnections.call(this, e)\r\n    } else {\r\n      this.moveHoverTable.call(this, e)\r\n    }\r\n  }\r\n\r\n  moveHoverTable(e) {\r\n    const rowHolder = this.table.rowManager.getElement()\r\n    const scrollTop = rowHolder.scrollTop\r\n    const yPos = (this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top + scrollTop\r\n\r\n    this.hoverElement.style.top =\r\n      Math.min(yPos - this.startY, this.table.rowManager.element.scrollHeight - this.hoverElement.offsetHeight) + 'px'\r\n  }\r\n\r\n  moveHoverConnections(e) {\r\n    this.hoverElement.style.left = this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX) + 'px'\r\n    this.hoverElement.style.top = this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY) + 'px'\r\n  }\r\n\r\n  elementRowDrop(e, element, row) {\r\n    this.dispatchExternal('movableRowsElementDrop', e, element, row ? row.getComponent() : false)\r\n  }\r\n\r\n  // establish connection with other tables\r\n  connectToTables(row) {\r\n    let connectionTables\r\n\r\n    if (this.connectionSelectorsTables) {\r\n      connectionTables = this.commsConnections(this.connectionSelectorsTables)\r\n\r\n      this.dispatchExternal('movableRowsSendingStart', connectionTables)\r\n\r\n      this.commsSend(this.connectionSelectorsTables, 'moveRow', 'connect', {\r\n        row\r\n      })\r\n    }\r\n\r\n    if (this.connectionSelectorsElements) {\r\n      this.connectionElements = []\r\n\r\n      if (!Array.isArray(this.connectionSelectorsElements)) {\r\n        this.connectionSelectorsElements = [this.connectionSelectorsElements]\r\n      }\r\n\r\n      this.connectionSelectorsElements.forEach((query) => {\r\n        if (typeof query === 'string') {\r\n          this.connectionElements = this.connectionElements.concat(\r\n            Array.prototype.slice.call(document.querySelectorAll(query))\r\n          )\r\n        } else {\r\n          this.connectionElements.push(query)\r\n        }\r\n      })\r\n\r\n      this.connectionElements.forEach((element) => {\r\n        const dropEvent = (e) => {\r\n          this.elementRowDrop(e, element, this.moving)\r\n        }\r\n\r\n        element.addEventListener('mouseup', dropEvent)\r\n        element.tabulatorElementDropEvent = dropEvent\r\n\r\n        element.classList.add('tabulator-movingrow-receiving')\r\n      })\r\n    }\r\n  }\r\n\r\n  // disconnect from other tables\r\n  disconnectFromTables() {\r\n    let connectionTables\r\n\r\n    if (this.connectionSelectorsTables) {\r\n      connectionTables = this.commsConnections(this.connectionSelectorsTables)\r\n\r\n      this.dispatchExternal('movableRowsSendingStop', connectionTables)\r\n\r\n      this.commsSend(this.connectionSelectorsTables, 'moveRow', 'disconnect')\r\n    }\r\n\r\n    this.connectionElements.forEach((element) => {\r\n      element.classList.remove('tabulator-movingrow-receiving')\r\n      element.removeEventListener('mouseup', element.tabulatorElementDropEvent)\r\n      delete element.tabulatorElementDropEvent\r\n    })\r\n  }\r\n\r\n  // accept incomming connection\r\n  connect(table, row) {\r\n    if (!this.connectedTable) {\r\n      this.connectedTable = table\r\n      this.connectedRow = row\r\n\r\n      this.table.element.classList.add('tabulator-movingrow-receiving')\r\n\r\n      this.table.rowManager.getDisplayRows().forEach((row) => {\r\n        if (row.type === 'row' && row.modules.moveRow && row.modules.moveRow.mouseup) {\r\n          row.getElement().addEventListener('mouseup', row.modules.moveRow.mouseup)\r\n        }\r\n      })\r\n\r\n      this.tableRowDropEvent = this.tableRowDrop.bind(this)\r\n\r\n      this.table.element.addEventListener('mouseup', this.tableRowDropEvent)\r\n\r\n      this.dispatchExternal('movableRowsReceivingStart', row, table)\r\n\r\n      return true\r\n    } else {\r\n      console.warn('Move Row Error - Table cannot accept connection, already connected to table:', this.connectedTable)\r\n      return false\r\n    }\r\n  }\r\n\r\n  // close incoming connection\r\n  disconnect(table) {\r\n    if (table === this.connectedTable) {\r\n      this.connectedTable = false\r\n      this.connectedRow = false\r\n\r\n      this.table.element.classList.remove('tabulator-movingrow-receiving')\r\n\r\n      this.table.rowManager.getDisplayRows().forEach((row) => {\r\n        if (row.type === 'row' && row.modules.moveRow && row.modules.moveRow.mouseup) {\r\n          row.getElement().removeEventListener('mouseup', row.modules.moveRow.mouseup)\r\n        }\r\n      })\r\n\r\n      this.table.element.removeEventListener('mouseup', this.tableRowDropEvent)\r\n\r\n      this.dispatchExternal('movableRowsReceivingStop', table)\r\n    } else {\r\n      console.warn('Move Row Error - trying to disconnect from non connected table')\r\n    }\r\n  }\r\n\r\n  dropComplete(table, row, success) {\r\n    let sender = false\r\n\r\n    if (success) {\r\n      switch (typeof this.table.options.movableRowsSender) {\r\n        case 'string':\r\n          sender = MoveRows.senders[this.table.options.movableRowsSender]\r\n          break\r\n\r\n        case 'function':\r\n          sender = this.table.options.movableRowsSender\r\n          break\r\n      }\r\n\r\n      if (sender) {\r\n        sender.call(\r\n          this,\r\n          this.moving ? this.moving.getComponent() : undefined,\r\n          row ? row.getComponent() : undefined,\r\n          table\r\n        )\r\n      } else {\r\n        if (this.table.options.movableRowsSender) {\r\n          console.warn('Mover Row Error - no matching sender found:', this.table.options.movableRowsSender)\r\n        }\r\n      }\r\n\r\n      this.dispatchExternal('movableRowsSent', this.moving.getComponent(), row ? row.getComponent() : undefined, table)\r\n    } else {\r\n      this.dispatchExternal(\r\n        'movableRowsSentFailed',\r\n        this.moving.getComponent(),\r\n        row ? row.getComponent() : undefined,\r\n        table\r\n      )\r\n    }\r\n\r\n    this.endMove()\r\n  }\r\n\r\n  tableRowDrop(e, row) {\r\n    let receiver = false\r\n    let success = false\r\n\r\n    e.stopImmediatePropagation()\r\n\r\n    switch (typeof this.table.options.movableRowsReceiver) {\r\n      case 'string':\r\n        receiver = MoveRows.receivers[this.table.options.movableRowsReceiver]\r\n        break\r\n\r\n      case 'function':\r\n        receiver = this.table.options.movableRowsReceiver\r\n        break\r\n    }\r\n\r\n    if (receiver) {\r\n      success = receiver.call(\r\n        this,\r\n        this.connectedRow.getComponent(),\r\n        row ? row.getComponent() : undefined,\r\n        this.connectedTable\r\n      )\r\n    } else {\r\n      console.warn('Mover Row Error - no matching receiver found:', this.table.options.movableRowsReceiver)\r\n    }\r\n\r\n    if (success) {\r\n      this.dispatchExternal(\r\n        'movableRowsReceived',\r\n        this.connectedRow.getComponent(),\r\n        row ? row.getComponent() : undefined,\r\n        this.connectedTable\r\n      )\r\n    } else {\r\n      this.dispatchExternal(\r\n        'movableRowsReceivedFailed',\r\n        this.connectedRow.getComponent(),\r\n        row ? row.getComponent() : undefined,\r\n        this.connectedTable\r\n      )\r\n    }\r\n\r\n    this.commsSend(this.connectedTable, 'moveRow', 'dropcomplete', {\r\n      row,\r\n      success\r\n    })\r\n  }\r\n\r\n  commsReceived(table, action, data) {\r\n    switch (action) {\r\n      case 'connect':\r\n        return this.connect(table, data.row)\r\n\r\n      case 'disconnect':\r\n        return this.disconnect(table)\r\n\r\n      case 'dropcomplete':\r\n        return this.dropComplete(table, data.row, data.success)\r\n    }\r\n  }\r\n}\r\n","export default {}\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultMutators from './defaults/mutators.js'\r\n\r\nexport default class Mutator extends Module {\r\n  static moduleName = 'mutator'\r\n\r\n  // load defaults\r\n  static mutators = defaultMutators\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.allowedTypes = ['', 'data', 'edit', 'clipboard', 'import'] // list of mutation types\r\n    this.enabled = true\r\n\r\n    this.registerColumnOption('mutator')\r\n    this.registerColumnOption('mutatorParams')\r\n    this.registerColumnOption('mutatorData')\r\n    this.registerColumnOption('mutatorDataParams')\r\n    this.registerColumnOption('mutatorEdit')\r\n    this.registerColumnOption('mutatorEditParams')\r\n    this.registerColumnOption('mutatorClipboard')\r\n    this.registerColumnOption('mutatorClipboardParams')\r\n    this.registerColumnOption('mutatorImport')\r\n    this.registerColumnOption('mutatorImportParams')\r\n    this.registerColumnOption('mutateLink')\r\n  }\r\n\r\n  initialize() {\r\n    this.subscribe('cell-value-changing', this.transformCell.bind(this))\r\n    this.subscribe('cell-value-changed', this.mutateLink.bind(this))\r\n    this.subscribe('column-layout', this.initializeColumn.bind(this))\r\n    this.subscribe('row-data-init-before', this.rowDataChanged.bind(this))\r\n    this.subscribe('row-data-changing', this.rowDataChanged.bind(this))\r\n  }\r\n\r\n  rowDataChanged(row, tempData, updatedData) {\r\n    return this.transformRow(tempData, 'data', updatedData)\r\n  }\r\n\r\n  // initialize column mutator\r\n  initializeColumn(column) {\r\n    let match = false\r\n    const config = {}\r\n\r\n    this.allowedTypes.forEach((type) => {\r\n      const key = 'mutator' + (type.charAt(0).toUpperCase() + type.slice(1))\r\n      let mutator\r\n\r\n      if (column.definition[key]) {\r\n        mutator = this.lookupMutator(column.definition[key])\r\n\r\n        if (mutator) {\r\n          match = true\r\n\r\n          config[key] = {\r\n            mutator,\r\n            params: column.definition[key + 'Params'] || {}\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    if (match) {\r\n      column.modules.mutate = config\r\n    }\r\n  }\r\n\r\n  lookupMutator(value) {\r\n    let mutator = false\r\n\r\n    // set column mutator\r\n    switch (typeof value) {\r\n      case 'string':\r\n        if (Mutator.mutators[value]) {\r\n          mutator = Mutator.mutators[value]\r\n        } else {\r\n          console.warn('Mutator Error - No such mutator found, ignoring: ', value)\r\n        }\r\n        break\r\n\r\n      case 'function':\r\n        mutator = value\r\n        break\r\n    }\r\n\r\n    return mutator\r\n  }\r\n\r\n  // apply mutator to row\r\n  transformRow(data, type, updatedData) {\r\n    const key = 'mutator' + (type.charAt(0).toUpperCase() + type.slice(1))\r\n    let value\r\n\r\n    // console.log(\"key\", key)\r\n\r\n    if (this.enabled) {\r\n      this.table.columnManager.traverse((column) => {\r\n        let mutator, params, component\r\n\r\n        if (column.modules.mutate) {\r\n          mutator = column.modules.mutate[key] || column.modules.mutate.mutator || false\r\n\r\n          if (mutator) {\r\n            value = column.getFieldValue(typeof updatedData !== 'undefined' ? updatedData : data)\r\n\r\n            if ((type == 'data' && !updatedData) || typeof value !== 'undefined') {\r\n              component = column.getComponent()\r\n              params =\r\n                typeof mutator.params === 'function' ? mutator.params(value, data, type, component) : mutator.params\r\n              column.setFieldValue(data, mutator.mutator(value, data, type, params, component))\r\n            }\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    return data\r\n  }\r\n\r\n  // apply mutator to new cell value\r\n  transformCell(cell, value) {\r\n    if (cell.column.modules.mutate) {\r\n      const mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false\r\n      let tempData = {}\r\n\r\n      if (mutator) {\r\n        tempData = Object.assign(tempData, cell.row.getData())\r\n        cell.column.setFieldValue(tempData, value)\r\n        return mutator.mutator(value, tempData, 'edit', mutator.params, cell.getComponent())\r\n      }\r\n    }\r\n\r\n    return value\r\n  }\r\n\r\n  mutateLink(cell) {\r\n    let links = cell.column.definition.mutateLink\r\n\r\n    if (links) {\r\n      if (!Array.isArray(links)) {\r\n        links = [links]\r\n      }\r\n\r\n      links.forEach((link) => {\r\n        const linkCell = cell.row.getCell(link)\r\n\r\n        if (linkCell) {\r\n          linkCell.setValue(linkCell.getValue(), true, true)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  enable() {\r\n    this.enabled = true\r\n  }\r\n\r\n  disable() {\r\n    this.enabled = false\r\n  }\r\n}\r\n","import rows from './pageCounters/rows.js'\r\nimport pages from './pageCounters/pages.js'\r\n\r\nexport default {\r\n  rows,\r\n  pages\r\n}\r\n","export default function (pageSize, currentRow, currentPage, totalRows, totalPages) {\r\n  const el = document.createElement('span')\r\n  const showingEl = document.createElement('span')\r\n  const valueEl = document.createElement('span')\r\n  const ofEl = document.createElement('span')\r\n  const totalEl = document.createElement('span')\r\n  const rowsEl = document.createElement('span')\r\n\r\n  this.table.modules.localize.langBind('pagination|counter|showing', (value) => {\r\n    showingEl.innerHTML = value\r\n  })\r\n\r\n  this.table.modules.localize.langBind('pagination|counter|of', (value) => {\r\n    ofEl.innerHTML = value\r\n  })\r\n\r\n  this.table.modules.localize.langBind('pagination|counter|rows', (value) => {\r\n    rowsEl.innerHTML = value\r\n  })\r\n\r\n  if (totalRows) {\r\n    valueEl.innerHTML = ' ' + currentRow + '-' + Math.min(currentRow + pageSize - 1, totalRows) + ' '\r\n\r\n    totalEl.innerHTML = ' ' + totalRows + ' '\r\n\r\n    el.appendChild(showingEl)\r\n    el.appendChild(valueEl)\r\n    el.appendChild(ofEl)\r\n    el.appendChild(totalEl)\r\n    el.appendChild(rowsEl)\r\n  } else {\r\n    valueEl.innerHTML = ' 0 '\r\n\r\n    el.appendChild(showingEl)\r\n    el.appendChild(valueEl)\r\n    el.appendChild(rowsEl)\r\n  }\r\n\r\n  return el\r\n}\r\n","export default function (pageSize, currentRow, currentPage, totalRows, totalPages) {\r\n  const el = document.createElement('span')\r\n  const showingEl = document.createElement('span')\r\n  const valueEl = document.createElement('span')\r\n  const ofEl = document.createElement('span')\r\n  const totalEl = document.createElement('span')\r\n  const rowsEl = document.createElement('span')\r\n\r\n  this.table.modules.localize.langBind('pagination|counter|showing', (value) => {\r\n    showingEl.innerHTML = value\r\n  })\r\n\r\n  valueEl.innerHTML = ' ' + currentPage + ' '\r\n\r\n  this.table.modules.localize.langBind('pagination|counter|of', (value) => {\r\n    ofEl.innerHTML = value\r\n  })\r\n\r\n  totalEl.innerHTML = ' ' + totalPages + ' '\r\n\r\n  this.table.modules.localize.langBind('pagination|counter|pages', (value) => {\r\n    rowsEl.innerHTML = value\r\n  })\r\n\r\n  el.appendChild(showingEl)\r\n  el.appendChild(valueEl)\r\n  el.appendChild(ofEl)\r\n  el.appendChild(totalEl)\r\n  el.appendChild(rowsEl)\r\n\r\n  return el\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultPageCounters from './defaults/pageCounters.js'\r\n\r\nexport default class Page extends Module {\r\n  static moduleName = 'page'\r\n\r\n  // load defaults\r\n  static pageCounters = defaultPageCounters\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.mode = 'local'\r\n    this.progressiveLoad = false\r\n\r\n    this.element = null\r\n    this.pageCounterElement = null\r\n    this.pageCounter = null\r\n\r\n    this.size = 0\r\n    this.page = 1\r\n    this.count = 5\r\n    this.max = 1\r\n\r\n    this.remoteRowCountEstimate = null\r\n\r\n    this.initialLoad = true\r\n    this.dataChanging = false // flag to check if data is being changed by this module\r\n\r\n    this.pageSizes = []\r\n\r\n    this.registerTableOption('pagination', false) // set pagination type\r\n    this.registerTableOption('paginationMode', 'local') // local or remote pagination\r\n    this.registerTableOption('paginationSize', false) // set number of rows to a page\r\n    this.registerTableOption('paginationInitialPage', 1) // initial page to show on load\r\n    this.registerTableOption('paginationCounter', false) // set pagination counter\r\n    this.registerTableOption('paginationCounterElement', false) // set pagination counter\r\n    this.registerTableOption('paginationButtonCount', 5) // set count of page button\r\n    this.registerTableOption('paginationSizeSelector', false) // add pagination size selector element\r\n    this.registerTableOption('paginationElement', false) // element to hold pagination numbers\r\n    // this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\r\n    // this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\r\n    this.registerTableOption('paginationAddRow', 'page') // add rows on table or page\r\n    this.registerTableOption('paginationOutOfRange', false) // reset the current page when the last page < this.page, values: false|function|any value accepted by setPage()\r\n\r\n    this.registerTableOption('progressiveLoad', false) // progressive loading\r\n    this.registerTableOption('progressiveLoadDelay', 0) // delay between requests\r\n    this.registerTableOption('progressiveLoadScrollMargin', 0) // margin before scroll begins\r\n\r\n    this.registerTableFunction('setMaxPage', this.setMaxPage.bind(this))\r\n    this.registerTableFunction('setPage', this.setPage.bind(this))\r\n    this.registerTableFunction('setPageToRow', this.userSetPageToRow.bind(this))\r\n    this.registerTableFunction('setPageSize', this.userSetPageSize.bind(this))\r\n    this.registerTableFunction('getPageSize', this.getPageSize.bind(this))\r\n    this.registerTableFunction('previousPage', this.previousPage.bind(this))\r\n    this.registerTableFunction('nextPage', this.nextPage.bind(this))\r\n    this.registerTableFunction('getPage', this.getPage.bind(this))\r\n    this.registerTableFunction('getPageMax', this.getPageMax.bind(this))\r\n\r\n    // register component functions\r\n    this.registerComponentFunction('row', 'pageTo', this.setPageToRow.bind(this))\r\n  }\r\n\r\n  initialize() {\r\n    if (this.table.options.pagination) {\r\n      this.subscribe('row-deleted', this.rowsUpdated.bind(this))\r\n      this.subscribe('row-added', this.rowsUpdated.bind(this))\r\n      this.subscribe('data-processed', this.initialLoadComplete.bind(this))\r\n      this.subscribe('table-built', this.calculatePageSizes.bind(this))\r\n      this.subscribe('footer-redraw', this.footerRedraw.bind(this))\r\n\r\n      if (this.table.options.paginationAddRow == 'page') {\r\n        this.subscribe('row-adding-position', this.rowAddingPosition.bind(this))\r\n      }\r\n\r\n      if (this.table.options.paginationMode === 'remote') {\r\n        this.subscribe('data-params', this.remotePageParams.bind(this))\r\n        this.subscribe('data-loaded', this._parseRemoteData.bind(this))\r\n      }\r\n\r\n      if (this.table.options.progressiveLoad) {\r\n        console.error('Progressive Load Error - Pagination and progressive load cannot be used at the same time')\r\n      }\r\n\r\n      this.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40)\r\n      this.registerDisplayHandler(this.getRows.bind(this), 50)\r\n\r\n      this.createElements()\r\n      this.initializePageCounter()\r\n      this.initializePaginator()\r\n    } else if (this.table.options.progressiveLoad) {\r\n      this.subscribe('data-params', this.remotePageParams.bind(this))\r\n      this.subscribe('data-loaded', this._parseRemoteData.bind(this))\r\n      this.subscribe('table-built', this.calculatePageSizes.bind(this))\r\n      this.subscribe('data-processed', this.initialLoadComplete.bind(this))\r\n\r\n      this.initializeProgressive(this.table.options.progressiveLoad)\r\n\r\n      if (this.table.options.progressiveLoad === 'scroll') {\r\n        this.subscribe('scroll-vertical', this.scrollVertical.bind(this))\r\n      }\r\n    }\r\n  }\r\n\r\n  rowAddingPosition(row, top) {\r\n    const rowManager = this.table.rowManager\r\n    const displayRows = rowManager.getDisplayRows()\r\n    let index\r\n\r\n    if (top) {\r\n      if (displayRows.length) {\r\n        index = displayRows[0]\r\n      } else {\r\n        if (rowManager.activeRows.length) {\r\n          index = rowManager.activeRows[rowManager.activeRows.length - 1]\r\n          top = false\r\n        }\r\n      }\r\n    } else {\r\n      if (displayRows.length) {\r\n        index = displayRows[displayRows.length - 1]\r\n        top = !(displayRows.length < this.size)\r\n      }\r\n    }\r\n\r\n    return { index, top }\r\n  }\r\n\r\n  calculatePageSizes() {\r\n    let testElRow, testElCell\r\n\r\n    if (this.table.options.paginationSize) {\r\n      this.size = this.table.options.paginationSize\r\n    } else {\r\n      testElRow = document.createElement('div')\r\n      testElRow.classList.add('tabulator-row')\r\n      testElRow.style.visibility = 'hidden'\r\n\r\n      testElCell = document.createElement('div')\r\n      testElCell.classList.add('tabulator-cell')\r\n      testElCell.innerHTML = 'Page Row Test'\r\n\r\n      testElRow.appendChild(testElCell)\r\n\r\n      this.table.rowManager.getTableElement().appendChild(testElRow)\r\n\r\n      this.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight)\r\n\r\n      this.table.rowManager.getTableElement().removeChild(testElRow)\r\n    }\r\n\r\n    this.dispatchExternal('pageSizeChanged', this.size)\r\n\r\n    this.generatePageSizeSelectList()\r\n  }\r\n\r\n  initialLoadComplete() {\r\n    this.initialLoad = false\r\n  }\r\n\r\n  remotePageParams(data, config, silent, params) {\r\n    if (!this.initialLoad) {\r\n      if ((this.progressiveLoad && !silent) || (!this.progressiveLoad && !this.dataChanging)) {\r\n        this.reset(true)\r\n      }\r\n    }\r\n\r\n    // configure request params\r\n    params.page = this.page\r\n\r\n    // set page size if defined\r\n    if (this.size) {\r\n      params.size = this.size\r\n    }\r\n\r\n    return params\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Table Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  userSetPageToRow(row) {\r\n    if (this.table.options.pagination) {\r\n      row = this.table.rowManager.findRow(row)\r\n\r\n      if (row) {\r\n        return this.setPageToRow(row)\r\n      }\r\n    }\r\n\r\n    return Promise.reject()\r\n  }\r\n\r\n  userSetPageSize(size) {\r\n    if (this.table.options.pagination) {\r\n      this.setPageSize(size)\r\n      return this.setPage(1)\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n  /// ////////////////////////////////\r\n  /// ////// Internal Logic //////////\r\n  /// ////////////////////////////////\r\n\r\n  scrollVertical(top, dir) {\r\n    let element, diff, margin\r\n    if (!dir && !this.table.dataLoader.loading) {\r\n      element = this.table.rowManager.getElement()\r\n      diff = element.scrollHeight - element.clientHeight - top\r\n      margin = this.table.options.progressiveLoadScrollMargin || element.clientHeight * 2\r\n\r\n      if (diff < margin) {\r\n        this.nextPage().catch(() => {}) // consume the exception thrown when on the last page\r\n      }\r\n    }\r\n  }\r\n\r\n  restOnRenderBefore(rows, renderInPosition) {\r\n    if (!renderInPosition) {\r\n      if (this.mode === 'local') {\r\n        this.reset()\r\n      }\r\n    }\r\n\r\n    return rows\r\n  }\r\n\r\n  rowsUpdated() {\r\n    this.refreshData(true, 'all')\r\n  }\r\n\r\n  createElements() {\r\n    let button\r\n\r\n    this.element = document.createElement('span')\r\n    this.element.classList.add('tabulator-paginator')\r\n\r\n    this.pagesElement = document.createElement('span')\r\n    this.pagesElement.classList.add('tabulator-pages')\r\n\r\n    button = document.createElement('button')\r\n    button.classList.add('tabulator-page')\r\n    button.setAttribute('type', 'button')\r\n    button.setAttribute('role', 'button')\r\n    button.setAttribute('aria-label', '')\r\n    button.setAttribute('title', '')\r\n\r\n    this.firstBut = button.cloneNode(true)\r\n    this.firstBut.setAttribute('data-page', 'first')\r\n\r\n    this.prevBut = button.cloneNode(true)\r\n    this.prevBut.setAttribute('data-page', 'prev')\r\n\r\n    this.nextBut = button.cloneNode(true)\r\n    this.nextBut.setAttribute('data-page', 'next')\r\n\r\n    this.lastBut = button.cloneNode(true)\r\n    this.lastBut.setAttribute('data-page', 'last')\r\n\r\n    if (this.table.options.paginationSizeSelector) {\r\n      this.pageSizeSelect = document.createElement('select')\r\n      this.pageSizeSelect.classList.add('tabulator-page-size')\r\n    }\r\n  }\r\n\r\n  generatePageSizeSelectList() {\r\n    let pageSizes = []\r\n\r\n    if (this.pageSizeSelect) {\r\n      if (Array.isArray(this.table.options.paginationSizeSelector)) {\r\n        pageSizes = this.table.options.paginationSizeSelector\r\n        this.pageSizes = pageSizes\r\n\r\n        if (this.pageSizes.indexOf(this.size) == -1) {\r\n          pageSizes.unshift(this.size)\r\n        }\r\n      } else {\r\n        if (this.pageSizes.indexOf(this.size) == -1) {\r\n          pageSizes = []\r\n\r\n          for (let i = 1; i < 5; i++) {\r\n            pageSizes.push(this.size * i)\r\n          }\r\n\r\n          this.pageSizes = pageSizes\r\n        } else {\r\n          pageSizes = this.pageSizes\r\n        }\r\n      }\r\n\r\n      while (this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild)\r\n\r\n      pageSizes.forEach((item) => {\r\n        const itemEl = document.createElement('option')\r\n        itemEl.value = item\r\n\r\n        if (item === true) {\r\n          this.langBind('pagination|all', function (value) {\r\n            itemEl.innerHTML = value\r\n          })\r\n        } else {\r\n          itemEl.innerHTML = item\r\n        }\r\n\r\n        this.pageSizeSelect.appendChild(itemEl)\r\n      })\r\n\r\n      this.pageSizeSelect.value = this.size\r\n    }\r\n  }\r\n\r\n  initializePageCounter() {\r\n    const counter = this.table.options.paginationCounter\r\n    let pageCounter = null\r\n\r\n    if (counter) {\r\n      if (typeof counter === 'function') {\r\n        pageCounter = counter\r\n      } else {\r\n        pageCounter = Page.pageCounters[counter]\r\n      }\r\n\r\n      if (pageCounter) {\r\n        this.pageCounter = pageCounter\r\n\r\n        this.pageCounterElement = document.createElement('span')\r\n        this.pageCounterElement.classList.add('tabulator-page-counter')\r\n      } else {\r\n        console.warn('Pagination Error - No such page counter found: ', counter)\r\n      }\r\n    }\r\n  }\r\n\r\n  // setup pagination\r\n  initializePaginator(hidden) {\r\n    let pageSelectLabel, paginationCounterHolder\r\n\r\n    if (!hidden) {\r\n      // build pagination element\r\n\r\n      // bind localizations\r\n      this.langBind('pagination|first', (value) => {\r\n        this.firstBut.innerHTML = value\r\n      })\r\n\r\n      this.langBind('pagination|first_title', (value) => {\r\n        this.firstBut.setAttribute('aria-label', value)\r\n        this.firstBut.setAttribute('title', value)\r\n      })\r\n\r\n      this.langBind('pagination|prev', (value) => {\r\n        this.prevBut.innerHTML = value\r\n      })\r\n\r\n      this.langBind('pagination|prev_title', (value) => {\r\n        this.prevBut.setAttribute('aria-label', value)\r\n        this.prevBut.setAttribute('title', value)\r\n      })\r\n\r\n      this.langBind('pagination|next', (value) => {\r\n        this.nextBut.innerHTML = value\r\n      })\r\n\r\n      this.langBind('pagination|next_title', (value) => {\r\n        this.nextBut.setAttribute('aria-label', value)\r\n        this.nextBut.setAttribute('title', value)\r\n      })\r\n\r\n      this.langBind('pagination|last', (value) => {\r\n        this.lastBut.innerHTML = value\r\n      })\r\n\r\n      this.langBind('pagination|last_title', (value) => {\r\n        this.lastBut.setAttribute('aria-label', value)\r\n        this.lastBut.setAttribute('title', value)\r\n      })\r\n\r\n      // click bindings\r\n      this.firstBut.addEventListener('click', () => {\r\n        this.setPage(1)\r\n      })\r\n\r\n      this.prevBut.addEventListener('click', () => {\r\n        this.previousPage()\r\n      })\r\n\r\n      this.nextBut.addEventListener('click', () => {\r\n        this.nextPage()\r\n      })\r\n\r\n      this.lastBut.addEventListener('click', () => {\r\n        this.setPage(this.max)\r\n      })\r\n\r\n      if (this.table.options.paginationElement) {\r\n        this.element = this.table.options.paginationElement\r\n      }\r\n\r\n      if (this.pageSizeSelect) {\r\n        pageSelectLabel = document.createElement('label')\r\n\r\n        this.langBind('pagination|page_size', (value) => {\r\n          this.pageSizeSelect.setAttribute('aria-label', value)\r\n          this.pageSizeSelect.setAttribute('title', value)\r\n          pageSelectLabel.innerHTML = value\r\n        })\r\n\r\n        this.element.appendChild(pageSelectLabel)\r\n        this.element.appendChild(this.pageSizeSelect)\r\n\r\n        this.pageSizeSelect.addEventListener('change', (e) => {\r\n          this.setPageSize(this.pageSizeSelect.value == 'true' ? true : this.pageSizeSelect.value)\r\n          this.setPage(1)\r\n        })\r\n      }\r\n\r\n      // append to DOM\r\n      this.element.appendChild(this.firstBut)\r\n      this.element.appendChild(this.prevBut)\r\n      this.element.appendChild(this.pagesElement)\r\n      this.element.appendChild(this.nextBut)\r\n      this.element.appendChild(this.lastBut)\r\n\r\n      if (!this.table.options.paginationElement) {\r\n        if (this.table.options.paginationCounter) {\r\n          paginationCounterHolder\r\n\r\n          if (this.table.options.paginationCounterElement) {\r\n            if (this.table.options.paginationCounterElement instanceof HTMLElement) {\r\n              this.table.options.paginationCounterElement.appendChild(this.pageCounterElement)\r\n            } else if (typeof this.table.options.paginationCounterElement === 'string') {\r\n              paginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement)\r\n\r\n              if (paginationCounterHolder) {\r\n                paginationCounterHolder.appendChild(this.pageCounterElement)\r\n              } else {\r\n                console.warn(\r\n                  'Pagination Error - Unable to find element matching paginationCounterElement selector:',\r\n                  this.table.options.paginationCounterElement\r\n                )\r\n              }\r\n            }\r\n          } else {\r\n            this.footerAppend(this.pageCounterElement)\r\n          }\r\n        }\r\n\r\n        this.footerAppend(this.element)\r\n      }\r\n\r\n      this.page = this.table.options.paginationInitialPage\r\n      this.count = this.table.options.paginationButtonCount\r\n    }\r\n\r\n    // set default values\r\n    this.mode = this.table.options.paginationMode\r\n  }\r\n\r\n  initializeProgressive(mode) {\r\n    this.initializePaginator(true)\r\n    this.mode = 'progressive_' + mode\r\n    this.progressiveLoad = true\r\n  }\r\n\r\n  trackChanges() {\r\n    this.dispatch('page-changed')\r\n  }\r\n\r\n  // calculate maximum page from number of rows\r\n  setMaxRows(rowCount) {\r\n    if (!rowCount) {\r\n      this.max = 1\r\n    } else {\r\n      this.max = this.size === true ? 1 : Math.ceil(rowCount / this.size)\r\n    }\r\n\r\n    if (this.page > this.max) {\r\n      this.page = this.max\r\n    }\r\n  }\r\n\r\n  // reset to first page without triggering action\r\n  reset(force) {\r\n    if (!this.initialLoad) {\r\n      if (this.mode == 'local' || force) {\r\n        this.page = 1\r\n        this.trackChanges()\r\n      }\r\n    }\r\n  }\r\n\r\n  // set the maximum page\r\n  setMaxPage(max) {\r\n    max = parseInt(max)\r\n\r\n    this.max = max || 1\r\n\r\n    if (this.page > this.max) {\r\n      this.page = this.max\r\n      this.trigger()\r\n    }\r\n  }\r\n\r\n  // set current page number\r\n  setPage(page) {\r\n    switch (page) {\r\n      case 'first':\r\n        return this.setPage(1)\r\n\r\n      case 'prev':\r\n        return this.previousPage()\r\n\r\n      case 'next':\r\n        return this.nextPage()\r\n\r\n      case 'last':\r\n        return this.setPage(this.max)\r\n    }\r\n\r\n    page = parseInt(page)\r\n\r\n    if ((page > 0 && page <= this.max) || this.mode !== 'local') {\r\n      this.page = page\r\n\r\n      this.trackChanges()\r\n\r\n      return this.trigger()\r\n    } else {\r\n      console.warn('Pagination Error - Requested page is out of range of 1 - ' + this.max + ':', page)\r\n      return Promise.reject()\r\n    }\r\n  }\r\n\r\n  setPageToRow(row) {\r\n    const rows = this.displayRows(-1)\r\n    const index = rows.indexOf(row)\r\n\r\n    if (index > -1) {\r\n      const page = this.size === true ? 1 : Math.ceil((index + 1) / this.size)\r\n\r\n      return this.setPage(page)\r\n    } else {\r\n      console.warn('Pagination Error - Requested row is not visible')\r\n      return Promise.reject()\r\n    }\r\n  }\r\n\r\n  setPageSize(size) {\r\n    if (size !== true) {\r\n      size = parseInt(size)\r\n    }\r\n\r\n    if (size > 0) {\r\n      this.size = size\r\n      this.dispatchExternal('pageSizeChanged', size)\r\n    }\r\n\r\n    if (this.pageSizeSelect) {\r\n      // this.pageSizeSelect.value = size;\r\n      this.generatePageSizeSelectList()\r\n    }\r\n\r\n    this.trackChanges()\r\n  }\r\n\r\n  _setPageCounter(totalRows, size, currentRow) {\r\n    let content\r\n\r\n    if (this.pageCounter) {\r\n      if (this.mode === 'remote') {\r\n        size = this.size\r\n        currentRow = (this.page - 1) * this.size + 1\r\n        totalRows = this.remoteRowCountEstimate\r\n      }\r\n\r\n      content = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max)\r\n\r\n      switch (typeof content) {\r\n        case 'object':\r\n          if (content instanceof Node) {\r\n            // clear previous cell contents\r\n            while (this.pageCounterElement.firstChild) {\r\n              this.pageCounterElement.removeChild(this.pageCounterElement.firstChild)\r\n            }\r\n\r\n            this.pageCounterElement.appendChild(content)\r\n          } else {\r\n            this.pageCounterElement.innerHTML = ''\r\n\r\n            if (content != null) {\r\n              console.warn(\r\n                'Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:',\r\n                content\r\n              )\r\n            }\r\n          }\r\n          break\r\n        case 'undefined':\r\n          this.pageCounterElement.innerHTML = ''\r\n          break\r\n        default:\r\n          this.pageCounterElement.innerHTML = content\r\n      }\r\n    }\r\n  }\r\n\r\n  // setup the pagination buttons\r\n  _setPageButtons() {\r\n    const leftSize = Math.floor((this.count - 1) / 2)\r\n    const rightSize = Math.ceil((this.count - 1) / 2)\r\n    const min =\r\n      this.max - this.page + leftSize + 1 < this.count ? this.max - this.count + 1 : Math.max(this.page - leftSize, 1)\r\n    const max = this.page <= rightSize ? Math.min(this.count, this.max) : Math.min(this.page + rightSize, this.max)\r\n\r\n    while (this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild)\r\n\r\n    if (this.page == 1) {\r\n      this.firstBut.disabled = true\r\n      this.prevBut.disabled = true\r\n    } else {\r\n      this.firstBut.disabled = false\r\n      this.prevBut.disabled = false\r\n    }\r\n\r\n    if (this.page == this.max) {\r\n      this.lastBut.disabled = true\r\n      this.nextBut.disabled = true\r\n    } else {\r\n      this.lastBut.disabled = false\r\n      this.nextBut.disabled = false\r\n    }\r\n\r\n    for (let i = min; i <= max; i++) {\r\n      if (i > 0 && i <= this.max) {\r\n        this.pagesElement.appendChild(this._generatePageButton(i))\r\n      }\r\n    }\r\n\r\n    this.footerRedraw()\r\n  }\r\n\r\n  _generatePageButton(page) {\r\n    const button = document.createElement('button')\r\n\r\n    button.classList.add('tabulator-page')\r\n    if (page == this.page) {\r\n      button.classList.add('active')\r\n    }\r\n\r\n    button.setAttribute('type', 'button')\r\n    button.setAttribute('role', 'button')\r\n\r\n    this.langBind('pagination|page_title', (value) => {\r\n      button.setAttribute('aria-label', value + ' ' + page)\r\n      button.setAttribute('title', value + ' ' + page)\r\n    })\r\n\r\n    button.setAttribute('data-page', page)\r\n    button.textContent = page\r\n\r\n    button.addEventListener('click', (e) => {\r\n      this.setPage(page)\r\n    })\r\n\r\n    return button\r\n  }\r\n\r\n  // previous page\r\n  previousPage() {\r\n    if (this.page > 1) {\r\n      this.page--\r\n\r\n      this.trackChanges()\r\n\r\n      return this.trigger()\r\n    } else {\r\n      console.warn('Pagination Error - Previous page would be less than page 1:', 0)\r\n      return Promise.reject()\r\n    }\r\n  }\r\n\r\n  // next page\r\n  nextPage() {\r\n    if (this.page < this.max) {\r\n      this.page++\r\n\r\n      this.trackChanges()\r\n\r\n      return this.trigger()\r\n    } else {\r\n      if (!this.progressiveLoad) {\r\n        console.warn(\r\n          'Pagination Error - Next page would be greater than maximum page of ' + this.max + ':',\r\n          this.max + 1\r\n        )\r\n      }\r\n      return Promise.reject()\r\n    }\r\n  }\r\n\r\n  // return current page number\r\n  getPage() {\r\n    return this.page\r\n  }\r\n\r\n  // return max page number\r\n  getPageMax() {\r\n    return this.max\r\n  }\r\n\r\n  getPageSize(size) {\r\n    return this.size\r\n  }\r\n\r\n  getMode() {\r\n    return this.mode\r\n  }\r\n\r\n  // return appropriate rows for current page\r\n  getRows(data) {\r\n    let actualRowPageSize = 0\r\n    let output\r\n    let start\r\n    let end\r\n    let actualStartRow\r\n\r\n    const actualRows = data.filter((row) => {\r\n      return row.type === 'row'\r\n    })\r\n\r\n    if (this.mode == 'local') {\r\n      output = []\r\n\r\n      this.setMaxRows(data.length)\r\n\r\n      if (this.size === true) {\r\n        start = 0\r\n        end = data.length\r\n      } else {\r\n        start = this.size * (this.page - 1)\r\n        end = start + parseInt(this.size)\r\n      }\r\n\r\n      this._setPageButtons()\r\n\r\n      for (let i = start; i < end; i++) {\r\n        const row = data[i]\r\n\r\n        if (row) {\r\n          output.push(row)\r\n\r\n          if (row.type === 'row') {\r\n            if (!actualStartRow) {\r\n              actualStartRow = row\r\n            }\r\n\r\n            actualRowPageSize++\r\n          }\r\n        }\r\n      }\r\n\r\n      this._setPageCounter(\r\n        actualRows.length,\r\n        actualRowPageSize,\r\n        actualStartRow ? actualRows.indexOf(actualStartRow) + 1 : 0\r\n      )\r\n\r\n      return output\r\n    } else {\r\n      this._setPageButtons()\r\n      this._setPageCounter(actualRows.length)\r\n\r\n      return data.slice(0)\r\n    }\r\n  }\r\n\r\n  trigger() {\r\n    let left\r\n\r\n    switch (this.mode) {\r\n      case 'local':\r\n        left = this.table.rowManager.scrollLeft\r\n\r\n        this.refreshData()\r\n        this.table.rowManager.scrollHorizontal(left)\r\n\r\n        this.dispatchExternal('pageLoaded', this.getPage())\r\n\r\n        return Promise.resolve()\r\n\r\n      case 'remote':\r\n        this.dataChanging = true\r\n        return this.reloadData(null).finally(() => {\r\n          this.dataChanging = false\r\n        })\r\n\r\n      case 'progressive_load':\r\n      case 'progressive_scroll':\r\n        return this.reloadData(null, true)\r\n\r\n      default:\r\n        console.warn('Pagination Error - no such pagination mode:', this.mode)\r\n        return Promise.reject()\r\n    }\r\n  }\r\n\r\n  _parseRemoteData(data) {\r\n    let margin, paginationOutOfRange\r\n\r\n    if (typeof data.last_page === 'undefined') {\r\n      console.warn(\r\n        \"Remote Pagination Error - Server response missing '\" +\r\n          (this.options('dataReceiveParams').last_page || 'last_page') +\r\n          \"' property\"\r\n      )\r\n    }\r\n\r\n    if (data.data) {\r\n      this.max = parseInt(data.last_page) || 1\r\n\r\n      this.remoteRowCountEstimate =\r\n        typeof data.last_row !== 'undefined'\r\n          ? data.last_row\r\n          : data.last_page * this.size - (this.page == data.last_page ? this.size - data.data.length : 0)\r\n\r\n      if (this.progressiveLoad) {\r\n        switch (this.mode) {\r\n          case 'progressive_load':\r\n            if (this.page == 1) {\r\n              this.table.rowManager.setData(data.data, false, this.page == 1)\r\n            } else {\r\n              this.table.rowManager.addRows(data.data)\r\n            }\r\n\r\n            if (this.page < this.max) {\r\n              setTimeout(() => {\r\n                this.nextPage()\r\n              }, this.table.options.progressiveLoadDelay)\r\n            }\r\n            break\r\n\r\n          case 'progressive_scroll':\r\n            data = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data)\r\n\r\n            this.table.rowManager.setData(data, this.page !== 1, this.page == 1)\r\n\r\n            margin = this.table.options.progressiveLoadScrollMargin || this.table.rowManager.element.clientHeight * 2\r\n\r\n            if (this.table.rowManager.element.scrollHeight <= this.table.rowManager.element.clientHeight + margin) {\r\n              if (this.page < this.max) {\r\n                setTimeout(() => {\r\n                  this.nextPage()\r\n                })\r\n              }\r\n            }\r\n            break\r\n        }\r\n\r\n        return false\r\n      } else {\r\n        if (this.page > this.max) {\r\n          console.warn('Remote Pagination Error - Server returned last page value lower than the current page')\r\n\r\n          paginationOutOfRange = this.options('paginationOutOfRange')\r\n\r\n          if (paginationOutOfRange) {\r\n            return this.setPage(\r\n              typeof paginationOutOfRange === 'function'\r\n                ? paginationOutOfRange.call(this, this.page, this.max)\r\n                : paginationOutOfRange\r\n            )\r\n          }\r\n        }\r\n\r\n        // left = this.table.rowManager.scrollLeft;\r\n        this.dispatchExternal('pageLoaded', this.getPage())\r\n        // this.table.rowManager.scrollHorizontal(left);\r\n        // this.table.columnManager.scrollHorizontal(left);\r\n      }\r\n    } else {\r\n      console.warn(\r\n        \"Remote Pagination Error - Server response missing '\" +\r\n          (this.options('dataReceiveParams').data || 'data') +\r\n          \"' property\"\r\n      )\r\n    }\r\n\r\n    return data.data\r\n  }\r\n\r\n  // handle the footer element being redrawn\r\n  footerRedraw() {\r\n    const footer = this.table.footerManager.containerElement\r\n\r\n    if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\r\n      this.pagesElement.style.display = 'none'\r\n    } else {\r\n      this.pagesElement.style.display = ''\r\n\r\n      if (Math.ceil(footer.clientWidth) - footer.scrollWidth < 0) {\r\n        this.pagesElement.style.display = 'none'\r\n      }\r\n    }\r\n  }\r\n}\r\n","// read persistance information from storage\r\nexport default {\r\n  local: function (id, type) {\r\n    const data = localStorage.getItem(id + '-' + type)\r\n\r\n    return data ? JSON.parse(data) : false\r\n  },\r\n  cookie: function (id, type) {\r\n    let cookie = document.cookie\r\n    const key = id + '-' + type\r\n    const cookiePos = cookie.indexOf(key + '=')\r\n    let end\r\n    let data\r\n\r\n    // if cookie exists, decode and load column data into tabulator\r\n    if (cookiePos > -1) {\r\n      cookie = cookie.slice(cookiePos)\r\n\r\n      end = cookie.indexOf(';')\r\n\r\n      if (end > -1) {\r\n        cookie = cookie.slice(0, end)\r\n      }\r\n\r\n      data = cookie.replace(key + '=', '')\r\n    }\r\n\r\n    return data ? JSON.parse(data) : false\r\n  }\r\n}\r\n","// write persistence information to storage\r\nexport default {\r\n  local: function (id, type, data) {\r\n    localStorage.setItem(id + '-' + type, JSON.stringify(data))\r\n  },\r\n  cookie: function (id, type, data) {\r\n    const expireDate = new Date()\r\n\r\n    expireDate.setDate(expireDate.getDate() + 10000)\r\n\r\n    document.cookie = id + '-' + type + '=' + JSON.stringify(data) + '; expires=' + expireDate.toUTCString()\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultReaders from './defaults/readers.js'\r\nimport defaultWriters from './defaults/writers.js'\r\n\r\nexport default class Persistence extends Module {\r\n  static moduleName = 'persistence'\r\n\r\n  static moduleInitOrder = -10\r\n\r\n  // load defaults\r\n  static readers = defaultReaders\r\n  static writers = defaultWriters\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.mode = ''\r\n    this.id = ''\r\n    // this.persistProps = [\"field\", \"width\", \"visible\"];\r\n    this.defWatcherBlock = false\r\n    this.config = {}\r\n    this.readFunc = false\r\n    this.writeFunc = false\r\n\r\n    this.registerTableOption('persistence', false)\r\n    this.registerTableOption('persistenceID', '') // key for persistent storage\r\n    this.registerTableOption('persistenceMode', true) // mode for storing persistence information\r\n    this.registerTableOption('persistenceReaderFunc', false) // function for handling persistence data reading\r\n    this.registerTableOption('persistenceWriterFunc', false) // function for handling persistence data writing\r\n  }\r\n\r\n  // Test for whether localStorage is available for use.\r\n  localStorageTest() {\r\n    const testKey = '_tabulator_test'\r\n\r\n    try {\r\n      window.localStorage.setItem(testKey, testKey)\r\n      window.localStorage.removeItem(testKey)\r\n      return true\r\n    } catch (e) {\r\n      return false\r\n    }\r\n  }\r\n\r\n  // setup parameters\r\n  initialize() {\r\n    if (this.table.options.persistence) {\r\n      // determine persistent layout storage type\r\n      const mode = this.table.options.persistenceMode\r\n      const id = this.table.options.persistenceID\r\n      let retrievedData\r\n\r\n      this.mode = mode !== true ? mode : this.localStorageTest() ? 'local' : 'cookie'\r\n\r\n      if (this.table.options.persistenceReaderFunc) {\r\n        if (typeof this.table.options.persistenceReaderFunc === 'function') {\r\n          this.readFunc = this.table.options.persistenceReaderFunc\r\n        } else {\r\n          if (Persistence.readers[this.table.options.persistenceReaderFunc]) {\r\n            this.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc]\r\n          } else {\r\n            console.warn('Persistence Read Error - invalid reader set', this.table.options.persistenceReaderFunc)\r\n          }\r\n        }\r\n      } else {\r\n        if (Persistence.readers[this.mode]) {\r\n          this.readFunc = Persistence.readers[this.mode]\r\n        } else {\r\n          console.warn('Persistence Read Error - invalid reader set', this.mode)\r\n        }\r\n      }\r\n\r\n      if (this.table.options.persistenceWriterFunc) {\r\n        if (typeof this.table.options.persistenceWriterFunc === 'function') {\r\n          this.writeFunc = this.table.options.persistenceWriterFunc\r\n        } else {\r\n          if (Persistence.writers[this.table.options.persistenceWriterFunc]) {\r\n            this.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc]\r\n          } else {\r\n            console.warn('Persistence Write Error - invalid reader set', this.table.options.persistenceWriterFunc)\r\n          }\r\n        }\r\n      } else {\r\n        if (Persistence.writers[this.mode]) {\r\n          this.writeFunc = Persistence.writers[this.mode]\r\n        } else {\r\n          console.warn('Persistence Write Error - invalid writer set', this.mode)\r\n        }\r\n      }\r\n\r\n      // set storage tag\r\n      this.id = 'tabulator-' + (id || this.table.element.getAttribute('id') || '')\r\n\r\n      this.config = {\r\n        sort: this.table.options.persistence === true || this.table.options.persistence.sort,\r\n        filter: this.table.options.persistence === true || this.table.options.persistence.filter,\r\n        headerFilter: this.table.options.persistence === true || this.table.options.persistence.headerFilter,\r\n        group: this.table.options.persistence === true || this.table.options.persistence.group,\r\n        page: this.table.options.persistence === true || this.table.options.persistence.page,\r\n        columns:\r\n          this.table.options.persistence === true\r\n            ? ['title', 'width', 'visible']\r\n            : this.table.options.persistence.columns\r\n      }\r\n\r\n      // load pagination data if needed\r\n      if (this.config.page) {\r\n        retrievedData = this.retrieveData('page')\r\n\r\n        if (retrievedData) {\r\n          if (\r\n            typeof retrievedData.paginationSize !== 'undefined' &&\r\n            (this.config.page === true || this.config.page.size)\r\n          ) {\r\n            this.table.options.paginationSize = retrievedData.paginationSize\r\n          }\r\n\r\n          if (\r\n            typeof retrievedData.paginationInitialPage !== 'undefined' &&\r\n            (this.config.page === true || this.config.page.page)\r\n          ) {\r\n            this.table.options.paginationInitialPage = retrievedData.paginationInitialPage\r\n          }\r\n        }\r\n      }\r\n\r\n      // load group data if needed\r\n      if (this.config.group) {\r\n        retrievedData = this.retrieveData('group')\r\n\r\n        if (retrievedData) {\r\n          if (\r\n            typeof retrievedData.groupBy !== 'undefined' &&\r\n            (this.config.group === true || this.config.group.groupBy)\r\n          ) {\r\n            this.table.options.groupBy = retrievedData.groupBy\r\n          }\r\n          if (\r\n            typeof retrievedData.groupStartOpen !== 'undefined' &&\r\n            (this.config.group === true || this.config.group.groupStartOpen)\r\n          ) {\r\n            this.table.options.groupStartOpen = retrievedData.groupStartOpen\r\n          }\r\n          if (\r\n            typeof retrievedData.groupHeader !== 'undefined' &&\r\n            (this.config.group === true || this.config.group.groupHeader)\r\n          ) {\r\n            this.table.options.groupHeader = retrievedData.groupHeader\r\n          }\r\n        }\r\n      }\r\n\r\n      if (this.config.columns) {\r\n        this.table.options.columns = this.load('columns', this.table.options.columns)\r\n        this.subscribe('column-init', this.initializeColumn.bind(this))\r\n        this.subscribe('column-show', this.save.bind(this, 'columns'))\r\n        this.subscribe('column-hide', this.save.bind(this, 'columns'))\r\n        this.subscribe('column-moved', this.save.bind(this, 'columns'))\r\n      }\r\n\r\n      this.subscribe('table-built', this.tableBuilt.bind(this), 0)\r\n\r\n      this.subscribe('table-redraw', this.tableRedraw.bind(this))\r\n\r\n      this.subscribe('filter-changed', this.eventSave.bind(this, 'filter'))\r\n      this.subscribe('filter-changed', this.eventSave.bind(this, 'headerFilter'))\r\n      this.subscribe('sort-changed', this.eventSave.bind(this, 'sort'))\r\n      this.subscribe('group-changed', this.eventSave.bind(this, 'group'))\r\n      this.subscribe('page-changed', this.eventSave.bind(this, 'page'))\r\n      this.subscribe('column-resized', this.eventSave.bind(this, 'columns'))\r\n      this.subscribe('column-width', this.eventSave.bind(this, 'columns'))\r\n      this.subscribe('layout-refreshed', this.eventSave.bind(this, 'columns'))\r\n    }\r\n\r\n    this.registerTableFunction('getColumnLayout', this.getColumnLayout.bind(this))\r\n    this.registerTableFunction('setColumnLayout', this.setColumnLayout.bind(this))\r\n  }\r\n\r\n  eventSave(type) {\r\n    if (this.config[type]) {\r\n      this.save(type)\r\n    }\r\n  }\r\n\r\n  tableBuilt() {\r\n    let sorters, filters, headerFilters\r\n\r\n    if (this.config.sort) {\r\n      sorters = this.load('sort')\r\n\r\n      if (!sorters === false) {\r\n        this.table.options.initialSort = sorters\r\n      }\r\n    }\r\n\r\n    if (this.config.filter) {\r\n      filters = this.load('filter')\r\n\r\n      if (!filters === false) {\r\n        this.table.options.initialFilter = filters\r\n      }\r\n    }\r\n    if (this.config.headerFilter) {\r\n      headerFilters = this.load('headerFilter')\r\n\r\n      if (!headerFilters === false) {\r\n        this.table.options.initialHeaderFilter = headerFilters\r\n      }\r\n    }\r\n  }\r\n\r\n  tableRedraw(force) {\r\n    if (force && this.config.columns) {\r\n      this.save('columns')\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Table Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  getColumnLayout() {\r\n    return this.parseColumns(this.table.columnManager.getColumns())\r\n  }\r\n\r\n  setColumnLayout(layout) {\r\n    this.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout, true))\r\n    return true\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Internal Logic //////////\r\n  /// ////////////////////////////////\r\n\r\n  initializeColumn(column) {\r\n    let def, keys\r\n\r\n    if (this.config.columns) {\r\n      this.defWatcherBlock = true\r\n\r\n      def = column.getDefinition()\r\n\r\n      keys = this.config.columns === true ? Object.keys(def) : this.config.columns\r\n\r\n      keys.forEach((key) => {\r\n        const props = Object.getOwnPropertyDescriptor(def, key)\r\n        let value = def[key]\r\n\r\n        if (props) {\r\n          Object.defineProperty(def, key, {\r\n            set: (newValue) => {\r\n              value = newValue\r\n\r\n              if (!this.defWatcherBlock) {\r\n                this.save('columns')\r\n              }\r\n\r\n              if (props.set) {\r\n                props.set(newValue)\r\n              }\r\n            },\r\n            get: () => {\r\n              if (props.get) {\r\n                props.get()\r\n              }\r\n              return value\r\n            }\r\n          })\r\n        }\r\n      })\r\n\r\n      this.defWatcherBlock = false\r\n    }\r\n  }\r\n\r\n  // load saved definitions\r\n  load(type, current) {\r\n    let data = this.retrieveData(type)\r\n\r\n    if (current) {\r\n      data = data ? this.mergeDefinition(current, data) : current\r\n    }\r\n\r\n    return data\r\n  }\r\n\r\n  // retrieve data from memory\r\n  retrieveData(type) {\r\n    return this.readFunc ? this.readFunc(this.id, type) : false\r\n  }\r\n\r\n  // merge old and new column definitions\r\n  mergeDefinition(oldCols, newCols, mergeAllNew) {\r\n    const output = []\r\n\r\n    newCols = newCols || []\r\n\r\n    newCols.forEach((column, to) => {\r\n      const from = this._findColumn(oldCols, column)\r\n      let keys\r\n\r\n      if (from) {\r\n        if (mergeAllNew) {\r\n          keys = Object.keys(column)\r\n        } else if (this.config.columns === true || this.config.columns == undefined) {\r\n          keys = Object.keys(from)\r\n          keys.push('width')\r\n        } else {\r\n          keys = this.config.columns\r\n        }\r\n\r\n        keys.forEach((key) => {\r\n          if (key !== 'columns' && typeof column[key] !== 'undefined') {\r\n            from[key] = column[key]\r\n          }\r\n        })\r\n\r\n        if (from.columns) {\r\n          from.columns = this.mergeDefinition(from.columns, column.columns)\r\n        }\r\n\r\n        output.push(from)\r\n      }\r\n    })\r\n\r\n    oldCols.forEach((column, i) => {\r\n      const from = this._findColumn(newCols, column)\r\n\r\n      if (!from) {\r\n        if (output.length > i) {\r\n          output.splice(i, 0, column)\r\n        } else {\r\n          output.push(column)\r\n        }\r\n      }\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  // find matching columns\r\n  _findColumn(columns, subject) {\r\n    const type = subject.columns ? 'group' : subject.field ? 'field' : 'object'\r\n\r\n    return columns.find(function (col) {\r\n      switch (type) {\r\n        case 'group':\r\n          return col.title === subject.title && col.columns.length === subject.columns.length\r\n\r\n        case 'field':\r\n          return col.field === subject.field\r\n\r\n        case 'object':\r\n          return col === subject\r\n      }\r\n    })\r\n  }\r\n\r\n  // save data\r\n  save(type) {\r\n    let data = {}\r\n\r\n    switch (type) {\r\n      case 'columns':\r\n        data = this.parseColumns(this.table.columnManager.getColumns())\r\n        break\r\n\r\n      case 'filter':\r\n        data = this.table.modules.filter.getFilters()\r\n        break\r\n\r\n      case 'headerFilter':\r\n        data = this.table.modules.filter.getHeaderFilters()\r\n        break\r\n\r\n      case 'sort':\r\n        data = this.validateSorters(this.table.modules.sort.getSort())\r\n        break\r\n\r\n      case 'group':\r\n        data = this.getGroupConfig()\r\n        break\r\n\r\n      case 'page':\r\n        data = this.getPageConfig()\r\n        break\r\n    }\r\n\r\n    if (this.writeFunc) {\r\n      this.writeFunc(this.id, type, data)\r\n    }\r\n  }\r\n\r\n  // ensure sorters contain no function data\r\n  validateSorters(data) {\r\n    data.forEach(function (item) {\r\n      item.column = item.field\r\n      delete item.field\r\n    })\r\n\r\n    return data\r\n  }\r\n\r\n  getGroupConfig() {\r\n    const data = {}\r\n\r\n    if (this.config.group) {\r\n      if (this.config.group === true || this.config.group.groupBy) {\r\n        data.groupBy = this.table.options.groupBy\r\n      }\r\n\r\n      if (this.config.group === true || this.config.group.groupStartOpen) {\r\n        data.groupStartOpen = this.table.options.groupStartOpen\r\n      }\r\n\r\n      if (this.config.group === true || this.config.group.groupHeader) {\r\n        data.groupHeader = this.table.options.groupHeader\r\n      }\r\n    }\r\n\r\n    return data\r\n  }\r\n\r\n  getPageConfig() {\r\n    const data = {}\r\n\r\n    if (this.config.page) {\r\n      if (this.config.page === true || this.config.page.size) {\r\n        data.paginationSize = this.table.modules.page.getPageSize()\r\n      }\r\n\r\n      if (this.config.page === true || this.config.page.page) {\r\n        data.paginationInitialPage = this.table.modules.page.getPage()\r\n      }\r\n    }\r\n\r\n    return data\r\n  }\r\n\r\n  // parse columns for data to store\r\n  parseColumns(columns) {\r\n    const definitions = []\r\n    const excludedKeys = ['headerContextMenu', 'headerMenu', 'contextMenu', 'clickMenu']\r\n\r\n    columns.forEach((column) => {\r\n      const defStore = {}\r\n      const colDef = column.getDefinition()\r\n      let keys\r\n\r\n      if (column.isGroup) {\r\n        defStore.title = colDef.title\r\n        defStore.columns = this.parseColumns(column.getColumns())\r\n      } else {\r\n        defStore.field = column.getField()\r\n\r\n        if (this.config.columns === true || this.config.columns == undefined) {\r\n          keys = Object.keys(colDef)\r\n          keys.push('width')\r\n          keys.push('visible')\r\n        } else {\r\n          keys = this.config.columns\r\n        }\r\n\r\n        keys.forEach((key) => {\r\n          switch (key) {\r\n            case 'width':\r\n              defStore.width = column.getWidth()\r\n              break\r\n            case 'visible':\r\n              defStore.visible = column.visible\r\n              break\r\n\r\n            default:\r\n              if (typeof colDef[key] !== 'function' && excludedKeys.indexOf(key) === -1) {\r\n                defStore[key] = colDef[key]\r\n              }\r\n          }\r\n        })\r\n      }\r\n\r\n      definitions.push(defStore)\r\n    })\r\n\r\n    return definitions\r\n  }\r\n}\r\n","import responsiveCollapse from './formatters/responsiveCollapse.js'\r\n\r\nexport default {\r\n  format: {\r\n    formatters: {\r\n      responsiveCollapse\r\n    }\r\n  }\r\n}\r\n","export default function (cell, formatterParams, onRendered) {\r\n  const el = document.createElement('div')\r\n  const config = cell.getRow()._row.modules.responsiveLayout\r\n\r\n  el.classList.add('tabulator-responsive-collapse-toggle')\r\n\r\n  el.innerHTML = `<svg class='tabulator-responsive-collapse-toggle-open' viewbox=\"0 0 24 24\">\r\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\r\n  <line y1=\"7\" x1=\"12\" y2=\"17\" x2=\"12\" fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\r\n</svg>\r\n\r\n<svg class='tabulator-responsive-collapse-toggle-close' viewbox=\"0 0 24 24\">\r\n  <line x1=\"7\" y1=\"12\" x2=\"17\" y2=\"12\"  fill=\"none\" stroke-width=\"3\" stroke-linecap=\"round\" />\r\n</svg>`\r\n\r\n  cell.getElement().classList.add('tabulator-row-handle')\r\n\r\n  function toggleList(isOpen) {\r\n    const collapseEl = config.element\r\n\r\n    config.open = isOpen\r\n\r\n    if (collapseEl) {\r\n      if (config.open) {\r\n        el.classList.add('open')\r\n        collapseEl.style.display = ''\r\n      } else {\r\n        el.classList.remove('open')\r\n        collapseEl.style.display = 'none'\r\n      }\r\n    }\r\n  }\r\n\r\n  el.addEventListener('click', function (e) {\r\n    e.stopImmediatePropagation()\r\n    toggleList(!config.open)\r\n    cell.getTable().rowManager.adjustTableSize()\r\n  })\r\n\r\n  toggleList(config.open)\r\n\r\n  return el\r\n}\r\n","import rowSelection from './formatters/rowSelection.js'\r\n\r\nexport default {\r\n  format: {\r\n    formatters: {\r\n      rowSelection\r\n    }\r\n  }\r\n}\r\n","import RowComponent from '../../../../core/row/RowComponent.js'\r\n\r\nexport default function (cell, formatterParams, onRendered) {\r\n  let checkbox = document.createElement('input')\r\n  let blocked = false\r\n\r\n  checkbox.type = 'checkbox'\r\n\r\n  checkbox.setAttribute('aria-label', 'Select Row')\r\n\r\n  if (this.table.modExists('selectRow', true)) {\r\n    checkbox.addEventListener('click', (e) => {\r\n      e.stopPropagation()\r\n    })\r\n\r\n    if (typeof cell.getRow === 'function') {\r\n      const row = cell.getRow()\r\n\r\n      if (row instanceof RowComponent) {\r\n        checkbox.addEventListener('change', (e) => {\r\n          if (this.table.options.selectableRowsRangeMode === 'click') {\r\n            if (!blocked) {\r\n              row.toggleSelect()\r\n            } else {\r\n              blocked = false\r\n            }\r\n          } else {\r\n            row.toggleSelect()\r\n          }\r\n        })\r\n\r\n        if (this.table.options.selectableRowsRangeMode === 'click') {\r\n          checkbox.addEventListener('click', (e) => {\r\n            blocked = true\r\n            this.table.modules.selectRow.handleComplexRowClick(row._row, e)\r\n          })\r\n        }\r\n\r\n        checkbox.checked = row.isSelected && row.isSelected()\r\n        this.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox)\r\n      } else {\r\n        checkbox = ''\r\n      }\r\n    } else {\r\n      checkbox.addEventListener('change', (e) => {\r\n        if (this.table.modules.selectRow.selectedRows.length) {\r\n          this.table.deselectRow()\r\n        } else {\r\n          this.table.selectRow(formatterParams.rowRange)\r\n        }\r\n      })\r\n\r\n      this.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox)\r\n    }\r\n  }\r\n\r\n  return checkbox\r\n}\r\n","export default class RangeComponent {\r\n  constructor(range) {\r\n    this._range = range\r\n\r\n    return new Proxy(this, {\r\n      get: function (target, name, receiver) {\r\n        if (typeof target[name] !== 'undefined') {\r\n          return target[name]\r\n        } else {\r\n          return target._range.table.componentFunctionBinder.handle('range', target._range, name)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  getElement() {\r\n    return this._range.element\r\n  }\r\n\r\n  getData() {\r\n    return this._range.getData()\r\n  }\r\n\r\n  getCells() {\r\n    return this._range.getCells(true, true)\r\n  }\r\n\r\n  getStructuredCells() {\r\n    return this._range.getStructuredCells()\r\n  }\r\n\r\n  getRows() {\r\n    return this._range.getRows().map((row) => row.getComponent())\r\n  }\r\n\r\n  getColumns() {\r\n    return this._range.getColumns().map((column) => column.getComponent())\r\n  }\r\n\r\n  getBounds() {\r\n    return this._range.getBounds()\r\n  }\r\n\r\n  getTopEdge() {\r\n    return this._range.top\r\n  }\r\n\r\n  getBottomEdge() {\r\n    return this._range.bottom\r\n  }\r\n\r\n  getLeftEdge() {\r\n    return this._range.left\r\n  }\r\n\r\n  getRightEdge() {\r\n    return this._range.right\r\n  }\r\n\r\n  setBounds(start, end) {\r\n    if (this._range.destroyedGuard('setBounds')) {\r\n      this._range.setBounds(start ? start._cell : start, end ? end._cell : end)\r\n    }\r\n  }\r\n\r\n  setStartBound(start) {\r\n    if (this._range.destroyedGuard('setStartBound')) {\r\n      this._range.setEndBound(start ? start._cell : start)\r\n      this._range.rangeManager.layoutElement()\r\n    }\r\n  }\r\n\r\n  setEndBound(end) {\r\n    if (this._range.destroyedGuard('setEndBound')) {\r\n      this._range.setEndBound(end ? end._cell : end)\r\n      this._range.rangeManager.layoutElement()\r\n    }\r\n  }\r\n\r\n  clearValues() {\r\n    if (this._range.destroyedGuard('clearValues')) {\r\n      this._range.clearValues()\r\n    }\r\n  }\r\n\r\n  remove() {\r\n    if (this._range.destroyedGuard('remove')) {\r\n      this._range.destroy(true)\r\n    }\r\n  }\r\n}\r\n","import CoreFeature from '../../core/CoreFeature.js'\r\nimport RangeComponent from './RangeComponent'\r\n\r\nexport default class Range extends CoreFeature {\r\n  constructor(table, rangeManager, start, end) {\r\n    super(table)\r\n\r\n    this.rangeManager = rangeManager\r\n    this.element = null\r\n    this.initialized = false\r\n    this.initializing = {\r\n      start: false,\r\n      end: false\r\n    }\r\n    this.destroyed = false\r\n\r\n    this.top = 0\r\n    this.bottom = 0\r\n    this.left = 0\r\n    this.right = 0\r\n\r\n    this.table = table\r\n    this.start = { row: undefined, col: undefined }\r\n    this.end = { row: undefined, col: undefined }\r\n\r\n    if (this.rangeManager.rowHeader) {\r\n      this.left = 1\r\n      this.right = 1\r\n      this.start.col = 1\r\n      this.end.col = 1\r\n    }\r\n\r\n    this.initElement()\r\n\r\n    setTimeout(() => {\r\n      this.initBounds(start, end)\r\n    })\r\n  }\r\n\r\n  initElement() {\r\n    this.element = document.createElement('div')\r\n    this.element.classList.add('tabulator-range')\r\n  }\r\n\r\n  initBounds(start, end) {\r\n    this._updateMinMax()\r\n\r\n    if (start) {\r\n      this.setBounds(start, end || start)\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////   Boundary Setup    ///////\r\n  /// ////////////////////////////////\r\n\r\n  setStart(row, col) {\r\n    if (this.start.row !== row || this.start.col !== col) {\r\n      this.start.row = row\r\n      this.start.col = col\r\n\r\n      this.initializing.start = true\r\n      this._updateMinMax()\r\n    }\r\n  }\r\n\r\n  setEnd(row, col) {\r\n    if (this.end.row !== row || this.end.col !== col) {\r\n      this.end.row = row\r\n      this.end.col = col\r\n\r\n      this.initializing.end = true\r\n      this._updateMinMax()\r\n    }\r\n  }\r\n\r\n  setBounds(start, end, visibleRows) {\r\n    if (start) {\r\n      this.setStartBound(start)\r\n    }\r\n\r\n    this.setEndBound(end || start)\r\n    this.rangeManager.layoutElement(visibleRows)\r\n  }\r\n\r\n  setStartBound(element) {\r\n    let row, col\r\n\r\n    if (element.type === 'column') {\r\n      if (this.rangeManager.columnSelection) {\r\n        this.setStart(0, element.getPosition() - 1)\r\n      }\r\n    } else {\r\n      row = element.row.position - 1\r\n      col = element.column.getPosition() - 1\r\n\r\n      if (element.column === this.rangeManager.rowHeader) {\r\n        this.setStart(row, 1)\r\n      } else {\r\n        this.setStart(row, col)\r\n      }\r\n    }\r\n  }\r\n\r\n  setEndBound(element) {\r\n    const rowsCount = this._getTableRows().length\r\n    let row\r\n    let col\r\n    let isRowHeader\r\n\r\n    if (element.type === 'column') {\r\n      if (this.rangeManager.columnSelection) {\r\n        if (this.rangeManager.selecting === 'column') {\r\n          this.setEnd(rowsCount - 1, element.getPosition() - 1)\r\n        } else if (this.rangeManager.selecting === 'cell') {\r\n          this.setEnd(0, element.getPosition() - 1)\r\n        }\r\n      }\r\n    } else {\r\n      row = element.row.position - 1\r\n      col = element.column.getPosition() - 1\r\n      isRowHeader = element.column === this.rangeManager.rowHeader\r\n\r\n      if (this.rangeManager.selecting === 'row') {\r\n        this.setEnd(row, this._getTableColumns().length - 1)\r\n      } else if (this.rangeManager.selecting !== 'row' && isRowHeader) {\r\n        this.setEnd(row, 0)\r\n      } else if (this.rangeManager.selecting === 'column') {\r\n        this.setEnd(rowsCount - 1, col)\r\n      } else {\r\n        this.setEnd(row, col)\r\n      }\r\n    }\r\n  }\r\n\r\n  _updateMinMax() {\r\n    this.top = Math.min(this.start.row, this.end.row)\r\n    this.bottom = Math.max(this.start.row, this.end.row)\r\n    this.left = Math.min(this.start.col, this.end.col)\r\n    this.right = Math.max(this.start.col, this.end.col)\r\n\r\n    if (this.initialized) {\r\n      this.dispatchExternal('rangeChanged', this.getComponent())\r\n    } else {\r\n      if (this.initializing.start && this.initializing.end) {\r\n        this.initialized = true\r\n        this.dispatchExternal('rangeAdded', this.getComponent())\r\n      }\r\n    }\r\n  }\r\n\r\n  _getTableColumns() {\r\n    return this.table.columnManager.getVisibleColumnsByIndex()\r\n  }\r\n\r\n  _getTableRows() {\r\n    return this.table.rowManager.getDisplayRows().filter((row) => row.type === 'row')\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////      Rendering      ///////\r\n  /// ////////////////////////////////\r\n\r\n  layout() {\r\n    let _vDomTop = this.table.rowManager.renderer.vDomTop\r\n    let _vDomBottom = this.table.rowManager.renderer.vDomBottom\r\n    let _vDomLeft = this.table.columnManager.renderer.leftCol\r\n    let _vDomRight = this.table.columnManager.renderer.rightCol\r\n    let top\r\n    let bottom\r\n    let left\r\n    let right\r\n    let topLeftCell\r\n    let bottomRightCell\r\n    let topLeftCellEl\r\n    let bottomRightCellEl\r\n    let topLeftRowEl\r\n    let bottomRightRowEl\r\n\r\n    if (this.table.options.renderHorizontal === 'virtual' && this.rangeManager.rowHeader) {\r\n      _vDomRight += 1\r\n    }\r\n\r\n    if (_vDomTop == null) {\r\n      _vDomTop = 0\r\n    }\r\n\r\n    if (_vDomBottom == null) {\r\n      _vDomBottom = Infinity\r\n    }\r\n\r\n    if (_vDomLeft == null) {\r\n      _vDomLeft = 0\r\n    }\r\n\r\n    if (_vDomRight == null) {\r\n      _vDomRight = Infinity\r\n    }\r\n\r\n    if (this.overlaps(_vDomLeft, _vDomTop, _vDomRight, _vDomBottom)) {\r\n      top = Math.max(this.top, _vDomTop)\r\n      bottom = Math.min(this.bottom, _vDomBottom)\r\n      left = Math.max(this.left, _vDomLeft)\r\n      right = Math.min(this.right, _vDomRight)\r\n\r\n      topLeftCell = this.rangeManager.getCell(top, left)\r\n      bottomRightCell = this.rangeManager.getCell(bottom, right)\r\n      topLeftCellEl = topLeftCell.getElement()\r\n      bottomRightCellEl = bottomRightCell.getElement()\r\n      topLeftRowEl = topLeftCell.row.getElement()\r\n      bottomRightRowEl = bottomRightCell.row.getElement()\r\n\r\n      this.element.classList.add('tabulator-range-active')\r\n      // this.element.classList.toggle(\"tabulator-range-active\", this === this.rangeManager.activeRange);\r\n\r\n      if (this.table.rtl) {\r\n        this.element.style.right =\r\n          topLeftRowEl.offsetWidth - topLeftCellEl.offsetLeft - topLeftCellEl.offsetWidth + 'px'\r\n        this.element.style.width =\r\n          topLeftCellEl.offsetLeft + topLeftCellEl.offsetWidth - bottomRightCellEl.offsetLeft + 'px'\r\n      } else {\r\n        this.element.style.left = topLeftRowEl.offsetLeft + topLeftCellEl.offsetLeft + 'px'\r\n        this.element.style.width =\r\n          bottomRightCellEl.offsetLeft + bottomRightCellEl.offsetWidth - topLeftCellEl.offsetLeft + 'px'\r\n      }\r\n\r\n      this.element.style.top = topLeftRowEl.offsetTop + 'px'\r\n      this.element.style.height =\r\n        bottomRightRowEl.offsetTop + bottomRightRowEl.offsetHeight - topLeftRowEl.offsetTop + 'px'\r\n    }\r\n  }\r\n\r\n  atTopLeft(cell) {\r\n    return cell.row.position - 1 === this.top && cell.column.getPosition() - 1 === this.left\r\n  }\r\n\r\n  atBottomRight(cell) {\r\n    return cell.row.position - 1 === this.bottom && cell.column.getPosition() - 1 === this.right\r\n  }\r\n\r\n  occupies(cell) {\r\n    return this.occupiesRow(cell.row) && this.occupiesColumn(cell.column)\r\n  }\r\n\r\n  occupiesRow(row) {\r\n    return this.top <= row.position - 1 && row.position - 1 <= this.bottom\r\n  }\r\n\r\n  occupiesColumn(col) {\r\n    return this.left <= col.getPosition() - 1 && col.getPosition() - 1 <= this.right\r\n  }\r\n\r\n  overlaps(left, top, right, bottom) {\r\n    if (this.left > right || left > this.right || this.top > bottom || top > this.bottom) {\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  getData() {\r\n    const data = []\r\n    const rows = this.getRows()\r\n    const columns = this.getColumns()\r\n\r\n    rows.forEach((row) => {\r\n      const rowData = row.getData()\r\n      const result = {}\r\n\r\n      columns.forEach((column) => {\r\n        result[column.field] = rowData[column.field]\r\n      })\r\n\r\n      data.push(result)\r\n    })\r\n\r\n    return data\r\n  }\r\n\r\n  getCells(structured, component) {\r\n    let cells = []\r\n    const rows = this.getRows()\r\n    const columns = this.getColumns()\r\n\r\n    if (structured) {\r\n      cells = rows.map((row) => {\r\n        const arr = []\r\n\r\n        row.getCells().forEach((cell) => {\r\n          if (columns.includes(cell.column)) {\r\n            arr.push(component ? cell.getComponent() : cell)\r\n          }\r\n        })\r\n\r\n        return arr\r\n      })\r\n    } else {\r\n      rows.forEach((row) => {\r\n        row.getCells().forEach((cell) => {\r\n          if (columns.includes(cell.column)) {\r\n            cells.push(component ? cell.getComponent() : cell)\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n    return cells\r\n  }\r\n\r\n  getStructuredCells() {\r\n    return this.getCells(true, true)\r\n  }\r\n\r\n  getRows() {\r\n    return this._getTableRows().slice(this.top, this.bottom + 1)\r\n  }\r\n\r\n  getColumns() {\r\n    return this._getTableColumns().slice(this.left, this.right + 1)\r\n  }\r\n\r\n  clearValues() {\r\n    const cells = this.getCells()\r\n    const clearValue = this.table.options.selectableRangeClearCellsValue\r\n\r\n    this.table.blockRedraw()\r\n\r\n    cells.forEach((cell) => {\r\n      cell.setValue(clearValue)\r\n    })\r\n\r\n    this.table.restoreRedraw()\r\n  }\r\n\r\n  getBounds(component) {\r\n    const cells = this.getCells(false, component)\r\n    const output = {\r\n      start: null,\r\n      end: null\r\n    }\r\n\r\n    if (cells.length) {\r\n      output.start = cells[0]\r\n      output.end = cells[cells.length - 1]\r\n    } else {\r\n      console.warn('No bounds defined on range')\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  getComponent() {\r\n    if (!this.component) {\r\n      this.component = new RangeComponent(this)\r\n    }\r\n    return this.component\r\n  }\r\n\r\n  destroy(notify) {\r\n    this.destroyed = true\r\n\r\n    this.element.remove()\r\n\r\n    if (notify) {\r\n      this.rangeManager.rangeRemoved(this)\r\n    }\r\n\r\n    if (this.initialized) {\r\n      this.dispatchExternal('rangeRemoved', this.getComponent())\r\n    }\r\n  }\r\n\r\n  destroyedGuard(func) {\r\n    if (this.destroyed) {\r\n      console.warn('You cannot call the ' + func + ' function on a destroyed range')\r\n    }\r\n\r\n    return !this.destroyed\r\n  }\r\n}\r\n","export default {\r\n  rangeJumpUp: ['ctrl + 38', 'meta + 38'],\r\n  rangeJumpDown: ['ctrl + 40', 'meta + 40'],\r\n  rangeJumpLeft: ['ctrl + 37', 'meta + 37'],\r\n  rangeJumpRight: ['ctrl + 39', 'meta + 39'],\r\n  rangeExpandUp: 'shift + 38',\r\n  rangeExpandDown: 'shift + 40',\r\n  rangeExpandLeft: 'shift + 37',\r\n  rangeExpandRight: 'shift + 39',\r\n  rangeExpandJumpUp: ['ctrl + shift + 38', 'meta + shift + 38'],\r\n  rangeExpandJumpDown: ['ctrl + shift + 40', 'meta + shift + 40'],\r\n  rangeExpandJumpLeft: ['ctrl + shift + 37', 'meta + shift + 37'],\r\n  rangeExpandJumpRight: ['ctrl + shift + 39', 'meta + shift + 39']\r\n}\r\n","import bindings from './keybindings/bindings.js'\r\nimport actions from './keybindings/actions.js'\r\nimport pasteActions from './clipboard/pasteActions.js'\r\nimport pasteParsers from './clipboard/pasteParsers.js'\r\nimport columnLookups from './export/columnLookups.js'\r\nimport rowLookups from './export/rowLookups.js'\r\n\r\nexport default {\r\n  keybindings: {\r\n    bindings,\r\n    actions\r\n  },\r\n  clipboard: {\r\n    pasteActions,\r\n    pasteParsers\r\n  },\r\n  export: {\r\n    columnLookups,\r\n    rowLookups\r\n  }\r\n}\r\n","export default {\r\n  rangeJumpLeft: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'left', true, false)\r\n  },\r\n  rangeJumpRight: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'right', true, false)\r\n  },\r\n  rangeJumpUp: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'up', true, false)\r\n  },\r\n  rangeJumpDown: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'down', true, false)\r\n  },\r\n  rangeExpandLeft: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'left', false, true)\r\n  },\r\n  rangeExpandRight: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'right', false, true)\r\n  },\r\n  rangeExpandUp: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'up', false, true)\r\n  },\r\n  rangeExpandDown: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'down', false, true)\r\n  },\r\n  rangeExpandJumpLeft: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'left', true, true)\r\n  },\r\n  rangeExpandJumpRight: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'right', true, true)\r\n  },\r\n  rangeExpandJumpUp: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'up', true, true)\r\n  },\r\n  rangeExpandJumpDown: function (e) {\r\n    this.dispatch('keybinding-nav-range', e, 'down', true, true)\r\n  }\r\n}\r\n","export default {\r\n  range: function (data) {\r\n    let rows = []\r\n    const range = this.table.modules.selectRange.activeRange\r\n    let singleCell = false\r\n    let bounds\r\n    let startCell\r\n    let startRow\r\n    let rowWidth\r\n    let dataLength\r\n\r\n    dataLength = data.length\r\n\r\n    if (range) {\r\n      bounds = range.getBounds()\r\n      startCell = bounds.start\r\n\r\n      if (bounds.start === bounds.end) {\r\n        singleCell = true\r\n      }\r\n\r\n      if (startCell) {\r\n        rows = this.table.rowManager.activeRows.slice()\r\n        startRow = rows.indexOf(startCell.row)\r\n\r\n        if (singleCell) {\r\n          rowWidth = data.length\r\n        } else {\r\n          rowWidth = rows.indexOf(bounds.end.row) - startRow + 1\r\n        }\r\n\r\n        if (startRow > -1) {\r\n          this.table.blockRedraw()\r\n\r\n          rows = rows.slice(startRow, startRow + rowWidth)\r\n\r\n          rows.forEach((row, i) => {\r\n            row.updateData(data[i % dataLength])\r\n          })\r\n\r\n          this.table.restoreRedraw()\r\n        }\r\n      }\r\n    }\r\n\r\n    return rows\r\n  }\r\n}\r\n","export default {\r\n  range: function (clipboard) {\r\n    const data = []\r\n    const rows = []\r\n    const range = this.table.modules.selectRange.activeRange\r\n    let singleCell = false\r\n    let bounds\r\n    let startCell\r\n    let colWidth\r\n    let columnMap\r\n    let startCol\r\n\r\n    if (range) {\r\n      bounds = range.getBounds()\r\n      startCell = bounds.start\r\n\r\n      if (bounds.start === bounds.end) {\r\n        singleCell = true\r\n      }\r\n\r\n      if (startCell) {\r\n        // get data from clipboard into array of columns and rows.\r\n        clipboard = clipboard.split('\\n')\r\n\r\n        clipboard.forEach(function (row) {\r\n          data.push(row.split('\\t'))\r\n        })\r\n\r\n        if (data.length) {\r\n          columnMap = this.table.columnManager.getVisibleColumnsByIndex()\r\n          startCol = columnMap.indexOf(startCell.column)\r\n\r\n          if (startCol > -1) {\r\n            if (singleCell) {\r\n              colWidth = data[0].length\r\n            } else {\r\n              colWidth = columnMap.indexOf(bounds.end.column) - startCol + 1\r\n            }\r\n\r\n            columnMap = columnMap.slice(startCol, startCol + colWidth)\r\n\r\n            data.forEach((item) => {\r\n              const row = {}\r\n              const itemLength = item.length\r\n\r\n              columnMap.forEach(function (col, i) {\r\n                row[col.field] = item[i % itemLength]\r\n              })\r\n\r\n              rows.push(row)\r\n            })\r\n\r\n            return rows\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n}\r\n","export default {\r\n  range: function () {\r\n    const columns = this.modules.selectRange.selectedColumns()\r\n\r\n    if (this.columnManager.rowHeader) {\r\n      columns.unshift(this.columnManager.rowHeader)\r\n    }\r\n\r\n    return columns\r\n  }\r\n}\r\n","export default {\r\n  range: function () {\r\n    return this.modules.selectRange.selectedRows()\r\n  }\r\n}\r\n","// sort datetime\r\nexport default function (a, b, aRow, bRow, column, dir, params) {\r\n  const DT = this.table.dependencyRegistry.lookup(['luxon', 'DateTime'], 'DateTime')\r\n  const format = params.format || 'dd/MM/yyyy HH:mm:ss'\r\n  const alignEmptyValues = params.alignEmptyValues\r\n  let emptyAlign = 0\r\n\r\n  if (typeof DT !== 'undefined') {\r\n    if (!DT.isDateTime(a)) {\r\n      if (format === 'iso') {\r\n        a = DT.fromISO(String(a))\r\n      } else {\r\n        a = DT.fromFormat(String(a), format)\r\n      }\r\n    }\r\n\r\n    if (!DT.isDateTime(b)) {\r\n      if (format === 'iso') {\r\n        b = DT.fromISO(String(b))\r\n      } else {\r\n        b = DT.fromFormat(String(b), format)\r\n      }\r\n    }\r\n\r\n    if (!a.isValid) {\r\n      emptyAlign = !b.isValid ? 0 : -1\r\n    } else if (!b.isValid) {\r\n      emptyAlign = 1\r\n    } else {\r\n      // compare valid values\r\n      return a - b\r\n    }\r\n\r\n    // fix empty values in position\r\n    if ((alignEmptyValues === 'top' && dir === 'desc') || (alignEmptyValues === 'bottom' && dir === 'asc')) {\r\n      emptyAlign *= -1\r\n    }\r\n\r\n    return emptyAlign\r\n  } else {\r\n    console.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\")\r\n  }\r\n}\r\n","import number from './sorters/number.js'\r\nimport string from './sorters/string.js'\r\nimport date from './sorters/date.js'\r\nimport time from './sorters/time.js'\r\nimport datetime from './sorters/datetime.js'\r\nimport boolean from './sorters/boolean.js'\r\nimport array from './sorters/array.js'\r\nimport exists from './sorters/exists.js'\r\nimport alphanum from './sorters/alphanum.js'\r\n\r\nexport default {\r\n  number,\r\n  string,\r\n  date,\r\n  time,\r\n  datetime,\r\n  boolean,\r\n  array,\r\n  exists,\r\n  alphanum\r\n}\r\n","// sort numbers\r\nexport default function (a, b, aRow, bRow, column, dir, params) {\r\n  const alignEmptyValues = params.alignEmptyValues\r\n  const decimal = params.decimalSeparator\r\n  const thousand = params.thousandSeparator\r\n  let emptyAlign = 0\r\n\r\n  a = String(a)\r\n  b = String(b)\r\n\r\n  if (thousand) {\r\n    a = a.split(thousand).join('')\r\n    b = b.split(thousand).join('')\r\n  }\r\n\r\n  if (decimal) {\r\n    a = a.split(decimal).join('.')\r\n    b = b.split(decimal).join('.')\r\n  }\r\n\r\n  a = parseFloat(a)\r\n  b = parseFloat(b)\r\n\r\n  // handle non numeric values\r\n  if (isNaN(a)) {\r\n    emptyAlign = isNaN(b) ? 0 : -1\r\n  } else if (isNaN(b)) {\r\n    emptyAlign = 1\r\n  } else {\r\n    // compare valid values\r\n    return a - b\r\n  }\r\n\r\n  // fix empty values in position\r\n  if ((alignEmptyValues === 'top' && dir === 'desc') || (alignEmptyValues === 'bottom' && dir === 'asc')) {\r\n    emptyAlign *= -1\r\n  }\r\n\r\n  return emptyAlign\r\n}\r\n","// sort strings\r\nexport default function (a, b, aRow, bRow, column, dir, params) {\r\n  const alignEmptyValues = params.alignEmptyValues\r\n  let emptyAlign = 0\r\n  let locale\r\n\r\n  // handle empty values\r\n  if (!a) {\r\n    emptyAlign = !b ? 0 : -1\r\n  } else if (!b) {\r\n    emptyAlign = 1\r\n  } else {\r\n    // compare valid values\r\n    switch (typeof params.locale) {\r\n      case 'boolean':\r\n        if (params.locale) {\r\n          locale = this.langLocale()\r\n        }\r\n        break\r\n      case 'string':\r\n        locale = params.locale\r\n        break\r\n    }\r\n\r\n    return String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale)\r\n  }\r\n\r\n  // fix empty values in position\r\n  if ((alignEmptyValues === 'top' && dir === 'desc') || (alignEmptyValues === 'bottom' && dir === 'asc')) {\r\n    emptyAlign *= -1\r\n  }\r\n\r\n  return emptyAlign\r\n}\r\n","import datetime from './datetime.js'\r\n\r\n// sort date\r\nexport default function (a, b, aRow, bRow, column, dir, params) {\r\n  if (!params.format) {\r\n    params.format = 'dd/MM/yyyy'\r\n  }\r\n\r\n  return datetime.call(this, a, b, aRow, bRow, column, dir, params)\r\n}\r\n","import datetime from './datetime.js'\r\n\r\n// sort times\r\nexport default function (a, b, aRow, bRow, column, dir, params) {\r\n  if (!params.format) {\r\n    params.format = 'HH:mm'\r\n  }\r\n\r\n  return datetime.call(this, a, b, aRow, bRow, column, dir, params)\r\n}\r\n","// sort booleans\r\nexport default function (a, b, aRow, bRow, column, dir, params) {\r\n  const el1 = a === true || a === 'true' || a === 'True' || a === 1 ? 1 : 0\r\n  const el2 = b === true || b === 'true' || b === 'True' || b === 1 ? 1 : 0\r\n\r\n  return el1 - el2\r\n}\r\n","import Helpers from '../../../../core/tools/Helpers.js'\r\n\r\n// sort if element contains any data\r\nexport default function (a, b, aRow, bRow, column, dir, params) {\r\n  const type = params.type || 'length'\r\n  const alignEmptyValues = params.alignEmptyValues\r\n  let emptyAlign = 0\r\n  const table = this.table\r\n  let valueMap\r\n\r\n  if (params.valueMap) {\r\n    if (typeof params.valueMap === 'string') {\r\n      valueMap = function (value) {\r\n        return value.map((item) => {\r\n          return Helpers.retrieveNestedData(table.options.nestedFieldSeparator, params.valueMap, item)\r\n        })\r\n      }\r\n    } else {\r\n      valueMap = params.valueMap\r\n    }\r\n  }\r\n\r\n  function calc(value) {\r\n    let result\r\n\r\n    if (valueMap) {\r\n      value = valueMap(value)\r\n    }\r\n\r\n    switch (type) {\r\n      case 'length':\r\n        result = value.length\r\n        break\r\n\r\n      case 'sum':\r\n        result = value.reduce(function (c, d) {\r\n          return c + d\r\n        })\r\n        break\r\n\r\n      case 'max':\r\n        result = Math.max.apply(null, value)\r\n        break\r\n\r\n      case 'min':\r\n        result = Math.min.apply(null, value)\r\n        break\r\n\r\n      case 'avg':\r\n        result =\r\n          value.reduce(function (c, d) {\r\n            return c + d\r\n          }) / value.length\r\n        break\r\n\r\n      case 'string':\r\n        result = value.join('')\r\n        break\r\n    }\r\n\r\n    return result\r\n  }\r\n\r\n  // handle non array values\r\n  if (!Array.isArray(a)) {\r\n    emptyAlign = !Array.isArray(b) ? 0 : -1\r\n  } else if (!Array.isArray(b)) {\r\n    emptyAlign = 1\r\n  } else {\r\n    if (type === 'string') {\r\n      return String(calc(a))\r\n        .toLowerCase()\r\n        .localeCompare(String(calc(b)).toLowerCase())\r\n    } else {\r\n      return calc(b) - calc(a)\r\n    }\r\n  }\r\n\r\n  // fix empty values in position\r\n  if ((alignEmptyValues === 'top' && dir === 'desc') || (alignEmptyValues === 'bottom' && dir === 'asc')) {\r\n    emptyAlign *= -1\r\n  }\r\n\r\n  return emptyAlign\r\n}\r\n","// sort if element contains any data\r\nexport default function (a, b, aRow, bRow, column, dir, params) {\r\n  const el1 = typeof a === 'undefined' ? 0 : 1\r\n  const el2 = typeof b === 'undefined' ? 0 : 1\r\n\r\n  return el1 - el2\r\n}\r\n","// sort alpha numeric strings\r\nexport default function (as, bs, aRow, bRow, column, dir, params) {\r\n  let a\r\n  let b\r\n  let a1\r\n  let b1\r\n  let i = 0\r\n  let L\r\n  const rx = /(\\d+)|(\\D+)/g\r\n  const rd = /\\d/\r\n  const alignEmptyValues = params.alignEmptyValues\r\n  let emptyAlign = 0\r\n\r\n  // handle empty values\r\n  if (!as && as !== 0) {\r\n    emptyAlign = !bs && bs !== 0 ? 0 : -1\r\n  } else if (!bs && bs !== 0) {\r\n    emptyAlign = 1\r\n  } else {\r\n    if (isFinite(as) && isFinite(bs)) return as - bs\r\n    a = String(as).toLowerCase()\r\n    b = String(bs).toLowerCase()\r\n    if (a === b) return 0\r\n    if (!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1\r\n    a = a.match(rx)\r\n    b = b.match(rx)\r\n    L = a.length > b.length ? b.length : a.length\r\n    while (i < L) {\r\n      a1 = a[i]\r\n      b1 = b[i++]\r\n      if (a1 !== b1) {\r\n        if (isFinite(a1) && isFinite(b1)) {\r\n          if (a1.charAt(0) === '0') a1 = '.' + a1\r\n          if (b1.charAt(0) === '0') b1 = '.' + b1\r\n          return a1 - b1\r\n        } else return a1 > b1 ? 1 : -1\r\n      }\r\n    }\r\n\r\n    return a.length > b.length\r\n  }\r\n\r\n  // fix empty values in position\r\n  if ((alignEmptyValues === 'top' && dir === 'desc') || (alignEmptyValues === 'bottom' && dir === 'asc')) {\r\n    emptyAlign *= -1\r\n  }\r\n\r\n  return emptyAlign\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultSorters from './defaults/sorters.js'\r\n\r\nexport default class Sort extends Module {\r\n  static moduleName = 'sort'\r\n\r\n  // load defaults\r\n  static sorters = defaultSorters\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.sortList = [] // holder current sort\r\n    this.changed = false // has the sort changed since last render\r\n\r\n    this.registerTableOption('sortMode', 'local') // local or remote sorting\r\n\r\n    this.registerTableOption('initialSort', false) // initial sorting criteria\r\n    this.registerTableOption('columnHeaderSortMulti', true) // multiple or single column sorting\r\n    this.registerTableOption('sortOrderReverse', false) // reverse internal sort ordering\r\n    this.registerTableOption('headerSortElement', \"<div class='tabulator-arrow'></div>\") // header sort element\r\n    this.registerTableOption('headerSortClickElement', 'header') // element which triggers sort when clicked\r\n\r\n    this.registerColumnOption('sorter')\r\n    this.registerColumnOption('sorterParams')\r\n\r\n    this.registerColumnOption('headerSort', true)\r\n    this.registerColumnOption('headerSortStartingDir')\r\n    this.registerColumnOption('headerSortTristate')\r\n  }\r\n\r\n  initialize() {\r\n    this.subscribe('column-layout', this.initializeColumn.bind(this))\r\n    this.subscribe('table-built', this.tableBuilt.bind(this))\r\n    this.registerDataHandler(this.sort.bind(this), 20)\r\n\r\n    this.registerTableFunction('setSort', this.userSetSort.bind(this))\r\n    this.registerTableFunction('getSorters', this.getSort.bind(this))\r\n    this.registerTableFunction('clearSort', this.clearSort.bind(this))\r\n\r\n    if (this.table.options.sortMode === 'remote') {\r\n      this.subscribe('data-params', this.remoteSortParams.bind(this))\r\n    }\r\n  }\r\n\r\n  tableBuilt() {\r\n    if (this.table.options.initialSort) {\r\n      this.setSort(this.table.options.initialSort)\r\n    }\r\n  }\r\n\r\n  remoteSortParams(data, config, silent, params) {\r\n    const sorters = this.getSort()\r\n\r\n    sorters.forEach((item) => {\r\n      delete item.column\r\n    })\r\n\r\n    params.sort = sorters\r\n\r\n    return params\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Table Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  userSetSort(sortList, dir) {\r\n    this.setSort(sortList, dir)\r\n    // this.table.rowManager.sorterRefresh();\r\n    this.refreshSort()\r\n  }\r\n\r\n  clearSort() {\r\n    this.clear()\r\n    // this.table.rowManager.sorterRefresh();\r\n    this.refreshSort()\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Internal Logic //////////\r\n  /// ////////////////////////////////\r\n\r\n  // initialize column header for sorting\r\n  initializeColumn(column) {\r\n    let sorter = false\r\n    let colEl\r\n    let arrowEl\r\n\r\n    switch (typeof column.definition.sorter) {\r\n      case 'string':\r\n        if (Sort.sorters[column.definition.sorter]) {\r\n          sorter = Sort.sorters[column.definition.sorter]\r\n        } else {\r\n          console.warn('Sort Error - No such sorter found: ', column.definition.sorter)\r\n        }\r\n        break\r\n\r\n      case 'function':\r\n        sorter = column.definition.sorter\r\n        break\r\n    }\r\n\r\n    column.modules.sort = {\r\n      sorter,\r\n      dir: 'none',\r\n      params: column.definition.sorterParams || {},\r\n      startingDir: column.definition.headerSortStartingDir || 'asc',\r\n      tristate: column.definition.headerSortTristate\r\n    }\r\n\r\n    if (column.definition.headerSort !== false) {\r\n      colEl = column.getElement()\r\n\r\n      colEl.classList.add('tabulator-sortable')\r\n\r\n      arrowEl = document.createElement('div')\r\n      arrowEl.classList.add('tabulator-col-sorter')\r\n\r\n      switch (this.table.options.headerSortClickElement) {\r\n        case 'icon':\r\n          arrowEl.classList.add('tabulator-col-sorter-element')\r\n          break\r\n        case 'header':\r\n          colEl.classList.add('tabulator-col-sorter-element')\r\n          break\r\n        default:\r\n          colEl.classList.add('tabulator-col-sorter-element')\r\n          break\r\n      }\r\n\r\n      switch (this.table.options.headerSortElement) {\r\n        case 'function':\r\n          // do nothing\r\n          break\r\n\r\n        case 'object':\r\n          arrowEl.appendChild(this.table.options.headerSortElement)\r\n          break\r\n\r\n        default:\r\n          arrowEl.innerHTML = this.table.options.headerSortElement\r\n      }\r\n\r\n      // create sorter arrow\r\n      column.titleHolderElement.appendChild(arrowEl)\r\n\r\n      column.modules.sort.element = arrowEl\r\n\r\n      this.setColumnHeaderSortIcon(column, 'none')\r\n\r\n      if (this.table.options.headerSortClickElement === 'icon') {\r\n        arrowEl.addEventListener('mousedown', (e) => {\r\n          e.stopPropagation()\r\n        })\r\n      }\r\n\r\n      // sort on click\r\n      ;(this.table.options.headerSortClickElement === 'icon' ? arrowEl : colEl).addEventListener('click', (e) => {\r\n        let dir = ''\r\n        let sorters = []\r\n        let match = false\r\n\r\n        if (column.modules.sort) {\r\n          if (column.modules.sort.tristate) {\r\n            if (column.modules.sort.dir == 'none') {\r\n              dir = column.modules.sort.startingDir\r\n            } else {\r\n              if (column.modules.sort.dir == column.modules.sort.startingDir) {\r\n                dir = column.modules.sort.dir == 'asc' ? 'desc' : 'asc'\r\n              } else {\r\n                dir = 'none'\r\n              }\r\n            }\r\n          } else {\r\n            switch (column.modules.sort.dir) {\r\n              case 'asc':\r\n                dir = 'desc'\r\n                break\r\n\r\n              case 'desc':\r\n                dir = 'asc'\r\n                break\r\n\r\n              default:\r\n                dir = column.modules.sort.startingDir\r\n            }\r\n          }\r\n\r\n          if (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\r\n            sorters = this.getSort()\r\n\r\n            match = sorters.findIndex((sorter) => {\r\n              return sorter.field === column.getField()\r\n            })\r\n\r\n            if (match > -1) {\r\n              sorters[match].dir = dir\r\n\r\n              match = sorters.splice(match, 1)[0]\r\n              if (dir != 'none') {\r\n                sorters.push(match)\r\n              }\r\n            } else {\r\n              if (dir != 'none') {\r\n                sorters.push({ column, dir })\r\n              }\r\n            }\r\n\r\n            // add to existing sort\r\n            this.setSort(sorters)\r\n          } else {\r\n            if (dir == 'none') {\r\n              this.clear()\r\n            } else {\r\n              // sort by column only\r\n              this.setSort(column, dir)\r\n            }\r\n          }\r\n\r\n          // this.table.rowManager.sorterRefresh(!this.sortList.length);\r\n          this.refreshSort()\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  refreshSort() {\r\n    if (this.table.options.sortMode === 'remote') {\r\n      this.reloadData(null, false, false)\r\n    } else {\r\n      this.refreshData(true)\r\n    }\r\n\r\n    // TODO - Persist left position of row manager\r\n    // left = this.scrollLeft;\r\n    // this.scrollHorizontal(left);\r\n  }\r\n\r\n  // check if the sorters have changed since last use\r\n  hasChanged() {\r\n    const changed = this.changed\r\n    this.changed = false\r\n    return changed\r\n  }\r\n\r\n  // return current sorters\r\n  getSort() {\r\n    const self = this\r\n    const sorters = []\r\n\r\n    self.sortList.forEach(function (item) {\r\n      if (item.column) {\r\n        sorters.push({ column: item.column.getComponent(), field: item.column.getField(), dir: item.dir })\r\n      }\r\n    })\r\n\r\n    return sorters\r\n  }\r\n\r\n  // change sort list and trigger sort\r\n  setSort(sortList, dir) {\r\n    const self = this\r\n    const newSortList = []\r\n\r\n    if (!Array.isArray(sortList)) {\r\n      sortList = [{ column: sortList, dir }]\r\n    }\r\n\r\n    sortList.forEach(function (item) {\r\n      let column\r\n\r\n      column = self.table.columnManager.findColumn(item.column)\r\n\r\n      if (column) {\r\n        item.column = column\r\n        newSortList.push(item)\r\n        self.changed = true\r\n      } else {\r\n        console.warn('Sort Warning - Sort field does not exist and is being ignored: ', item.column)\r\n      }\r\n    })\r\n\r\n    self.sortList = newSortList\r\n\r\n    this.dispatch('sort-changed')\r\n  }\r\n\r\n  // clear sorters\r\n  clear() {\r\n    this.setSort([])\r\n  }\r\n\r\n  // find appropriate sorter for column\r\n  findSorter(column) {\r\n    let row = this.table.rowManager.activeRows[0]\r\n    let sorter = 'string'\r\n    let field\r\n    let value\r\n\r\n    if (row) {\r\n      row = row.getData()\r\n      field = column.getField()\r\n\r\n      if (field) {\r\n        value = column.getFieldValue(row)\r\n\r\n        switch (typeof value) {\r\n          case 'undefined':\r\n            sorter = 'string'\r\n            break\r\n\r\n          case 'boolean':\r\n            sorter = 'boolean'\r\n            break\r\n\r\n          default:\r\n            if (!isNaN(value) && value !== '') {\r\n              sorter = 'number'\r\n            } else {\r\n              if (value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)) {\r\n                sorter = 'alphanum'\r\n              }\r\n            }\r\n            break\r\n        }\r\n      }\r\n    }\r\n\r\n    return Sort.sorters[sorter]\r\n  }\r\n\r\n  // work through sort list sorting data\r\n  sort(data, sortOnly) {\r\n    const self = this\r\n    const sortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList\r\n    const sortListActual = []\r\n    const rowComponents = []\r\n\r\n    if (this.subscribedExternal('dataSorting')) {\r\n      this.dispatchExternal('dataSorting', self.getSort())\r\n    }\r\n\r\n    if (!sortOnly) {\r\n      self.clearColumnHeaders()\r\n    }\r\n\r\n    if (this.table.options.sortMode !== 'remote') {\r\n      // build list of valid sorters and trigger column specific callbacks before sort begins\r\n      sortList.forEach(function (item, i) {\r\n        let sortObj\r\n\r\n        if (item.column) {\r\n          sortObj = item.column.modules.sort\r\n\r\n          if (sortObj) {\r\n            // if no sorter has been defined, take a guess\r\n            if (!sortObj.sorter) {\r\n              sortObj.sorter = self.findSorter(item.column)\r\n            }\r\n\r\n            item.params =\r\n              typeof sortObj.params === 'function'\r\n                ? sortObj.params(item.column.getComponent(), item.dir)\r\n                : sortObj.params\r\n\r\n            sortListActual.push(item)\r\n          }\r\n\r\n          if (!sortOnly) {\r\n            self.setColumnHeader(item.column, item.dir)\r\n          }\r\n        }\r\n      })\r\n\r\n      // sort data\r\n      if (sortListActual.length) {\r\n        self._sortItems(data, sortListActual)\r\n      }\r\n    } else if (!sortOnly) {\r\n      sortList.forEach(function (item, i) {\r\n        self.setColumnHeader(item.column, item.dir)\r\n      })\r\n    }\r\n\r\n    if (this.subscribedExternal('dataSorted')) {\r\n      data.forEach((row) => {\r\n        rowComponents.push(row.getComponent())\r\n      })\r\n\r\n      this.dispatchExternal('dataSorted', self.getSort(), rowComponents)\r\n    }\r\n\r\n    return data\r\n  }\r\n\r\n  // clear sort arrows on columns\r\n  clearColumnHeaders() {\r\n    this.table.columnManager.getRealColumns().forEach((column) => {\r\n      if (column.modules.sort) {\r\n        column.modules.sort.dir = 'none'\r\n        column.getElement().setAttribute('aria-sort', 'none')\r\n        this.setColumnHeaderSortIcon(column, 'none')\r\n      }\r\n    })\r\n  }\r\n\r\n  // set the column header sort direction\r\n  setColumnHeader(column, dir) {\r\n    column.modules.sort.dir = dir\r\n    column.getElement().setAttribute('aria-sort', dir === 'asc' ? 'ascending' : 'descending')\r\n    this.setColumnHeaderSortIcon(column, dir)\r\n  }\r\n\r\n  setColumnHeaderSortIcon(column, dir) {\r\n    const sortEl = column.modules.sort.element\r\n    let arrowEl\r\n\r\n    if (column.definition.headerSort && typeof this.table.options.headerSortElement === 'function') {\r\n      while (sortEl.firstChild) sortEl.removeChild(sortEl.firstChild)\r\n\r\n      arrowEl = this.table.options.headerSortElement.call(this.table, column.getComponent(), dir)\r\n\r\n      if (typeof arrowEl === 'object') {\r\n        sortEl.appendChild(arrowEl)\r\n      } else {\r\n        sortEl.innerHTML = arrowEl\r\n      }\r\n    }\r\n  }\r\n\r\n  // sort each item in sort list\r\n  _sortItems(data, sortList) {\r\n    const sorterCount = sortList.length - 1\r\n\r\n    data.sort((a, b) => {\r\n      let result\r\n\r\n      for (let i = sorterCount; i >= 0; i--) {\r\n        const sortItem = sortList[i]\r\n\r\n        result = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params)\r\n\r\n        if (result !== 0) {\r\n          break\r\n        }\r\n      }\r\n\r\n      return result\r\n    })\r\n  }\r\n\r\n  // process individual rows for a sort function on active data\r\n  _sortRow(a, b, column, dir, params) {\r\n    let el1Comp, el2Comp\r\n\r\n    // switch elements depending on search direction\r\n    const el1 = dir == 'asc' ? a : b\r\n    const el2 = dir == 'asc' ? b : a\r\n\r\n    a = column.getFieldValue(el1.getData())\r\n    b = column.getFieldValue(el2.getData())\r\n\r\n    a = typeof a !== 'undefined' ? a : ''\r\n    b = typeof b !== 'undefined' ? b : ''\r\n\r\n    el1Comp = el1.getComponent()\r\n    el2Comp = el2.getComponent()\r\n\r\n    return column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params)\r\n  }\r\n}\r\n","export default class GridCalculator {\r\n  constructor(columns, rows) {\r\n    this.columnCount = columns\r\n    this.rowCount = rows\r\n\r\n    this.columnString = []\r\n    this.columns = []\r\n    this.rows = []\r\n  }\r\n\r\n  genColumns(data) {\r\n    const colCount = Math.max(this.columnCount, Math.max(...data.map((item) => item.length)))\r\n\r\n    this.columnString = []\r\n    this.columns = []\r\n\r\n    for (let i = 1; i <= colCount; i++) {\r\n      this.incrementChar(this.columnString.length - 1)\r\n      this.columns.push(this.columnString.join(''))\r\n    }\r\n\r\n    return this.columns\r\n  }\r\n\r\n  genRows(data) {\r\n    const rowCount = Math.max(this.rowCount, data.length)\r\n\r\n    this.rows = []\r\n\r\n    for (let i = 1; i <= rowCount; i++) {\r\n      this.rows.push(i)\r\n    }\r\n\r\n    return this.rows\r\n  }\r\n\r\n  incrementChar(i) {\r\n    const char = this.columnString[i]\r\n\r\n    if (char) {\r\n      if (char !== 'Z') {\r\n        this.columnString[i] = String.fromCharCode(this.columnString[i].charCodeAt(0) + 1)\r\n      } else {\r\n        this.columnString[i] = 'A'\r\n\r\n        if (i) {\r\n          this.incrementChar(i - 1)\r\n        } else {\r\n          this.columnString.push('A')\r\n        }\r\n      }\r\n    } else {\r\n      this.columnString.push('A')\r\n    }\r\n  }\r\n\r\n  setRowCount(count) {\r\n    this.rowCount = count\r\n  }\r\n\r\n  setColumnCount(count) {\r\n    this.columnCount = count\r\n  }\r\n}\r\n","export default class SheetComponent {\r\n  constructor(sheet) {\r\n    this._sheet = sheet\r\n\r\n    return new Proxy(this, {\r\n      get: function (target, name, receiver) {\r\n        if (typeof target[name] !== 'undefined') {\r\n          return target[name]\r\n        } else {\r\n          return target._sheet.table.componentFunctionBinder.handle('sheet', target._sheet, name)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  getTitle() {\r\n    return this._sheet.title\r\n  }\r\n\r\n  getKey() {\r\n    return this._sheet.key\r\n  }\r\n\r\n  getDefinition() {\r\n    return this._sheet.getDefinition()\r\n  }\r\n\r\n  getData() {\r\n    return this._sheet.getData()\r\n  }\r\n\r\n  setData(data) {\r\n    return this._sheet.setData(data)\r\n  }\r\n\r\n  clear() {\r\n    return this._sheet.clear()\r\n  }\r\n\r\n  remove() {\r\n    return this._sheet.remove()\r\n  }\r\n\r\n  active() {\r\n    return this._sheet.active()\r\n  }\r\n\r\n  setTitle(title) {\r\n    return this._sheet.setTitle(title)\r\n  }\r\n\r\n  setRows(rows) {\r\n    return this._sheet.setRows(rows)\r\n  }\r\n\r\n  setColumns(columns) {\r\n    return this._sheet.setColumns(columns)\r\n  }\r\n}\r\n","import CoreFeature from '../../core/CoreFeature.js'\r\nimport GridCalculator from './GridCalculator'\r\nimport SheetComponent from './SheetComponent'\r\n\r\nexport default class Sheet extends CoreFeature {\r\n  constructor(spreadsheetManager, definition) {\r\n    super(spreadsheetManager.table)\r\n\r\n    this.spreadsheetManager = spreadsheetManager\r\n    this.definition = definition\r\n\r\n    this.title = this.definition.title || ''\r\n    this.key = this.definition.key || this.definition.title\r\n    this.rowCount = this.definition.rows\r\n    this.columnCount = this.definition.columns\r\n    this.data = this.definition.data || []\r\n    this.element = null\r\n    this.isActive = false\r\n\r\n    this.grid = new GridCalculator(this.columnCount, this.rowCount)\r\n\r\n    this.defaultColumnDefinition = { width: 100, headerHozAlign: 'center', headerSort: false }\r\n    this.columnDefinition = Object.assign(this.defaultColumnDefinition, this.options('spreadsheetColumnDefinition'))\r\n\r\n    this.columnDefs = []\r\n    this.rowDefs = []\r\n    this.columnFields = []\r\n    this.columns = []\r\n    this.rows = []\r\n\r\n    this.scrollTop = null\r\n    this.scrollLeft = null\r\n\r\n    this.initialize()\r\n\r\n    this.dispatchExternal('sheetAdded', this.getComponent())\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Initialization //////////\r\n  /// ////////////////////////////////\r\n\r\n  initialize() {\r\n    this.initializeElement()\r\n    this.initializeColumns()\r\n    this.initializeRows()\r\n  }\r\n\r\n  reinitialize() {\r\n    this.initializeColumns()\r\n    this.initializeRows()\r\n  }\r\n\r\n  initializeElement() {\r\n    this.element = document.createElement('div')\r\n    this.element.classList.add('tabulator-spreadsheet-tab')\r\n    this.element.innerText = this.title\r\n\r\n    this.element.addEventListener('click', () => {\r\n      this.spreadsheetManager.loadSheet(this)\r\n    })\r\n  }\r\n\r\n  initializeColumns() {\r\n    this.grid.setColumnCount(this.columnCount)\r\n    this.columnFields = this.grid.genColumns(this.data)\r\n\r\n    this.columnDefs = []\r\n\r\n    this.columnFields.forEach((ref) => {\r\n      const def = Object.assign({}, this.columnDefinition)\r\n      def.field = ref\r\n      def.title = ref\r\n\r\n      this.columnDefs.push(def)\r\n    })\r\n  }\r\n\r\n  initializeRows() {\r\n    let refs\r\n\r\n    this.grid.setRowCount(this.rowCount)\r\n\r\n    refs = this.grid.genRows(this.data)\r\n\r\n    this.rowDefs = []\r\n\r\n    refs.forEach((ref, i) => {\r\n      const def = { _id: ref }\r\n      const data = this.data[i]\r\n\r\n      if (data) {\r\n        data.forEach((val, j) => {\r\n          const field = this.columnFields[j]\r\n\r\n          if (field) {\r\n            def[field] = val\r\n          }\r\n        })\r\n      }\r\n\r\n      this.rowDefs.push(def)\r\n    })\r\n  }\r\n\r\n  unload() {\r\n    this.isActive = false\r\n    this.scrollTop = this.table.rowManager.scrollTop\r\n    this.scrollLeft = this.table.rowManager.scrollLeft\r\n    this.data = this.getData(true)\r\n    this.element.classList.remove('tabulator-spreadsheet-tab-active')\r\n  }\r\n\r\n  load() {\r\n    const wasInactive = !this.isActive\r\n\r\n    this.isActive = true\r\n    this.table.blockRedraw()\r\n    this.table.setData([])\r\n    this.table.setColumns(this.columnDefs)\r\n    this.table.setData(this.rowDefs)\r\n    this.table.restoreRedraw()\r\n\r\n    if (wasInactive && this.scrollTop !== null) {\r\n      this.table.rowManager.element.scrollLeft = this.scrollLeft\r\n      this.table.rowManager.element.scrollTop = this.scrollTop\r\n    }\r\n\r\n    this.element.classList.add('tabulator-spreadsheet-tab-active')\r\n\r\n    this.dispatchExternal('sheetLoaded', this.getComponent())\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ///// Helper Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  getComponent() {\r\n    return new SheetComponent(this)\r\n  }\r\n\r\n  getDefinition() {\r\n    return {\r\n      title: this.title,\r\n      key: this.key,\r\n      rows: this.rowCount,\r\n      columns: this.columnCount,\r\n      data: this.getData()\r\n    }\r\n  }\r\n\r\n  getData(full) {\r\n    let output = []\r\n    let rowWidths\r\n    let outputWidth\r\n    let outputHeight\r\n\r\n    // map data to array format\r\n    this.rowDefs.forEach((rowData) => {\r\n      const row = []\r\n\r\n      this.columnFields.forEach((field) => {\r\n        row.push(rowData[field])\r\n      })\r\n\r\n      output.push(row)\r\n    })\r\n\r\n    // trim output\r\n    if (!full && !this.options('spreadsheetOutputFull')) {\r\n      // calculate used area of data\r\n      rowWidths = output.map((row) => row.findLastIndex((val) => typeof val !== 'undefined') + 1)\r\n      outputWidth = Math.max(...rowWidths)\r\n      outputHeight = rowWidths.findLastIndex((width) => width > 0) + 1\r\n\r\n      output = output.slice(0, outputHeight)\r\n      output = output.map((row) => row.slice(0, outputWidth))\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  setData(data) {\r\n    this.data = data\r\n    this.reinitialize()\r\n\r\n    this.dispatchExternal('sheetUpdated', this.getComponent())\r\n\r\n    if (this.isActive) {\r\n      this.load()\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.setData([])\r\n  }\r\n\r\n  setTitle(title) {\r\n    this.title = title\r\n    this.element.innerText = title\r\n\r\n    this.dispatchExternal('sheetUpdated', this.getComponent())\r\n  }\r\n\r\n  setRows(rows) {\r\n    this.rowCount = rows\r\n    this.initializeRows()\r\n\r\n    this.dispatchExternal('sheetUpdated', this.getComponent())\r\n\r\n    if (this.isActive) {\r\n      this.load()\r\n    }\r\n  }\r\n\r\n  setColumns(columns) {\r\n    this.columnCount = columns\r\n    this.reinitialize()\r\n\r\n    this.dispatchExternal('sheetUpdated', this.getComponent())\r\n\r\n    if (this.isActive) {\r\n      this.load()\r\n    }\r\n  }\r\n\r\n  remove() {\r\n    this.spreadsheetManager.removeSheet(this)\r\n  }\r\n\r\n  destroy() {\r\n    if (this.element.parentNode) {\r\n      this.element.parentNode.removeChild(this.element)\r\n    }\r\n\r\n    this.dispatchExternal('sheetRemoved', this.getComponent())\r\n  }\r\n\r\n  active() {\r\n    this.spreadsheetManager.loadSheet(this)\r\n  }\r\n}\r\n","export default {\r\n  // is integer\r\n  integer: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n\r\n    value = Number(value)\r\n\r\n    return !isNaN(value) && isFinite(value) && Math.floor(value) === value\r\n  },\r\n\r\n  // is float\r\n  float: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n\r\n    value = Number(value)\r\n\r\n    return !isNaN(value) && isFinite(value) && value % 1 !== 0\r\n  },\r\n\r\n  // must be a number\r\n  numeric: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n    return !isNaN(value)\r\n  },\r\n\r\n  // must be a string\r\n  string: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n    return isNaN(value)\r\n  },\r\n\r\n  // must be alphanumeric\r\n  alphanumeric: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n\r\n    const reg = new RegExp(/^[a-z0-9]+$/i)\r\n\r\n    return reg.test(value)\r\n  },\r\n\r\n  // maximum value\r\n  max: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n    return parseFloat(value) <= parameters\r\n  },\r\n\r\n  // minimum value\r\n  min: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n    return parseFloat(value) >= parameters\r\n  },\r\n\r\n  // starts with  value\r\n  starts: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n    return String(value).toLowerCase().startsWith(String(parameters).toLowerCase())\r\n  },\r\n\r\n  // ends with  value\r\n  ends: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n    return String(value).toLowerCase().endsWith(String(parameters).toLowerCase())\r\n  },\r\n\r\n  // minimum string length\r\n  minLength: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n    return String(value).length >= parameters\r\n  },\r\n\r\n  // maximum string length\r\n  maxLength: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n    return String(value).length <= parameters\r\n  },\r\n\r\n  // in provided value list\r\n  in: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n\r\n    if (typeof parameters === 'string') {\r\n      parameters = parameters.split('|')\r\n    }\r\n\r\n    return parameters.indexOf(value) > -1\r\n  },\r\n\r\n  // must match provided regex\r\n  regex: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n    const reg = new RegExp(parameters)\r\n\r\n    return reg.test(value)\r\n  },\r\n\r\n  // value must be unique in this column\r\n  unique: function (cell, value, parameters) {\r\n    if (value === '' || value === null || typeof value === 'undefined') {\r\n      return true\r\n    }\r\n    let unique = true\r\n\r\n    const cellData = cell.getData()\r\n    const column = cell.getColumn()._getSelf()\r\n\r\n    this.table.rowManager.rows.forEach(function (row) {\r\n      const data = row.getData()\r\n\r\n      if (data !== cellData) {\r\n        if (value == column.getFieldValue(data)) {\r\n          unique = false\r\n        }\r\n      }\r\n    })\r\n\r\n    return unique\r\n  },\r\n\r\n  // must have a value\r\n  required: function (cell, value, parameters) {\r\n    return value !== '' && value !== null && typeof value !== 'undefined'\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport defaultValidators from './defaults/validators.js'\r\n\r\nexport default class Validate extends Module {\r\n  static moduleName = 'validate'\r\n\r\n  // load defaults\r\n  static validators = defaultValidators\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.invalidCells = []\r\n\r\n    this.registerTableOption('validationMode', 'blocking')\r\n\r\n    this.registerColumnOption('validator')\r\n\r\n    this.registerTableFunction('getInvalidCells', this.getInvalidCells.bind(this))\r\n    this.registerTableFunction('clearCellValidation', this.userClearCellValidation.bind(this))\r\n    this.registerTableFunction('validate', this.userValidate.bind(this))\r\n\r\n    this.registerComponentFunction('cell', 'isValid', this.cellIsValid.bind(this))\r\n    this.registerComponentFunction('cell', 'clearValidation', this.clearValidation.bind(this))\r\n    this.registerComponentFunction('cell', 'validate', this.cellValidate.bind(this))\r\n\r\n    this.registerComponentFunction('column', 'validate', this.columnValidate.bind(this))\r\n    this.registerComponentFunction('row', 'validate', this.rowValidate.bind(this))\r\n  }\r\n\r\n  initialize() {\r\n    this.subscribe('cell-delete', this.clearValidation.bind(this))\r\n    this.subscribe('column-layout', this.initializeColumnCheck.bind(this))\r\n\r\n    this.subscribe('edit-success', this.editValidate.bind(this))\r\n    this.subscribe('edit-editor-clear', this.editorClear.bind(this))\r\n    this.subscribe('edit-edited-clear', this.editedClear.bind(this))\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Event Handling //////////\r\n  /// ////////////////////////////////\r\n\r\n  editValidate(cell, value, previousValue) {\r\n    const valid =\r\n      this.table.options.validationMode !== 'manual' ? this.validate(cell.column.modules.validate, cell, value) : true\r\n\r\n    // allow time for editor to make render changes then style cell\r\n    if (valid !== true) {\r\n      setTimeout(() => {\r\n        cell.getElement().classList.add('tabulator-validation-fail')\r\n        this.dispatchExternal('validationFailed', cell.getComponent(), value, valid)\r\n      })\r\n    }\r\n\r\n    return valid\r\n  }\r\n\r\n  editorClear(cell, cancelled) {\r\n    if (cancelled) {\r\n      if (cell.column.modules.validate) {\r\n        this.cellValidate(cell)\r\n      }\r\n    }\r\n\r\n    cell.getElement().classList.remove('tabulator-validation-fail')\r\n  }\r\n\r\n  editedClear(cell) {\r\n    if (cell.modules.validate) {\r\n      cell.modules.validate.invalid = false\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// /////// Cell Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  cellIsValid(cell) {\r\n    return cell.modules.validate ? cell.modules.validate.invalid || true : true\r\n  }\r\n\r\n  cellValidate(cell) {\r\n    return this.validate(cell.column.modules.validate, cell, cell.getValue())\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Column Functions ////////\r\n  /// ////////////////////////////////\r\n\r\n  columnValidate(column) {\r\n    const invalid = []\r\n\r\n    column.cells.forEach((cell) => {\r\n      if (this.cellValidate(cell) !== true) {\r\n        invalid.push(cell.getComponent())\r\n      }\r\n    })\r\n\r\n    return invalid.length ? invalid : true\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// /////// Row Functions //////////\r\n  /// ////////////////////////////////\r\n\r\n  rowValidate(row) {\r\n    const invalid = []\r\n\r\n    row.cells.forEach((cell) => {\r\n      if (this.cellValidate(cell) !== true) {\r\n        invalid.push(cell.getComponent())\r\n      }\r\n    })\r\n\r\n    return invalid.length ? invalid : true\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Table Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  userClearCellValidation(cells) {\r\n    if (!cells) {\r\n      cells = this.getInvalidCells()\r\n    }\r\n\r\n    if (!Array.isArray(cells)) {\r\n      cells = [cells]\r\n    }\r\n\r\n    cells.forEach((cell) => {\r\n      this.clearValidation(cell._getSelf())\r\n    })\r\n  }\r\n\r\n  userValidate(cells) {\r\n    let output = []\r\n\r\n    // clear row data\r\n    this.table.rowManager.rows.forEach((row) => {\r\n      row = row.getComponent()\r\n\r\n      const valid = row.validate()\r\n\r\n      if (valid !== true) {\r\n        output = output.concat(valid)\r\n      }\r\n    })\r\n\r\n    return output.length ? output : true\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Internal Logic //////////\r\n  /// ////////////////////////////////\r\n\r\n  initializeColumnCheck(column) {\r\n    if (typeof column.definition.validator !== 'undefined') {\r\n      this.initializeColumn(column)\r\n    }\r\n  }\r\n\r\n  // validate\r\n  initializeColumn(column) {\r\n    const self = this\r\n    const config = []\r\n    let validator\r\n\r\n    if (column.definition.validator) {\r\n      if (Array.isArray(column.definition.validator)) {\r\n        column.definition.validator.forEach((item) => {\r\n          validator = self._extractValidator(item)\r\n\r\n          if (validator) {\r\n            config.push(validator)\r\n          }\r\n        })\r\n      } else {\r\n        validator = this._extractValidator(column.definition.validator)\r\n\r\n        if (validator) {\r\n          config.push(validator)\r\n        }\r\n      }\r\n\r\n      column.modules.validate = config.length ? config : false\r\n    }\r\n  }\r\n\r\n  _extractValidator(value) {\r\n    let type, params, pos\r\n\r\n    switch (typeof value) {\r\n      case 'string':\r\n        pos = value.indexOf(':')\r\n\r\n        if (pos > -1) {\r\n          type = value.substring(0, pos)\r\n          params = value.substring(pos + 1)\r\n        } else {\r\n          type = value\r\n        }\r\n\r\n        return this._buildValidator(type, params)\r\n\r\n      case 'function':\r\n        return this._buildValidator(value)\r\n\r\n      case 'object':\r\n        return this._buildValidator(value.type, value.parameters)\r\n    }\r\n  }\r\n\r\n  _buildValidator(type, params) {\r\n    const func = typeof type === 'function' ? type : Validate.validators[type]\r\n\r\n    if (!func) {\r\n      console.warn('Validator Setup Error - No matching validator found:', type)\r\n      return false\r\n    } else {\r\n      return {\r\n        type: typeof type === 'function' ? 'function' : type,\r\n        func,\r\n        params\r\n      }\r\n    }\r\n  }\r\n\r\n  validate(validators, cell, value) {\r\n    const self = this\r\n    const failedValidators = []\r\n    const invalidIndex = this.invalidCells.indexOf(cell)\r\n\r\n    if (validators) {\r\n      validators.forEach((item) => {\r\n        if (!item.func.call(self, cell.getComponent(), value, item.params)) {\r\n          failedValidators.push({\r\n            type: item.type,\r\n            parameters: item.params\r\n          })\r\n        }\r\n      })\r\n    }\r\n\r\n    if (!cell.modules.validate) {\r\n      cell.modules.validate = {}\r\n    }\r\n\r\n    if (!failedValidators.length) {\r\n      cell.modules.validate.invalid = false\r\n      cell.getElement().classList.remove('tabulator-validation-fail')\r\n\r\n      if (invalidIndex > -1) {\r\n        this.invalidCells.splice(invalidIndex, 1)\r\n      }\r\n    } else {\r\n      cell.modules.validate.invalid = failedValidators\r\n\r\n      if (this.table.options.validationMode !== 'manual') {\r\n        cell.getElement().classList.add('tabulator-validation-fail')\r\n      }\r\n\r\n      if (invalidIndex == -1) {\r\n        this.invalidCells.push(cell)\r\n      }\r\n    }\r\n\r\n    return failedValidators.length ? failedValidators : true\r\n  }\r\n\r\n  getInvalidCells() {\r\n    const output = []\r\n\r\n    this.invalidCells.forEach((cell) => {\r\n      output.push(cell.getComponent())\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  clearValidation(cell) {\r\n    let invalidIndex\r\n\r\n    if (cell.modules.validate && cell.modules.validate.invalid) {\r\n      cell.getElement().classList.remove('tabulator-validation-fail')\r\n      cell.modules.validate.invalid = false\r\n\r\n      invalidIndex = this.invalidCells.indexOf(cell)\r\n\r\n      if (invalidIndex > -1) {\r\n        this.invalidCells.splice(invalidIndex, 1)\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport Row from '../../core/row/Row.js'\r\n\r\nimport RowComponent from '../../core/row/RowComponent.js'\r\n\r\nexport default class DataTree extends Module {\r\n  static moduleName = 'dataTree'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.indent = 10\r\n    this.field = ''\r\n    this.collapseEl = null\r\n    this.expandEl = null\r\n    this.branchEl = null\r\n    this.elementField = false\r\n\r\n    this.startOpen = function () {}\r\n\r\n    this.registerTableOption('dataTree', false) // enable data tree\r\n    this.registerTableOption('dataTreeFilter', true) // filter child rows\r\n    this.registerTableOption('dataTreeSort', true) // sort child rows\r\n    this.registerTableOption('dataTreeElementColumn', false)\r\n    this.registerTableOption('dataTreeBranchElement', true) // show data tree branch element\r\n    this.registerTableOption('dataTreeChildIndent', 9) // data tree child indent in px\r\n    this.registerTableOption('dataTreeChildField', '_children') // data tre column field to look for child rows\r\n    this.registerTableOption('dataTreeCollapseElement', false) // data tree row collapse element\r\n    this.registerTableOption('dataTreeExpandElement', false) // data tree row expand element\r\n    this.registerTableOption('dataTreeStartExpanded', false)\r\n    this.registerTableOption('dataTreeChildColumnCalcs', false) // include visible data tree rows in column calculations\r\n    this.registerTableOption('dataTreeSelectPropagate', false) // selecting a parent row selects its children\r\n\r\n    // register component functions\r\n    this.registerComponentFunction('row', 'treeCollapse', this.collapseRow.bind(this))\r\n    this.registerComponentFunction('row', 'treeExpand', this.expandRow.bind(this))\r\n    this.registerComponentFunction('row', 'treeToggle', this.toggleRow.bind(this))\r\n    this.registerComponentFunction('row', 'getTreeParent', this.getTreeParent.bind(this))\r\n    this.registerComponentFunction('row', 'getTreeChildren', this.getRowChildren.bind(this))\r\n    this.registerComponentFunction('row', 'addTreeChild', this.addTreeChildRow.bind(this))\r\n    this.registerComponentFunction('row', 'isTreeExpanded', this.isRowExpanded.bind(this))\r\n  }\r\n\r\n  initialize() {\r\n    if (this.table.options.dataTree) {\r\n      let dummyEl = null\r\n      const options = this.table.options\r\n\r\n      this.field = options.dataTreeChildField\r\n      this.indent = options.dataTreeChildIndent\r\n\r\n      if (this.options('movableRows')) {\r\n        console.warn(\r\n          'The movableRows option is not available with dataTree enabled, moving of child rows could result in unpredictable behavior'\r\n        )\r\n      }\r\n\r\n      if (options.dataTreeBranchElement) {\r\n        if (options.dataTreeBranchElement === true) {\r\n          this.branchEl = document.createElement('div')\r\n          this.branchEl.classList.add('tabulator-data-tree-branch')\r\n        } else {\r\n          if (typeof options.dataTreeBranchElement === 'string') {\r\n            dummyEl = document.createElement('div')\r\n            dummyEl.innerHTML = options.dataTreeBranchElement\r\n            this.branchEl = dummyEl.firstChild\r\n          } else {\r\n            this.branchEl = options.dataTreeBranchElement\r\n          }\r\n        }\r\n      } else {\r\n        this.branchEl = document.createElement('div')\r\n        this.branchEl.classList.add('tabulator-data-tree-branch-empty')\r\n      }\r\n\r\n      if (options.dataTreeCollapseElement) {\r\n        if (typeof options.dataTreeCollapseElement === 'string') {\r\n          dummyEl = document.createElement('div')\r\n          dummyEl.innerHTML = options.dataTreeCollapseElement\r\n          this.collapseEl = dummyEl.firstChild\r\n        } else {\r\n          this.collapseEl = options.dataTreeCollapseElement\r\n        }\r\n      } else {\r\n        this.collapseEl = document.createElement('div')\r\n        this.collapseEl.classList.add('tabulator-data-tree-control')\r\n        this.collapseEl.tabIndex = 0\r\n        this.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\"\r\n      }\r\n\r\n      if (options.dataTreeExpandElement) {\r\n        if (typeof options.dataTreeExpandElement === 'string') {\r\n          dummyEl = document.createElement('div')\r\n          dummyEl.innerHTML = options.dataTreeExpandElement\r\n          this.expandEl = dummyEl.firstChild\r\n        } else {\r\n          this.expandEl = options.dataTreeExpandElement\r\n        }\r\n      } else {\r\n        this.expandEl = document.createElement('div')\r\n        this.expandEl.classList.add('tabulator-data-tree-control')\r\n        this.expandEl.tabIndex = 0\r\n        this.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\"\r\n      }\r\n\r\n      switch (typeof options.dataTreeStartExpanded) {\r\n        case 'boolean':\r\n          this.startOpen = function (row, index) {\r\n            return options.dataTreeStartExpanded\r\n          }\r\n          break\r\n\r\n        case 'function':\r\n          this.startOpen = options.dataTreeStartExpanded\r\n          break\r\n\r\n        default:\r\n          this.startOpen = function (row, index) {\r\n            return options.dataTreeStartExpanded[index]\r\n          }\r\n          break\r\n      }\r\n\r\n      this.subscribe('row-init', this.initializeRow.bind(this))\r\n      this.subscribe('row-layout-after', this.layoutRow.bind(this))\r\n      this.subscribe('row-deleting', this.rowDeleting.bind(this))\r\n      this.subscribe('row-deleted', this.rowDelete.bind(this), 0)\r\n      this.subscribe('row-data-changed', this.rowDataChanged.bind(this), 10)\r\n      this.subscribe('cell-value-updated', this.cellValueChanged.bind(this))\r\n      this.subscribe('edit-cancelled', this.cellValueChanged.bind(this))\r\n      this.subscribe('column-moving-rows', this.columnMoving.bind(this))\r\n      this.subscribe('table-built', this.initializeElementField.bind(this))\r\n      this.subscribe('table-redrawing', this.tableRedrawing.bind(this))\r\n\r\n      this.registerDisplayHandler(this.getRows.bind(this), 30)\r\n    }\r\n  }\r\n\r\n  tableRedrawing(force) {\r\n    let rows\r\n\r\n    if (force) {\r\n      rows = this.table.rowManager.getRows()\r\n\r\n      rows.forEach((row) => {\r\n        this.reinitializeRowChildren(row)\r\n      })\r\n    }\r\n  }\r\n\r\n  initializeElementField() {\r\n    const firstCol = this.table.columnManager.getFirstVisibleColumn()\r\n\r\n    this.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false)\r\n  }\r\n\r\n  getRowChildren(row) {\r\n    return this.getTreeChildren(row, true)\r\n  }\r\n\r\n  columnMoving() {\r\n    let rows = []\r\n\r\n    this.table.rowManager.rows.forEach((row) => {\r\n      rows = rows.concat(this.getTreeChildren(row, false, true))\r\n    })\r\n\r\n    return rows\r\n  }\r\n\r\n  rowDataChanged(row, visible, updatedData) {\r\n    if (this.redrawNeeded(updatedData)) {\r\n      this.initializeRow(row)\r\n\r\n      if (visible) {\r\n        this.layoutRow(row)\r\n        this.refreshData(true)\r\n      }\r\n    }\r\n  }\r\n\r\n  cellValueChanged(cell) {\r\n    const field = cell.column.getField()\r\n\r\n    if (field === this.elementField) {\r\n      this.layoutRow(cell.row)\r\n    }\r\n  }\r\n\r\n  initializeRow(row) {\r\n    const childArray = row.getData()[this.field]\r\n    const isArray = Array.isArray(childArray)\r\n\r\n    const children = isArray || (!isArray && typeof childArray === 'object' && childArray !== null)\r\n\r\n    if (!children && row.modules.dataTree && row.modules.dataTree.branchEl) {\r\n      row.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl)\r\n    }\r\n\r\n    if (!children && row.modules.dataTree && row.modules.dataTree.controlEl) {\r\n      row.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl)\r\n    }\r\n\r\n    row.modules.dataTree = {\r\n      index: row.modules.dataTree ? row.modules.dataTree.index : 0,\r\n      open: children\r\n        ? row.modules.dataTree\r\n          ? row.modules.dataTree.open\r\n          : this.startOpen(row.getComponent(), 0)\r\n        : false,\r\n      controlEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\r\n      branchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\r\n      parent: row.modules.dataTree ? row.modules.dataTree.parent : false,\r\n      children\r\n    }\r\n  }\r\n\r\n  reinitializeRowChildren(row) {\r\n    const children = this.getTreeChildren(row, false, true)\r\n\r\n    children.forEach(function (child) {\r\n      child.reinitialize(true)\r\n    })\r\n  }\r\n\r\n  layoutRow(row) {\r\n    const cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0]\r\n    const el = cell.getElement()\r\n    const config = row.modules.dataTree\r\n\r\n    if (config.branchEl) {\r\n      if (config.branchEl.parentNode) {\r\n        config.branchEl.parentNode.removeChild(config.branchEl)\r\n      }\r\n      config.branchEl = false\r\n    }\r\n\r\n    if (config.controlEl) {\r\n      if (config.controlEl.parentNode) {\r\n        config.controlEl.parentNode.removeChild(config.controlEl)\r\n      }\r\n      config.controlEl = false\r\n    }\r\n\r\n    this.generateControlElement(row, el)\r\n\r\n    row.getElement().classList.add('tabulator-tree-level-' + config.index)\r\n\r\n    if (config.index) {\r\n      if (this.branchEl) {\r\n        config.branchEl = this.branchEl.cloneNode(true)\r\n        el.insertBefore(config.branchEl, el.firstChild)\r\n\r\n        if (this.table.rtl) {\r\n          config.branchEl.style.marginRight =\r\n            (config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1) +\r\n            config.index * this.indent +\r\n            'px'\r\n        } else {\r\n          config.branchEl.style.marginLeft =\r\n            (config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1) +\r\n            config.index * this.indent +\r\n            'px'\r\n        }\r\n      } else {\r\n        if (this.table.rtl) {\r\n          el.style.paddingRight =\r\n            parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) +\r\n            config.index * this.indent +\r\n            'px'\r\n        } else {\r\n          el.style.paddingLeft =\r\n            parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) +\r\n            config.index * this.indent +\r\n            'px'\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  generateControlElement(row, el) {\r\n    const config = row.modules.dataTree\r\n    const oldControl = config.controlEl\r\n\r\n    el = el || row.getCells()[0].getElement()\r\n\r\n    if (config.children !== false) {\r\n      if (config.open) {\r\n        config.controlEl = this.collapseEl.cloneNode(true)\r\n        config.controlEl.addEventListener('click', (e) => {\r\n          e.stopPropagation()\r\n          this.collapseRow(row)\r\n        })\r\n      } else {\r\n        config.controlEl = this.expandEl.cloneNode(true)\r\n        config.controlEl.addEventListener('click', (e) => {\r\n          e.stopPropagation()\r\n          this.expandRow(row)\r\n        })\r\n      }\r\n\r\n      config.controlEl.addEventListener('mousedown', (e) => {\r\n        e.stopPropagation()\r\n      })\r\n\r\n      if (oldControl && oldControl.parentNode === el) {\r\n        oldControl.parentNode.replaceChild(config.controlEl, oldControl)\r\n      } else {\r\n        el.insertBefore(config.controlEl, el.firstChild)\r\n      }\r\n    }\r\n  }\r\n\r\n  getRows(rows) {\r\n    const output = []\r\n\r\n    rows.forEach((row, i) => {\r\n      let config, children\r\n\r\n      output.push(row)\r\n\r\n      if (row instanceof Row) {\r\n        row.create()\r\n\r\n        config = row.modules.dataTree\r\n\r\n        if (!config.index && config.children !== false) {\r\n          children = this.getChildren(row, false, true)\r\n\r\n          children.forEach((child) => {\r\n            child.create()\r\n            output.push(child)\r\n          })\r\n        }\r\n      }\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  getChildren(row, allChildren, sortOnly) {\r\n    const config = row.modules.dataTree\r\n    let children = []\r\n    const output = []\r\n\r\n    if (config.children !== false && (config.open || allChildren)) {\r\n      if (!Array.isArray(config.children)) {\r\n        config.children = this.generateChildren(row)\r\n      }\r\n\r\n      if (this.table.modExists('filter') && this.table.options.dataTreeFilter) {\r\n        children = this.table.modules.filter.filter(config.children)\r\n      } else {\r\n        children = config.children\r\n      }\r\n\r\n      if (this.table.modExists('sort') && this.table.options.dataTreeSort) {\r\n        this.table.modules.sort.sort(children, sortOnly)\r\n      }\r\n\r\n      children.forEach((child) => {\r\n        output.push(child)\r\n\r\n        const subChildren = this.getChildren(child, false, true)\r\n\r\n        subChildren.forEach((sub) => {\r\n          output.push(sub)\r\n        })\r\n      })\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  generateChildren(row) {\r\n    const children = []\r\n\r\n    let childArray = row.getData()[this.field]\r\n\r\n    if (!Array.isArray(childArray)) {\r\n      childArray = [childArray]\r\n    }\r\n\r\n    childArray.forEach((childData) => {\r\n      const childRow = new Row(childData || {}, this.table.rowManager)\r\n\r\n      childRow.create()\r\n\r\n      childRow.modules.dataTree.index = row.modules.dataTree.index + 1\r\n      childRow.modules.dataTree.parent = row\r\n\r\n      if (childRow.modules.dataTree.children) {\r\n        childRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index)\r\n      }\r\n      children.push(childRow)\r\n    })\r\n\r\n    return children\r\n  }\r\n\r\n  expandRow(row, silent) {\r\n    const config = row.modules.dataTree\r\n\r\n    if (config.children !== false) {\r\n      config.open = true\r\n\r\n      row.reinitialize()\r\n\r\n      this.refreshData(true)\r\n\r\n      this.dispatchExternal('dataTreeRowExpanded', row.getComponent(), row.modules.dataTree.index)\r\n    }\r\n  }\r\n\r\n  collapseRow(row) {\r\n    const config = row.modules.dataTree\r\n\r\n    if (config.children !== false) {\r\n      config.open = false\r\n\r\n      row.reinitialize()\r\n\r\n      this.refreshData(true)\r\n\r\n      this.dispatchExternal('dataTreeRowCollapsed', row.getComponent(), row.modules.dataTree.index)\r\n    }\r\n  }\r\n\r\n  toggleRow(row) {\r\n    const config = row.modules.dataTree\r\n\r\n    if (config.children !== false) {\r\n      if (config.open) {\r\n        this.collapseRow(row)\r\n      } else {\r\n        this.expandRow(row)\r\n      }\r\n    }\r\n  }\r\n\r\n  isRowExpanded(row) {\r\n    return row.modules.dataTree.open\r\n  }\r\n\r\n  getTreeParent(row) {\r\n    return row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false\r\n  }\r\n\r\n  getTreeParentRoot(row) {\r\n    return row.modules.dataTree && row.modules.dataTree.parent\r\n      ? this.getTreeParentRoot(row.modules.dataTree.parent)\r\n      : row\r\n  }\r\n\r\n  getFilteredTreeChildren(row) {\r\n    const config = row.modules.dataTree\r\n    const output = []\r\n    let children\r\n\r\n    if (config.children) {\r\n      if (!Array.isArray(config.children)) {\r\n        config.children = this.generateChildren(row)\r\n      }\r\n\r\n      if (this.table.modExists('filter') && this.table.options.dataTreeFilter) {\r\n        children = this.table.modules.filter.filter(config.children)\r\n      } else {\r\n        children = config.children\r\n      }\r\n\r\n      children.forEach((childRow) => {\r\n        if (childRow instanceof Row) {\r\n          output.push(childRow)\r\n        }\r\n      })\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  rowDeleting(row) {\r\n    const config = row.modules.dataTree\r\n\r\n    if (config && config.children && Array.isArray(config.children)) {\r\n      config.children.forEach((childRow) => {\r\n        if (childRow instanceof Row) {\r\n          childRow.wipe()\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  rowDelete(row) {\r\n    const parent = row.modules.dataTree.parent\r\n    let childIndex\r\n\r\n    if (parent) {\r\n      childIndex = this.findChildIndex(row, parent)\r\n\r\n      if (childIndex !== false) {\r\n        parent.data[this.field].splice(childIndex, 1)\r\n      }\r\n\r\n      if (!parent.data[this.field].length) {\r\n        delete parent.data[this.field]\r\n      }\r\n\r\n      this.initializeRow(parent)\r\n      this.layoutRow(parent)\r\n    }\r\n\r\n    this.refreshData(true)\r\n  }\r\n\r\n  addTreeChildRow(row, data, top, index) {\r\n    let childIndex = false\r\n\r\n    if (typeof data === 'string') {\r\n      data = JSON.parse(data)\r\n    }\r\n\r\n    if (!Array.isArray(row.data[this.field])) {\r\n      row.data[this.field] = []\r\n\r\n      row.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index)\r\n    }\r\n\r\n    if (typeof index !== 'undefined') {\r\n      childIndex = this.findChildIndex(index, row)\r\n\r\n      if (childIndex !== false) {\r\n        row.data[this.field].splice(top ? childIndex : childIndex + 1, 0, data)\r\n      }\r\n    }\r\n\r\n    if (childIndex === false) {\r\n      if (top) {\r\n        row.data[this.field].unshift(data)\r\n      } else {\r\n        row.data[this.field].push(data)\r\n      }\r\n    }\r\n\r\n    this.initializeRow(row)\r\n    this.layoutRow(row)\r\n\r\n    this.refreshData(true)\r\n  }\r\n\r\n  findChildIndex(subject, parent) {\r\n    let match = false\r\n\r\n    if (typeof subject === 'object') {\r\n      if (subject instanceof Row) {\r\n        // subject is row element\r\n        match = subject.data\r\n      } else if (subject instanceof RowComponent) {\r\n        // subject is public row component\r\n        match = subject._getSelf().data\r\n      } else if (typeof HTMLElement !== 'undefined' && subject instanceof HTMLElement) {\r\n        if (parent.modules.dataTree) {\r\n          match = parent.modules.dataTree.children.find((childRow) => {\r\n            return childRow instanceof Row ? childRow.element === subject : false\r\n          })\r\n\r\n          if (match) {\r\n            match = match.data\r\n          }\r\n        }\r\n      } else if (subject === null) {\r\n        match = false\r\n      }\r\n    } else if (typeof subject === 'undefined') {\r\n      match = false\r\n    } else {\r\n      // subject should be treated as the index of the row\r\n      match = parent.data[this.field].find((row) => {\r\n        return row.data[this.table.options.index] == subject\r\n      })\r\n    }\r\n\r\n    if (match) {\r\n      if (Array.isArray(parent.data[this.field])) {\r\n        match = parent.data[this.field].indexOf(match)\r\n      }\r\n\r\n      if (match == -1) {\r\n        match = false\r\n      }\r\n    }\r\n\r\n    // catch all for any other type of input\r\n\r\n    return match\r\n  }\r\n\r\n  getTreeChildren(row, component, recurse) {\r\n    const config = row.modules.dataTree\r\n    const output = []\r\n\r\n    if (config && config.children) {\r\n      if (!Array.isArray(config.children)) {\r\n        config.children = this.generateChildren(row)\r\n      }\r\n\r\n      config.children.forEach((childRow) => {\r\n        if (childRow instanceof Row) {\r\n          output.push(component ? childRow.getComponent() : childRow)\r\n\r\n          if (recurse) {\r\n            this.getTreeChildren(childRow, component, recurse).forEach((child) => {\r\n              output.push(child)\r\n            })\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  getChildField() {\r\n    return this.field\r\n  }\r\n\r\n  redrawNeeded(data) {\r\n    return (\r\n      (this.field ? typeof data[this.field] !== 'undefined' : false) ||\r\n      (this.elementField ? typeof data[this.elementField] !== 'undefined' : false)\r\n    )\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nexport default class FrozenColumns extends Module {\r\n  static moduleName = 'frozenColumns'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.leftColumns = []\r\n    this.rightColumns = []\r\n    this.initializationMode = 'left'\r\n    this.active = false\r\n    this.blocked = true\r\n\r\n    this.registerColumnOption('frozen')\r\n  }\r\n\r\n  // reset initial state\r\n  reset() {\r\n    this.initializationMode = 'left'\r\n    this.leftColumns = []\r\n    this.rightColumns = []\r\n    this.active = false\r\n  }\r\n\r\n  initialize() {\r\n    this.subscribe('cell-layout', this.layoutCell.bind(this))\r\n    this.subscribe('column-init', this.initializeColumn.bind(this))\r\n    this.subscribe('column-width', this.layout.bind(this))\r\n    this.subscribe('row-layout-after', this.layoutRow.bind(this))\r\n    this.subscribe('table-layout', this.layout.bind(this))\r\n    this.subscribe('columns-loading', this.reset.bind(this))\r\n\r\n    this.subscribe('column-add', this.reinitializeColumns.bind(this))\r\n    this.subscribe('column-deleted', this.reinitializeColumns.bind(this))\r\n    this.subscribe('column-hide', this.reinitializeColumns.bind(this))\r\n    this.subscribe('column-show', this.reinitializeColumns.bind(this))\r\n    this.subscribe('columns-loaded', this.reinitializeColumns.bind(this))\r\n\r\n    this.subscribe('table-redraw', this.layout.bind(this))\r\n    this.subscribe('layout-refreshing', this.blockLayout.bind(this))\r\n    this.subscribe('layout-refreshed', this.unblockLayout.bind(this))\r\n    this.subscribe('scrollbar-vertical', this.adjustForScrollbar.bind(this))\r\n  }\r\n\r\n  blockLayout() {\r\n    this.blocked = true\r\n  }\r\n\r\n  unblockLayout() {\r\n    this.blocked = false\r\n  }\r\n\r\n  layoutCell(cell) {\r\n    this.layoutElement(cell.element, cell.column)\r\n  }\r\n\r\n  reinitializeColumns() {\r\n    this.reset()\r\n\r\n    this.table.columnManager.columnsByIndex.forEach((column) => {\r\n      this.initializeColumn(column)\r\n    })\r\n\r\n    this.layout()\r\n  }\r\n\r\n  // initialize specific column\r\n  initializeColumn(column) {\r\n    const config = { margin: 0, edge: false }\r\n\r\n    if (!column.isGroup) {\r\n      if (this.frozenCheck(column)) {\r\n        config.position = this.initializationMode\r\n\r\n        if (this.initializationMode == 'left') {\r\n          this.leftColumns.push(column)\r\n        } else {\r\n          this.rightColumns.unshift(column)\r\n        }\r\n\r\n        this.active = true\r\n\r\n        column.modules.frozen = config\r\n      } else {\r\n        this.initializationMode = 'right'\r\n      }\r\n    }\r\n  }\r\n\r\n  frozenCheck(column) {\r\n    if (column.parent.isGroup && column.definition.frozen) {\r\n      console.warn(\r\n        'Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups'\r\n      )\r\n    }\r\n\r\n    if (column.parent.isGroup) {\r\n      return this.frozenCheck(column.parent)\r\n    } else {\r\n      return column.definition.frozen\r\n    }\r\n  }\r\n\r\n  // layout calculation rows\r\n  layoutCalcRows() {\r\n    if (this.table.modExists('columnCalcs')) {\r\n      if (this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow) {\r\n        this.layoutRow(this.table.modules.columnCalcs.topRow)\r\n      }\r\n\r\n      if (this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow) {\r\n        this.layoutRow(this.table.modules.columnCalcs.botRow)\r\n      }\r\n\r\n      if (this.table.modExists('groupRows')) {\r\n        this.layoutGroupCalcs(this.table.modules.groupRows.getGroups())\r\n      }\r\n    }\r\n  }\r\n\r\n  layoutGroupCalcs(groups) {\r\n    groups.forEach((group) => {\r\n      if (group.calcs.top) {\r\n        this.layoutRow(group.calcs.top)\r\n      }\r\n\r\n      if (group.calcs.bottom) {\r\n        this.layoutRow(group.calcs.bottom)\r\n      }\r\n\r\n      if (group.groupList && group.groupList.length) {\r\n        this.layoutGroupCalcs(group.groupList)\r\n      }\r\n    })\r\n  }\r\n\r\n  // calculate column positions and layout headers\r\n  layoutColumnPosition(allCells) {\r\n    const leftParents = []\r\n\r\n    let leftMargin = 0\r\n    let rightMargin = 0\r\n\r\n    this.leftColumns.forEach((column, i) => {\r\n      column.modules.frozen.marginValue = leftMargin\r\n      column.modules.frozen.margin = column.modules.frozen.marginValue + 'px'\r\n\r\n      if (column.visible) {\r\n        leftMargin += column.getWidth()\r\n      }\r\n\r\n      if (i == this.leftColumns.length - 1) {\r\n        column.modules.frozen.edge = true\r\n      } else {\r\n        column.modules.frozen.edge = false\r\n      }\r\n\r\n      if (column.parent.isGroup) {\r\n        const parentEl = this.getColGroupParentElement(column)\r\n        if (!leftParents.includes(parentEl)) {\r\n          this.layoutElement(parentEl, column)\r\n          leftParents.push(parentEl)\r\n        }\r\n\r\n        parentEl.classList.toggle(\r\n          'tabulator-frozen-left',\r\n          column.modules.frozen.edge && column.modules.frozen.position === 'left'\r\n        )\r\n        parentEl.classList.toggle(\r\n          'tabulator-frozen-right',\r\n          column.modules.frozen.edge && column.modules.frozen.position === 'right'\r\n        )\r\n      } else {\r\n        this.layoutElement(column.getElement(), column)\r\n      }\r\n\r\n      if (allCells) {\r\n        column.cells.forEach((cell) => {\r\n          this.layoutElement(cell.getElement(true), column)\r\n        })\r\n      }\r\n    })\r\n\r\n    this.rightColumns.forEach((column, i) => {\r\n      column.modules.frozen.marginValue = rightMargin\r\n      column.modules.frozen.margin = column.modules.frozen.marginValue + 'px'\r\n\r\n      if (column.visible) {\r\n        rightMargin += column.getWidth()\r\n      }\r\n\r\n      if (i == this.rightColumns.length - 1) {\r\n        column.modules.frozen.edge = true\r\n      } else {\r\n        column.modules.frozen.edge = false\r\n      }\r\n\r\n      if (column.parent.isGroup) {\r\n        this.layoutElement(this.getColGroupParentElement(column), column)\r\n      } else {\r\n        this.layoutElement(column.getElement(), column)\r\n      }\r\n\r\n      if (allCells) {\r\n        column.cells.forEach((cell) => {\r\n          this.layoutElement(cell.getElement(true), column)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  getColGroupParentElement(column) {\r\n    return column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement()\r\n  }\r\n\r\n  // layout columns appropriately\r\n  layout() {\r\n    if (this.active && !this.blocked) {\r\n      // calculate left columns\r\n      this.layoutColumnPosition()\r\n\r\n      this.reinitializeRows()\r\n\r\n      this.layoutCalcRows()\r\n    }\r\n  }\r\n\r\n  reinitializeRows() {\r\n    const visibleRows = this.table.rowManager.getVisibleRows(true)\r\n    const otherRows = this.table.rowManager.getRows().filter((row) => !visibleRows.includes(row))\r\n\r\n    otherRows.forEach((row) => {\r\n      row.deinitialize()\r\n    })\r\n\r\n    visibleRows.forEach((row) => {\r\n      if (row.type === 'row') {\r\n        this.layoutRow(row)\r\n      }\r\n    })\r\n  }\r\n\r\n  layoutRow(row) {\r\n    if (this.table.options.layout === 'fitDataFill' && this.rightColumns.length) {\r\n      this.table.rowManager.getTableElement().style.minWidth = 'calc(100% - ' + this.rightMargin + ')'\r\n    }\r\n\r\n    this.leftColumns.forEach((column) => {\r\n      const cell = row.getCell(column)\r\n\r\n      if (cell) {\r\n        this.layoutElement(cell.getElement(true), column)\r\n      }\r\n    })\r\n\r\n    this.rightColumns.forEach((column) => {\r\n      const cell = row.getCell(column)\r\n\r\n      if (cell) {\r\n        this.layoutElement(cell.getElement(true), column)\r\n      }\r\n    })\r\n  }\r\n\r\n  layoutElement(element, column) {\r\n    let position\r\n\r\n    if (column.modules.frozen && element) {\r\n      element.style.position = 'sticky'\r\n\r\n      if (this.table.rtl) {\r\n        position = column.modules.frozen.position === 'left' ? 'right' : 'left'\r\n      } else {\r\n        position = column.modules.frozen.position\r\n      }\r\n\r\n      element.style[position] = column.modules.frozen.margin\r\n\r\n      element.classList.add('tabulator-frozen')\r\n\r\n      element.classList.toggle(\r\n        'tabulator-frozen-left',\r\n        column.modules.frozen.edge && column.modules.frozen.position === 'left'\r\n      )\r\n      element.classList.toggle(\r\n        'tabulator-frozen-right',\r\n        column.modules.frozen.edge && column.modules.frozen.position === 'right'\r\n      )\r\n    }\r\n  }\r\n\r\n  adjustForScrollbar(width) {\r\n    if (this.rightColumns.length) {\r\n      this.table.columnManager.getContentsElement().style.width = 'calc(100% - ' + width + 'px)'\r\n    }\r\n  }\r\n\r\n  getFrozenColumns() {\r\n    return this.leftColumns.concat(this.rightColumns)\r\n  }\r\n\r\n  _calcSpace(columns, index) {\r\n    let width = 0\r\n\r\n    for (let i = 0; i < index; i++) {\r\n      if (columns[i].visible) {\r\n        width += columns[i].getWidth()\r\n      }\r\n    }\r\n\r\n    return width\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nexport default class FrozenRows extends Module {\r\n  static moduleName = 'frozenRows'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.topElement = document.createElement('div')\r\n    this.rows = []\r\n\r\n    // register component functions\r\n    this.registerComponentFunction('row', 'freeze', this.freezeRow.bind(this))\r\n    this.registerComponentFunction('row', 'unfreeze', this.unfreezeRow.bind(this))\r\n    this.registerComponentFunction('row', 'isFrozen', this.isRowFrozen.bind(this))\r\n\r\n    // register table options\r\n    this.registerTableOption('frozenRowsField', 'id') // field to choose frozen rows by\r\n    this.registerTableOption('frozenRows', false) // holder for frozen row identifiers\r\n  }\r\n\r\n  initialize() {\r\n    const fragment = document.createDocumentFragment()\r\n\r\n    this.rows = []\r\n\r\n    this.topElement.classList.add('tabulator-frozen-rows-holder')\r\n\r\n    fragment.appendChild(document.createElement('br'))\r\n    fragment.appendChild(this.topElement)\r\n\r\n    // this.table.columnManager.element.append(this.topElement);\r\n    this.table.columnManager\r\n      .getContentsElement()\r\n      .insertBefore(fragment, this.table.columnManager.headersElement.nextSibling)\r\n\r\n    this.subscribe('row-deleting', this.detachRow.bind(this))\r\n    this.subscribe('rows-visible', this.visibleRows.bind(this))\r\n\r\n    this.registerDisplayHandler(this.getRows.bind(this), 10)\r\n\r\n    if (this.table.options.frozenRows) {\r\n      this.subscribe('data-processed', this.initializeRows.bind(this))\r\n      this.subscribe('row-added', this.initializeRow.bind(this))\r\n      this.subscribe('table-redrawing', this.resizeHolderWidth.bind(this))\r\n      this.subscribe('column-resized', this.resizeHolderWidth.bind(this))\r\n      this.subscribe('column-show', this.resizeHolderWidth.bind(this))\r\n      this.subscribe('column-hide', this.resizeHolderWidth.bind(this))\r\n    }\r\n\r\n    this.resizeHolderWidth()\r\n  }\r\n\r\n  resizeHolderWidth() {\r\n    this.topElement.style.minWidth = this.table.columnManager.headersElement.offsetWidth + 'px'\r\n  }\r\n\r\n  initializeRows() {\r\n    this.table.rowManager.getRows().forEach((row) => {\r\n      this.initializeRow(row)\r\n    })\r\n  }\r\n\r\n  initializeRow(row) {\r\n    const frozenRows = this.table.options.frozenRows\r\n    const rowType = typeof frozenRows\r\n\r\n    if (rowType === 'number') {\r\n      if (row.getPosition() && row.getPosition() + this.rows.length <= frozenRows) {\r\n        this.freezeRow(row)\r\n      }\r\n    } else if (rowType === 'function') {\r\n      if (frozenRows.call(this.table, row.getComponent())) {\r\n        this.freezeRow(row)\r\n      }\r\n    } else if (Array.isArray(frozenRows)) {\r\n      if (frozenRows.includes(row.data[this.options('frozenRowsField')])) {\r\n        this.freezeRow(row)\r\n      }\r\n    }\r\n  }\r\n\r\n  isRowFrozen(row) {\r\n    const index = this.rows.indexOf(row)\r\n    return index > -1\r\n  }\r\n\r\n  isFrozen() {\r\n    return !!this.rows.length\r\n  }\r\n\r\n  visibleRows(viewable, rows) {\r\n    this.rows.forEach((row) => {\r\n      rows.push(row)\r\n    })\r\n\r\n    return rows\r\n  }\r\n\r\n  // filter frozen rows out of display data\r\n  getRows(rows) {\r\n    const output = rows.slice(0)\r\n\r\n    this.rows.forEach(function (row) {\r\n      const index = output.indexOf(row)\r\n\r\n      if (index > -1) {\r\n        output.splice(index, 1)\r\n      }\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  freezeRow(row) {\r\n    if (!row.modules.frozen) {\r\n      row.modules.frozen = true\r\n      this.topElement.appendChild(row.getElement())\r\n      row.initialize()\r\n      row.normalizeHeight()\r\n\r\n      this.rows.push(row)\r\n\r\n      this.refreshData(false, 'display')\r\n\r\n      this.table.rowManager.adjustTableSize()\r\n\r\n      this.styleRows()\r\n    } else {\r\n      console.warn('Freeze Error - Row is already frozen')\r\n    }\r\n  }\r\n\r\n  unfreezeRow(row) {\r\n    if (row.modules.frozen) {\r\n      row.modules.frozen = false\r\n\r\n      this.detachRow(row)\r\n\r\n      this.table.rowManager.adjustTableSize()\r\n\r\n      this.refreshData(false, 'display')\r\n\r\n      if (this.rows.length) {\r\n        this.styleRows()\r\n      }\r\n    } else {\r\n      console.warn('Freeze Error - Row is already unfrozen')\r\n    }\r\n  }\r\n\r\n  detachRow(row) {\r\n    const index = this.rows.indexOf(row)\r\n\r\n    if (index > -1) {\r\n      const rowEl = row.getElement()\r\n\r\n      if (rowEl.parentNode) {\r\n        rowEl.parentNode.removeChild(rowEl)\r\n      }\r\n\r\n      this.rows.splice(index, 1)\r\n    }\r\n  }\r\n\r\n  styleRows(row) {\r\n    this.rows.forEach((row, i) => {\r\n      this.table.rowManager.styleRow(row, i)\r\n    })\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport Group from './Group.js'\r\n\r\nexport default class GroupRows extends Module {\r\n  static moduleName = 'groupRows'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.groupIDLookups = false // enable table grouping and set field to group by\r\n    this.startOpen = [\r\n      function () {\r\n        return false\r\n      }\r\n    ] // starting state of group\r\n    this.headerGenerator = [\r\n      function () {\r\n        return ''\r\n      }\r\n    ]\r\n    this.groupList = [] // ordered list of groups\r\n    this.allowedValues = false\r\n    this.groups = {} // hold row groups\r\n\r\n    this.displayHandler = this.getRows.bind(this)\r\n\r\n    this.blockRedraw = false\r\n\r\n    // register table options\r\n    this.registerTableOption('groupBy', false) // enable table grouping and set field to group by\r\n    this.registerTableOption('groupStartOpen', true) // starting state of group\r\n    this.registerTableOption('groupValues', false)\r\n    this.registerTableOption('groupUpdateOnCellEdit', false)\r\n    this.registerTableOption('groupHeader', false) // header generation function\r\n    this.registerTableOption('groupHeaderPrint', null)\r\n    this.registerTableOption('groupHeaderClipboard', null)\r\n    this.registerTableOption('groupHeaderHtmlOutput', null)\r\n    this.registerTableOption('groupHeaderDownload', null)\r\n    this.registerTableOption('groupToggleElement', 'arrow')\r\n    this.registerTableOption('groupClosedShowCalcs', false)\r\n\r\n    // register table functions\r\n    this.registerTableFunction('setGroupBy', this.setGroupBy.bind(this))\r\n    this.registerTableFunction('setGroupValues', this.setGroupValues.bind(this))\r\n    this.registerTableFunction('setGroupStartOpen', this.setGroupStartOpen.bind(this))\r\n    this.registerTableFunction('setGroupHeader', this.setGroupHeader.bind(this))\r\n    this.registerTableFunction('getGroups', this.userGetGroups.bind(this))\r\n    this.registerTableFunction('getGroupedData', this.userGetGroupedData.bind(this))\r\n\r\n    // register component functions\r\n    this.registerComponentFunction('row', 'getGroup', this.rowGetGroup.bind(this))\r\n  }\r\n\r\n  // initialize group configuration\r\n  initialize() {\r\n    this.subscribe('table-destroy', this._blockRedrawing.bind(this))\r\n    this.subscribe('rows-wipe', this._blockRedrawing.bind(this))\r\n    this.subscribe('rows-wiped', this._restore_redrawing.bind(this))\r\n\r\n    if (this.table.options.groupBy) {\r\n      if (this.table.options.groupUpdateOnCellEdit) {\r\n        this.subscribe('cell-value-updated', this.cellUpdated.bind(this))\r\n        this.subscribe('row-data-changed', this.reassignRowToGroup.bind(this), 0)\r\n      }\r\n\r\n      this.subscribe('table-built', this.configureGroupSetup.bind(this))\r\n\r\n      this.subscribe('row-deleting', this.rowDeleting.bind(this))\r\n      this.subscribe('row-deleted', this.rowsUpdated.bind(this))\r\n      this.subscribe('scroll-horizontal', this.scrollHeaders.bind(this))\r\n      this.subscribe('rows-wipe', this.wipe.bind(this))\r\n      this.subscribe('rows-added', this.rowsUpdated.bind(this))\r\n      this.subscribe('row-moving', this.rowMoving.bind(this))\r\n      this.subscribe('row-adding-index', this.rowAddingIndex.bind(this))\r\n\r\n      this.subscribe('rows-sample', this.rowSample.bind(this))\r\n\r\n      this.subscribe('render-virtual-fill', this.virtualRenderFill.bind(this))\r\n\r\n      this.registerDisplayHandler(this.displayHandler, 20)\r\n\r\n      this.initialized = true\r\n    }\r\n  }\r\n\r\n  _blockRedrawing() {\r\n    this.blockRedraw = true\r\n  }\r\n\r\n  _restore_redrawing() {\r\n    this.blockRedraw = false\r\n  }\r\n\r\n  configureGroupSetup() {\r\n    if (this.table.options.groupBy) {\r\n      let groupBy = this.table.options.groupBy\r\n      let startOpen = this.table.options.groupStartOpen\r\n      const groupHeader = this.table.options.groupHeader\r\n\r\n      this.allowedValues = this.table.options.groupValues\r\n\r\n      if (Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length) {\r\n        console.warn('Error creating group headers, groupHeader array is shorter than groupBy array')\r\n      }\r\n\r\n      this.headerGenerator = [\r\n        function () {\r\n          return ''\r\n        }\r\n      ]\r\n      this.startOpen = [\r\n        function () {\r\n          return false\r\n        }\r\n      ] // starting state of group\r\n\r\n      this.langBind('groups|item', (langValue, lang) => {\r\n        this.headerGenerator[0] = (value, count, data) => {\r\n          // header layout function\r\n          return (\r\n            (typeof value === 'undefined' ? '' : value) +\r\n            '<span>(' +\r\n            count +\r\n            ' ' +\r\n            (count === 1 ? langValue : lang.groups.items) +\r\n            ')</span>'\r\n          )\r\n        }\r\n      })\r\n\r\n      this.groupIDLookups = []\r\n\r\n      if (groupBy) {\r\n        if (\r\n          this.table.modExists('columnCalcs') &&\r\n          this.table.options.columnCalcs != 'table' &&\r\n          this.table.options.columnCalcs != 'both'\r\n        ) {\r\n          this.table.modules.columnCalcs.removeCalcs()\r\n        }\r\n      } else {\r\n        if (this.table.modExists('columnCalcs') && this.table.options.columnCalcs != 'group') {\r\n          const cols = this.table.columnManager.getRealColumns()\r\n\r\n          cols.forEach((col) => {\r\n            if (col.definition.topCalc) {\r\n              this.table.modules.columnCalcs.initializeTopRow()\r\n            }\r\n\r\n            if (col.definition.bottomCalc) {\r\n              this.table.modules.columnCalcs.initializeBottomRow()\r\n            }\r\n          })\r\n        }\r\n      }\r\n\r\n      if (!Array.isArray(groupBy)) {\r\n        groupBy = [groupBy]\r\n      }\r\n\r\n      groupBy.forEach((group, i) => {\r\n        let lookupFunc, column\r\n\r\n        if (typeof group === 'function') {\r\n          lookupFunc = group\r\n        } else {\r\n          column = this.table.columnManager.getColumnByField(group)\r\n\r\n          if (column) {\r\n            lookupFunc = function (data) {\r\n              return column.getFieldValue(data)\r\n            }\r\n          } else {\r\n            lookupFunc = function (data) {\r\n              return data[group]\r\n            }\r\n          }\r\n        }\r\n\r\n        this.groupIDLookups.push({\r\n          field: typeof group === 'function' ? false : group,\r\n          func: lookupFunc,\r\n          values: this.allowedValues ? this.allowedValues[i] : false\r\n        })\r\n      })\r\n\r\n      if (startOpen) {\r\n        if (!Array.isArray(startOpen)) {\r\n          startOpen = [startOpen]\r\n        }\r\n\r\n        startOpen.forEach((level) => {\r\n          level =\r\n            typeof level === 'function'\r\n              ? level\r\n              : function () {\r\n                  return true\r\n                }\r\n        })\r\n\r\n        this.startOpen = startOpen\r\n      }\r\n\r\n      if (groupHeader) {\r\n        this.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader]\r\n      }\r\n    } else {\r\n      this.groupList = []\r\n      this.groups = {}\r\n    }\r\n  }\r\n\r\n  rowSample(rows, prevValue) {\r\n    if (this.table.options.groupBy) {\r\n      const group = this.getGroups(false)[0]\r\n\r\n      prevValue.push(group.getRows(false)[0])\r\n    }\r\n\r\n    return prevValue\r\n  }\r\n\r\n  virtualRenderFill() {\r\n    const el = this.table.rowManager.tableElement\r\n    let rows = this.table.rowManager.getVisibleRows()\r\n\r\n    if (this.table.options.groupBy) {\r\n      rows = rows.filter((row) => {\r\n        return row.type !== 'group'\r\n      })\r\n\r\n      el.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + 'px' : ''\r\n    } else {\r\n      return rows\r\n    }\r\n  }\r\n\r\n  rowAddingIndex(row, index, top) {\r\n    if (this.table.options.groupBy) {\r\n      this.assignRowToGroup(row)\r\n\r\n      const groupRows = row.modules.group.rows\r\n\r\n      if (groupRows.length > 1) {\r\n        if (!index || (index && groupRows.indexOf(index) == -1)) {\r\n          if (top) {\r\n            if (groupRows[0] !== row) {\r\n              index = groupRows[0]\r\n              this.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top)\r\n            }\r\n          } else {\r\n            if (groupRows[groupRows.length - 1] !== row) {\r\n              index = groupRows[groupRows.length - 1]\r\n              this.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top)\r\n            }\r\n          }\r\n        } else {\r\n          this.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top)\r\n        }\r\n      }\r\n\r\n      return index\r\n    }\r\n  }\r\n\r\n  trackChanges() {\r\n    this.dispatch('group-changed')\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Table Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  setGroupBy(groups) {\r\n    this.table.options.groupBy = groups\r\n\r\n    if (!this.initialized) {\r\n      this.initialize()\r\n    }\r\n\r\n    this.configureGroupSetup()\r\n\r\n    if (!groups && this.table.modExists('columnCalcs') && this.table.options.columnCalcs === true) {\r\n      this.table.modules.columnCalcs.reinitializeCalcs()\r\n    }\r\n\r\n    this.refreshData()\r\n\r\n    this.trackChanges()\r\n  }\r\n\r\n  setGroupValues(groupValues) {\r\n    this.table.options.groupValues = groupValues\r\n    this.configureGroupSetup()\r\n    this.refreshData()\r\n\r\n    this.trackChanges()\r\n  }\r\n\r\n  setGroupStartOpen(values) {\r\n    this.table.options.groupStartOpen = values\r\n    this.configureGroupSetup()\r\n\r\n    if (this.table.options.groupBy) {\r\n      this.refreshData()\r\n\r\n      this.trackChanges()\r\n    } else {\r\n      console.warn('Grouping Update - cant refresh view, no groups have been set')\r\n    }\r\n  }\r\n\r\n  setGroupHeader(values) {\r\n    this.table.options.groupHeader = values\r\n    this.configureGroupSetup()\r\n\r\n    if (this.table.options.groupBy) {\r\n      this.refreshData()\r\n\r\n      this.trackChanges()\r\n    } else {\r\n      console.warn('Grouping Update - cant refresh view, no groups have been set')\r\n    }\r\n  }\r\n\r\n  userGetGroups(values) {\r\n    return this.getGroups(true)\r\n  }\r\n\r\n  // get grouped table data in the same format as getData()\r\n  userGetGroupedData() {\r\n    return this.table.options.groupBy ? this.getGroupedData() : this.getData()\r\n  }\r\n\r\n  /// ////////////////////////////////////\r\n  /// ////// Component Functions /////////\r\n  /// ////////////////////////////////////\r\n\r\n  rowGetGroup(row) {\r\n    return row.modules.group ? row.modules.group.getComponent() : false\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Internal Logic //////////\r\n  /// ////////////////////////////////\r\n\r\n  rowMoving(from, to, after) {\r\n    if (this.table.options.groupBy) {\r\n      if (!after && to instanceof Group) {\r\n        to = this.table.rowManager.prevDisplayRow(from) || to\r\n      }\r\n\r\n      const toGroup = to instanceof Group ? to : to.modules.group\r\n      const fromGroup = from instanceof Group ? from : from.modules.group\r\n\r\n      if (toGroup === fromGroup) {\r\n        this.table.rowManager.moveRowInArray(toGroup.rows, from, to, after)\r\n      } else {\r\n        if (fromGroup) {\r\n          fromGroup.removeRow(from)\r\n        }\r\n\r\n        toGroup.insertRow(from, to, after)\r\n      }\r\n    }\r\n  }\r\n\r\n  rowDeleting(row) {\r\n    // remove from group\r\n    if (this.table.options.groupBy && row.modules.group) {\r\n      row.modules.group.removeRow(row)\r\n    }\r\n  }\r\n\r\n  rowsUpdated(row) {\r\n    if (this.table.options.groupBy) {\r\n      this.updateGroupRows(true)\r\n    }\r\n  }\r\n\r\n  cellUpdated(cell) {\r\n    if (this.table.options.groupBy) {\r\n      this.reassignRowToGroup(cell.row)\r\n    }\r\n  }\r\n\r\n  // return appropriate rows with group headers\r\n  getRows(rows) {\r\n    if (this.table.options.groupBy && this.groupIDLookups.length) {\r\n      this.dispatchExternal('dataGrouping')\r\n\r\n      this.generateGroups(rows)\r\n\r\n      if (this.subscribedExternal('dataGrouped')) {\r\n        this.dispatchExternal('dataGrouped', this.getGroups(true))\r\n      }\r\n\r\n      return this.updateGroupRows()\r\n    } else {\r\n      return rows.slice(0)\r\n    }\r\n  }\r\n\r\n  getGroups(component) {\r\n    const groupComponents = []\r\n\r\n    this.groupList.forEach(function (group) {\r\n      groupComponents.push(component ? group.getComponent() : group)\r\n    })\r\n\r\n    return groupComponents\r\n  }\r\n\r\n  getChildGroups(group) {\r\n    let groupComponents = []\r\n\r\n    if (!group) {\r\n      group = this\r\n    }\r\n\r\n    group.groupList.forEach((child) => {\r\n      if (child.groupList.length) {\r\n        groupComponents = groupComponents.concat(this.getChildGroups(child))\r\n      } else {\r\n        groupComponents.push(child)\r\n      }\r\n    })\r\n\r\n    return groupComponents\r\n  }\r\n\r\n  wipe() {\r\n    if (this.table.options.groupBy) {\r\n      this.groupList.forEach(function (group) {\r\n        group.wipe()\r\n      })\r\n\r\n      this.groupList = []\r\n      this.groups = {}\r\n    }\r\n  }\r\n\r\n  pullGroupListData(groupList) {\r\n    let groupListData = []\r\n\r\n    groupList.forEach((group) => {\r\n      const groupHeader = {}\r\n      groupHeader.level = 0\r\n      groupHeader.rowCount = 0\r\n      groupHeader.headerContent = ''\r\n      let childData = []\r\n\r\n      if (group.hasSubGroups) {\r\n        childData = this.pullGroupListData(group.groupList)\r\n\r\n        groupHeader.level = group.level\r\n        groupHeader.rowCount = childData.length - group.groupList.length // data length minus number of sub-headers\r\n        groupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group)\r\n\r\n        groupListData.push(groupHeader)\r\n        groupListData = groupListData.concat(childData)\r\n      } else {\r\n        groupHeader.level = group.level\r\n        groupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group)\r\n        groupHeader.rowCount = group.getRows().length\r\n\r\n        groupListData.push(groupHeader)\r\n\r\n        group.getRows().forEach((row) => {\r\n          groupListData.push(row.getData('data'))\r\n        })\r\n      }\r\n    })\r\n\r\n    return groupListData\r\n  }\r\n\r\n  getGroupedData() {\r\n    return this.pullGroupListData(this.groupList)\r\n  }\r\n\r\n  getRowGroup(row) {\r\n    let match = false\r\n\r\n    if (this.options('dataTree')) {\r\n      row = this.table.modules.dataTree.getTreeParentRoot(row)\r\n    }\r\n\r\n    this.groupList.forEach((group) => {\r\n      const result = group.getRowGroup(row)\r\n\r\n      if (result) {\r\n        match = result\r\n      }\r\n    })\r\n\r\n    return match\r\n  }\r\n\r\n  countGroups() {\r\n    return this.groupList.length\r\n  }\r\n\r\n  generateGroups(rows) {\r\n    const oldGroups = this.groups\r\n\r\n    this.groups = {}\r\n    this.groupList = []\r\n\r\n    if (this.allowedValues && this.allowedValues[0]) {\r\n      this.allowedValues[0].forEach((value) => {\r\n        this.createGroup(value, 0, oldGroups)\r\n      })\r\n\r\n      rows.forEach((row) => {\r\n        this.assignRowToExistingGroup(row, oldGroups)\r\n      })\r\n    } else {\r\n      rows.forEach((row) => {\r\n        this.assignRowToGroup(row, oldGroups)\r\n      })\r\n    }\r\n\r\n    Object.values(oldGroups).forEach((group) => {\r\n      group.wipe(true)\r\n    })\r\n  }\r\n\r\n  createGroup(groupID, level, oldGroups) {\r\n    const groupKey = level + '_' + groupID\r\n    let group\r\n\r\n    oldGroups = oldGroups || []\r\n\r\n    group = new Group(\r\n      this,\r\n      false,\r\n      level,\r\n      groupID,\r\n      this.groupIDLookups[0].field,\r\n      this.headerGenerator[0],\r\n      oldGroups[groupKey]\r\n    )\r\n\r\n    this.groups[groupKey] = group\r\n    this.groupList.push(group)\r\n  }\r\n\r\n  assignRowToExistingGroup(row, oldGroups) {\r\n    const groupID = this.groupIDLookups[0].func(row.getData())\r\n    const groupKey = '0_' + groupID\r\n\r\n    if (this.groups[groupKey]) {\r\n      this.groups[groupKey].addRow(row)\r\n    }\r\n  }\r\n\r\n  assignRowToGroup(row, oldGroups) {\r\n    const groupID = this.groupIDLookups[0].func(row.getData())\r\n    const newGroupNeeded = !this.groups['0_' + groupID]\r\n\r\n    if (newGroupNeeded) {\r\n      this.createGroup(groupID, 0, oldGroups)\r\n    }\r\n\r\n    this.groups['0_' + groupID].addRow(row)\r\n\r\n    return !newGroupNeeded\r\n  }\r\n\r\n  reassignRowToGroup(row) {\r\n    if (row.type === 'row') {\r\n      const oldRowGroup = row.modules.group\r\n      const oldGroupPath = oldRowGroup.getPath()\r\n      const newGroupPath = this.getExpectedPath(row)\r\n      let samePath\r\n\r\n      // figure out if new group path is the same as old group path\r\n      samePath =\r\n        oldGroupPath.length == newGroupPath.length &&\r\n        oldGroupPath.every((element, index) => {\r\n          return element === newGroupPath[index]\r\n        })\r\n\r\n      // refresh if they new path and old path aren't the same (aka the row's groupings have changed)\r\n      if (!samePath) {\r\n        oldRowGroup.removeRow(row)\r\n        this.assignRowToGroup(row, this.groups)\r\n        this.refreshData(true)\r\n      }\r\n    }\r\n  }\r\n\r\n  getExpectedPath(row) {\r\n    const groupPath = []\r\n    const rowData = row.getData()\r\n\r\n    this.groupIDLookups.forEach((groupId) => {\r\n      groupPath.push(groupId.func(rowData))\r\n    })\r\n\r\n    return groupPath\r\n  }\r\n\r\n  updateGroupRows(force) {\r\n    let output = []\r\n\r\n    if (!this.blockRedraw) {\r\n      this.groupList.forEach((group) => {\r\n        output = output.concat(group.getHeadersAndRows())\r\n      })\r\n\r\n      if (force) {\r\n        this.refreshData(true)\r\n      }\r\n    }\r\n\r\n    return output\r\n  }\r\n\r\n  scrollHeaders(left) {\r\n    if (this.table.options.groupBy) {\r\n      if (this.table.options.renderHorizontal === 'virtual') {\r\n        left -= this.table.columnManager.renderer.vDomPadLeft\r\n      }\r\n\r\n      left = left + 'px'\r\n\r\n      this.groupList.forEach((group) => {\r\n        group.scrollHeader(left)\r\n      })\r\n    }\r\n  }\r\n\r\n  removeGroup(group) {\r\n    const groupKey = group.level + '_' + group.key\r\n    let index\r\n\r\n    if (this.groups[groupKey]) {\r\n      delete this.groups[groupKey]\r\n\r\n      index = this.groupList.indexOf(group)\r\n\r\n      if (index > -1) {\r\n        this.groupList.splice(index, 1)\r\n      }\r\n    }\r\n  }\r\n\r\n  checkBasicModeGroupHeaderWidth() {\r\n    const element = this.table.rowManager.tableElement\r\n    let onlyGroupHeaders = true\r\n\r\n    this.table.rowManager.getDisplayRows().forEach((row, index) => {\r\n      this.table.rowManager.styleRow(row, index)\r\n      element.appendChild(row.getElement())\r\n      row.initialize(true)\r\n\r\n      if (row.type !== 'group') {\r\n        onlyGroupHeaders = false\r\n      }\r\n    })\r\n\r\n    if (onlyGroupHeaders) {\r\n      element.style.minWidth = this.table.columnManager.getWidth() + 'px'\r\n    } else {\r\n      element.style.minWidth = ''\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nexport default class HtmlTableImport extends Module {\r\n  static moduleName = 'htmlTableImport'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.fieldIndex = []\r\n    this.hasIndex = false\r\n  }\r\n\r\n  initialize() {\r\n    this.tableElementCheck()\r\n  }\r\n\r\n  tableElementCheck() {\r\n    if (this.table.originalElement && this.table.originalElement.tagName === 'TABLE') {\r\n      if (this.table.originalElement.childNodes.length) {\r\n        this.parseTable()\r\n      } else {\r\n        console.warn(\r\n          'Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.'\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  parseTable() {\r\n    const element = this.table.originalElement\r\n    const options = this.table.options\r\n    const headers = element.getElementsByTagName('th')\r\n    let rows = element.getElementsByTagName('tbody')[0]\r\n    const data = []\r\n\r\n    this.hasIndex = false\r\n\r\n    this.dispatchExternal('htmlImporting')\r\n\r\n    rows = rows ? rows.getElementsByTagName('tr') : []\r\n\r\n    // check for Tabulator inline options\r\n    this._extractOptions(element, options)\r\n\r\n    if (headers.length) {\r\n      this._extractHeaders(headers, rows)\r\n    } else {\r\n      this._generateBlankHeaders(headers, rows)\r\n    }\r\n\r\n    // iterate through table rows and build data set\r\n    for (let index = 0; index < rows.length; index++) {\r\n      const row = rows[index]\r\n      const cells = row.getElementsByTagName('td')\r\n      const item = {}\r\n\r\n      // create index if the don't exist in table\r\n      if (!this.hasIndex) {\r\n        item[options.index] = index\r\n      }\r\n\r\n      for (let i = 0; i < cells.length; i++) {\r\n        const cell = cells[i]\r\n        if (typeof this.fieldIndex[i] !== 'undefined') {\r\n          item[this.fieldIndex[i]] = cell.innerHTML\r\n        }\r\n      }\r\n\r\n      // add row data to item\r\n      data.push(item)\r\n    }\r\n\r\n    options.data = data\r\n\r\n    this.dispatchExternal('htmlImported')\r\n  }\r\n\r\n  // extract tabulator attribute options\r\n  _extractOptions(element, options, defaultOptions) {\r\n    const attributes = element.attributes\r\n    const optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options)\r\n    const optionsList = {}\r\n\r\n    optionsArr.forEach((item) => {\r\n      optionsList[item.toLowerCase()] = item\r\n    })\r\n\r\n    for (const index in attributes) {\r\n      const attrib = attributes[index]\r\n      var name\r\n\r\n      if (attrib && typeof attrib === 'object' && attrib.name && attrib.name.indexOf('tabulator-') === 0) {\r\n        name = attrib.name.replace('tabulator-', '')\r\n\r\n        if (typeof optionsList[name] !== 'undefined') {\r\n          options[optionsList[name]] = this._attribValue(attrib.value)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // get value of attribute\r\n  _attribValue(value) {\r\n    if (value === 'true') {\r\n      return true\r\n    }\r\n\r\n    if (value === 'false') {\r\n      return false\r\n    }\r\n\r\n    return value\r\n  }\r\n\r\n  // find column if it has already been defined\r\n  _findCol(title) {\r\n    const match = this.table.options.columns.find((column) => {\r\n      return column.title === title\r\n    })\r\n\r\n    return match || false\r\n  }\r\n\r\n  // extract column from headers\r\n  _extractHeaders(headers, rows) {\r\n    for (let index = 0; index < headers.length; index++) {\r\n      const header = headers[index]\r\n      let exists = false\r\n      let col = this._findCol(header.textContent)\r\n      var width\r\n\r\n      if (col) {\r\n        exists = true\r\n      } else {\r\n        col = { title: header.textContent.trim() }\r\n      }\r\n\r\n      if (!col.field) {\r\n        col.field = header.textContent.trim().toLowerCase().replaceAll(' ', '_')\r\n      }\r\n\r\n      width = header.getAttribute('width')\r\n\r\n      if (width && !col.width) {\r\n        col.width = width\r\n      }\r\n\r\n      // check for Tabulator inline options\r\n      this._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults)\r\n\r\n      this.fieldIndex[index] = col.field\r\n\r\n      if (col.field == this.table.options.index) {\r\n        this.hasIndex = true\r\n      }\r\n\r\n      if (!exists) {\r\n        this.table.options.columns.push(col)\r\n      }\r\n    }\r\n  }\r\n\r\n  // generate blank headers\r\n  _generateBlankHeaders(headers, rows) {\r\n    for (let index = 0; index < headers.length; index++) {\r\n      const header = headers[index]\r\n      const col = { title: '', field: 'col' + index }\r\n\r\n      this.fieldIndex[index] = col.field\r\n\r\n      const width = header.getAttribute('width')\r\n\r\n      if (width) {\r\n        col.width = width\r\n      }\r\n\r\n      this.table.options.columns.push(col)\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nimport Cell from '../../core/cell/Cell.js'\r\nimport Column from '../../core/column/Column.js'\r\n\r\nexport default class Interaction extends Module {\r\n  static moduleName = 'interaction'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.eventMap = {\r\n      // row events\r\n      rowClick: 'row-click',\r\n      rowDblClick: 'row-dblclick',\r\n      rowContext: 'row-contextmenu',\r\n      rowMouseEnter: 'row-mouseenter',\r\n      rowMouseLeave: 'row-mouseleave',\r\n      rowMouseOver: 'row-mouseover',\r\n      rowMouseOut: 'row-mouseout',\r\n      rowMouseMove: 'row-mousemove',\r\n      rowMouseDown: 'row-mousedown',\r\n      rowMouseUp: 'row-mouseup',\r\n      rowTap: 'row',\r\n      rowDblTap: 'row',\r\n      rowTapHold: 'row',\r\n\r\n      // cell events\r\n      cellClick: 'cell-click',\r\n      cellDblClick: 'cell-dblclick',\r\n      cellContext: 'cell-contextmenu',\r\n      cellMouseEnter: 'cell-mouseenter',\r\n      cellMouseLeave: 'cell-mouseleave',\r\n      cellMouseOver: 'cell-mouseover',\r\n      cellMouseOut: 'cell-mouseout',\r\n      cellMouseMove: 'cell-mousemove',\r\n      cellMouseDown: 'cell-mousedown',\r\n      cellMouseUp: 'cell-mouseup',\r\n      cellTap: 'cell',\r\n      cellDblTap: 'cell',\r\n      cellTapHold: 'cell',\r\n\r\n      // column header events\r\n      headerClick: 'column-click',\r\n      headerDblClick: 'column-dblclick',\r\n      headerContext: 'column-contextmenu',\r\n      headerMouseEnter: 'column-mouseenter',\r\n      headerMouseLeave: 'column-mouseleave',\r\n      headerMouseOver: 'column-mouseover',\r\n      headerMouseOut: 'column-mouseout',\r\n      headerMouseMove: 'column-mousemove',\r\n      headerMouseDown: 'column-mousedown',\r\n      headerMouseUp: 'column-mouseup',\r\n      headerTap: 'column',\r\n      headerDblTap: 'column',\r\n      headerTapHold: 'column',\r\n\r\n      // group header\r\n      groupClick: 'group-click',\r\n      groupDblClick: 'group-dblclick',\r\n      groupContext: 'group-contextmenu',\r\n      groupMouseEnter: 'group-mouseenter',\r\n      groupMouseLeave: 'group-mouseleave',\r\n      groupMouseOver: 'group-mouseover',\r\n      groupMouseOut: 'group-mouseout',\r\n      groupMouseMove: 'group-mousemove',\r\n      groupMouseDown: 'group-mousedown',\r\n      groupMouseUp: 'group-mouseup',\r\n      groupTap: 'group',\r\n      groupDblTap: 'group',\r\n      groupTapHold: 'group'\r\n    }\r\n\r\n    this.subscribers = {}\r\n\r\n    this.touchSubscribers = {}\r\n\r\n    this.columnSubscribers = {}\r\n\r\n    this.touchWatchers = {\r\n      row: {\r\n        tap: null,\r\n        tapDbl: null,\r\n        tapHold: null\r\n      },\r\n      cell: {\r\n        tap: null,\r\n        tapDbl: null,\r\n        tapHold: null\r\n      },\r\n      column: {\r\n        tap: null,\r\n        tapDbl: null,\r\n        tapHold: null\r\n      },\r\n      group: {\r\n        tap: null,\r\n        tapDbl: null,\r\n        tapHold: null\r\n      }\r\n    }\r\n\r\n    this.registerColumnOption('headerClick')\r\n    this.registerColumnOption('headerDblClick')\r\n    this.registerColumnOption('headerContext')\r\n    this.registerColumnOption('headerMouseEnter')\r\n    this.registerColumnOption('headerMouseLeave')\r\n    this.registerColumnOption('headerMouseOver')\r\n    this.registerColumnOption('headerMouseOut')\r\n    this.registerColumnOption('headerMouseMove')\r\n    this.registerColumnOption('headerMouseDown')\r\n    this.registerColumnOption('headerMouseUp')\r\n    this.registerColumnOption('headerTap')\r\n    this.registerColumnOption('headerDblTap')\r\n    this.registerColumnOption('headerTapHold')\r\n\r\n    this.registerColumnOption('cellClick')\r\n    this.registerColumnOption('cellDblClick')\r\n    this.registerColumnOption('cellContext')\r\n    this.registerColumnOption('cellMouseEnter')\r\n    this.registerColumnOption('cellMouseLeave')\r\n    this.registerColumnOption('cellMouseOver')\r\n    this.registerColumnOption('cellMouseOut')\r\n    this.registerColumnOption('cellMouseMove')\r\n    this.registerColumnOption('cellMouseDown')\r\n    this.registerColumnOption('cellMouseUp')\r\n    this.registerColumnOption('cellTap')\r\n    this.registerColumnOption('cellDblTap')\r\n    this.registerColumnOption('cellTapHold')\r\n  }\r\n\r\n  initialize() {\r\n    this.initializeExternalEvents()\r\n\r\n    this.subscribe('column-init', this.initializeColumn.bind(this))\r\n    this.subscribe('cell-dblclick', this.cellContentsSelectionFixer.bind(this))\r\n    this.subscribe('scroll-horizontal', this.clearTouchWatchers.bind(this))\r\n    this.subscribe('scroll-vertical', this.clearTouchWatchers.bind(this))\r\n  }\r\n\r\n  clearTouchWatchers() {\r\n    const types = Object.values(this.touchWatchers)\r\n\r\n    types.forEach((type) => {\r\n      for (const key in type) {\r\n        type[key] = null\r\n      }\r\n    })\r\n  }\r\n\r\n  cellContentsSelectionFixer(e, cell) {\r\n    let range\r\n\r\n    if (this.table.modExists('edit')) {\r\n      if (this.table.modules.edit.currentCell === cell) {\r\n        return // prevent instant selection of editor content\r\n      }\r\n    }\r\n\r\n    e.preventDefault()\r\n\r\n    try {\r\n      if (document.selection) {\r\n        // IE\r\n        range = document.body.createTextRange()\r\n        range.moveToElementText(cell.getElement())\r\n        range.select()\r\n      } else if (window.getSelection) {\r\n        range = document.createRange()\r\n        range.selectNode(cell.getElement())\r\n        window.getSelection().removeAllRanges()\r\n        window.getSelection().addRange(range)\r\n      }\r\n    } catch (e) {}\r\n  }\r\n\r\n  initializeExternalEvents() {\r\n    for (const key in this.eventMap) {\r\n      this.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key))\r\n    }\r\n  }\r\n\r\n  subscriptionChanged(key, added) {\r\n    if (added) {\r\n      if (!this.subscribers[key]) {\r\n        if (this.eventMap[key].includes('-')) {\r\n          this.subscribers[key] = this.handle.bind(this, key)\r\n          this.subscribe(this.eventMap[key], this.subscribers[key])\r\n        } else {\r\n          this.subscribeTouchEvents(key)\r\n        }\r\n      }\r\n    } else {\r\n      if (this.eventMap[key].includes('-')) {\r\n        if (this.subscribers[key] && !this.columnSubscribers[key] && !this.subscribedExternal(key)) {\r\n          this.unsubscribe(this.eventMap[key], this.subscribers[key])\r\n          delete this.subscribers[key]\r\n        }\r\n      } else {\r\n        this.unsubscribeTouchEvents(key)\r\n      }\r\n    }\r\n  }\r\n\r\n  subscribeTouchEvents(key) {\r\n    const type = this.eventMap[key]\r\n\r\n    if (!this.touchSubscribers[type + '-touchstart']) {\r\n      this.touchSubscribers[type + '-touchstart'] = this.handleTouch.bind(this, type, 'start')\r\n      this.touchSubscribers[type + '-touchend'] = this.handleTouch.bind(this, type, 'end')\r\n\r\n      this.subscribe(type + '-touchstart', this.touchSubscribers[type + '-touchstart'])\r\n      this.subscribe(type + '-touchend', this.touchSubscribers[type + '-touchend'])\r\n    }\r\n\r\n    this.subscribers[key] = true\r\n  }\r\n\r\n  unsubscribeTouchEvents(key) {\r\n    let noTouch = true\r\n    const type = this.eventMap[key]\r\n\r\n    if (this.subscribers[key] && !this.subscribedExternal(key)) {\r\n      delete this.subscribers[key]\r\n\r\n      for (const i in this.eventMap) {\r\n        if (this.eventMap[i] === type) {\r\n          if (this.subscribers[i]) {\r\n            noTouch = false\r\n          }\r\n        }\r\n      }\r\n\r\n      if (noTouch) {\r\n        this.unsubscribe(type + '-touchstart', this.touchSubscribers[type + '-touchstart'])\r\n        this.unsubscribe(type + '-touchend', this.touchSubscribers[type + '-touchend'])\r\n\r\n        delete this.touchSubscribers[type + '-touchstart']\r\n        delete this.touchSubscribers[type + '-touchend']\r\n      }\r\n    }\r\n  }\r\n\r\n  initializeColumn(column) {\r\n    const def = column.definition\r\n\r\n    for (const key in this.eventMap) {\r\n      if (def[key]) {\r\n        this.subscriptionChanged(key, true)\r\n\r\n        if (!this.columnSubscribers[key]) {\r\n          this.columnSubscribers[key] = []\r\n        }\r\n\r\n        this.columnSubscribers[key].push(column)\r\n      }\r\n    }\r\n  }\r\n\r\n  handle(action, e, component) {\r\n    this.dispatchEvent(action, e, component)\r\n  }\r\n\r\n  handleTouch(type, action, e, component) {\r\n    const watchers = this.touchWatchers[type]\r\n\r\n    if (type === 'column') {\r\n      type = 'header'\r\n    }\r\n\r\n    switch (action) {\r\n      case 'start':\r\n        watchers.tap = true\r\n\r\n        clearTimeout(watchers.tapHold)\r\n\r\n        watchers.tapHold = setTimeout(() => {\r\n          clearTimeout(watchers.tapHold)\r\n          watchers.tapHold = null\r\n\r\n          watchers.tap = null\r\n          clearTimeout(watchers.tapDbl)\r\n          watchers.tapDbl = null\r\n\r\n          this.dispatchEvent(type + 'TapHold', e, component)\r\n        }, 1000)\r\n        break\r\n\r\n      case 'end':\r\n        if (watchers.tap) {\r\n          watchers.tap = null\r\n          this.dispatchEvent(type + 'Tap', e, component)\r\n        }\r\n\r\n        if (watchers.tapDbl) {\r\n          clearTimeout(watchers.tapDbl)\r\n          watchers.tapDbl = null\r\n\r\n          this.dispatchEvent(type + 'DblTap', e, component)\r\n        } else {\r\n          watchers.tapDbl = setTimeout(() => {\r\n            clearTimeout(watchers.tapDbl)\r\n            watchers.tapDbl = null\r\n          }, 300)\r\n        }\r\n\r\n        clearTimeout(watchers.tapHold)\r\n        watchers.tapHold = null\r\n        break\r\n    }\r\n  }\r\n\r\n  dispatchEvent(action, e, component) {\r\n    const componentObj = component.getComponent()\r\n    let callback\r\n\r\n    if (this.columnSubscribers[action]) {\r\n      if (component instanceof Cell) {\r\n        callback = component.column.definition[action]\r\n      } else if (component instanceof Column) {\r\n        callback = component.definition[action]\r\n      }\r\n\r\n      if (callback) {\r\n        callback(e, componentObj)\r\n      }\r\n    }\r\n\r\n    this.dispatchExternal(action, e, componentObj)\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nexport default class Menu extends Module {\r\n  static moduleName = 'menu'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.menuContainer = null\r\n    this.nestedMenuBlock = false\r\n\r\n    this.currentComponent = null\r\n    this.rootPopup = null\r\n\r\n    this.columnSubscribers = {}\r\n\r\n    // this.registerTableOption(\"menuContainer\", undefined); //deprecated\r\n\r\n    this.registerTableOption('rowContextMenu', false)\r\n    this.registerTableOption('rowClickMenu', false)\r\n    this.registerTableOption('rowDblClickMenu', false)\r\n    this.registerTableOption('groupContextMenu', false)\r\n    this.registerTableOption('groupClickMenu', false)\r\n    this.registerTableOption('groupDblClickMenu', false)\r\n\r\n    this.registerColumnOption('headerContextMenu')\r\n    this.registerColumnOption('headerClickMenu')\r\n    this.registerColumnOption('headerDblClickMenu')\r\n    this.registerColumnOption('headerMenu')\r\n    this.registerColumnOption('headerMenuIcon')\r\n    this.registerColumnOption('contextMenu')\r\n    this.registerColumnOption('clickMenu')\r\n    this.registerColumnOption('dblClickMenu')\r\n  }\r\n\r\n  initialize() {\r\n    this.deprecatedOptionsCheck()\r\n    this.initializeRowWatchers()\r\n    this.initializeGroupWatchers()\r\n\r\n    this.subscribe('column-init', this.initializeColumn.bind(this))\r\n  }\r\n\r\n  deprecatedOptionsCheck() {\r\n    // if(!this.deprecationCheck(\"menuContainer\", \"popupContainer\")){\r\n    // \tthis.table.options.popupContainer = this.table.options.menuContainer;\r\n    // }\r\n  }\r\n\r\n  initializeRowWatchers() {\r\n    if (this.table.options.rowContextMenu) {\r\n      this.subscribe('row-contextmenu', this.loadMenuEvent.bind(this, this.table.options.rowContextMenu))\r\n      this.table.on('rowTapHold', this.loadMenuEvent.bind(this, this.table.options.rowContextMenu))\r\n    }\r\n\r\n    if (this.table.options.rowClickMenu) {\r\n      this.subscribe('row-click', this.loadMenuEvent.bind(this, this.table.options.rowClickMenu))\r\n    }\r\n\r\n    if (this.table.options.rowDblClickMenu) {\r\n      this.subscribe('row-dblclick', this.loadMenuEvent.bind(this, this.table.options.rowDblClickMenu))\r\n    }\r\n  }\r\n\r\n  initializeGroupWatchers() {\r\n    if (this.table.options.groupContextMenu) {\r\n      this.subscribe('group-contextmenu', this.loadMenuEvent.bind(this, this.table.options.groupContextMenu))\r\n      this.table.on('groupTapHold', this.loadMenuEvent.bind(this, this.table.options.groupContextMenu))\r\n    }\r\n\r\n    if (this.table.options.groupClickMenu) {\r\n      this.subscribe('group-click', this.loadMenuEvent.bind(this, this.table.options.groupClickMenu))\r\n    }\r\n\r\n    if (this.table.options.groupDblClickMenu) {\r\n      this.subscribe('group-dblclick', this.loadMenuEvent.bind(this, this.table.options.groupDblClickMenu))\r\n    }\r\n  }\r\n\r\n  initializeColumn(column) {\r\n    const def = column.definition\r\n\r\n    // handle column events\r\n    if (def.headerContextMenu && !this.columnSubscribers.headerContextMenu) {\r\n      this.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, 'headerContextMenu')\r\n      this.subscribe('column-contextmenu', this.columnSubscribers.headerContextMenu)\r\n      this.table.on('headerTapHold', this.loadMenuTableColumnEvent.bind(this, 'headerContextMenu'))\r\n    }\r\n\r\n    if (def.headerClickMenu && !this.columnSubscribers.headerClickMenu) {\r\n      this.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, 'headerClickMenu')\r\n      this.subscribe('column-click', this.columnSubscribers.headerClickMenu)\r\n    }\r\n\r\n    if (def.headerDblClickMenu && !this.columnSubscribers.headerDblClickMenu) {\r\n      this.columnSubscribers.headerDblClickMenu = this.loadMenuTableColumnEvent.bind(this, 'headerDblClickMenu')\r\n      this.subscribe('column-dblclick', this.columnSubscribers.headerDblClickMenu)\r\n    }\r\n\r\n    if (def.headerMenu) {\r\n      this.initializeColumnHeaderMenu(column)\r\n    }\r\n\r\n    // handle cell events\r\n    if (def.contextMenu && !this.columnSubscribers.contextMenu) {\r\n      this.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, 'contextMenu')\r\n      this.subscribe('cell-contextmenu', this.columnSubscribers.contextMenu)\r\n      this.table.on('cellTapHold', this.loadMenuTableCellEvent.bind(this, 'contextMenu'))\r\n    }\r\n\r\n    if (def.clickMenu && !this.columnSubscribers.clickMenu) {\r\n      this.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, 'clickMenu')\r\n      this.subscribe('cell-click', this.columnSubscribers.clickMenu)\r\n    }\r\n\r\n    if (def.dblClickMenu && !this.columnSubscribers.dblClickMenu) {\r\n      this.columnSubscribers.dblClickMenu = this.loadMenuTableCellEvent.bind(this, 'dblClickMenu')\r\n      this.subscribe('cell-dblclick', this.columnSubscribers.dblClickMenu)\r\n    }\r\n  }\r\n\r\n  initializeColumnHeaderMenu(column) {\r\n    let icon = column.definition.headerMenuIcon\r\n    let headerMenuEl\r\n\r\n    headerMenuEl = document.createElement('span')\r\n    headerMenuEl.classList.add('tabulator-header-popup-button')\r\n\r\n    if (icon) {\r\n      if (typeof icon === 'function') {\r\n        icon = icon(column.getComponent())\r\n      }\r\n\r\n      if (icon instanceof HTMLElement) {\r\n        headerMenuEl.appendChild(icon)\r\n      } else {\r\n        headerMenuEl.innerHTML = icon\r\n      }\r\n    } else {\r\n      headerMenuEl.innerHTML = '&vellip;'\r\n    }\r\n\r\n    headerMenuEl.addEventListener('click', (e) => {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n\r\n      this.loadMenuEvent(column.definition.headerMenu, e, column)\r\n    })\r\n\r\n    column.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild)\r\n  }\r\n\r\n  loadMenuTableCellEvent(option, e, cell) {\r\n    if (cell._cell) {\r\n      cell = cell._cell\r\n    }\r\n\r\n    if (cell.column.definition[option]) {\r\n      this.loadMenuEvent(cell.column.definition[option], e, cell)\r\n    }\r\n  }\r\n\r\n  loadMenuTableColumnEvent(option, e, column) {\r\n    if (column._column) {\r\n      column = column._column\r\n    }\r\n\r\n    if (column.definition[option]) {\r\n      this.loadMenuEvent(column.definition[option], e, column)\r\n    }\r\n  }\r\n\r\n  loadMenuEvent(menu, e, component) {\r\n    if (component._group) {\r\n      component = component._group\r\n    } else if (component._row) {\r\n      component = component._row\r\n    }\r\n\r\n    menu = typeof menu === 'function' ? menu.call(this.table, e, component.getComponent()) : menu\r\n\r\n    this.loadMenu(e, component, menu)\r\n  }\r\n\r\n  loadMenu(e, component, menu, parentEl, parentPopup) {\r\n    const touch = !(e instanceof MouseEvent)\r\n    const menuEl = document.createElement('div')\r\n    let popup\r\n\r\n    menuEl.classList.add('tabulator-menu')\r\n\r\n    if (!touch) {\r\n      e.preventDefault()\r\n    }\r\n\r\n    // abort if no menu set\r\n    if (!menu || !menu.length) {\r\n      return\r\n    }\r\n\r\n    if (!parentEl) {\r\n      if (this.nestedMenuBlock) {\r\n        // abort if child menu already open\r\n        if (this.rootPopup) {\r\n          return\r\n        }\r\n      } else {\r\n        this.nestedMenuBlock = setTimeout(() => {\r\n          this.nestedMenuBlock = false\r\n        }, 100)\r\n      }\r\n\r\n      if (this.rootPopup) {\r\n        this.rootPopup.hide()\r\n      }\r\n\r\n      this.rootPopup = popup = this.popup(menuEl)\r\n    } else {\r\n      popup = parentPopup.child(menuEl)\r\n    }\r\n\r\n    menu.forEach((item) => {\r\n      const itemEl = document.createElement('div')\r\n      let label = item.label\r\n      let disabled = item.disabled\r\n\r\n      if (item.separator) {\r\n        itemEl.classList.add('tabulator-menu-separator')\r\n      } else {\r\n        itemEl.classList.add('tabulator-menu-item')\r\n\r\n        if (typeof label === 'function') {\r\n          label = label.call(this.table, component.getComponent())\r\n        }\r\n\r\n        if (label instanceof Node) {\r\n          itemEl.appendChild(label)\r\n        } else {\r\n          itemEl.innerHTML = label\r\n        }\r\n\r\n        if (typeof disabled === 'function') {\r\n          disabled = disabled.call(this.table, component.getComponent())\r\n        }\r\n\r\n        if (disabled) {\r\n          itemEl.classList.add('tabulator-menu-item-disabled')\r\n          itemEl.addEventListener('click', (e) => {\r\n            e.stopPropagation()\r\n          })\r\n        } else {\r\n          if (item.menu && item.menu.length) {\r\n            itemEl.addEventListener('click', (e) => {\r\n              e.stopPropagation()\r\n              this.loadMenu(e, component, item.menu, itemEl, popup)\r\n            })\r\n          } else {\r\n            if (item.action) {\r\n              itemEl.addEventListener('click', (e) => {\r\n                item.action(e, component.getComponent())\r\n              })\r\n            }\r\n          }\r\n        }\r\n\r\n        if (item.menu && item.menu.length) {\r\n          itemEl.classList.add('tabulator-menu-item-submenu')\r\n        }\r\n      }\r\n\r\n      menuEl.appendChild(itemEl)\r\n    })\r\n\r\n    menuEl.addEventListener('click', (e) => {\r\n      if (this.rootPopup) {\r\n        this.rootPopup.hide()\r\n      }\r\n    })\r\n\r\n    popup.show(parentEl || e)\r\n\r\n    if (popup === this.rootPopup) {\r\n      this.rootPopup.hideOnBlur(() => {\r\n        this.rootPopup = null\r\n\r\n        if (this.currentComponent) {\r\n          this.dispatch('menu-closed', menu, popup)\r\n          this.dispatchExternal('menuClosed', this.currentComponent.getComponent())\r\n          this.currentComponent = null\r\n        }\r\n      })\r\n\r\n      this.currentComponent = component\r\n\r\n      this.dispatch('menu-opened', menu, popup)\r\n      this.dispatchExternal('menuOpened', component.getComponent())\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\nimport Helpers from '../../core/tools/Helpers.js'\r\n\r\nexport default class MoveColumns extends Module {\r\n  static moduleName = 'moveColumn'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.placeholderElement = this.createPlaceholderElement()\r\n    this.hoverElement = false // floating column header element\r\n    this.checkTimeout = false // click check timeout holder\r\n    this.checkPeriod = 250 // period to wait on mousedown to consider this a move and not a click\r\n    this.moving = false // currently moving column\r\n    this.toCol = false // destination column\r\n    this.toColAfter = false // position of moving column relative to the destination column\r\n    this.startX = 0 // starting position within header element\r\n    this.autoScrollMargin = 40 // auto scroll on edge when within margin\r\n    this.autoScrollStep = 5 // auto scroll distance in pixels\r\n    this.autoScrollTimeout = false // auto scroll timeout\r\n    this.touchMove = false\r\n\r\n    this.moveHover = this.moveHover.bind(this)\r\n    this.endMove = this.endMove.bind(this)\r\n\r\n    this.registerTableOption('movableColumns', false) // enable movable columns\r\n  }\r\n\r\n  createPlaceholderElement() {\r\n    const el = document.createElement('div')\r\n\r\n    el.classList.add('tabulator-col')\r\n    el.classList.add('tabulator-col-placeholder')\r\n\r\n    return el\r\n  }\r\n\r\n  initialize() {\r\n    if (this.table.options.movableColumns) {\r\n      this.subscribe('column-init', this.initializeColumn.bind(this))\r\n      this.subscribe('alert-show', this.abortMove.bind(this))\r\n    }\r\n  }\r\n\r\n  abortMove() {\r\n    clearTimeout(this.checkTimeout)\r\n  }\r\n\r\n  initializeColumn(column) {\r\n    const self = this\r\n    const config = {}\r\n    let colEl\r\n\r\n    if (!column.modules.frozen && !column.isGroup && !column.isRowHeader) {\r\n      colEl = column.getElement()\r\n\r\n      config.mousemove = function (e) {\r\n        if (column.parent === self.moving.parent) {\r\n          if (\r\n            (self.touchMove ? e.touches[0].pageX : e.pageX) -\r\n              Helpers.elOffset(colEl).left +\r\n              self.table.columnManager.contentsElement.scrollLeft >\r\n            column.getWidth() / 2\r\n          ) {\r\n            if (self.toCol !== column || !self.toColAfter) {\r\n              colEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling)\r\n              self.moveColumn(column, true)\r\n            }\r\n          } else {\r\n            if (self.toCol !== column || self.toColAfter) {\r\n              colEl.parentNode.insertBefore(self.placeholderElement, colEl)\r\n              self.moveColumn(column, false)\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      colEl.addEventListener('mousedown', function (e) {\r\n        self.touchMove = false\r\n        if (e.which === 1) {\r\n          self.checkTimeout = setTimeout(function () {\r\n            self.startMove(e, column)\r\n          }, self.checkPeriod)\r\n        }\r\n      })\r\n\r\n      colEl.addEventListener('mouseup', function (e) {\r\n        if (e.which === 1) {\r\n          if (self.checkTimeout) {\r\n            clearTimeout(self.checkTimeout)\r\n          }\r\n        }\r\n      })\r\n\r\n      self.bindTouchEvents(column)\r\n    }\r\n\r\n    column.modules.moveColumn = config\r\n  }\r\n\r\n  bindTouchEvents(column) {\r\n    const colEl = column.getElement()\r\n    let startXMove = false // shifting center position of the cell\r\n    let nextCol\r\n    let prevCol\r\n    let nextColWidth\r\n    let prevColWidth\r\n    let nextColWidthLast\r\n    let prevColWidthLast\r\n\r\n    colEl.addEventListener(\r\n      'touchstart',\r\n      (e) => {\r\n        this.checkTimeout = setTimeout(() => {\r\n          this.touchMove = true\r\n          nextCol = column.nextColumn()\r\n          nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0\r\n          prevCol = column.prevColumn()\r\n          prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0\r\n          nextColWidthLast = 0\r\n          prevColWidthLast = 0\r\n          startXMove = false\r\n\r\n          this.startMove(e, column)\r\n        }, this.checkPeriod)\r\n      },\r\n      { passive: true }\r\n    )\r\n\r\n    colEl.addEventListener(\r\n      'touchmove',\r\n      (e) => {\r\n        let diff, moveToCol\r\n\r\n        if (this.moving) {\r\n          this.moveHover(e)\r\n\r\n          if (!startXMove) {\r\n            startXMove = e.touches[0].pageX\r\n          }\r\n\r\n          diff = e.touches[0].pageX - startXMove\r\n\r\n          if (diff > 0) {\r\n            if (nextCol && diff - nextColWidthLast > nextColWidth) {\r\n              moveToCol = nextCol\r\n\r\n              if (moveToCol !== column) {\r\n                startXMove = e.touches[0].pageX\r\n                moveToCol\r\n                  .getElement()\r\n                  .parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling)\r\n                this.moveColumn(moveToCol, true)\r\n              }\r\n            }\r\n          } else {\r\n            if (prevCol && -diff - prevColWidthLast > prevColWidth) {\r\n              moveToCol = prevCol\r\n\r\n              if (moveToCol !== column) {\r\n                startXMove = e.touches[0].pageX\r\n                moveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement())\r\n                this.moveColumn(moveToCol, false)\r\n              }\r\n            }\r\n          }\r\n\r\n          if (moveToCol) {\r\n            nextCol = moveToCol.nextColumn()\r\n            nextColWidthLast = nextColWidth\r\n            nextColWidth = nextCol ? nextCol.getWidth() / 2 : 0\r\n            prevCol = moveToCol.prevColumn()\r\n            prevColWidthLast = prevColWidth\r\n            prevColWidth = prevCol ? prevCol.getWidth() / 2 : 0\r\n          }\r\n        }\r\n      },\r\n      { passive: true }\r\n    )\r\n\r\n    colEl.addEventListener('touchend', (e) => {\r\n      if (this.checkTimeout) {\r\n        clearTimeout(this.checkTimeout)\r\n      }\r\n      if (this.moving) {\r\n        this.endMove(e)\r\n      }\r\n    })\r\n  }\r\n\r\n  startMove(e, column) {\r\n    const element = column.getElement()\r\n    const headerElement = this.table.columnManager.getContentsElement()\r\n    const headersElement = this.table.columnManager.getHeadersElement()\r\n\r\n    // Prevent moving columns when range selection is active\r\n    if (this.table.modules.selectRange && this.table.modules.selectRange.columnSelection) {\r\n      if (this.table.modules.selectRange.mousedown && this.table.modules.selectRange.selecting === 'column') {\r\n        return\r\n      }\r\n    }\r\n\r\n    this.moving = column\r\n    this.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left\r\n\r\n    this.table.element.classList.add('tabulator-block-select')\r\n\r\n    // create placeholder\r\n    this.placeholderElement.style.width = column.getWidth() + 'px'\r\n    this.placeholderElement.style.height = column.getHeight() + 'px'\r\n\r\n    element.parentNode.insertBefore(this.placeholderElement, element)\r\n    element.parentNode.removeChild(element)\r\n\r\n    // create hover element\r\n    this.hoverElement = element.cloneNode(true)\r\n    this.hoverElement.classList.add('tabulator-moving')\r\n\r\n    headerElement.appendChild(this.hoverElement)\r\n\r\n    this.hoverElement.style.left = '0'\r\n    this.hoverElement.style.bottom = headerElement.clientHeight - headersElement.offsetHeight + 'px'\r\n\r\n    if (!this.touchMove) {\r\n      this._bindMouseMove()\r\n\r\n      document.body.addEventListener('mousemove', this.moveHover)\r\n      document.body.addEventListener('mouseup', this.endMove)\r\n    }\r\n\r\n    this.moveHover(e)\r\n\r\n    this.dispatch('column-moving', e, this.moving)\r\n  }\r\n\r\n  _bindMouseMove() {\r\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\r\n      if (column.modules.moveColumn.mousemove) {\r\n        column.getElement().addEventListener('mousemove', column.modules.moveColumn.mousemove)\r\n      }\r\n    })\r\n  }\r\n\r\n  _unbindMouseMove() {\r\n    this.table.columnManager.columnsByIndex.forEach(function (column) {\r\n      if (column.modules.moveColumn.mousemove) {\r\n        column.getElement().removeEventListener('mousemove', column.modules.moveColumn.mousemove)\r\n      }\r\n    })\r\n  }\r\n\r\n  moveColumn(column, after) {\r\n    const movingCells = this.moving.getCells()\r\n\r\n    this.toCol = column\r\n    this.toColAfter = after\r\n\r\n    if (after) {\r\n      column.getCells().forEach(function (cell, i) {\r\n        const cellEl = cell.getElement(true)\r\n\r\n        if (cellEl.parentNode && movingCells[i]) {\r\n          cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling)\r\n        }\r\n      })\r\n    } else {\r\n      column.getCells().forEach(function (cell, i) {\r\n        const cellEl = cell.getElement(true)\r\n\r\n        if (cellEl.parentNode && movingCells[i]) {\r\n          cellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  endMove(e) {\r\n    if (e.which === 1 || this.touchMove) {\r\n      this._unbindMouseMove()\r\n\r\n      this.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling)\r\n      this.placeholderElement.parentNode.removeChild(this.placeholderElement)\r\n      this.hoverElement.parentNode.removeChild(this.hoverElement)\r\n\r\n      this.table.element.classList.remove('tabulator-block-select')\r\n\r\n      if (this.toCol) {\r\n        this.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter)\r\n      }\r\n\r\n      this.moving = false\r\n      this.toCol = false\r\n      this.toColAfter = false\r\n\r\n      if (!this.touchMove) {\r\n        document.body.removeEventListener('mousemove', this.moveHover)\r\n        document.body.removeEventListener('mouseup', this.endMove)\r\n      }\r\n    }\r\n  }\r\n\r\n  moveHover(e) {\r\n    const columnHolder = this.table.columnManager.getContentsElement()\r\n    const scrollLeft = columnHolder.scrollLeft\r\n    const xPos = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left + scrollLeft\r\n    let scrollPos\r\n\r\n    this.hoverElement.style.left = xPos - this.startX + 'px'\r\n\r\n    if (xPos - scrollLeft < this.autoScrollMargin) {\r\n      if (!this.autoScrollTimeout) {\r\n        this.autoScrollTimeout = setTimeout(() => {\r\n          scrollPos = Math.max(0, scrollLeft - 5)\r\n          this.table.rowManager.getElement().scrollLeft = scrollPos\r\n          this.autoScrollTimeout = false\r\n        }, 1)\r\n      }\r\n    }\r\n\r\n    if (scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin) {\r\n      if (!this.autoScrollTimeout) {\r\n        this.autoScrollTimeout = setTimeout(() => {\r\n          scrollPos = Math.min(columnHolder.clientWidth, scrollLeft + 5)\r\n          this.table.rowManager.getElement().scrollLeft = scrollPos\r\n          this.autoScrollTimeout = false\r\n        }, 1)\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nexport default class Popup extends Module {\r\n  static moduleName = 'popup'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.columnSubscribers = {}\r\n\r\n    this.registerTableOption('rowContextPopup', false)\r\n    this.registerTableOption('rowClickPopup', false)\r\n    this.registerTableOption('rowDblClickPopup', false)\r\n    this.registerTableOption('groupContextPopup', false)\r\n    this.registerTableOption('groupClickPopup', false)\r\n    this.registerTableOption('groupDblClickPopup', false)\r\n\r\n    this.registerColumnOption('headerContextPopup')\r\n    this.registerColumnOption('headerClickPopup')\r\n    this.registerColumnOption('headerDblClickPopup')\r\n    this.registerColumnOption('headerPopup')\r\n    this.registerColumnOption('headerPopupIcon')\r\n    this.registerColumnOption('contextPopup')\r\n    this.registerColumnOption('clickPopup')\r\n    this.registerColumnOption('dblClickPopup')\r\n\r\n    this.registerComponentFunction('cell', 'popup', this._componentPopupCall.bind(this))\r\n    this.registerComponentFunction('column', 'popup', this._componentPopupCall.bind(this))\r\n    this.registerComponentFunction('row', 'popup', this._componentPopupCall.bind(this))\r\n    this.registerComponentFunction('group', 'popup', this._componentPopupCall.bind(this))\r\n  }\r\n\r\n  initialize() {\r\n    this.initializeRowWatchers()\r\n    this.initializeGroupWatchers()\r\n\r\n    this.subscribe('column-init', this.initializeColumn.bind(this))\r\n  }\r\n\r\n  _componentPopupCall(component, contents, position) {\r\n    this.loadPopupEvent(contents, null, component, position)\r\n  }\r\n\r\n  initializeRowWatchers() {\r\n    if (this.table.options.rowContextPopup) {\r\n      this.subscribe('row-contextmenu', this.loadPopupEvent.bind(this, this.table.options.rowContextPopup))\r\n      this.table.on('rowTapHold', this.loadPopupEvent.bind(this, this.table.options.rowContextPopup))\r\n    }\r\n\r\n    if (this.table.options.rowClickPopup) {\r\n      this.subscribe('row-click', this.loadPopupEvent.bind(this, this.table.options.rowClickPopup))\r\n    }\r\n\r\n    if (this.table.options.rowDblClickPopup) {\r\n      this.subscribe('row-dblclick', this.loadPopupEvent.bind(this, this.table.options.rowDblClickPopup))\r\n    }\r\n  }\r\n\r\n  initializeGroupWatchers() {\r\n    if (this.table.options.groupContextPopup) {\r\n      this.subscribe('group-contextmenu', this.loadPopupEvent.bind(this, this.table.options.groupContextPopup))\r\n      this.table.on('groupTapHold', this.loadPopupEvent.bind(this, this.table.options.groupContextPopup))\r\n    }\r\n\r\n    if (this.table.options.groupClickPopup) {\r\n      this.subscribe('group-click', this.loadPopupEvent.bind(this, this.table.options.groupClickPopup))\r\n    }\r\n\r\n    if (this.table.options.groupDblClickPopup) {\r\n      this.subscribe('group-dblclick', this.loadPopupEvent.bind(this, this.table.options.groupDblClickPopup))\r\n    }\r\n  }\r\n\r\n  initializeColumn(column) {\r\n    const def = column.definition\r\n\r\n    // handle column events\r\n    if (def.headerContextPopup && !this.columnSubscribers.headerContextPopup) {\r\n      this.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, 'headerContextPopup')\r\n      this.subscribe('column-contextmenu', this.columnSubscribers.headerContextPopup)\r\n      this.table.on('headerTapHold', this.loadPopupTableColumnEvent.bind(this, 'headerContextPopup'))\r\n    }\r\n\r\n    if (def.headerClickPopup && !this.columnSubscribers.headerClickPopup) {\r\n      this.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, 'headerClickPopup')\r\n      this.subscribe('column-click', this.columnSubscribers.headerClickPopup)\r\n    }\r\n    if (def.headerDblClickPopup && !this.columnSubscribers.headerDblClickPopup) {\r\n      this.columnSubscribers.headerDblClickPopup = this.loadPopupTableColumnEvent.bind(this, 'headerDblClickPopup')\r\n      this.subscribe('column-dblclick', this.columnSubscribers.headerDblClickPopup)\r\n    }\r\n\r\n    if (def.headerPopup) {\r\n      this.initializeColumnHeaderPopup(column)\r\n    }\r\n\r\n    // handle cell events\r\n    if (def.contextPopup && !this.columnSubscribers.contextPopup) {\r\n      this.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, 'contextPopup')\r\n      this.subscribe('cell-contextmenu', this.columnSubscribers.contextPopup)\r\n      this.table.on('cellTapHold', this.loadPopupTableCellEvent.bind(this, 'contextPopup'))\r\n    }\r\n\r\n    if (def.clickPopup && !this.columnSubscribers.clickPopup) {\r\n      this.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, 'clickPopup')\r\n      this.subscribe('cell-click', this.columnSubscribers.clickPopup)\r\n    }\r\n\r\n    if (def.dblClickPopup && !this.columnSubscribers.dblClickPopup) {\r\n      this.columnSubscribers.dblClickPopup = this.loadPopupTableCellEvent.bind(this, 'dblClickPopup')\r\n      this.subscribe('cell-click', this.columnSubscribers.dblClickPopup)\r\n    }\r\n  }\r\n\r\n  initializeColumnHeaderPopup(column) {\r\n    let icon = column.definition.headerPopupIcon\r\n    let headerPopupEl\r\n\r\n    headerPopupEl = document.createElement('span')\r\n    headerPopupEl.classList.add('tabulator-header-popup-button')\r\n\r\n    if (icon) {\r\n      if (typeof icon === 'function') {\r\n        icon = icon(column.getComponent())\r\n      }\r\n\r\n      if (icon instanceof HTMLElement) {\r\n        headerPopupEl.appendChild(icon)\r\n      } else {\r\n        headerPopupEl.innerHTML = icon\r\n      }\r\n    } else {\r\n      headerPopupEl.innerHTML = '&vellip;'\r\n    }\r\n\r\n    headerPopupEl.addEventListener('click', (e) => {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n\r\n      this.loadPopupEvent(column.definition.headerPopup, e, column)\r\n    })\r\n\r\n    column.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild)\r\n  }\r\n\r\n  loadPopupTableCellEvent(option, e, cell) {\r\n    if (cell._cell) {\r\n      cell = cell._cell\r\n    }\r\n\r\n    if (cell.column.definition[option]) {\r\n      this.loadPopupEvent(cell.column.definition[option], e, cell)\r\n    }\r\n  }\r\n\r\n  loadPopupTableColumnEvent(option, e, column) {\r\n    if (column._column) {\r\n      column = column._column\r\n    }\r\n\r\n    if (column.definition[option]) {\r\n      this.loadPopupEvent(column.definition[option], e, column)\r\n    }\r\n  }\r\n\r\n  loadPopupEvent(contents, e, component, position) {\r\n    let renderedCallback\r\n\r\n    function onRendered(callback) {\r\n      renderedCallback = callback\r\n    }\r\n\r\n    if (component._group) {\r\n      component = component._group\r\n    } else if (component._row) {\r\n      component = component._row\r\n    }\r\n\r\n    contents =\r\n      typeof contents === 'function' ? contents.call(this.table, e, component.getComponent(), onRendered) : contents\r\n\r\n    this.loadPopup(e, component, contents, renderedCallback, position)\r\n  }\r\n\r\n  loadPopup(e, component, contents, renderedCallback, position) {\r\n    const touch = !(e instanceof MouseEvent)\r\n    let contentsEl\r\n    let popup\r\n\r\n    if (contents instanceof HTMLElement) {\r\n      contentsEl = contents\r\n    } else {\r\n      contentsEl = document.createElement('div')\r\n      contentsEl.innerHTML = contents\r\n    }\r\n\r\n    contentsEl.classList.add('tabulator-popup')\r\n\r\n    contentsEl.addEventListener('click', (e) => {\r\n      e.stopPropagation()\r\n    })\r\n\r\n    if (!touch) {\r\n      e.preventDefault()\r\n    }\r\n\r\n    popup = this.popup(contentsEl)\r\n\r\n    if (typeof renderedCallback === 'function') {\r\n      popup.renderCallback(renderedCallback)\r\n    }\r\n\r\n    if (e) {\r\n      popup.show(e)\r\n    } else {\r\n      popup.show(component.getElement(), position || 'center')\r\n    }\r\n\r\n    popup.hideOnBlur(() => {\r\n      this.dispatchExternal('popupClosed', component.getComponent())\r\n    })\r\n\r\n    this.dispatchExternal('popupOpened', component.getComponent())\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nexport default class Print extends Module {\r\n  static moduleName = 'print'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.element = false\r\n    this.manualBlock = false\r\n    this.beforeprintEventHandler = null\r\n    this.afterprintEventHandler = null\r\n\r\n    this.registerTableOption('printAsHtml', false) // enable print as html\r\n    this.registerTableOption('printFormatter', false) // printing page formatter\r\n    this.registerTableOption('printHeader', false) // page header contents\r\n    this.registerTableOption('printFooter', false) // page footer contents\r\n    this.registerTableOption('printStyled', true) // enable print as html styling\r\n    this.registerTableOption('printRowRange', 'visible') // restrict print to visible rows only\r\n    this.registerTableOption('printConfig', {}) // print config options\r\n\r\n    this.registerColumnOption('print')\r\n    this.registerColumnOption('titlePrint')\r\n  }\r\n\r\n  initialize() {\r\n    if (this.table.options.printAsHtml) {\r\n      this.beforeprintEventHandler = this.replaceTable.bind(this)\r\n      this.afterprintEventHandler = this.cleanup.bind(this)\r\n\r\n      window.addEventListener('beforeprint', this.beforeprintEventHandler)\r\n      window.addEventListener('afterprint', this.afterprintEventHandler)\r\n      this.subscribe('table-destroy', this.destroy.bind(this))\r\n    }\r\n\r\n    this.registerTableFunction('print', this.printFullscreen.bind(this))\r\n  }\r\n\r\n  destroy() {\r\n    if (this.table.options.printAsHtml) {\r\n      window.removeEventListener('beforeprint', this.beforeprintEventHandler)\r\n      window.removeEventListener('afterprint', this.afterprintEventHandler)\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Table Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Internal Logic //////////\r\n  /// ////////////////////////////////\r\n\r\n  replaceTable() {\r\n    if (!this.manualBlock) {\r\n      this.element = document.createElement('div')\r\n      this.element.classList.add('tabulator-print-table')\r\n\r\n      this.element.appendChild(\r\n        this.table.modules.export.generateTable(\r\n          this.table.options.printConfig,\r\n          this.table.options.printStyled,\r\n          this.table.options.printRowRange,\r\n          'print'\r\n        )\r\n      )\r\n\r\n      this.table.element.style.display = 'none'\r\n\r\n      this.table.element.parentNode.insertBefore(this.element, this.table.element)\r\n    }\r\n  }\r\n\r\n  cleanup() {\r\n    document.body.classList.remove('tabulator-print-fullscreen-hide')\r\n\r\n    if (this.element && this.element.parentNode) {\r\n      this.element.parentNode.removeChild(this.element)\r\n      this.table.element.style.display = ''\r\n    }\r\n  }\r\n\r\n  printFullscreen(visible, style, config) {\r\n    const scrollX = window.scrollX\r\n    const scrollY = window.scrollY\r\n    const headerEl = document.createElement('div')\r\n    const footerEl = document.createElement('div')\r\n    const tableEl = this.table.modules.export.generateTable(\r\n      typeof config !== 'undefined' ? config : this.table.options.printConfig,\r\n      typeof style !== 'undefined' ? style : this.table.options.printStyled,\r\n      visible || this.table.options.printRowRange,\r\n      'print'\r\n    )\r\n    let headerContent\r\n    let footerContent\r\n\r\n    this.manualBlock = true\r\n\r\n    this.element = document.createElement('div')\r\n    this.element.classList.add('tabulator-print-fullscreen')\r\n\r\n    if (this.table.options.printHeader) {\r\n      headerEl.classList.add('tabulator-print-header')\r\n\r\n      headerContent =\r\n        typeof this.table.options.printHeader === 'function'\r\n          ? this.table.options.printHeader.call(this.table)\r\n          : this.table.options.printHeader\r\n\r\n      if (typeof headerContent === 'string') {\r\n        headerEl.innerHTML = headerContent\r\n      } else {\r\n        headerEl.appendChild(headerContent)\r\n      }\r\n\r\n      this.element.appendChild(headerEl)\r\n    }\r\n\r\n    this.element.appendChild(tableEl)\r\n\r\n    if (this.table.options.printFooter) {\r\n      footerEl.classList.add('tabulator-print-footer')\r\n\r\n      footerContent =\r\n        typeof this.table.options.printFooter === 'function'\r\n          ? this.table.options.printFooter.call(this.table)\r\n          : this.table.options.printFooter\r\n\r\n      if (typeof footerContent === 'string') {\r\n        footerEl.innerHTML = footerContent\r\n      } else {\r\n        footerEl.appendChild(footerContent)\r\n      }\r\n\r\n      this.element.appendChild(footerEl)\r\n    }\r\n\r\n    document.body.classList.add('tabulator-print-fullscreen-hide')\r\n    document.body.appendChild(this.element)\r\n\r\n    if (this.table.options.printFormatter) {\r\n      this.table.options.printFormatter(this.element, tableEl)\r\n    }\r\n\r\n    window.print()\r\n\r\n    this.cleanup()\r\n\r\n    window.scrollTo(scrollX, scrollY)\r\n\r\n    this.manualBlock = false\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nexport default class ReactiveData extends Module {\r\n  static moduleName = 'reactiveData'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.data = false\r\n    this.blocked = false // block reactivity while performing update\r\n    this.origFuncs = {} // hold original data array functions to allow replacement after data is done with\r\n    this.currentVersion = 0\r\n\r\n    this.registerTableOption('reactiveData', false) // enable data reactivity\r\n  }\r\n\r\n  initialize() {\r\n    if (this.table.options.reactiveData) {\r\n      this.subscribe('cell-value-save-before', this.block.bind(this, 'cellsave'))\r\n      this.subscribe('cell-value-save-after', this.unblock.bind(this, 'cellsave'))\r\n      this.subscribe('row-data-save-before', this.block.bind(this, 'rowsave'))\r\n      this.subscribe('row-data-save-after', this.unblock.bind(this, 'rowsave'))\r\n      this.subscribe('row-data-init-after', this.watchRow.bind(this))\r\n      this.subscribe('data-processing', this.watchData.bind(this))\r\n      this.subscribe('table-destroy', this.unwatchData.bind(this))\r\n    }\r\n  }\r\n\r\n  watchData(data) {\r\n    const self = this\r\n    let version\r\n\r\n    this.currentVersion++\r\n\r\n    version = this.currentVersion\r\n\r\n    this.unwatchData()\r\n\r\n    this.data = data\r\n\r\n    // override array push function\r\n    this.origFuncs.push = data.push\r\n\r\n    Object.defineProperty(this.data, 'push', {\r\n      enumerable: false,\r\n      configurable: true,\r\n      value: function () {\r\n        const args = Array.from(arguments)\r\n        let result\r\n\r\n        if (!self.blocked && version === self.currentVersion) {\r\n          self.block('data-push')\r\n\r\n          args.forEach((arg) => {\r\n            self.table.rowManager.addRowActual(arg, false)\r\n          })\r\n\r\n          result = self.origFuncs.push.apply(data, arguments)\r\n\r\n          self.unblock('data-push')\r\n        }\r\n\r\n        return result\r\n      }\r\n    })\r\n\r\n    // override array unshift function\r\n    this.origFuncs.unshift = data.unshift\r\n\r\n    Object.defineProperty(this.data, 'unshift', {\r\n      enumerable: false,\r\n      configurable: true,\r\n      value: function () {\r\n        const args = Array.from(arguments)\r\n        let result\r\n\r\n        if (!self.blocked && version === self.currentVersion) {\r\n          self.block('data-unshift')\r\n\r\n          args.forEach((arg) => {\r\n            self.table.rowManager.addRowActual(arg, true)\r\n          })\r\n\r\n          result = self.origFuncs.unshift.apply(data, arguments)\r\n\r\n          self.unblock('data-unshift')\r\n        }\r\n\r\n        return result\r\n      }\r\n    })\r\n\r\n    // override array shift function\r\n    this.origFuncs.shift = data.shift\r\n\r\n    Object.defineProperty(this.data, 'shift', {\r\n      enumerable: false,\r\n      configurable: true,\r\n      value: function () {\r\n        let row, result\r\n\r\n        if (!self.blocked && version === self.currentVersion) {\r\n          self.block('data-shift')\r\n\r\n          if (self.data.length) {\r\n            row = self.table.rowManager.getRowFromDataObject(self.data[0])\r\n\r\n            if (row) {\r\n              row.deleteActual()\r\n            }\r\n          }\r\n\r\n          result = self.origFuncs.shift.call(data)\r\n\r\n          self.unblock('data-shift')\r\n        }\r\n\r\n        return result\r\n      }\r\n    })\r\n\r\n    // override array pop function\r\n    this.origFuncs.pop = data.pop\r\n\r\n    Object.defineProperty(this.data, 'pop', {\r\n      enumerable: false,\r\n      configurable: true,\r\n      value: function () {\r\n        let row, result\r\n\r\n        if (!self.blocked && version === self.currentVersion) {\r\n          self.block('data-pop')\r\n\r\n          if (self.data.length) {\r\n            row = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1])\r\n\r\n            if (row) {\r\n              row.deleteActual()\r\n            }\r\n          }\r\n\r\n          result = self.origFuncs.pop.call(data)\r\n\r\n          self.unblock('data-pop')\r\n        }\r\n\r\n        return result\r\n      }\r\n    })\r\n\r\n    // override array splice function\r\n    this.origFuncs.splice = data.splice\r\n\r\n    Object.defineProperty(this.data, 'splice', {\r\n      enumerable: false,\r\n      configurable: true,\r\n      value: function () {\r\n        const args = Array.from(arguments)\r\n        const start = args[0] < 0 ? data.length + args[0] : args[0]\r\n        const end = args[1]\r\n        let newRows = args[2] ? args.slice(2) : false\r\n        let startRow\r\n        let result\r\n\r\n        if (!self.blocked && version === self.currentVersion) {\r\n          self.block('data-splice')\r\n          // add new rows\r\n          if (newRows) {\r\n            startRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false\r\n\r\n            if (startRow) {\r\n              newRows.forEach((rowData) => {\r\n                self.table.rowManager.addRowActual(rowData, true, startRow, true)\r\n              })\r\n            } else {\r\n              newRows = newRows.slice().reverse()\r\n\r\n              newRows.forEach((rowData) => {\r\n                self.table.rowManager.addRowActual(rowData, true, false, true)\r\n              })\r\n            }\r\n          }\r\n\r\n          // delete removed rows\r\n          if (end !== 0) {\r\n            const oldRows = data.slice(start, typeof args[1] === 'undefined' ? args[1] : start + end)\r\n\r\n            oldRows.forEach((rowData, i) => {\r\n              const row = self.table.rowManager.getRowFromDataObject(rowData)\r\n\r\n              if (row) {\r\n                row.deleteActual(i !== oldRows.length - 1)\r\n              }\r\n            })\r\n          }\r\n\r\n          if (newRows || end !== 0) {\r\n            self.table.rowManager.reRenderInPosition()\r\n          }\r\n\r\n          result = self.origFuncs.splice.apply(data, arguments)\r\n\r\n          self.unblock('data-splice')\r\n        }\r\n\r\n        return result\r\n      }\r\n    })\r\n  }\r\n\r\n  unwatchData() {\r\n    if (this.data !== false) {\r\n      for (const key in this.origFuncs) {\r\n        Object.defineProperty(this.data, key, {\r\n          enumerable: true,\r\n          configurable: true,\r\n          writable: true,\r\n          value: this.origFuncs[key]\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  watchRow(row) {\r\n    const data = row.getData()\r\n\r\n    for (const key in data) {\r\n      this.watchKey(row, data, key)\r\n    }\r\n\r\n    if (this.table.options.dataTree) {\r\n      this.watchTreeChildren(row)\r\n    }\r\n  }\r\n\r\n  watchTreeChildren(row) {\r\n    const self = this\r\n    const childField = row.getData()[this.table.options.dataTreeChildField]\r\n    const origFuncs = {}\r\n\r\n    if (childField) {\r\n      origFuncs.push = childField.push\r\n\r\n      Object.defineProperty(childField, 'push', {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value: () => {\r\n          if (!self.blocked) {\r\n            self.block('tree-push')\r\n\r\n            var result = origFuncs.push.apply(childField, arguments)\r\n            this.rebuildTree(row)\r\n\r\n            self.unblock('tree-push')\r\n          }\r\n\r\n          return result\r\n        }\r\n      })\r\n\r\n      origFuncs.unshift = childField.unshift\r\n\r\n      Object.defineProperty(childField, 'unshift', {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value: () => {\r\n          if (!self.blocked) {\r\n            self.block('tree-unshift')\r\n\r\n            var result = origFuncs.unshift.apply(childField, arguments)\r\n            this.rebuildTree(row)\r\n\r\n            self.unblock('tree-unshift')\r\n          }\r\n\r\n          return result\r\n        }\r\n      })\r\n\r\n      origFuncs.shift = childField.shift\r\n\r\n      Object.defineProperty(childField, 'shift', {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value: () => {\r\n          if (!self.blocked) {\r\n            self.block('tree-shift')\r\n\r\n            var result = origFuncs.shift.call(childField)\r\n            this.rebuildTree(row)\r\n\r\n            self.unblock('tree-shift')\r\n          }\r\n\r\n          return result\r\n        }\r\n      })\r\n\r\n      origFuncs.pop = childField.pop\r\n\r\n      Object.defineProperty(childField, 'pop', {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value: () => {\r\n          if (!self.blocked) {\r\n            self.block('tree-pop')\r\n\r\n            var result = origFuncs.pop.call(childField)\r\n            this.rebuildTree(row)\r\n\r\n            self.unblock('tree-pop')\r\n          }\r\n\r\n          return result\r\n        }\r\n      })\r\n\r\n      origFuncs.splice = childField.splice\r\n\r\n      Object.defineProperty(childField, 'splice', {\r\n        enumerable: false,\r\n        configurable: true,\r\n        value: () => {\r\n          if (!self.blocked) {\r\n            self.block('tree-splice')\r\n\r\n            var result = origFuncs.splice.apply(childField, arguments)\r\n            this.rebuildTree(row)\r\n\r\n            self.unblock('tree-splice')\r\n          }\r\n\r\n          return result\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  rebuildTree(row) {\r\n    this.table.modules.dataTree.initializeRow(row)\r\n    this.table.modules.dataTree.layoutRow(row)\r\n    this.table.rowManager.refreshActiveData('tree', false, true)\r\n  }\r\n\r\n  watchKey(row, data, key) {\r\n    const self = this\r\n    const props = Object.getOwnPropertyDescriptor(data, key)\r\n    let value = data[key]\r\n    const version = this.currentVersion\r\n\r\n    Object.defineProperty(data, key, {\r\n      set: (newValue) => {\r\n        value = newValue\r\n        if (!self.blocked && version === self.currentVersion) {\r\n          self.block('key')\r\n\r\n          const update = {}\r\n          update[key] = newValue\r\n          row.updateData(update)\r\n\r\n          self.unblock('key')\r\n        }\r\n\r\n        if (props.set) {\r\n          props.set(newValue)\r\n        }\r\n      },\r\n      get: () => {\r\n        if (props.get) {\r\n          props.get()\r\n        }\r\n\r\n        return value\r\n      }\r\n    })\r\n  }\r\n\r\n  unwatchRow(row) {\r\n    const data = row.getData()\r\n\r\n    for (const key in data) {\r\n      Object.defineProperty(data, key, {\r\n        value: data[key]\r\n      })\r\n    }\r\n  }\r\n\r\n  block(key) {\r\n    if (!this.blocked) {\r\n      this.blocked = key\r\n    }\r\n  }\r\n\r\n  unblock(key) {\r\n    if (this.blocked === key) {\r\n      this.blocked = false\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nexport default class ResizeColumns extends Module {\r\n  static moduleName = 'resizeColumns'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.startColumn = false\r\n    this.startX = false\r\n    this.startWidth = false\r\n    this.latestX = false\r\n    this.handle = null\r\n    this.initialNextColumn = null\r\n    this.nextColumn = null\r\n\r\n    this.initialized = false\r\n    this.registerColumnOption('resizable', true)\r\n    this.registerTableOption('resizableColumnFit', false)\r\n    this.registerTableOption('resizableColumnGuide', false)\r\n  }\r\n\r\n  initialize() {\r\n    this.subscribe('column-rendered', this.layoutColumnHeader.bind(this))\r\n  }\r\n\r\n  initializeEventWatchers() {\r\n    if (!this.initialized) {\r\n      this.subscribe('cell-rendered', this.layoutCellHandles.bind(this))\r\n      this.subscribe('cell-delete', this.deInitializeComponent.bind(this))\r\n\r\n      this.subscribe('cell-height', this.resizeHandle.bind(this))\r\n      this.subscribe('column-moved', this.columnLayoutUpdated.bind(this))\r\n\r\n      this.subscribe('column-hide', this.deInitializeColumn.bind(this))\r\n      this.subscribe('column-show', this.columnLayoutUpdated.bind(this))\r\n      this.subscribe('column-width', this.columnWidthUpdated.bind(this))\r\n\r\n      this.subscribe('column-delete', this.deInitializeComponent.bind(this))\r\n      this.subscribe('column-height', this.resizeHandle.bind(this))\r\n\r\n      this.initialized = true\r\n    }\r\n  }\r\n\r\n  layoutCellHandles(cell) {\r\n    if (cell.row.type === 'row') {\r\n      this.deInitializeComponent(cell)\r\n      this.initializeColumn('cell', cell, cell.column, cell.element)\r\n    }\r\n  }\r\n\r\n  layoutColumnHeader(column) {\r\n    if (column.definition.resizable) {\r\n      this.initializeEventWatchers()\r\n      this.deInitializeComponent(column)\r\n      this.initializeColumn('header', column, column, column.element)\r\n    }\r\n  }\r\n\r\n  columnLayoutUpdated(column) {\r\n    const prev = column.prevColumn()\r\n\r\n    this.reinitializeColumn(column)\r\n\r\n    if (prev) {\r\n      this.reinitializeColumn(prev)\r\n    }\r\n  }\r\n\r\n  columnWidthUpdated(column) {\r\n    if (column.modules.frozen) {\r\n      if (this.table.modules.frozenColumns.leftColumns.includes(column)) {\r\n        this.table.modules.frozenColumns.leftColumns.forEach((col) => {\r\n          this.reinitializeColumn(col)\r\n        })\r\n      } else if (this.table.modules.frozenColumns.rightColumns.includes(column)) {\r\n        this.table.modules.frozenColumns.rightColumns.forEach((col) => {\r\n          this.reinitializeColumn(col)\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  frozenColumnOffset(column) {\r\n    let offset = false\r\n\r\n    if (column.modules.frozen) {\r\n      offset = column.modules.frozen.marginValue\r\n\r\n      if (column.modules.frozen.position === 'left') {\r\n        offset += column.getWidth() - 3\r\n      } else {\r\n        if (offset) {\r\n          offset -= 3\r\n        }\r\n      }\r\n    }\r\n\r\n    return offset !== false ? offset + 'px' : false\r\n  }\r\n\r\n  reinitializeColumn(column) {\r\n    const frozenOffset = this.frozenColumnOffset(column)\r\n\r\n    column.cells.forEach((cell) => {\r\n      if (cell.modules.resize && cell.modules.resize.handleEl) {\r\n        if (frozenOffset) {\r\n          cell.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset\r\n          cell.modules.resize.handleEl.style['z-index'] = 11\r\n        }\r\n\r\n        cell.element.after(cell.modules.resize.handleEl)\r\n      }\r\n    })\r\n\r\n    if (column.modules.resize && column.modules.resize.handleEl) {\r\n      if (frozenOffset) {\r\n        column.modules.resize.handleEl.style[column.modules.frozen.position] = frozenOffset\r\n      }\r\n\r\n      column.element.after(column.modules.resize.handleEl)\r\n    }\r\n  }\r\n\r\n  initializeColumn(type, component, column, element) {\r\n    const self = this\r\n    let variableHeight = false\r\n    const mode = column.definition.resizable\r\n    let config = {}\r\n    const nearestColumn = column.getLastColumn()\r\n\r\n    // set column resize mode\r\n    if (type === 'header') {\r\n      variableHeight = column.definition.formatter == 'textarea' || column.definition.variableHeight\r\n      config = { variableHeight }\r\n    }\r\n\r\n    if ((mode === true || mode == type) && this._checkResizability(nearestColumn)) {\r\n      const handle = document.createElement('span')\r\n      handle.className = 'tabulator-col-resize-handle'\r\n\r\n      handle.addEventListener('click', function (e) {\r\n        e.stopPropagation()\r\n      })\r\n\r\n      const handleDown = function (e) {\r\n        self.startColumn = column\r\n        self.initialNextColumn = self.nextColumn = nearestColumn.nextColumn()\r\n        self._mouseDown(e, nearestColumn, handle)\r\n      }\r\n\r\n      handle.addEventListener('mousedown', handleDown)\r\n      handle.addEventListener('touchstart', handleDown, { passive: true })\r\n\r\n      // resize column on  double click\r\n      handle.addEventListener('dblclick', (e) => {\r\n        const oldWidth = nearestColumn.getWidth()\r\n\r\n        e.stopPropagation()\r\n        nearestColumn.reinitializeWidth(true)\r\n\r\n        if (oldWidth !== nearestColumn.getWidth()) {\r\n          self.dispatch('column-resized', nearestColumn)\r\n          self.dispatchExternal('columnResized', nearestColumn.getComponent())\r\n        }\r\n      })\r\n\r\n      if (column.modules.frozen) {\r\n        handle.style.position = 'sticky'\r\n        handle.style[column.modules.frozen.position] = this.frozenColumnOffset(column)\r\n      }\r\n\r\n      config.handleEl = handle\r\n\r\n      if (element.parentNode && column.visible) {\r\n        element.after(handle)\r\n      }\r\n    }\r\n\r\n    component.modules.resize = config\r\n  }\r\n\r\n  deInitializeColumn(column) {\r\n    this.deInitializeComponent(column)\r\n\r\n    column.cells.forEach((cell) => {\r\n      this.deInitializeComponent(cell)\r\n    })\r\n  }\r\n\r\n  deInitializeComponent(component) {\r\n    let handleEl\r\n\r\n    if (component.modules.resize) {\r\n      handleEl = component.modules.resize.handleEl\r\n\r\n      if (handleEl && handleEl.parentElement) {\r\n        handleEl.parentElement.removeChild(handleEl)\r\n      }\r\n    }\r\n  }\r\n\r\n  resizeHandle(component, height) {\r\n    if (component.modules.resize && component.modules.resize.handleEl) {\r\n      component.modules.resize.handleEl.style.height = height\r\n    }\r\n  }\r\n\r\n  resize(e, column) {\r\n    const x = typeof e.clientX === 'undefined' ? e.touches[0].clientX : e.clientX\r\n    let startDiff = x - this.startX\r\n    let moveDiff = x - this.latestX\r\n    let blockedBefore\r\n    let blockedAfter\r\n\r\n    this.latestX = x\r\n\r\n    if (this.table.rtl) {\r\n      startDiff = -startDiff\r\n      moveDiff = -moveDiff\r\n    }\r\n\r\n    blockedBefore = column.width == column.minWidth || column.width == column.maxWidth\r\n\r\n    column.setWidth(this.startWidth + startDiff)\r\n\r\n    blockedAfter = column.width == column.minWidth || column.width == column.maxWidth\r\n\r\n    if (moveDiff < 0) {\r\n      this.nextColumn = this.initialNextColumn\r\n    }\r\n\r\n    if (this.table.options.resizableColumnFit && this.nextColumn && !(blockedBefore && blockedAfter)) {\r\n      const colWidth = this.nextColumn.getWidth()\r\n\r\n      if (moveDiff > 0) {\r\n        if (colWidth <= this.nextColumn.minWidth) {\r\n          this.nextColumn = this.nextColumn.nextColumn()\r\n        }\r\n      }\r\n\r\n      if (this.nextColumn) {\r\n        this.nextColumn.setWidth(this.nextColumn.getWidth() - moveDiff)\r\n      }\r\n    }\r\n\r\n    this.table.columnManager.rerenderColumns(true)\r\n\r\n    if (!this.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\r\n      column.checkCellHeights()\r\n    }\r\n  }\r\n\r\n  calcGuidePosition(e, column, handle) {\r\n    const mouseX = typeof e.clientX === 'undefined' ? e.touches[0].clientX : e.clientX\r\n    const handleX = handle.getBoundingClientRect().x - this.table.element.getBoundingClientRect().x\r\n    const tableX = this.table.element.getBoundingClientRect().x\r\n    const columnX = column.element.getBoundingClientRect().left - tableX\r\n    const mouseDiff = mouseX - this.startX\r\n    let pos = Math.max(handleX + mouseDiff, columnX + column.minWidth)\r\n\r\n    if (column.maxWidth) {\r\n      pos = Math.min(pos, columnX + column.maxWidth)\r\n    }\r\n\r\n    return pos\r\n  }\r\n\r\n  _checkResizability(column) {\r\n    return column.definition.resizable\r\n  }\r\n\r\n  _mouseDown(e, column, handle) {\r\n    const self = this\r\n    let guideEl\r\n\r\n    this.dispatchExternal('columnResizing', column.getComponent())\r\n\r\n    if (self.table.options.resizableColumnGuide) {\r\n      guideEl = document.createElement('span')\r\n      guideEl.classList.add('tabulator-col-resize-guide')\r\n      self.table.element.appendChild(guideEl)\r\n      setTimeout(() => {\r\n        guideEl.style.left = self.calcGuidePosition(e, column, handle) + 'px'\r\n      })\r\n    }\r\n\r\n    self.table.element.classList.add('tabulator-block-select')\r\n\r\n    function mouseMove(e) {\r\n      if (self.table.options.resizableColumnGuide) {\r\n        guideEl.style.left = self.calcGuidePosition(e, column, handle) + 'px'\r\n      } else {\r\n        self.resize(e, column)\r\n      }\r\n    }\r\n\r\n    function mouseUp(e) {\r\n      if (self.table.options.resizableColumnGuide) {\r\n        self.resize(e, column)\r\n        guideEl.remove()\r\n      }\r\n\r\n      // block editor from taking action while resizing is taking place\r\n      if (self.startColumn.modules.edit) {\r\n        self.startColumn.modules.edit.blocked = false\r\n      }\r\n\r\n      if (self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight) {\r\n        column.checkCellHeights()\r\n      }\r\n\r\n      document.body.removeEventListener('mouseup', mouseUp)\r\n      document.body.removeEventListener('mousemove', mouseMove)\r\n\r\n      handle.removeEventListener('touchmove', mouseMove)\r\n      handle.removeEventListener('touchend', mouseUp)\r\n\r\n      self.table.element.classList.remove('tabulator-block-select')\r\n\r\n      if (self.startWidth !== column.getWidth()) {\r\n        self.table.columnManager.verticalAlignHeaders()\r\n\r\n        self.dispatch('column-resized', column)\r\n        self.dispatchExternal('columnResized', column.getComponent())\r\n      }\r\n    }\r\n\r\n    e.stopPropagation() // prevent resize from interfering with movable columns\r\n\r\n    // block editor from taking action while resizing is taking place\r\n    if (self.startColumn.modules.edit) {\r\n      self.startColumn.modules.edit.blocked = true\r\n    }\r\n\r\n    self.startX = typeof e.clientX === 'undefined' ? e.touches[0].clientX : e.clientX\r\n    self.latestX = self.startX\r\n    self.startWidth = column.getWidth()\r\n\r\n    document.body.addEventListener('mousemove', mouseMove)\r\n    document.body.addEventListener('mouseup', mouseUp)\r\n    handle.addEventListener('touchmove', mouseMove, { passive: true })\r\n    handle.addEventListener('touchend', mouseUp)\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nexport default class ResizeRows extends Module {\r\n  static moduleName = 'resizeRows'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.startColumn = false\r\n    this.startY = false\r\n    this.startHeight = false\r\n    this.handle = null\r\n    this.prevHandle = null\r\n\r\n    this.registerTableOption('resizableRows', false) // resizable rows\r\n    this.registerTableOption('resizableRowGuide', false)\r\n  }\r\n\r\n  initialize() {\r\n    if (this.table.options.resizableRows) {\r\n      this.subscribe('row-layout-after', this.initializeRow.bind(this))\r\n    }\r\n  }\r\n\r\n  initializeRow(row) {\r\n    const self = this\r\n    const rowEl = row.getElement()\r\n\r\n    const handle = document.createElement('div')\r\n    handle.className = 'tabulator-row-resize-handle'\r\n\r\n    const prevHandle = document.createElement('div')\r\n    prevHandle.className = 'tabulator-row-resize-handle prev'\r\n\r\n    handle.addEventListener('click', function (e) {\r\n      e.stopPropagation()\r\n    })\r\n\r\n    const handleDown = function (e) {\r\n      self.startRow = row\r\n      self._mouseDown(e, row, handle)\r\n    }\r\n\r\n    handle.addEventListener('mousedown', handleDown)\r\n    handle.addEventListener('touchstart', handleDown, { passive: true })\r\n\r\n    prevHandle.addEventListener('click', function (e) {\r\n      e.stopPropagation()\r\n    })\r\n\r\n    const prevHandleDown = function (e) {\r\n      const prevRow = self.table.rowManager.prevDisplayRow(row)\r\n\r\n      if (prevRow) {\r\n        self.startRow = prevRow\r\n        self._mouseDown(e, prevRow, prevHandle)\r\n      }\r\n    }\r\n\r\n    prevHandle.addEventListener('mousedown', prevHandleDown)\r\n    prevHandle.addEventListener('touchstart', prevHandleDown, { passive: true })\r\n\r\n    rowEl.appendChild(handle)\r\n    rowEl.appendChild(prevHandle)\r\n  }\r\n\r\n  resize(e, row) {\r\n    row.setHeight(\r\n      this.startHeight + ((typeof e.screenY === 'undefined' ? e.touches[0].screenY : e.screenY) - this.startY)\r\n    )\r\n  }\r\n\r\n  calcGuidePosition(e, row, handle) {\r\n    const mouseY = typeof e.screenY === 'undefined' ? e.touches[0].screenY : e.screenY\r\n    const handleY = handle.getBoundingClientRect().y - this.table.element.getBoundingClientRect().y\r\n    const tableY = this.table.element.getBoundingClientRect().y\r\n    const rowY = row.element.getBoundingClientRect().top - tableY\r\n    const mouseDiff = mouseY - this.startY\r\n\r\n    return Math.max(handleY + mouseDiff, rowY)\r\n  }\r\n\r\n  _mouseDown(e, row, handle) {\r\n    const self = this\r\n    let guideEl\r\n\r\n    self.dispatchExternal('rowResizing', row.getComponent())\r\n\r\n    if (self.table.options.resizableRowGuide) {\r\n      guideEl = document.createElement('span')\r\n      guideEl.classList.add('tabulator-row-resize-guide')\r\n      self.table.element.appendChild(guideEl)\r\n      setTimeout(() => {\r\n        guideEl.style.top = self.calcGuidePosition(e, row, handle) + 'px'\r\n      })\r\n    }\r\n\r\n    self.table.element.classList.add('tabulator-block-select')\r\n\r\n    function mouseMove(e) {\r\n      if (self.table.options.resizableRowGuide) {\r\n        guideEl.style.top = self.calcGuidePosition(e, row, handle) + 'px'\r\n      } else {\r\n        self.resize(e, row)\r\n      }\r\n    }\r\n\r\n    function mouseUp(e) {\r\n      if (self.table.options.resizableRowGuide) {\r\n        self.resize(e, row)\r\n        guideEl.remove()\r\n      }\r\n\r\n      // //block editor from taking action while resizing is taking place\r\n      // if(self.startColumn.modules.edit){\r\n      // \tself.startColumn.modules.edit.blocked = false;\r\n      // }\r\n\r\n      document.body.removeEventListener('mouseup', mouseMove)\r\n      document.body.removeEventListener('mousemove', mouseMove)\r\n\r\n      handle.removeEventListener('touchmove', mouseMove)\r\n      handle.removeEventListener('touchend', mouseUp)\r\n\r\n      self.table.element.classList.remove('tabulator-block-select')\r\n\r\n      self.dispatchExternal('rowResized', row.getComponent())\r\n    }\r\n\r\n    e.stopPropagation() // prevent resize from interfering with movable columns\r\n\r\n    // block editor from taking action while resizing is taking place\r\n    // if(self.startColumn.modules.edit){\r\n    // \tself.startColumn.modules.edit.blocked = true;\r\n    // }\r\n\r\n    self.startY = typeof e.screenY === 'undefined' ? e.touches[0].screenY : e.screenY\r\n    self.startHeight = row.getHeight()\r\n\r\n    document.body.addEventListener('mousemove', mouseMove)\r\n    document.body.addEventListener('mouseup', mouseUp)\r\n\r\n    handle.addEventListener('touchmove', mouseMove, { passive: true })\r\n    handle.addEventListener('touchend', mouseUp)\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\n\r\nexport default class ResizeTable extends Module {\r\n  static moduleName = 'resizeTable'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.binding = false\r\n    this.visibilityObserver = false\r\n    this.resizeObserver = false\r\n    this.containerObserver = false\r\n\r\n    this.tableHeight = 0\r\n    this.tableWidth = 0\r\n    this.containerHeight = 0\r\n    this.containerWidth = 0\r\n\r\n    this.autoResize = false\r\n\r\n    this.visible = false\r\n\r\n    this.initialized = false\r\n    this.initialRedraw = false\r\n\r\n    this.registerTableOption('autoResize', true) // auto resize table\r\n  }\r\n\r\n  initialize() {\r\n    if (this.table.options.autoResize) {\r\n      const table = this.table\r\n      let tableStyle\r\n\r\n      this.tableHeight = table.element.clientHeight\r\n      this.tableWidth = table.element.clientWidth\r\n\r\n      if (table.element.parentNode) {\r\n        this.containerHeight = table.element.parentNode.clientHeight\r\n        this.containerWidth = table.element.parentNode.clientWidth\r\n      }\r\n\r\n      if (\r\n        typeof IntersectionObserver !== 'undefined' &&\r\n        typeof ResizeObserver !== 'undefined' &&\r\n        table.rowManager.getRenderMode() === 'virtual'\r\n      ) {\r\n        this.initializeVisibilityObserver()\r\n\r\n        this.autoResize = true\r\n\r\n        this.resizeObserver = new ResizeObserver((entry) => {\r\n          if (\r\n            !table.browserMobile ||\r\n            (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))\r\n          ) {\r\n            const nodeHeight = Math.floor(entry[0].contentRect.height)\r\n            const nodeWidth = Math.floor(entry[0].contentRect.width)\r\n\r\n            if (this.tableHeight != nodeHeight || this.tableWidth != nodeWidth) {\r\n              this.tableHeight = nodeHeight\r\n              this.tableWidth = nodeWidth\r\n\r\n              if (table.element.parentNode) {\r\n                this.containerHeight = table.element.parentNode.clientHeight\r\n                this.containerWidth = table.element.parentNode.clientWidth\r\n              }\r\n\r\n              this.redrawTable()\r\n            }\r\n          }\r\n        })\r\n\r\n        this.resizeObserver.observe(table.element)\r\n\r\n        tableStyle = window.getComputedStyle(table.element)\r\n\r\n        if (\r\n          this.table.element.parentNode &&\r\n          !this.table.rowManager.fixedHeight &&\r\n          (tableStyle.getPropertyValue('max-height') || tableStyle.getPropertyValue('min-height'))\r\n        ) {\r\n          this.containerObserver = new ResizeObserver((entry) => {\r\n            if (\r\n              !table.browserMobile ||\r\n              (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))\r\n            ) {\r\n              const nodeHeight = Math.floor(entry[0].contentRect.height)\r\n              const nodeWidth = Math.floor(entry[0].contentRect.width)\r\n\r\n              if (this.containerHeight != nodeHeight || this.containerWidth != nodeWidth) {\r\n                this.containerHeight = nodeHeight\r\n                this.containerWidth = nodeWidth\r\n                this.tableHeight = table.element.clientHeight\r\n                this.tableWidth = table.element.clientWidth\r\n              }\r\n\r\n              this.redrawTable()\r\n            }\r\n          })\r\n\r\n          this.containerObserver.observe(this.table.element.parentNode)\r\n        }\r\n\r\n        this.subscribe('table-resize', this.tableResized.bind(this))\r\n      } else {\r\n        this.binding = function () {\r\n          if (\r\n            !table.browserMobile ||\r\n            (table.browserMobile && (!table.modules.edit || (table.modules.edit && !table.modules.edit.currentCell)))\r\n          ) {\r\n            table.columnManager.rerenderColumns(true)\r\n            table.redraw()\r\n          }\r\n        }\r\n\r\n        window.addEventListener('resize', this.binding)\r\n      }\r\n\r\n      this.subscribe('table-destroy', this.clearBindings.bind(this))\r\n    }\r\n  }\r\n\r\n  initializeVisibilityObserver() {\r\n    this.visibilityObserver = new IntersectionObserver((entries) => {\r\n      this.visible = entries[entries.length - 1].isIntersecting\r\n\r\n      if (!this.initialized) {\r\n        this.initialized = true\r\n        this.initialRedraw = !this.visible\r\n      } else {\r\n        if (this.visible) {\r\n          this.redrawTable(this.initialRedraw)\r\n          this.initialRedraw = false\r\n        }\r\n      }\r\n    })\r\n\r\n    this.visibilityObserver.observe(this.table.element)\r\n  }\r\n\r\n  redrawTable(force) {\r\n    if (this.initialized && this.visible) {\r\n      this.table.columnManager.rerenderColumns(true)\r\n      this.table.redraw(force)\r\n    }\r\n  }\r\n\r\n  tableResized() {\r\n    this.table.rowManager.redraw()\r\n  }\r\n\r\n  clearBindings() {\r\n    if (this.binding) {\r\n      window.removeEventListener('resize', this.binding)\r\n    }\r\n\r\n    if (this.resizeObserver) {\r\n      this.resizeObserver.unobserve(this.table.element)\r\n    }\r\n\r\n    if (this.visibilityObserver) {\r\n      this.visibilityObserver.unobserve(this.table.element)\r\n    }\r\n\r\n    if (this.containerObserver) {\r\n      this.containerObserver.unobserve(this.table.element.parentNode)\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\nimport extensions from './extensions/extensions.js'\r\n\r\nexport default class ResponsiveLayout extends Module {\r\n  static moduleName = 'responsiveLayout'\r\n  static moduleExtensions = extensions\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.columns = []\r\n    this.hiddenColumns = []\r\n    this.mode = ''\r\n    this.index = 0\r\n    this.collapseFormatter = []\r\n    this.collapseStartOpen = true\r\n    this.collapseHandleColumn = false\r\n\r\n    this.registerTableOption('responsiveLayout', false) // responsive layout flags\r\n    this.registerTableOption('responsiveLayoutCollapseStartOpen', true) // start showing collapsed data\r\n    this.registerTableOption('responsiveLayoutCollapseUseFormatters', true) // responsive layout collapse formatter\r\n    this.registerTableOption('responsiveLayoutCollapseFormatter', false) // responsive layout collapse formatter\r\n\r\n    this.registerColumnOption('responsive')\r\n  }\r\n\r\n  // generate responsive columns list\r\n  initialize() {\r\n    if (this.table.options.responsiveLayout) {\r\n      this.subscribe('column-layout', this.initializeColumn.bind(this))\r\n      this.subscribe('column-show', this.updateColumnVisibility.bind(this))\r\n      this.subscribe('column-hide', this.updateColumnVisibility.bind(this))\r\n      this.subscribe('columns-loaded', this.initializeResponsivity.bind(this))\r\n      this.subscribe('column-moved', this.initializeResponsivity.bind(this))\r\n      this.subscribe('column-add', this.initializeResponsivity.bind(this))\r\n      this.subscribe('column-delete', this.initializeResponsivity.bind(this))\r\n\r\n      this.subscribe('table-redrawing', this.tableRedraw.bind(this))\r\n\r\n      if (this.table.options.responsiveLayout === 'collapse') {\r\n        this.subscribe('row-data-changed', this.generateCollapsedRowContent.bind(this))\r\n        this.subscribe('row-init', this.initializeRow.bind(this))\r\n        this.subscribe('row-layout', this.layoutRow.bind(this))\r\n      }\r\n    }\r\n  }\r\n\r\n  tableRedraw(force) {\r\n    if (['fitColumns', 'fitDataStretch'].indexOf(this.layoutMode()) === -1) {\r\n      if (!force) {\r\n        this.update()\r\n      }\r\n    }\r\n  }\r\n\r\n  initializeResponsivity() {\r\n    let columns = []\r\n\r\n    this.mode = this.table.options.responsiveLayout\r\n    this.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData\r\n    this.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen\r\n    this.hiddenColumns = []\r\n\r\n    if (this.collapseFormatter) {\r\n      this.collapseFormatter = this.collapseFormatter.bind(this.table)\r\n    }\r\n\r\n    // determine level of responsivity for each column\r\n    this.table.columnManager.columnsByIndex.forEach((column, i) => {\r\n      if (column.modules.responsive) {\r\n        if (column.modules.responsive.order && column.modules.responsive.visible) {\r\n          column.modules.responsive.index = i\r\n          columns.push(column)\r\n\r\n          if (!column.visible && this.mode === 'collapse') {\r\n            this.hiddenColumns.push(column)\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    // sort list by responsivity\r\n    columns = columns.reverse()\r\n    columns = columns.sort((a, b) => {\r\n      const diff = b.modules.responsive.order - a.modules.responsive.order\r\n      return diff || b.modules.responsive.index - a.modules.responsive.index\r\n    })\r\n\r\n    this.columns = columns\r\n\r\n    if (this.mode === 'collapse') {\r\n      this.generateCollapsedContent()\r\n    }\r\n\r\n    // assign collapse column\r\n    for (const col of this.table.columnManager.columnsByIndex) {\r\n      if (col.definition.formatter == 'responsiveCollapse') {\r\n        this.collapseHandleColumn = col\r\n        break\r\n      }\r\n    }\r\n\r\n    if (this.collapseHandleColumn) {\r\n      if (this.hiddenColumns.length) {\r\n        this.collapseHandleColumn.show()\r\n      } else {\r\n        this.collapseHandleColumn.hide()\r\n      }\r\n    }\r\n  }\r\n\r\n  // define layout information\r\n  initializeColumn(column) {\r\n    const def = column.getDefinition()\r\n\r\n    column.modules.responsive = {\r\n      order: typeof def.responsive === 'undefined' ? 1 : def.responsive,\r\n      visible: def.visible !== false\r\n    }\r\n  }\r\n\r\n  initializeRow(row) {\r\n    let el\r\n\r\n    if (row.type !== 'calc') {\r\n      el = document.createElement('div')\r\n      el.classList.add('tabulator-responsive-collapse')\r\n\r\n      row.modules.responsiveLayout = {\r\n        element: el,\r\n        open: this.collapseStartOpen\r\n      }\r\n\r\n      if (!this.collapseStartOpen) {\r\n        el.style.display = 'none'\r\n      }\r\n    }\r\n  }\r\n\r\n  layoutRow(row) {\r\n    const rowEl = row.getElement()\r\n\r\n    if (row.modules.responsiveLayout) {\r\n      rowEl.appendChild(row.modules.responsiveLayout.element)\r\n      this.generateCollapsedRowContent(row)\r\n    }\r\n  }\r\n\r\n  // update column visibility\r\n  updateColumnVisibility(column, responsiveToggle) {\r\n    if (!responsiveToggle && column.modules.responsive) {\r\n      column.modules.responsive.visible = column.visible\r\n      this.initializeResponsivity()\r\n    }\r\n  }\r\n\r\n  hideColumn(column) {\r\n    const colCount = this.hiddenColumns.length\r\n\r\n    column.hide(false, true)\r\n\r\n    if (this.mode === 'collapse') {\r\n      this.hiddenColumns.unshift(column)\r\n      this.generateCollapsedContent()\r\n\r\n      if (this.collapseHandleColumn && !colCount) {\r\n        this.collapseHandleColumn.show()\r\n      }\r\n    }\r\n  }\r\n\r\n  showColumn(column) {\r\n    let index\r\n\r\n    column.show(false, true)\r\n    // set column width to prevent calculation loops on uninitialized columns\r\n    column.setWidth(column.getWidth())\r\n\r\n    if (this.mode === 'collapse') {\r\n      index = this.hiddenColumns.indexOf(column)\r\n\r\n      if (index > -1) {\r\n        this.hiddenColumns.splice(index, 1)\r\n      }\r\n\r\n      this.generateCollapsedContent()\r\n\r\n      if (this.collapseHandleColumn && !this.hiddenColumns.length) {\r\n        this.collapseHandleColumn.hide()\r\n      }\r\n    }\r\n  }\r\n\r\n  // redraw columns to fit space\r\n  update() {\r\n    let working = true\r\n\r\n    while (working) {\r\n      const width =\r\n        this.table.modules.layout.getMode() == 'fitColumns'\r\n          ? this.table.columnManager.getFlexBaseWidth()\r\n          : this.table.columnManager.getWidth()\r\n\r\n      const diff =\r\n        (this.table.options.headerVisible\r\n          ? this.table.columnManager.element.clientWidth\r\n          : this.table.element.clientWidth) - width\r\n\r\n      if (diff < 0) {\r\n        // table is too wide\r\n        const column = this.columns[this.index]\r\n\r\n        if (column) {\r\n          this.hideColumn(column)\r\n          this.index++\r\n        } else {\r\n          working = false\r\n        }\r\n      } else {\r\n        // table has spare space\r\n        const column = this.columns[this.index - 1]\r\n\r\n        if (column) {\r\n          if (diff > 0) {\r\n            if (diff >= column.getWidth()) {\r\n              this.showColumn(column)\r\n              this.index--\r\n            } else {\r\n              working = false\r\n            }\r\n          } else {\r\n            working = false\r\n          }\r\n        } else {\r\n          working = false\r\n        }\r\n      }\r\n\r\n      if (!this.table.rowManager.activeRowsCount) {\r\n        this.table.rowManager.renderEmptyScroll()\r\n      }\r\n    }\r\n  }\r\n\r\n  generateCollapsedContent() {\r\n    const rows = this.table.rowManager.getDisplayRows()\r\n\r\n    rows.forEach((row) => {\r\n      this.generateCollapsedRowContent(row)\r\n    })\r\n  }\r\n\r\n  generateCollapsedRowContent(row) {\r\n    let el, contents\r\n\r\n    if (row.modules.responsiveLayout) {\r\n      el = row.modules.responsiveLayout.element\r\n\r\n      while (el.firstChild) el.removeChild(el.firstChild)\r\n\r\n      contents = this.collapseFormatter(this.generateCollapsedRowData(row))\r\n      if (contents) {\r\n        el.appendChild(contents)\r\n      }\r\n      row.calcHeight(true)\r\n    }\r\n  }\r\n\r\n  generateCollapsedRowData(row) {\r\n    const data = row.getData()\r\n    const output = []\r\n    let mockCellComponent\r\n\r\n    this.hiddenColumns.forEach((column) => {\r\n      const value = column.getFieldValue(data)\r\n\r\n      if (column.definition.title && column.field) {\r\n        if (column.modules.format && this.table.options.responsiveLayoutCollapseUseFormatters) {\r\n          mockCellComponent = {\r\n            value: false,\r\n            data: {},\r\n            getValue: function () {\r\n              return value\r\n            },\r\n            getData: function () {\r\n              return data\r\n            },\r\n            getType: function () {\r\n              return 'cell'\r\n            },\r\n            getElement: function () {\r\n              return document.createElement('div')\r\n            },\r\n            getRow: function () {\r\n              return row.getComponent()\r\n            },\r\n            getColumn: function () {\r\n              return column.getComponent()\r\n            },\r\n            getTable: () => {\r\n              return this.table\r\n            }\r\n          }\r\n\r\n          function onRendered(callback) {\r\n            callback()\r\n          }\r\n\r\n          output.push({\r\n            field: column.field,\r\n            title: column.definition.title,\r\n            value: column.modules.format.formatter.call(\r\n              this.table.modules.format,\r\n              mockCellComponent,\r\n              column.modules.format.params,\r\n              onRendered\r\n            )\r\n          })\r\n        } else {\r\n          output.push({\r\n            field: column.field,\r\n            title: column.definition.title,\r\n            value\r\n          })\r\n        }\r\n      }\r\n    })\r\n\r\n    return output\r\n  }\r\n\r\n  formatCollapsedData(data) {\r\n    const list = document.createElement('table')\r\n\r\n    data.forEach((item) => {\r\n      const row = document.createElement('tr')\r\n      const titleData = document.createElement('td')\r\n      const valueData = document.createElement('td')\r\n      let node_content\r\n\r\n      const titleHighlight = document.createElement('strong')\r\n      titleData.appendChild(titleHighlight)\r\n\r\n      this.modules.localize.bind('columns|' + item.field, function (text) {\r\n        titleHighlight.innerHTML = text || item.title\r\n      })\r\n\r\n      if (item.value instanceof Node) {\r\n        node_content = document.createElement('div')\r\n        node_content.appendChild(item.value)\r\n        valueData.appendChild(node_content)\r\n      } else {\r\n        valueData.innerHTML = item.value\r\n      }\r\n\r\n      row.appendChild(titleData)\r\n      row.appendChild(valueData)\r\n      list.appendChild(row)\r\n    })\r\n\r\n    return Object.keys(data).length ? list : ''\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\nimport Range from './Range.js'\r\nimport extensions from './extensions/extensions.js'\r\n\r\nexport default class SelectRange extends Module {\r\n  static moduleName = 'selectRange'\r\n  static moduleInitOrder = 1\r\n  static moduleExtensions = extensions\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.selecting = 'cell'\r\n    this.mousedown = false\r\n    this.ranges = []\r\n    this.overlay = null\r\n    this.rowHeader = null\r\n    this.layoutChangeTimeout = null\r\n    this.columnSelection = false\r\n    this.rowSelection = false\r\n    this.maxRanges = 0\r\n    this.activeRange = false\r\n    this.blockKeydown = false\r\n\r\n    this.keyDownEvent = this._handleKeyDown.bind(this)\r\n    this.mouseUpEvent = this._handleMouseUp.bind(this)\r\n\r\n    this.registerTableOption('selectableRange', false) // enable selectable range\r\n    this.registerTableOption('selectableRangeColumns', false) // enable selectable range\r\n    this.registerTableOption('selectableRangeRows', false) // enable selectable range\r\n    this.registerTableOption('selectableRangeClearCells', false) // allow clearing of active range\r\n    this.registerTableOption('selectableRangeClearCellsValue', undefined) // value for cleared active range\r\n    this.registerTableOption('selectableRangeAutoFocus', true) // focus on a cell after resetRanges\r\n\r\n    this.registerTableFunction('getRangesData', this.getRangesData.bind(this))\r\n    this.registerTableFunction('getRanges', this.getRanges.bind(this))\r\n    this.registerTableFunction('addRange', this.addRangeFromComponent.bind(this))\r\n\r\n    this.registerComponentFunction('cell', 'getRanges', this.cellGetRanges.bind(this))\r\n    this.registerComponentFunction('row', 'getRanges', this.rowGetRanges.bind(this))\r\n    this.registerComponentFunction('column', 'getRanges', this.colGetRanges.bind(this))\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////    Initialization   ///////\r\n  /// ////////////////////////////////\r\n\r\n  initialize() {\r\n    if (this.options('selectableRange')) {\r\n      if (!this.options('selectableRows')) {\r\n        this.maxRanges = this.options('selectableRange')\r\n\r\n        this.initializeTable()\r\n        this.initializeWatchers()\r\n      } else {\r\n        console.warn('SelectRange functionality cannot be used in conjunction with row selection')\r\n      }\r\n\r\n      if (this.options('columns').findIndex((column) => column.frozen) > 0) {\r\n        console.warn(\r\n          'Having frozen column in arbitrary position with selectRange option may result in unpredictable behavior.'\r\n        )\r\n      }\r\n\r\n      if (this.options('columns').filter((column) => column.frozen) > 1) {\r\n        console.warn('Having multiple frozen columns with selectRange option may result in unpredictable behavior.')\r\n      }\r\n    }\r\n  }\r\n\r\n  initializeTable() {\r\n    this.overlay = document.createElement('div')\r\n    this.overlay.classList.add('tabulator-range-overlay')\r\n\r\n    this.rangeContainer = document.createElement('div')\r\n    this.rangeContainer.classList.add('tabulator-range-container')\r\n\r\n    this.activeRangeCellElement = document.createElement('div')\r\n    this.activeRangeCellElement.classList.add('tabulator-range-cell-active')\r\n\r\n    this.overlay.appendChild(this.rangeContainer)\r\n    this.overlay.appendChild(this.activeRangeCellElement)\r\n\r\n    this.table.rowManager.element.addEventListener('keydown', this.keyDownEvent)\r\n\r\n    this.resetRanges()\r\n\r\n    this.table.rowManager.element.appendChild(this.overlay)\r\n    this.table.columnManager.element.setAttribute('tabindex', 0)\r\n    this.table.element.classList.add('tabulator-ranges')\r\n  }\r\n\r\n  initializeWatchers() {\r\n    this.columnSelection = this.options('selectableRangeColumns')\r\n    this.rowSelection = this.options('selectableRangeRows')\r\n\r\n    this.subscribe('column-init', this.initializeColumn.bind(this))\r\n    this.subscribe('column-mousedown', this.handleColumnMouseDown.bind(this))\r\n    this.subscribe('column-mousemove', this.handleColumnMouseMove.bind(this))\r\n    this.subscribe('column-resized', this.handleColumnResized.bind(this))\r\n    this.subscribe('column-moving', this.handleColumnMoving.bind(this))\r\n    this.subscribe('column-moved', this.handleColumnMoved.bind(this))\r\n    this.subscribe('column-width', this.layoutChange.bind(this))\r\n    this.subscribe('column-height', this.layoutChange.bind(this))\r\n    this.subscribe('column-resized', this.layoutChange.bind(this))\r\n    this.subscribe('columns-loaded', this.updateHeaderColumn.bind(this))\r\n\r\n    this.subscribe('cell-height', this.layoutChange.bind(this))\r\n    this.subscribe('cell-rendered', this.renderCell.bind(this))\r\n    this.subscribe('cell-mousedown', this.handleCellMouseDown.bind(this))\r\n    this.subscribe('cell-mousemove', this.handleCellMouseMove.bind(this))\r\n    this.subscribe('cell-click', this.handleCellClick.bind(this))\r\n    this.subscribe('cell-editing', this.handleEditingCell.bind(this))\r\n\r\n    this.subscribe('page-changed', this.redraw.bind(this))\r\n\r\n    this.subscribe('scroll-vertical', this.layoutChange.bind(this))\r\n    this.subscribe('scroll-horizontal', this.layoutChange.bind(this))\r\n\r\n    this.subscribe('data-destroy', this.tableDestroyed.bind(this))\r\n    this.subscribe('data-processed', this.resetRanges.bind(this))\r\n\r\n    this.subscribe('table-layout', this.layoutElement.bind(this))\r\n    this.subscribe('table-redraw', this.redraw.bind(this))\r\n    this.subscribe('table-destroy', this.tableDestroyed.bind(this))\r\n\r\n    this.subscribe('edit-editor-clear', this.finishEditingCell.bind(this))\r\n    this.subscribe('edit-blur', this.restoreFocus.bind(this))\r\n\r\n    this.subscribe('keybinding-nav-prev', this.keyNavigate.bind(this, 'left'))\r\n    this.subscribe('keybinding-nav-next', this.keyNavigate.bind(this, 'right'))\r\n    this.subscribe('keybinding-nav-left', this.keyNavigate.bind(this, 'left'))\r\n    this.subscribe('keybinding-nav-right', this.keyNavigate.bind(this, 'right'))\r\n    this.subscribe('keybinding-nav-up', this.keyNavigate.bind(this, 'up'))\r\n    this.subscribe('keybinding-nav-down', this.keyNavigate.bind(this, 'down'))\r\n    this.subscribe('keybinding-nav-range', this.keyNavigateRange.bind(this))\r\n  }\r\n\r\n  initializeColumn(column) {\r\n    if (this.columnSelection && column.definition.headerSort && this.options('headerSortClickElement') !== 'icon') {\r\n      console.warn(\r\n        \"Using column headerSort with selectableRangeColumns option may result in unpredictable behavior. Consider using headerSortClickElement: 'icon'.\"\r\n      )\r\n    }\r\n\r\n    if (column.modules.edit) {\r\n      // Block editor from taking action so we can trigger edit by\r\n      // double clicking.\r\n      // column.modules.edit.blocked = true;\r\n    }\r\n  }\r\n\r\n  updateHeaderColumn() {\r\n    let frozenCols\r\n\r\n    if (this.rowSelection) {\r\n      this.rowHeader = this.table.columnManager.getVisibleColumnsByIndex()[0]\r\n\r\n      if (this.rowHeader) {\r\n        this.rowHeader.definition.cssClass = this.rowHeader.definition.cssClass + ' tabulator-range-row-header'\r\n\r\n        if (this.rowHeader.definition.headerSort) {\r\n          console.warn('Using column headerSort with selectableRangeRows option may result in unpredictable behavior')\r\n        }\r\n\r\n        if (this.rowHeader.definition.editor) {\r\n          console.warn('Using column editor with selectableRangeRows option may result in unpredictable behavior')\r\n        }\r\n      }\r\n    }\r\n\r\n    // warn if invalid frozen column configuration detected\r\n    if (this.table.modules.frozenColumns && this.table.modules.frozenColumns.active) {\r\n      frozenCols = this.table.modules.frozenColumns.getFrozenColumns()\r\n\r\n      if (frozenCols.length > 1 || (frozenCols.length === 1 && frozenCols[0] !== this.rowHeader)) {\r\n        console.warn(\r\n          'Using frozen columns that are not the range header in combination with the selectRange option may result in unpredictable behavior'\r\n        )\r\n      }\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////   Table Functions   ///////\r\n  /// ////////////////////////////////\r\n\r\n  getRanges() {\r\n    return this.ranges.map((range) => range.getComponent())\r\n  }\r\n\r\n  getRangesData() {\r\n    return this.ranges.map((range) => range.getData())\r\n  }\r\n\r\n  addRangeFromComponent(start, end) {\r\n    start = start ? start._cell : null\r\n    end = end ? end._cell : null\r\n\r\n    return this.addRange(start, end)\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// //// Component Functions ///////\r\n  /// ////////////////////////////////\r\n\r\n  cellGetRanges(cell) {\r\n    let ranges = []\r\n\r\n    if (cell.column === this.rowHeader) {\r\n      ranges = this.ranges.filter((range) => range.occupiesRow(cell.row))\r\n    } else {\r\n      ranges = this.ranges.filter((range) => range.occupies(cell))\r\n    }\r\n\r\n    return ranges.map((range) => range.getComponent())\r\n  }\r\n\r\n  rowGetRanges(row) {\r\n    const ranges = this.ranges.filter((range) => range.occupiesRow(row))\r\n\r\n    return ranges.map((range) => range.getComponent())\r\n  }\r\n\r\n  colGetRanges(col) {\r\n    const ranges = this.ranges.filter((range) => range.occupiesColumn(col))\r\n\r\n    return ranges.map((range) => range.getComponent())\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// /////// Event Handlers /////////\r\n  /// ////////////////////////////////\r\n\r\n  _handleMouseUp(e) {\r\n    this.mousedown = false\r\n    document.removeEventListener('mouseup', this.mouseUpEvent)\r\n  }\r\n\r\n  _handleKeyDown(e) {\r\n    if (\r\n      !this.blockKeydown &&\r\n      (!this.table.modules.edit || (this.table.modules.edit && !this.table.modules.edit.currentCell))\r\n    ) {\r\n      if (e.key === 'Enter') {\r\n        // is editing a cell?\r\n        if (this.table.modules.edit && this.table.modules.edit.currentCell) {\r\n          return\r\n        }\r\n\r\n        this.table.modules.edit.editCell(this.getActiveCell())\r\n\r\n        e.preventDefault()\r\n      }\r\n\r\n      if ((e.key === 'Backspace' || e.key === 'Delete') && this.options('selectableRangeClearCells')) {\r\n        if (this.activeRange) {\r\n          this.activeRange.clearValues()\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  initializeFocus(cell) {\r\n    let range\r\n\r\n    this.restoreFocus()\r\n\r\n    try {\r\n      if (document.selection) {\r\n        // IE\r\n        range = document.body.createTextRange()\r\n        range.moveToElementText(cell.getElement())\r\n        range.select()\r\n      } else if (window.getSelection) {\r\n        range = document.createRange()\r\n        range.selectNode(cell.getElement())\r\n        window.getSelection().removeAllRanges()\r\n        window.getSelection().addRange(range)\r\n      }\r\n    } catch (e) {}\r\n  }\r\n\r\n  restoreFocus(element) {\r\n    this.table.rowManager.element.focus()\r\n\r\n    return true\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// /// Column Functionality ///////\r\n  /// ////////////////////////////////\r\n\r\n  handleColumnResized(column) {\r\n    let selected\r\n\r\n    if (this.selecting !== 'column' && this.selecting !== 'all') {\r\n      return\r\n    }\r\n\r\n    selected = this.ranges.some((range) => range.occupiesColumn(column))\r\n\r\n    if (!selected) {\r\n      return\r\n    }\r\n\r\n    this.ranges.forEach((range) => {\r\n      const selectedColumns = range.getColumns(true)\r\n\r\n      selectedColumns.forEach((selectedColumn) => {\r\n        if (selectedColumn !== column) {\r\n          selectedColumn.setWidth(column.width)\r\n        }\r\n      })\r\n    })\r\n  }\r\n\r\n  handleColumnMoving(_event, column) {\r\n    this.resetRanges().setBounds(column)\r\n    this.overlay.style.visibility = 'hidden'\r\n  }\r\n\r\n  handleColumnMoved(from, _to, _after) {\r\n    this.activeRange.setBounds(from)\r\n    this.layoutElement()\r\n  }\r\n\r\n  handleColumnMouseDown(event, column) {\r\n    if (\r\n      event.button === 2 &&\r\n      (this.selecting === 'column' || this.selecting === 'all') &&\r\n      this.activeRange.occupiesColumn(column)\r\n    ) {\r\n      return\r\n    }\r\n\r\n    // If columns are movable, allow dragging columns only if they are not\r\n    // selected. Dragging selected columns should move the columns instead.\r\n    if (this.table.options.movableColumns && this.selecting === 'column' && this.activeRange.occupiesColumn(column)) {\r\n      return\r\n    }\r\n\r\n    this.mousedown = true\r\n\r\n    document.addEventListener('mouseup', this.mouseUpEvent)\r\n\r\n    this.newSelection(event, column)\r\n  }\r\n\r\n  handleColumnMouseMove(e, column) {\r\n    if (column === this.rowHeader || !this.mousedown || this.selecting === 'all') {\r\n      return\r\n    }\r\n\r\n    this.activeRange.setBounds(false, column, true)\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ///// Cell Functionality ///////\r\n  /// ////////////////////////////////\r\n\r\n  renderCell(cell) {\r\n    const el = cell.getElement()\r\n    const rangeIdx = this.ranges.findIndex((range) => range.occupies(cell))\r\n\r\n    el.classList.toggle('tabulator-range-selected', rangeIdx !== -1)\r\n    el.classList.toggle(\r\n      'tabulator-range-only-cell-selected',\r\n      this.ranges.length === 1 && this.ranges[0].atTopLeft(cell) && this.ranges[0].atBottomRight(cell)\r\n    )\r\n\r\n    el.dataset.range = rangeIdx\r\n  }\r\n\r\n  handleCellMouseDown(event, cell) {\r\n    if (\r\n      event.button === 2 &&\r\n      (this.activeRange.occupies(cell) ||\r\n        ((this.selecting === 'row' || this.selecting === 'all') && this.activeRange.occupiesRow(cell.row)))\r\n    ) {\r\n      return\r\n    }\r\n\r\n    this.mousedown = true\r\n\r\n    document.addEventListener('mouseup', this.mouseUpEvent)\r\n\r\n    this.newSelection(event, cell)\r\n  }\r\n\r\n  handleCellMouseMove(e, cell) {\r\n    if (!this.mousedown || this.selecting === 'all') {\r\n      return\r\n    }\r\n\r\n    this.activeRange.setBounds(false, cell, true)\r\n  }\r\n\r\n  handleCellClick(e, cell) {\r\n    this.initializeFocus(cell)\r\n  }\r\n\r\n  handleEditingCell(cell) {\r\n    if (this.activeRange) {\r\n      this.activeRange.setBounds(cell)\r\n    }\r\n  }\r\n\r\n  finishEditingCell() {\r\n    this.blockKeydown = true\r\n    this.table.rowManager.element.focus()\r\n\r\n    setTimeout(() => {\r\n      this.blockKeydown = false\r\n    }, 10)\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////     Navigation      ///////\r\n  /// ////////////////////////////////\r\n\r\n  keyNavigate(dir, e) {\r\n    if (this.navigate(false, false, dir)) {\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  keyNavigateRange(e, dir, jump, expand) {\r\n    if (this.navigate(jump, expand, dir)) {\r\n      e.preventDefault()\r\n    }\r\n  }\r\n\r\n  navigate(jump, expand, dir) {\r\n    let moved = false\r\n    let range\r\n    let rangeEdge\r\n    let prevRect\r\n    let nextRow\r\n    let nextCol\r\n    let row\r\n    let column\r\n    let rowRect\r\n    let rowManagerRect\r\n    let columnRect\r\n    let columnManagerRect\r\n\r\n    // Don't navigate while editing\r\n    if (this.table.modules.edit && this.table.modules.edit.currentCell) {\r\n      return false\r\n    }\r\n\r\n    // If there are more than 1 range, use the active range and destroy the others\r\n    if (this.ranges.length > 1) {\r\n      this.ranges = this.ranges.filter((range) => {\r\n        if (range === this.activeRange) {\r\n          range.setEnd(range.start.row, range.start.col)\r\n          return true\r\n        }\r\n        range.destroy()\r\n        return false\r\n      })\r\n    }\r\n\r\n    range = this.activeRange\r\n    prevRect = {\r\n      top: range.top,\r\n      bottom: range.bottom,\r\n      left: range.left,\r\n      right: range.right\r\n    }\r\n\r\n    rangeEdge = expand ? range.end : range.start\r\n    nextRow = rangeEdge.row\r\n    nextCol = rangeEdge.col\r\n\r\n    if (jump) {\r\n      switch (dir) {\r\n        case 'left':\r\n          nextCol = this.findJumpCellLeft(range.start.row, rangeEdge.col)\r\n          break\r\n        case 'right':\r\n          nextCol = this.findJumpCellRight(range.start.row, rangeEdge.col)\r\n          break\r\n        case 'up':\r\n          nextRow = this.findJumpCellUp(rangeEdge.row, range.start.col)\r\n          break\r\n        case 'down':\r\n          nextRow = this.findJumpCellDown(rangeEdge.row, range.start.col)\r\n          break\r\n      }\r\n    } else {\r\n      if (expand) {\r\n        if (\r\n          (this.selecting === 'row' && (dir === 'left' || dir === 'right')) ||\r\n          (this.selecting === 'column' && (dir === 'up' || dir === 'down'))\r\n        ) {\r\n          return\r\n        }\r\n      }\r\n\r\n      switch (dir) {\r\n        case 'left':\r\n          nextCol = Math.max(nextCol - 1, 0)\r\n          break\r\n        case 'right':\r\n          nextCol = Math.min(nextCol + 1, this.getTableColumns().length - 1)\r\n          break\r\n        case 'up':\r\n          nextRow = Math.max(nextRow - 1, 0)\r\n          break\r\n        case 'down':\r\n          nextRow = Math.min(nextRow + 1, this.getTableRows().length - 1)\r\n          break\r\n      }\r\n    }\r\n\r\n    if (this.rowHeader && nextCol === 0) {\r\n      nextCol = 1\r\n    }\r\n\r\n    if (!expand) {\r\n      range.setStart(nextRow, nextCol)\r\n    }\r\n\r\n    range.setEnd(nextRow, nextCol)\r\n\r\n    if (!expand) {\r\n      this.selecting = 'cell'\r\n    }\r\n\r\n    moved =\r\n      prevRect.top !== range.top ||\r\n      prevRect.bottom !== range.bottom ||\r\n      prevRect.left !== range.left ||\r\n      prevRect.right !== range.right\r\n\r\n    if (moved) {\r\n      row = this.getRowByRangePos(range.end.row)\r\n      column = this.getColumnByRangePos(range.end.col)\r\n      rowRect = row.getElement().getBoundingClientRect()\r\n      columnRect = column.getElement().getBoundingClientRect()\r\n      rowManagerRect = this.table.rowManager.getElement().getBoundingClientRect()\r\n      columnManagerRect = this.table.columnManager.getElement().getBoundingClientRect()\r\n\r\n      if (!(rowRect.top >= rowManagerRect.top && rowRect.bottom <= rowManagerRect.bottom)) {\r\n        if (row.getElement().parentNode && column.getElement().parentNode) {\r\n          // Use faster autoScroll when the elements are on the DOM\r\n          this.autoScroll(range, row.getElement(), column.getElement())\r\n        } else {\r\n          row.getComponent().scrollTo(undefined, false)\r\n        }\r\n      }\r\n\r\n      if (\r\n        !(\r\n          columnRect.left >= columnManagerRect.left + this.getRowHeaderWidth() &&\r\n          columnRect.right <= columnManagerRect.right\r\n        )\r\n      ) {\r\n        if (row.getElement().parentNode && column.getElement().parentNode) {\r\n          // Use faster autoScroll when the elements are on the DOM\r\n          this.autoScroll(range, row.getElement(), column.getElement())\r\n        } else {\r\n          column.getComponent().scrollTo(undefined, false)\r\n        }\r\n      }\r\n\r\n      this.layoutElement()\r\n    }\r\n    return true\r\n  }\r\n\r\n  rangeRemoved(removed) {\r\n    this.ranges = this.ranges.filter((range) => range !== removed)\r\n\r\n    if (this.activeRange === removed) {\r\n      if (this.ranges.length) {\r\n        this.activeRange = this.ranges[this.ranges.length - 1]\r\n      } else {\r\n        this.addRange()\r\n      }\r\n    }\r\n\r\n    this.layoutElement(true)\r\n  }\r\n\r\n  findJumpRow(column, rows, reverse, emptyStart, emptySide) {\r\n    if (reverse) {\r\n      rows = rows.reverse()\r\n    }\r\n\r\n    return this.findJumpItem(emptyStart, emptySide, rows, function (row) {\r\n      return row.getData()[column.getField()]\r\n    })\r\n  }\r\n\r\n  findJumpCol(row, columns, reverse, emptyStart, emptySide) {\r\n    if (reverse) {\r\n      columns = columns.reverse()\r\n    }\r\n\r\n    return this.findJumpItem(emptyStart, emptySide, columns, function (column) {\r\n      return row.getData()[column.getField()]\r\n    })\r\n  }\r\n\r\n  findJumpItem(emptyStart, emptySide, items, valueResolver) {\r\n    let nextItem\r\n\r\n    for (const currentItem of items) {\r\n      const currentValue = valueResolver(currentItem)\r\n\r\n      if (emptyStart) {\r\n        nextItem = currentItem\r\n        if (currentValue) {\r\n          break\r\n        }\r\n      } else {\r\n        if (emptySide) {\r\n          nextItem = currentItem\r\n\r\n          if (currentValue) {\r\n            break\r\n          }\r\n        } else {\r\n          if (currentValue) {\r\n            nextItem = currentItem\r\n          } else {\r\n            break\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    return nextItem\r\n  }\r\n\r\n  findJumpCellLeft(rowPos, colPos) {\r\n    const row = this.getRowByRangePos(rowPos)\r\n    const columns = this.getTableColumns()\r\n    const isStartingCellEmpty = this.isEmpty(row.getData()[columns[colPos].getField()])\r\n    const isLeftOfStartingCellEmpty = columns[colPos - 1]\r\n      ? this.isEmpty(row.getData()[columns[colPos - 1].getField()])\r\n      : false\r\n    const targetCols = this.rowHeader ? columns.slice(1, colPos) : columns.slice(0, colPos)\r\n    const jumpCol = this.findJumpCol(row, targetCols, true, isStartingCellEmpty, isLeftOfStartingCellEmpty)\r\n\r\n    if (jumpCol) {\r\n      return jumpCol.getPosition() - 1\r\n    }\r\n\r\n    return colPos\r\n  }\r\n\r\n  findJumpCellRight(rowPos, colPos) {\r\n    const row = this.getRowByRangePos(rowPos)\r\n    const columns = this.getTableColumns()\r\n    const isStartingCellEmpty = this.isEmpty(row.getData()[columns[colPos].getField()])\r\n    const isRightOfStartingCellEmpty = columns[colPos + 1]\r\n      ? this.isEmpty(row.getData()[columns[colPos + 1].getField()])\r\n      : false\r\n    const jumpCol = this.findJumpCol(\r\n      row,\r\n      columns.slice(colPos + 1, columns.length),\r\n      false,\r\n      isStartingCellEmpty,\r\n      isRightOfStartingCellEmpty\r\n    )\r\n\r\n    if (jumpCol) {\r\n      return jumpCol.getPosition() - 1\r\n    }\r\n\r\n    return colPos\r\n  }\r\n\r\n  findJumpCellUp(rowPos, colPos) {\r\n    const column = this.getColumnByRangePos(colPos)\r\n    const rows = this.getTableRows()\r\n    const isStartingCellEmpty = this.isEmpty(rows[rowPos].getData()[column.getField()])\r\n    const isTopOfStartingCellEmpty = rows[rowPos - 1]\r\n      ? this.isEmpty(rows[rowPos - 1].getData()[column.getField()])\r\n      : false\r\n    const jumpRow = this.findJumpRow(column, rows.slice(0, rowPos), true, isStartingCellEmpty, isTopOfStartingCellEmpty)\r\n\r\n    if (jumpRow) {\r\n      return jumpRow.position - 1\r\n    }\r\n\r\n    return rowPos\r\n  }\r\n\r\n  findJumpCellDown(rowPos, colPos) {\r\n    const column = this.getColumnByRangePos(colPos)\r\n    const rows = this.getTableRows()\r\n    const isStartingCellEmpty = this.isEmpty(rows[rowPos].getData()[column.getField()])\r\n    const isBottomOfStartingCellEmpty = rows[rowPos + 1]\r\n      ? this.isEmpty(rows[rowPos + 1].getData()[column.getField()])\r\n      : false\r\n    const jumpRow = this.findJumpRow(\r\n      column,\r\n      rows.slice(rowPos + 1, rows.length),\r\n      false,\r\n      isStartingCellEmpty,\r\n      isBottomOfStartingCellEmpty\r\n    )\r\n\r\n    if (jumpRow) {\r\n      return jumpRow.position - 1\r\n    }\r\n\r\n    return rowPos\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////      Selection      ///////\r\n  /// ////////////////////////////////\r\n  newSelection(event, element) {\r\n    let range\r\n\r\n    if (element.type === 'column') {\r\n      if (!this.columnSelection) {\r\n        return\r\n      }\r\n\r\n      if (element === this.rowHeader) {\r\n        range = this.resetRanges()\r\n        this.selecting = 'all'\r\n\r\n        let topLeftCell\r\n        const bottomRightCell = this.getCell(-1, -1)\r\n\r\n        if (this.rowHeader) {\r\n          topLeftCell = this.getCell(0, 1)\r\n        } else {\r\n          topLeftCell = this.getCell(0, 0)\r\n        }\r\n\r\n        range.setBounds(topLeftCell, bottomRightCell)\r\n        return\r\n      } else {\r\n        this.selecting = 'column'\r\n      }\r\n    } else if (element.column === this.rowHeader) {\r\n      this.selecting = 'row'\r\n    } else {\r\n      this.selecting = 'cell'\r\n    }\r\n\r\n    if (event.shiftKey) {\r\n      this.activeRange.setBounds(false, element, true)\r\n    } else if (event.ctrlKey) {\r\n      this.addRange().setBounds(element, undefined, true)\r\n    } else {\r\n      this.resetRanges().setBounds(element, undefined, true)\r\n    }\r\n  }\r\n\r\n  autoScroll(range, row, column) {\r\n    const tableHolder = this.table.rowManager.element\r\n    let rect\r\n    let view\r\n    let withinHorizontalView\r\n    let withinVerticalView\r\n\r\n    if (typeof row === 'undefined') {\r\n      row = this.getRowByRangePos(range.end.row).getElement()\r\n    }\r\n\r\n    if (typeof column === 'undefined') {\r\n      column = this.getColumnByRangePos(range.end.col).getElement()\r\n    }\r\n\r\n    rect = {\r\n      left: column.offsetLeft,\r\n      right: column.offsetLeft + column.offsetWidth,\r\n      top: row.offsetTop,\r\n      bottom: row.offsetTop + row.offsetHeight\r\n    }\r\n\r\n    view = {\r\n      left: tableHolder.scrollLeft + this.getRowHeaderWidth(),\r\n      right: Math.ceil(tableHolder.scrollLeft + tableHolder.clientWidth),\r\n      top: tableHolder.scrollTop,\r\n      bottom: tableHolder.scrollTop + tableHolder.offsetHeight - this.table.rowManager.scrollbarWidth\r\n    }\r\n\r\n    withinHorizontalView =\r\n      view.left < rect.left && rect.left < view.right && view.left < rect.right && rect.right < view.right\r\n\r\n    withinVerticalView =\r\n      view.top < rect.top && rect.top < view.bottom && view.top < rect.bottom && rect.bottom < view.bottom\r\n\r\n    if (!withinHorizontalView) {\r\n      if (rect.left < view.left) {\r\n        tableHolder.scrollLeft = rect.left - this.getRowHeaderWidth()\r\n      } else if (rect.right > view.right) {\r\n        tableHolder.scrollLeft = Math.min(rect.right - tableHolder.clientWidth, rect.left - this.getRowHeaderWidth())\r\n      }\r\n    }\r\n\r\n    if (!withinVerticalView) {\r\n      if (rect.top < view.top) {\r\n        tableHolder.scrollTop = rect.top\r\n      } else if (rect.bottom > view.bottom) {\r\n        tableHolder.scrollTop = rect.bottom - tableHolder.clientHeight\r\n      }\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////       Layout        ///////\r\n  /// ////////////////////////////////\r\n\r\n  layoutChange() {\r\n    this.overlay.style.visibility = 'hidden'\r\n    clearTimeout(this.layoutChangeTimeout)\r\n    this.layoutChangeTimeout = setTimeout(this.layoutRanges.bind(this), 200)\r\n  }\r\n\r\n  redraw(force) {\r\n    if (force) {\r\n      this.selecting = 'cell'\r\n      this.resetRanges()\r\n      this.layoutElement()\r\n    }\r\n  }\r\n\r\n  layoutElement(visibleRows) {\r\n    let rows\r\n\r\n    if (visibleRows) {\r\n      rows = this.table.rowManager.getVisibleRows(true)\r\n    } else {\r\n      rows = this.table.rowManager.getRows()\r\n    }\r\n\r\n    rows.forEach((row) => {\r\n      if (row.type === 'row') {\r\n        this.layoutRow(row)\r\n        row.cells.forEach((cell) => this.renderCell(cell))\r\n      }\r\n    })\r\n\r\n    this.getTableColumns().forEach((column) => {\r\n      this.layoutColumn(column)\r\n    })\r\n\r\n    this.layoutRanges()\r\n  }\r\n\r\n  layoutRow(row) {\r\n    const el = row.getElement()\r\n    let selected = false\r\n    const occupied = this.ranges.some((range) => range.occupiesRow(row))\r\n\r\n    if (this.selecting === 'row') {\r\n      selected = occupied\r\n    } else if (this.selecting === 'all') {\r\n      selected = true\r\n    }\r\n\r\n    el.classList.toggle('tabulator-range-selected', selected)\r\n    el.classList.toggle('tabulator-range-highlight', occupied)\r\n  }\r\n\r\n  layoutColumn(column) {\r\n    const el = column.getElement()\r\n    let selected = false\r\n    const occupied = this.ranges.some((range) => range.occupiesColumn(column))\r\n\r\n    if (this.selecting === 'column') {\r\n      selected = occupied\r\n    } else if (this.selecting === 'all') {\r\n      selected = true\r\n    }\r\n\r\n    el.classList.toggle('tabulator-range-selected', selected)\r\n    el.classList.toggle('tabulator-range-highlight', occupied)\r\n  }\r\n\r\n  layoutRanges() {\r\n    let activeCell, activeCellEl, activeRowEl\r\n\r\n    if (!this.table.initialized) {\r\n      return\r\n    }\r\n\r\n    activeCell = this.getActiveCell()\r\n\r\n    if (!activeCell) {\r\n      return\r\n    }\r\n\r\n    activeCellEl = activeCell.getElement()\r\n    activeRowEl = activeCell.row.getElement()\r\n\r\n    if (this.table.rtl) {\r\n      this.activeRangeCellElement.style.right =\r\n        activeRowEl.offsetWidth - activeCellEl.offsetLeft - activeCellEl.offsetWidth + 'px'\r\n    } else {\r\n      this.activeRangeCellElement.style.left = activeRowEl.offsetLeft + activeCellEl.offsetLeft + 'px'\r\n    }\r\n\r\n    this.activeRangeCellElement.style.top = activeRowEl.offsetTop + 'px'\r\n    this.activeRangeCellElement.style.width = activeCellEl.offsetWidth + 'px'\r\n    this.activeRangeCellElement.style.height = activeRowEl.offsetHeight + 'px'\r\n\r\n    this.ranges.forEach((range) => range.layout())\r\n\r\n    this.overlay.style.visibility = 'visible'\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////  Helper Functions   ///////\r\n  /// ////////////////////////////////\r\n\r\n  getCell(rowIdx, colIdx) {\r\n    let row\r\n\r\n    if (colIdx < 0) {\r\n      colIdx = this.getTableColumns().length + colIdx\r\n      if (colIdx < 0) {\r\n        return null\r\n      }\r\n    }\r\n\r\n    if (rowIdx < 0) {\r\n      rowIdx = this.getTableRows().length + rowIdx\r\n    }\r\n\r\n    row = this.table.rowManager.getRowFromPosition(rowIdx + 1)\r\n\r\n    return row ? row.getCells(false, true).filter((cell) => cell.column.visible)[colIdx] : null\r\n  }\r\n\r\n  getActiveCell() {\r\n    return this.getCell(this.activeRange.start.row, this.activeRange.start.col)\r\n  }\r\n\r\n  getRowByRangePos(pos) {\r\n    return this.getTableRows()[pos]\r\n  }\r\n\r\n  getColumnByRangePos(pos) {\r\n    return this.getTableColumns()[pos]\r\n  }\r\n\r\n  getTableRows() {\r\n    return this.table.rowManager.getDisplayRows().filter((row) => row.type === 'row')\r\n  }\r\n\r\n  getTableColumns() {\r\n    return this.table.columnManager.getVisibleColumnsByIndex()\r\n  }\r\n\r\n  addRange(start, end) {\r\n    let range\r\n\r\n    if (this.maxRanges !== true && this.ranges.length >= this.maxRanges) {\r\n      this.ranges.shift().destroy()\r\n    }\r\n\r\n    range = new Range(this.table, this, start, end)\r\n\r\n    this.activeRange = range\r\n    this.ranges.push(range)\r\n    this.rangeContainer.appendChild(range.element)\r\n\r\n    return range\r\n  }\r\n\r\n  resetRanges() {\r\n    let range, cell, visibleCells\r\n\r\n    this.ranges.forEach((range) => range.destroy())\r\n    this.ranges = []\r\n\r\n    range = this.addRange()\r\n\r\n    if (this.table.rowManager.activeRows.length) {\r\n      visibleCells = this.table.rowManager.activeRows[0].cells.filter((cell) => cell.column.visible)\r\n      cell = visibleCells[this.rowHeader ? 1 : 0]\r\n\r\n      if (cell) {\r\n        range.setBounds(cell)\r\n        if (this.options('selectableRangeAutoFocus')) {\r\n          this.initializeFocus(cell)\r\n        }\r\n      }\r\n    }\r\n\r\n    return range\r\n  }\r\n\r\n  tableDestroyed() {\r\n    document.removeEventListener('mouseup', this.mouseUpEvent)\r\n    this.table.rowManager.element.removeEventListener('keydown', this.keyDownEvent)\r\n  }\r\n\r\n  selectedRows(component) {\r\n    return component ? this.activeRange.getRows().map((row) => row.getComponent()) : this.activeRange.getRows()\r\n  }\r\n\r\n  selectedColumns(component) {\r\n    return component ? this.activeRange.getColumns().map((col) => col.getComponent()) : this.activeRange.getColumns()\r\n  }\r\n\r\n  getRowHeaderWidth() {\r\n    if (!this.rowHeader) {\r\n      return 0\r\n    }\r\n    return this.rowHeader.getElement().offsetWidth\r\n  }\r\n\r\n  isEmpty(value) {\r\n    return value === null || value === undefined || value === ''\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\nimport extensions from './extensions/extensions.js'\r\n\r\nexport default class SelectRow extends Module {\r\n  static moduleName = 'selectRow'\r\n  static moduleExtensions = extensions\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.selecting = false // flag selecting in progress\r\n    this.lastClickedRow = false // last clicked row\r\n    this.selectPrev = [] // hold previously selected element for drag drop selection\r\n    this.selectedRows = [] // hold selected rows\r\n    this.headerCheckboxElement = null // hold header select element\r\n\r\n    this.registerTableOption('selectableRows', 'highlight') // highlight rows on hover\r\n    this.registerTableOption('selectableRowsRangeMode', 'drag') // highlight rows on hover\r\n    this.registerTableOption('selectableRowsRollingSelection', true) // roll selection once maximum number of selectable rows is reached\r\n    this.registerTableOption('selectableRowsPersistence', true) // maintain selection when table view is updated\r\n    this.registerTableOption('selectableRowsCheck', function (data, row) {\r\n      return true\r\n    }) // check whether row is selectable\r\n\r\n    this.registerTableFunction('selectRow', this.selectRows.bind(this))\r\n    this.registerTableFunction('deselectRow', this.deselectRows.bind(this))\r\n    this.registerTableFunction('toggleSelectRow', this.toggleRow.bind(this))\r\n    this.registerTableFunction('getSelectedRows', this.getSelectedRows.bind(this))\r\n    this.registerTableFunction('getSelectedData', this.getSelectedData.bind(this))\r\n\r\n    // register component functions\r\n    this.registerComponentFunction('row', 'select', this.selectRows.bind(this))\r\n    this.registerComponentFunction('row', 'deselect', this.deselectRows.bind(this))\r\n    this.registerComponentFunction('row', 'toggleSelect', this.toggleRow.bind(this))\r\n    this.registerComponentFunction('row', 'isSelected', this.isRowSelected.bind(this))\r\n  }\r\n\r\n  initialize() {\r\n    this.deprecatedOptionsCheck()\r\n\r\n    if (this.table.options.selectableRows === 'highlight' && this.table.options.selectableRange) {\r\n      this.table.options.selectableRows = false\r\n    }\r\n\r\n    if (this.table.options.selectableRows !== false) {\r\n      this.subscribe('row-init', this.initializeRow.bind(this))\r\n      this.subscribe('row-deleting', this.rowDeleted.bind(this))\r\n      this.subscribe('rows-wipe', this.clearSelectionData.bind(this))\r\n      this.subscribe('rows-retrieve', this.rowRetrieve.bind(this))\r\n\r\n      if (this.table.options.selectableRows && !this.table.options.selectableRowsPersistence) {\r\n        this.subscribe('data-refreshing', this.deselectRows.bind(this))\r\n      }\r\n    }\r\n  }\r\n\r\n  deprecatedOptionsCheck() {\r\n    // this.deprecationCheck(\"selectable\", \"selectableRows\", true);\r\n    // this.deprecationCheck(\"selectableRollingSelection\", \"selectableRowsRollingSelection\", true);\r\n    // this.deprecationCheck(\"selectableRangeMode\", \"selectableRowsRangeMode\", true);\r\n    // this.deprecationCheck(\"selectablePersistence\", \"selectableRowsPersistence\", true);\r\n    // this.deprecationCheck(\"selectableCheck\", \"selectableRowsCheck\", true);\r\n  }\r\n\r\n  rowRetrieve(type, prevValue) {\r\n    return type === 'selected' ? this.selectedRows : prevValue\r\n  }\r\n\r\n  rowDeleted(row) {\r\n    this._deselectRow(row, true)\r\n  }\r\n\r\n  clearSelectionData(silent) {\r\n    const prevSelected = this.selectedRows.length\r\n\r\n    this.selecting = false\r\n    this.lastClickedRow = false\r\n    this.selectPrev = []\r\n    this.selectedRows = []\r\n\r\n    if (prevSelected && silent !== true) {\r\n      this._rowSelectionChanged()\r\n    }\r\n  }\r\n\r\n  initializeRow(row) {\r\n    const self = this\r\n    const selectable = self.checkRowSelectability(row)\r\n    const element = row.getElement()\r\n\r\n    // trigger end of row selection\r\n    const endSelect = function () {\r\n      setTimeout(function () {\r\n        self.selecting = false\r\n      }, 50)\r\n\r\n      document.body.removeEventListener('mouseup', endSelect)\r\n    }\r\n\r\n    row.modules.select = { selected: false }\r\n\r\n    element.classList.toggle('tabulator-selectable', selectable)\r\n    element.classList.toggle('tabulator-unselectable', !selectable)\r\n\r\n    // set row selection class\r\n    if (self.checkRowSelectability(row)) {\r\n      if (self.table.options.selectableRows && self.table.options.selectableRows != 'highlight') {\r\n        if (self.table.options.selectableRowsRangeMode === 'click') {\r\n          element.addEventListener('click', this.handleComplexRowClick.bind(this, row))\r\n        } else {\r\n          element.addEventListener('click', function (e) {\r\n            if (!self.table.modExists('edit') || !self.table.modules.edit.getCurrentCell()) {\r\n              self.table._clearSelection()\r\n            }\r\n\r\n            if (!self.selecting) {\r\n              self.toggleRow(row)\r\n            }\r\n          })\r\n\r\n          element.addEventListener('mousedown', function (e) {\r\n            if (e.shiftKey) {\r\n              self.table._clearSelection()\r\n\r\n              self.selecting = true\r\n\r\n              self.selectPrev = []\r\n\r\n              document.body.addEventListener('mouseup', endSelect)\r\n              document.body.addEventListener('keyup', endSelect)\r\n\r\n              self.toggleRow(row)\r\n\r\n              return false\r\n            }\r\n          })\r\n\r\n          element.addEventListener('mouseenter', function (e) {\r\n            if (self.selecting) {\r\n              self.table._clearSelection()\r\n              self.toggleRow(row)\r\n\r\n              if (self.selectPrev[1] == row) {\r\n                self.toggleRow(self.selectPrev[0])\r\n              }\r\n            }\r\n          })\r\n\r\n          element.addEventListener('mouseout', function (e) {\r\n            if (self.selecting) {\r\n              self.table._clearSelection()\r\n              self.selectPrev.unshift(row)\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  handleComplexRowClick(row, e) {\r\n    if (e.shiftKey) {\r\n      this.table._clearSelection()\r\n      this.lastClickedRow = this.lastClickedRow || row\r\n\r\n      const lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow)\r\n      const rowIdx = this.table.rowManager.getDisplayRowIndex(row)\r\n\r\n      const fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx\r\n      const toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx\r\n\r\n      const rows = this.table.rowManager.getDisplayRows().slice(0)\r\n      let toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1)\r\n\r\n      if (e.ctrlKey || e.metaKey) {\r\n        toggledRows.forEach((toggledRow) => {\r\n          if (toggledRow !== this.lastClickedRow) {\r\n            if (this.table.options.selectableRows !== true && !this.isRowSelected(row)) {\r\n              if (this.selectedRows.length < this.table.options.selectableRows) {\r\n                this.toggleRow(toggledRow)\r\n              }\r\n            } else {\r\n              this.toggleRow(toggledRow)\r\n            }\r\n          }\r\n        })\r\n        this.lastClickedRow = row\r\n      } else {\r\n        this.deselectRows(undefined, true)\r\n\r\n        if (this.table.options.selectableRows !== true) {\r\n          if (toggledRows.length > this.table.options.selectableRows) {\r\n            toggledRows = toggledRows.slice(0, this.table.options.selectableRows)\r\n          }\r\n        }\r\n\r\n        this.selectRows(toggledRows)\r\n      }\r\n      this.table._clearSelection()\r\n    } else if (e.ctrlKey || e.metaKey) {\r\n      this.toggleRow(row)\r\n      this.lastClickedRow = row\r\n    } else {\r\n      this.deselectRows(undefined, true)\r\n      this.selectRows(row)\r\n      this.lastClickedRow = row\r\n    }\r\n  }\r\n\r\n  checkRowSelectability(row) {\r\n    if (row && row.type === 'row') {\r\n      return this.table.options.selectableRowsCheck.call(this.table, row.getComponent())\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  // toggle row selection\r\n  toggleRow(row) {\r\n    if (this.checkRowSelectability(row)) {\r\n      if (row.modules.select && row.modules.select.selected) {\r\n        this._deselectRow(row)\r\n      } else {\r\n        this._selectRow(row)\r\n      }\r\n    }\r\n  }\r\n\r\n  // select a number of rows\r\n  selectRows(rows) {\r\n    const changes = []\r\n    let rowMatch\r\n    let change\r\n\r\n    switch (typeof rows) {\r\n      case 'undefined':\r\n        rowMatch = this.table.rowManager.rows\r\n        break\r\n\r\n      case 'number':\r\n        rowMatch = this.table.rowManager.findRow(rows)\r\n        break\r\n\r\n      case 'string':\r\n        rowMatch = this.table.rowManager.findRow(rows)\r\n\r\n        if (!rowMatch) {\r\n          rowMatch = this.table.rowManager.getRows(rows)\r\n        }\r\n        break\r\n\r\n      default:\r\n        rowMatch = rows\r\n        break\r\n    }\r\n\r\n    if (Array.isArray(rowMatch)) {\r\n      if (rowMatch.length) {\r\n        rowMatch.forEach((row) => {\r\n          change = this._selectRow(row, true, true)\r\n\r\n          if (change) {\r\n            changes.push(change)\r\n          }\r\n        })\r\n\r\n        this._rowSelectionChanged(false, changes)\r\n      }\r\n    } else {\r\n      if (rowMatch) {\r\n        this._selectRow(rowMatch, false, true)\r\n      }\r\n    }\r\n  }\r\n\r\n  // select an individual row\r\n  _selectRow(rowInfo, silent, force) {\r\n    // handle max row count\r\n    if (!isNaN(this.table.options.selectableRows) && this.table.options.selectableRows !== true && !force) {\r\n      if (this.selectedRows.length >= this.table.options.selectableRows) {\r\n        if (this.table.options.selectableRowsRollingSelection) {\r\n          this._deselectRow(this.selectedRows[0])\r\n        } else {\r\n          return false\r\n        }\r\n      }\r\n    }\r\n\r\n    const row = this.table.rowManager.findRow(rowInfo)\r\n\r\n    if (row) {\r\n      if (this.selectedRows.indexOf(row) == -1) {\r\n        row.getElement().classList.add('tabulator-selected')\r\n        if (!row.modules.select) {\r\n          row.modules.select = {}\r\n        }\r\n\r\n        row.modules.select.selected = true\r\n        if (row.modules.select.checkboxEl) {\r\n          row.modules.select.checkboxEl.checked = true\r\n        }\r\n\r\n        this.selectedRows.push(row)\r\n\r\n        if (this.table.options.dataTreeSelectPropagate) {\r\n          this.childRowSelection(row, true)\r\n        }\r\n\r\n        this.dispatchExternal('rowSelected', row.getComponent())\r\n\r\n        this._rowSelectionChanged(silent, row)\r\n\r\n        return row\r\n      }\r\n    } else {\r\n      if (!silent) {\r\n        console.warn('Selection Error - No such row found, ignoring selection:' + rowInfo)\r\n      }\r\n    }\r\n  }\r\n\r\n  isRowSelected(row) {\r\n    return this.selectedRows.indexOf(row) !== -1\r\n  }\r\n\r\n  // deselect a number of rows\r\n  deselectRows(rows, silent) {\r\n    const changes = []\r\n    let rowMatch\r\n    let change\r\n\r\n    switch (typeof rows) {\r\n      case 'undefined':\r\n        rowMatch = Object.assign([], this.selectedRows)\r\n        break\r\n\r\n      case 'number':\r\n        rowMatch = this.table.rowManager.findRow(rows)\r\n        break\r\n\r\n      case 'string':\r\n        rowMatch = this.table.rowManager.findRow(rows)\r\n\r\n        if (!rowMatch) {\r\n          rowMatch = this.table.rowManager.getRows(rows)\r\n        }\r\n        break\r\n\r\n      default:\r\n        rowMatch = rows\r\n        break\r\n    }\r\n\r\n    if (Array.isArray(rowMatch)) {\r\n      if (rowMatch.length) {\r\n        rowMatch.forEach((row) => {\r\n          change = this._deselectRow(row, true, true)\r\n\r\n          if (change) {\r\n            changes.push(change)\r\n          }\r\n        })\r\n\r\n        this._rowSelectionChanged(silent, [], changes)\r\n      }\r\n    } else {\r\n      if (rowMatch) {\r\n        this._deselectRow(rowMatch, silent, true)\r\n      }\r\n    }\r\n  }\r\n\r\n  // deselect an individual row\r\n  _deselectRow(rowInfo, silent) {\r\n    const self = this\r\n    const row = self.table.rowManager.findRow(rowInfo)\r\n    let index\r\n    let element\r\n\r\n    if (row) {\r\n      index = self.selectedRows.findIndex(function (selectedRow) {\r\n        return selectedRow == row\r\n      })\r\n\r\n      if (index > -1) {\r\n        element = row.getElement()\r\n\r\n        if (element) {\r\n          element.classList.remove('tabulator-selected')\r\n        }\r\n\r\n        if (!row.modules.select) {\r\n          row.modules.select = {}\r\n        }\r\n\r\n        row.modules.select.selected = false\r\n        if (row.modules.select.checkboxEl) {\r\n          row.modules.select.checkboxEl.checked = false\r\n        }\r\n        self.selectedRows.splice(index, 1)\r\n\r\n        if (this.table.options.dataTreeSelectPropagate) {\r\n          this.childRowSelection(row, false)\r\n        }\r\n\r\n        this.dispatchExternal('rowDeselected', row.getComponent())\r\n\r\n        self._rowSelectionChanged(silent, undefined, row)\r\n\r\n        return row\r\n      }\r\n    } else {\r\n      if (!silent) {\r\n        console.warn('Deselection Error - No such row found, ignoring selection:' + rowInfo)\r\n      }\r\n    }\r\n  }\r\n\r\n  getSelectedData() {\r\n    const data = []\r\n\r\n    this.selectedRows.forEach(function (row) {\r\n      data.push(row.getData())\r\n    })\r\n\r\n    return data\r\n  }\r\n\r\n  getSelectedRows() {\r\n    const rows = []\r\n\r\n    this.selectedRows.forEach(function (row) {\r\n      rows.push(row.getComponent())\r\n    })\r\n\r\n    return rows\r\n  }\r\n\r\n  _rowSelectionChanged(silent, selected = [], deselected = []) {\r\n    if (this.headerCheckboxElement) {\r\n      if (this.selectedRows.length === 0) {\r\n        this.headerCheckboxElement.checked = false\r\n        this.headerCheckboxElement.indeterminate = false\r\n      } else if (this.table.rowManager.rows.length === this.selectedRows.length) {\r\n        this.headerCheckboxElement.checked = true\r\n        this.headerCheckboxElement.indeterminate = false\r\n      } else {\r\n        this.headerCheckboxElement.indeterminate = true\r\n        this.headerCheckboxElement.checked = false\r\n      }\r\n    }\r\n\r\n    if (!silent) {\r\n      if (!Array.isArray(selected)) {\r\n        selected = [selected]\r\n      }\r\n\r\n      selected = selected.map((row) => row.getComponent())\r\n\r\n      if (!Array.isArray(deselected)) {\r\n        deselected = [deselected]\r\n      }\r\n\r\n      deselected = deselected.map((row) => row.getComponent())\r\n\r\n      this.dispatchExternal('rowSelectionChanged', this.getSelectedData(), this.getSelectedRows(), selected, deselected)\r\n    }\r\n  }\r\n\r\n  registerRowSelectCheckbox(row, element) {\r\n    if (!row._row.modules.select) {\r\n      row._row.modules.select = {}\r\n    }\r\n\r\n    row._row.modules.select.checkboxEl = element\r\n  }\r\n\r\n  registerHeaderSelectCheckbox(element) {\r\n    this.headerCheckboxElement = element\r\n  }\r\n\r\n  childRowSelection(row, select) {\r\n    const children = this.table.modules.dataTree.getChildren(row, true, true)\r\n\r\n    if (select) {\r\n      for (const child of children) {\r\n        this._selectRow(child, true)\r\n      }\r\n    } else {\r\n      for (const child of children) {\r\n        this._deselectRow(child, true)\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\nimport Sheet from './Sheet'\r\nimport SheetComponent from './SheetComponent'\r\n\r\nexport default class Spreadsheet extends Module {\r\n  static moduleName = 'spreadsheet'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n\r\n    this.sheets = []\r\n    this.element = null\r\n\r\n    this.registerTableOption('spreadsheet', false)\r\n    this.registerTableOption('spreadsheetRows', 50)\r\n    this.registerTableOption('spreadsheetColumns', 50)\r\n    this.registerTableOption('spreadsheetColumnDefinition', {})\r\n    this.registerTableOption('spreadsheetOutputFull', false)\r\n    this.registerTableOption('spreadsheetData', false)\r\n    this.registerTableOption('spreadsheetSheets', false)\r\n    this.registerTableOption('spreadsheetSheetTabs', false)\r\n    this.registerTableOption('spreadsheetSheetTabsElement', false)\r\n\r\n    this.registerTableFunction('setSheets', this.setSheets.bind(this))\r\n    this.registerTableFunction('addSheet', this.addSheet.bind(this))\r\n    this.registerTableFunction('getSheets', this.getSheets.bind(this))\r\n    this.registerTableFunction('getSheetDefinitions', this.getSheetDefinitions.bind(this))\r\n    this.registerTableFunction('setSheetData', this.setSheetData.bind(this))\r\n    this.registerTableFunction('getSheet', this.getSheet.bind(this))\r\n    this.registerTableFunction('getSheetData', this.getSheetData.bind(this))\r\n    this.registerTableFunction('clearSheet', this.clearSheet.bind(this))\r\n    this.registerTableFunction('removeSheet', this.removeSheetFunc.bind(this))\r\n    this.registerTableFunction('activeSheet', this.activeSheetFunc.bind(this))\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// /// Module Initialization //////\r\n  /// ////////////////////////////////\r\n\r\n  initialize() {\r\n    if (this.options('spreadsheet')) {\r\n      this.subscribe('table-initialized', this.tableInitialized.bind(this))\r\n      this.subscribe('data-loaded', this.loadRemoteData.bind(this))\r\n\r\n      this.table.options.index = '_id'\r\n\r\n      if (this.options('spreadsheetData') && this.options('spreadsheetSheets')) {\r\n        console.warn('You cannot use spreadsheetData and spreadsheetSheets at the same time, ignoring spreadsheetData')\r\n\r\n        this.table.options.spreadsheetData = false\r\n      }\r\n\r\n      this.compatibilityCheck()\r\n\r\n      if (this.options('spreadsheetSheetTabs')) {\r\n        this.initializeTabset()\r\n      }\r\n    }\r\n  }\r\n\r\n  compatibilityCheck() {\r\n    if (this.options('data')) {\r\n      console.warn(\r\n        'Do not use the data option when working with spreadsheets, use either spreadsheetData or spreadsheetSheets to pass data into the table'\r\n      )\r\n    }\r\n\r\n    if (this.options('pagination')) {\r\n      console.warn('The spreadsheet module is not compatible with the pagination module')\r\n    }\r\n\r\n    if (this.options('groupBy')) {\r\n      console.warn('The spreadsheet module is not compatible with the row grouping module')\r\n    }\r\n\r\n    if (this.options('responsiveCollapse')) {\r\n      console.warn('The spreadsheet module is not compatible with the responsive collapse module')\r\n    }\r\n  }\r\n\r\n  initializeTabset() {\r\n    this.element = document.createElement('div')\r\n    this.element.classList.add('tabulator-spreadsheet-tabs')\r\n    let altContainer = this.options('spreadsheetSheetTabsElement')\r\n\r\n    if (altContainer && !(altContainer instanceof HTMLElement)) {\r\n      altContainer = document.querySelector(altContainer)\r\n\r\n      if (!altContainer) {\r\n        console.warn(\r\n          'Unable to find element matching spreadsheetSheetTabsElement selector:',\r\n          this.options('spreadsheetSheetTabsElement')\r\n        )\r\n      }\r\n    }\r\n\r\n    if (altContainer) {\r\n      altContainer.appendChild(this.element)\r\n    } else {\r\n      this.footerAppend(this.element)\r\n    }\r\n  }\r\n\r\n  tableInitialized() {\r\n    if (this.sheets.length) {\r\n      this.loadSheet(this.sheets[0])\r\n    } else {\r\n      if (this.options('spreadsheetSheets')) {\r\n        this.loadSheets(this.options('spreadsheetSheets'))\r\n      } else if (this.options('spreadsheetData')) {\r\n        this.loadData(this.options('spreadsheetData'))\r\n      }\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// //////// Ajax Parsing //////////\r\n  /// ////////////////////////////////\r\n\r\n  loadRemoteData(data, data1, data2) {\r\n    console.log('data', data, data1, data2)\r\n\r\n    if (Array.isArray(data)) {\r\n      this.table.dataLoader.clearAlert()\r\n      this.dispatchExternal('dataLoaded', data)\r\n\r\n      if (!data.length || Array.isArray(data[0])) {\r\n        this.loadData(data)\r\n      } else {\r\n        this.loadSheets(data)\r\n      }\r\n    } else {\r\n      console.error(\r\n        'Spreadsheet Loading Error - Unable to process remote data due to invalid data type \\nExpecting: array \\nReceived: ',\r\n        typeof data,\r\n        '\\nData:     ',\r\n        data\r\n      )\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ////// Sheet Management ////////\r\n  /// ////////////////////////////////\r\n\r\n  loadData(data) {\r\n    const def = {\r\n      data\r\n    }\r\n\r\n    this.loadSheet(this.newSheet(def))\r\n  }\r\n\r\n  destroySheets() {\r\n    this.sheets.forEach((sheet) => {\r\n      sheet.destroy()\r\n    })\r\n\r\n    this.sheets = []\r\n    this.activeSheet = null\r\n  }\r\n\r\n  loadSheets(sheets) {\r\n    if (!Array.isArray(sheets)) {\r\n      sheets = []\r\n    }\r\n\r\n    this.destroySheets()\r\n\r\n    sheets.forEach((def) => {\r\n      this.newSheet(def)\r\n    })\r\n\r\n    this.loadSheet(this.sheets[0])\r\n  }\r\n\r\n  loadSheet(sheet) {\r\n    if (this.activeSheet !== sheet) {\r\n      if (this.activeSheet) {\r\n        this.activeSheet.unload()\r\n      }\r\n\r\n      this.activeSheet = sheet\r\n\r\n      sheet.load()\r\n    }\r\n  }\r\n\r\n  newSheet(definition = {}) {\r\n    let sheet\r\n\r\n    if (!definition.rows) {\r\n      definition.rows = this.options('spreadsheetRows')\r\n    }\r\n\r\n    if (!definition.columns) {\r\n      definition.columns = this.options('spreadsheetColumns')\r\n    }\r\n\r\n    sheet = new Sheet(this, definition)\r\n\r\n    this.sheets.push(sheet)\r\n\r\n    if (this.element) {\r\n      this.element.appendChild(sheet.element)\r\n    }\r\n\r\n    return sheet\r\n  }\r\n\r\n  removeSheet(sheet) {\r\n    const index = this.sheets.indexOf(sheet)\r\n    let prevSheet\r\n\r\n    if (this.sheets.length > 1) {\r\n      if (index > -1) {\r\n        this.sheets.splice(index, 1)\r\n        sheet.destroy()\r\n\r\n        if (this.activeSheet === sheet) {\r\n          prevSheet = this.sheets[index - 1] || this.sheets[0]\r\n\r\n          if (prevSheet) {\r\n            this.loadSheet(prevSheet)\r\n          } else {\r\n            this.activeSheet = null\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      console.warn('Unable to remove sheet, at least one sheet must be active')\r\n    }\r\n  }\r\n\r\n  lookupSheet(key) {\r\n    if (!key) {\r\n      return this.activeSheet\r\n    } else if (key instanceof Sheet) {\r\n      return key\r\n    } else if (key instanceof SheetComponent) {\r\n      return key._sheet\r\n    } else {\r\n      return this.sheets.find((sheet) => sheet.key === key) || false\r\n    }\r\n  }\r\n\r\n  /// ////////////////////////////////\r\n  /// ///// Public Functions /////////\r\n  /// ////////////////////////////////\r\n\r\n  setSheets(sheets) {\r\n    this.loadSheets(sheets)\r\n\r\n    return this.getSheets()\r\n  }\r\n\r\n  addSheet(sheet) {\r\n    return this.newSheet(sheet).getComponent()\r\n  }\r\n\r\n  getSheetDefinitions() {\r\n    return this.sheets.map((sheet) => sheet.getDefinition())\r\n  }\r\n\r\n  getSheets() {\r\n    return this.sheets.map((sheet) => sheet.getComponent())\r\n  }\r\n\r\n  getSheet(key) {\r\n    const sheet = this.lookupSheet(key)\r\n\r\n    return sheet ? sheet.getComponent() : false\r\n  }\r\n\r\n  setSheetData(key, data) {\r\n    if (key && !data) {\r\n      data = key\r\n      key = false\r\n    }\r\n\r\n    const sheet = this.lookupSheet(key)\r\n\r\n    return sheet ? sheet.setData(data) : false\r\n  }\r\n\r\n  getSheetData(key) {\r\n    const sheet = this.lookupSheet(key)\r\n\r\n    return sheet ? sheet.getData() : false\r\n  }\r\n\r\n  clearSheet(key) {\r\n    const sheet = this.lookupSheet(key)\r\n\r\n    return sheet ? sheet.clear() : false\r\n  }\r\n\r\n  removeSheetFunc(key) {\r\n    const sheet = this.lookupSheet(key)\r\n\r\n    if (sheet) {\r\n      this.removeSheet(sheet)\r\n    }\r\n  }\r\n\r\n  activeSheetFunc(key) {\r\n    const sheet = this.lookupSheet(key)\r\n\r\n    return sheet ? this.loadSheet(sheet) : false\r\n  }\r\n}\r\n","import Module from '../../core/Module.js'\r\nimport Cell from '../../core/cell/Cell.js'\r\n\r\nexport default class Tooltip extends Module {\r\n  static moduleName = 'tooltip'\r\n\r\n  constructor(table) {\r\n    super(table)\r\n    ;((this.tooltipSubscriber = null), (this.headerSubscriber = null), (this.timeout = null))\r\n    this.popupInstance = null\r\n\r\n    // this.registerTableOption(\"tooltipGenerationMode\", undefined);  //deprecated\r\n    this.registerTableOption('tooltipDelay', 300)\r\n\r\n    this.registerColumnOption('tooltip')\r\n    this.registerColumnOption('headerTooltip')\r\n  }\r\n\r\n  initialize() {\r\n    this.deprecatedOptionsCheck()\r\n\r\n    this.subscribe('column-init', this.initializeColumn.bind(this))\r\n  }\r\n\r\n  deprecatedOptionsCheck() {\r\n    // this.deprecationCheckMsg(\"tooltipGenerationMode\", \"This option is no longer needed as tooltips are always generated on hover now\");\r\n  }\r\n\r\n  initializeColumn(column) {\r\n    if (column.definition.headerTooltip && !this.headerSubscriber) {\r\n      this.headerSubscriber = true\r\n\r\n      this.subscribe('column-mousemove', this.mousemoveCheck.bind(this, 'headerTooltip'))\r\n      this.subscribe('column-mouseout', this.mouseoutCheck.bind(this, 'headerTooltip'))\r\n    }\r\n\r\n    if (column.definition.tooltip && !this.tooltipSubscriber) {\r\n      this.tooltipSubscriber = true\r\n\r\n      this.subscribe('cell-mousemove', this.mousemoveCheck.bind(this, 'tooltip'))\r\n      this.subscribe('cell-mouseout', this.mouseoutCheck.bind(this, 'tooltip'))\r\n    }\r\n  }\r\n\r\n  mousemoveCheck(action, e, component) {\r\n    const tooltip = action === 'tooltip' ? component.column.definition.tooltip : component.definition.headerTooltip\r\n\r\n    if (tooltip) {\r\n      this.clearPopup()\r\n      this.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay)\r\n    }\r\n  }\r\n\r\n  mouseoutCheck(action, e, component) {\r\n    if (!this.popupInstance) {\r\n      this.clearPopup()\r\n    }\r\n  }\r\n\r\n  clearPopup(action, e, component) {\r\n    clearTimeout(this.timeout)\r\n    this.timeout = null\r\n\r\n    if (this.popupInstance) {\r\n      this.popupInstance.hide()\r\n    }\r\n  }\r\n\r\n  loadTooltip(e, component, tooltip) {\r\n    let contentsEl, renderedCallback, coords\r\n\r\n    function onRendered(callback) {\r\n      renderedCallback = callback\r\n    }\r\n\r\n    if (typeof tooltip === 'function') {\r\n      tooltip = tooltip(e, component.getComponent(), onRendered)\r\n    }\r\n\r\n    if (tooltip instanceof HTMLElement) {\r\n      contentsEl = tooltip\r\n    } else {\r\n      contentsEl = document.createElement('div')\r\n\r\n      if (tooltip === true) {\r\n        if (component instanceof Cell) {\r\n          tooltip = component.value\r\n        } else {\r\n          if (component.definition.field) {\r\n            this.langBind('columns|' + component.definition.field, (value) => {\r\n              contentsEl.innerHTML = tooltip = value || component.definition.title\r\n            })\r\n          } else {\r\n            tooltip = component.definition.title\r\n          }\r\n        }\r\n      }\r\n\r\n      contentsEl.innerHTML = tooltip\r\n    }\r\n\r\n    if (tooltip || tooltip === 0 || tooltip === false) {\r\n      contentsEl.classList.add('tabulator-tooltip')\r\n\r\n      contentsEl.addEventListener('mousemove', (e) => e.preventDefault())\r\n\r\n      this.popupInstance = this.popup(contentsEl)\r\n\r\n      if (typeof renderedCallback === 'function') {\r\n        this.popupInstance.renderCallback(renderedCallback)\r\n      }\r\n\r\n      coords = this.popupInstance.containerEventCoords(e)\r\n\r\n      this.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\r\n        this.dispatchExternal('TooltipClosed', component.getComponent())\r\n        this.popupInstance = null\r\n      })\r\n\r\n      this.dispatchExternal('TooltipOpened', component.getComponent())\r\n    }\r\n  }\r\n}\r\n","// tabulator with all modules installed\r\nimport { default as Tabulator } from './Tabulator.js'\r\nimport * as allModules from '../core/modules/optional.js'\r\n\r\nclass TabulatorFull extends Tabulator {\r\n  static extendModule() {\r\n    Tabulator.initializeModuleBinder(allModules)\r\n    Tabulator._extendModule(...arguments)\r\n  }\r\n\r\n  static registerModule() {\r\n    Tabulator.initializeModuleBinder(allModules)\r\n    Tabulator._registerModule(...arguments)\r\n  }\r\n\r\n  constructor(element, options, modules) {\r\n    super(element, options, allModules)\r\n  }\r\n}\r\n\r\nexport default TabulatorFull\r\n"],"names":["defaultOptions","debugEventsExternal","debugEventsInternal","debugInvalidOptions","debugInvalidComponentFuncs","debugInitialization","debugDeprecation","height","minHeight","maxHeight","columnHeaderVertAlign","popupContainer","columns","columnDefaults","rowHeader","data","autoColumns","autoColumnsDefinitions","nestedFieldSeparator","footerElement","index","textDirection","addRowPos","headerVisible","renderVertical","renderHorizontal","renderVerticalBuffer","scrollToRowPosition","scrollToRowIfVisible","scrollToColumnPosition","scrollToColumnIfVisible","rowFormatter","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","rowHeight","placeholder","dataLoader","dataLoaderLoading","dataLoaderError","dataLoaderErrorTimeout","dataSendParams","dataReceiveParams","dependencies","CoreFeature","constructor","table","this","reloadData","silent","columnsChanged","load","undefined","langText","modules","localize","getText","arguments","langBind","bind","langLocale","getLocale","commsConnections","comms","getConnections","commsSend","send","layoutMode","layout","getMode","layoutRefresh","force","subscribe","eventBus","unsubscribe","subscribed","key","subscriptionChange","dispatch","chain","confirm","dispatchExternal","externalEvents","subscribedExternal","subscriptionChangeExternal","options","setOption","value","deprecationCheck","oldOption","newOption","convert","deprecationAdvisor","check","deprecationCheckMsg","msg","checkMsg","deprecationMsg","module","ColumnComponent","column","_column","type","Proxy","get","target","name","receiver","componentFunctionBinder","handle","getElement","getDefinition","getField","getTitleDownload","getCells","cells","forEach","cell","push","getComponent","isVisible","visible","show","isGroup","hide","toggle","delete","getSubColumns","output","length","getParentColumn","getParentComponent","_getSelf","scrollTo","position","ifVisible","columnManager","scrollToColumn","getTable","move","to","after","toColumn","findColumn","moveColumn","console","warn","getNextColumn","nextCol","nextColumn","getPrevColumn","prevCol","prevColumn","updateDefinition","updates","getWidth","setWidth","width","result","reinitializeWidth","rerenderColumns","defaultColumnOptions","title","field","hozAlign","vertAlign","minWidth","maxWidth","maxInitialWidth","cssClass","variableHeight","headerVertical","headerHozAlign","headerWordWrap","editableTitle","CellComponent","_cell","getValue","getOldValue","getInitialValue","initialValue","getRow","row","getData","transform","getType","getColumn","setValue","mutate","restoreOldValue","setValueActual","restoreInitialValue","checkHeight","Cell","super","element","oldValue","component","loaded","build","generateElement","_configureCell","getFieldValue","document","createElement","className","setAttribute","isRowHeader","classList","add","vertAligns","top","bottom","middle","hozAligns","left","right","center","style","textAlign","display","alignItems","justifyContent","definition","split","_generateContents","val","innerHTML","Node","firstChild","removeChild","appendChild","cellRendered","containerOnly","layoutElement","setValueProcessData","cellEdited","call","rowManager","changed","setFieldValue","widthStyled","clearWidth","offsetWidth","setMinWidth","minWidthStyled","setMaxWidth","maxWidthStyled","reinitializeHeight","clearHeight","setHeight","heightStyled","getHeight","offsetHeight","redrawBlock","parentNode","deleteCell","calcs","getIndex","getCellIndex","Column","static","def","parent","contentElement","titleHolderElement","titleElement","groupElement","createGroupElement","fieldStructure","titleDownload","titleFormatterRendered","mapDefinitions","setField","widthFixed","i","newCol","attachColumn","checkColumnVisibility","registerColumnField","_initialize","el","defaults","optionsList","generate","defaultOptionList","checkDefinition","Object","keys","indexOf","_getNestedData","_getFlatData","_setNestedData","_setFlatData","registerColumnPosition","reRegisterPosition","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","parseInt","_buildColumnHeaderTitle","addEventListener","e","stopPropagation","focus","text","_formatColumnHeaderTitle","contents","dataObj","structure","columnRendered","verticalAlign","alignment","parentHeight","getGroupElement","clientHeight","getHeadersElement","clearVerticalAlign","paddingTop","getFirstColumn","getLastColumn","getColumns","traverse","concat","getTopColumn","updateBranches","colDefs","responsiveToggle","verticalAlignHeaders","matchChildWidths","childWidth","initialized","child","splice","setWidthActual","isNaN","Math","floor","clientWidth","max","min","checkCellHeights","rows","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","getLeftOffset","offset","offsetLeft","ceil","getBoundingClientRect","Promise","resolve","reject","cellCount","deregisterColumn","generateCell","findColumnIndex","_nextVisibleColumn","getColumnByIndex","_prevVisibleColumn","fitToData","setTo","error","assign","addColumn","then","getPosition","getVisibleColumnsByIndex","Helpers","elVisible","elOffset","box","window","pageYOffset","documentElement","clientTop","pageXOffset","clientLeft","retrieveNestedData","separator","deepClone","obj","clone","list","objectProto","__proto__","arrayProto","Array","isArray","subject","match","copy","findIndex","item","unshift","OptionsList","msgType","registeredDefaults","register","option","userOptions","hasOwnProperty","Renderer","elementVertical","elementHorizontal","tableElement","verticalFillMode","initialize","clearRows","clearColumns","reinitializeColumnWidths","renderRows","renderColumns","rerenderRows","callback","update","blockRedraw","renderRowCells","rerenderRowCells","scrollColumns","dir","scrollRows","resize","scrollToRow","scrollToRowNearestTop","visibleRows","includingBuffer","getDisplayRows","styleRow","rowEl","remove","clear","render","rerender","rowIndex","scrollHeight","scrollTop","offsetTop","BasicHorizontal","inFragment","rowFrag","createDocumentFragment","VirtualDomHorizontal","leftCol","rightCol","scrollLeft","vDomScrollPosLeft","vDomScrollPosRight","vDomPadLeft","vDomPadRight","fitDataColAvg","windowBuffer","isFitData","compatibilityCheck","layoutCheck","vertScrollListen","startsWith","clearVisRowCache","dataChange","scroll","calcWindowBuffer","buffer","columnsByIndex","old","cols","colPos","config","frozen","leftPos","rightPos","fitDataCheck","vdomHoz","paddingLeft","paddingRight","reinitChanged","reinitializeRows","initializeRow","reinitializeRow","col","deinitialize","change","generateCells","colEnd","getVisibleRows","otherRows","getRows","filter","includes","diff","abs","addColRight","removeColLeft","addColLeft","removeColRight","colPositionAdjust","start","end","changes","working","getCell","insertBefore","nextSibling","fitDataColActualWidthCheck","ex","message","newWidth","widthDiff","frozenColumns","leftColumns","appendCell","rightColumns","ColumnManager","blockHozScrollEvent","headersElement","contentsElement","columnsByField","redrawBlockUpdate","renderer","initializeRenderer","createHeadersElement","createHeaderContentsElement","createHeaderElement","initializeScrollWheelWatcher","scrollHorizontal","padVerticalScrollbar","rtl","marginLeft","marginRight","renderClass","renderers","virtual","RendererVirtualDomHorizontal","basic","RendererBasicHorizontal","getContentsElement","deltaX","generateColumnsFromRowData","collProgress","rowSample","definitions","sorter","calculateSorterFromValue","find","setColumns","_addColumn","_reIndexColumns","getComponents","redraw","before","nextToColumn","colEl","topColumn","parentIndex","nextEl","adjustTableSize","HTMLElement","getColumnByField","getColumnsByFieldRoot","root","matches","getFirstVisibleColumn","getRealColumns","getDefinitions","active","getDefinitionTree","structured","from","moveColumnActual","reinitialize","_moveColumnInArray","updateRows","fromIndex","toIndex","adjust","scrollWidth","getFlexBaseWidth","totalWidth","fixedWidth","colWidth","restoreRedraw","resetScroll","footerManager","RowComponent","_row","watchPosition","moveToRow","updateData","normalizeHeight","reformat","getNextRow","nextRow","getPrevRow","prevRow","Row","manualHeight","outerHeight","positionWatchers","created","setData","create","detachElement","deleteCells","rendered","deinitializeHeight","children","calcMinHeight","calcMaxHeight","resizableRows","updatedData","newRowData","tempData","JSON","parse","attrname","findCell","nextDisplayRow","prevDisplayRow","toRow","findRow","moveRowActual","refreshActiveData","deleteActual","detachModules","deleteRow","wipe","isDisplayed","setPosition","getGroup","group","BasicVertical","visibility","onlyGroupHeaders","tableFrag","tableEmpty","rowTop","VirtualDomVertical","vDomRowHeight","vDomTop","vDomBottom","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","paddingBottom","_virtualRenderFill","topRow","topOffset","topDiff","bottomDiff","margin","_addTopRow","vDomScrollHeight","_removeBottomRow","_addBottomRow","_removeTopRow","topEdge","bottomEdge","topFound","bottomRow","slice","forceMove","holder","topPad","rowsHeight","heightOccupied","topPadHeight","rowsCount","rowFragment","renderedRows","totalRowsRendered","rowsToRender","fixedHeight","containerHeight","avgRowHeight","resized","fillableSpace","addedRows","paddingAdjust","_quickNormalizeRowHeight","removableRows","RowManager","createHolderElement","createTableElement","heightFixer","placeholderContents","firstRender","renderMode","activeRowsPipeline","activeRows","activeRowsCount","displayRows","displayRowsCount","redrawBlockRestoreConfig","redrawBlockRenderInPosition","dataPipeline","displayPipeline","scrollbarWidth","initializePlaceholder","getTableElement","leftDir","topDir","_positionPlaceholder","getRowFromDataObject","getRowFromPosition","renderInPosition","pagination","_setDataActual","reRenderInPosition","_wipeElements","destroy","allIndex","activeIndex","setActiveRows","displayRowIterator","displayIndex","regenerateRowPositions","addRow","pos","addRowActual","addRows","refreshDisplayOnly","findAddRowPos","reverse","_clearPlaceholder","chainResult","moveRow","moveRowInArray","clearData","getRowIndex","findRowIndex","getDisplayRowIndex","rowOnly","getDataCount","registerDataPipelineHandler","handler","priority","sort","a","b","registerDisplayPipelineHandler","skipStage","stage","cascadeOrder","destroyed","refreshPipelines","renderTable","layoutColumnsOnNewData","resetDisplayRows","setDisplayRows","viewable","scrollBarCheck","RendererVirtualDomVertical","RendererBasicVertical","getRenderMode","_clearTable","renderEmptyScroll","_showPlaceholder","checkPlaceholder","initialHeight","otherHeight","external","redrawing","tableWidth","browser","event","createEvent","initEvent","dispatchEvent","Event","FooterManager","containerElement","createContainerElement","initializeElement","querySelector","append","activate","prepend","deactivate","InteractionManager","abortClasses","previousTargets","listeners","componentMap","pseudoTrackers","subscriber","pseudoTracking","buildListenerMap","bindSubscriptionWatchers","listenerMap","listener","components","bindPseudoEvents","pseudoMouseEnter","pseudoMouseLeave","leaveList","linkedKeys","links","values","comp","subscriptionChanged","clearWatchers","added","updateEventListeners","track","removeEventListener","path","composedPath","targets","findTargets","bindComponents","triggerEvents","elTargets","targetMatches","previousTarget","closest","ComponentFunctionBinder","bindings","funcName","DataLoader","requestOrder","loading","params","replace","requestNo","alertLoader","mapParams","response","objectInvert","rowData","clearAlert","catch","alertError","setTimeout","finally","map","blockActiveLoad","alertManager","alert","ExternalEventBus","debug","events","subscriptionNotifiers","_debugDispatch","_dispatch","_notifySubscriptionChange","notifiers","args","shift","callResult","apply","log","InternalEventBus","_debugChain","_chain","_debugConfirm","_confirm","fallback","confirmed","DeprecationAdvisor","_warnUser","DependencyRegistry","deps","props","lookup","prop","lookupProp","lookupKey","dependency","Popup","container","_lookupContainer","reversedX","childPopup","blurable","blurCallback","blurEventsBound","renderedCallback","hideable","blurEvent","escEvent","_escapeCheck","destroyBinding","tableDestroyed","_checkContainerIsParent","body","renderCallback","containerEventCoords","touch","MouseEvent","x","touches","pageX","y","pageY","parentOffset","elementPositionCoords","containerOffset","origin","parentEl","coords","_fitToScreen","hideOnBlur","keyCode","blockHide","restoreHide","Module","_handler","registerTableOption","registerColumnOption","registerTableFunction","func","initGuard","registerComponentFunction","registerDataHandler","registerDisplayHandler","lookupIndex","refreshData","footerAppend","footerPrepend","footerRemove","popup","menuEl","menuContainer","content","fitDataGeneral","forced","responsiveLayout","modExists","defaultModes","fitData","fitDataFill","fitDataTable","fitDataStretch","colsWidth","gap","lastCol","responsive","fitColumns","flexWidth","flexGrowUnits","flexColWidth","flexColumns","fixedShrinkColumns","flexShrinkUnits","overflowWidth","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","nextColWidth","remainingFlexGrowUnits","changeUnits","undersizeCols","calcGrow","widthGrow","calcShrink","widthShrink","Layout","mode","modes","initializeColumn","Number","dataChanged","formatter","defaultLangs","default","groups","items","page_size","page_title","first","first_title","last","last_title","prev","prev_title","next","next_title","all","counter","showing","of","pages","headerFilters","Localize","locale","lang","langList","langs","headerFilterPlaceholder","setHeaderFilterPlaceholder","installLang","setLocale","getLang","_setLangProp","desiredLocale","navigator","language","toLowerCase","prefix","traverseLang","trans","_executeBindings","pathArray","_getLangElement","level","rootPath","binding","receive","selectors","connections","connection","registry","lookupTable","con","action","tableComms","commsReceived","TableRegistry","tables","deregister","query","results","querySelectorAll","matchElement","findTable","ModuleBinder","initializeModuleBinder","defaultModules","modulesRegistered","_registerModules","coreModules","_extendModule","property","moduleBindings","source","core","mods","mod","prototype","moduleCore","_registerModule","_registerModuleBinding","_registerModuleExtensions","moduleName","extensions","moduleExtensions","modKey","ext","propKey","_extendModuleFromQueue","_bindModules","orderedStartMods","orderedEndMods","unOrderedMods","modulesCore","moduleInitOrder","modulesRegular","Alert","_createAlertElement","msgElement","_createMsgElement","_typeClass","Tabulator","extendModule","registerModule","interactionMonitor","browserSlow","browserMobile","originalElement","dependencyRegistry","initializeCoreSystems","_create","_clearObjectPointers","_mapDeprecatedFunctionality","InteractionMonitor","_clearSelection","getSelection","empty","removeAllRanges","selection","_rtlCheck","_buildElement","_initializeTable","_loadInitialData","getComputedStyle","direction","reactiveData","newElement","tagName","attributes","replaceChild","_detectBrowser","removeAttribute","ua","userAgent","vendor","opera","test","stack","line","Error","trim","replaceData","responses","addData","updateOrAddData","newRows","foundRows","updateOrAddRow","updateRow","fromRow","getRowPosition","getColumnDefinitions","showColumn","hideColumn","toggleColumn","deleteColumn","updateColumnDefinition","fromColumn","on","off","plugin","required","defaultAccessors","rownum","Accessor","allowedTypes","transformRow","charAt","toUpperCase","accessor","lookupAccessor","accessors","rowComponent","colComponent","defaultConfig","method","generateParamsList","serializeParams","encoded","encodeURIComponent","join","urlBuilder","url","defaultLoaderPromise","contentType","urlGenerator","ajaxContentType","contentTypeFormatters","headers","Accept","Origin","location","credentials","fetch","ok","json","status","statusText","defaultContentTypeFormatters","stringify","form","FormData","Ajax","defaultURLGenerator","loaderPromise","ajaxRequestFunc","ajaxURLGenerator","ajaxURL","setUrl","setDefaultConfig","ajaxConfig","getUrl","requestDataCheck","requestParams","requestData","ajaxParams","previousData","generateConfig","sendRequest","ajaxRequesting","ajaxResponse","defaultPasteActions","insert","defaultPasteParsers","clipboard","headerFindSuccess","columnMap","extensions$4","keybindings","copyToClipboard","actions","edit","currentCell","Clipboard","pasteParser","pasteAction","customSelection","rowRange","blocked","clipboardCopyRowRange","plain","html","preventDefault","clipboardCopyFormatter","export","generateExportList","clipboardCopyConfig","clipboardCopyStyled","generateHTMLTable","generatePlainContent","clipboardData","originalEvent","reset","paste","setPasteParser","clipboardPasteParser","setPasteAction","clipboardPasteAction","getKey","range","internal","sel","textRange","createRange","selectNodeContents","toString","addRange","createTextRange","moveToElementText","select","execCommand","pasteActions","parser","pasteParsers","checkPasteOrigin","getPasteData","mutateData","mutator","valid","CalcComponent","defaultCalculations","avg","calcParams","precision","reduce","sum","toFixed","parseFloat","String","count","unique","ColumnCalcs","topCalcs","botCalcs","genColumn","topElement","botElement","botRow","topInitialized","botInitialized","recalcAfterBlock","cellValueChanged","initializeColumnCheck","rowsUpdated","recalcActiveRows","recalcActiveRowsRefresh","tableRedraw","adjustForScrollbar","resizeHolderWidth","getResults","userRecalc","recalc","blockCheck","groupBy","recalcRowGroup","dataTreeStartExpanded","dataTree","recalcAll","topCalc","bottomCalc","columnCalcs","topCalcParams","botCalcParams","bottomCalcParams","calculations","initializeTopRow","botCalc","initializeBottomRow","removeCalcs","reinitializeCalcs","fragment","rowsToData","generateRow","recalcGroup","groupRows","getRowGroup","getChildGroups","generateRowData","generateTopRow","generateBottomRow","hasDataTreeColumnCalcs","dataTreeChildColumnCalcs","open","getFilteredTreeChildren","dataRow","disable","enable","format","lookupFormatter","paramKey","hasTopCalcs","hasBottomCalcs","getGroups","getGroupResults","groupObj","subGroups","getSubGroups","subGroupResults","subgroup","defaultDownloaders","csv","setFileContents","delimiter","fileContents","depth","bom","jsonLines","pdf","header","autoTableParams","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDFParams","jsPDF","jspdfLib","doc","parseRow","styles","colSpan","rowSpan","orientation","unit","autoTable","didDrawPage","head","documentProcessing","xlsx","self","sheetName","XLSXLib","workbook","utils","book_new","tableFeatures","compression","compress","writeOptions","bookType","bookSST","generateSheet","merges","worksheet","s","c","r","j","Date","sheet_add_aoa","encode_range","SheetNames","Sheets","sheetOnly","sheets","sheet","intercept","write","buf","ArrayBuffer","view","Uint8Array","charCodeAt","s2ab","Download","mimeType","Blob","deprecatedOptionsCheck","download","downloadToTab","filename","interceptCallback","downloadFunc","downloaders","mime","triggerDownload","downloadConfig","downloadRowRange","groupHeader","groupHeaderDownload","indent","_group","getRowCount","newTab","blob","downloadEncoder","URL","createObjectURL","msSaveOrOpenBlob","click","maskInput","mask","maskLetter","maskLetterChar","maskNumber","maskNumberChar","maskWildcard","maskWildcardChar","fillSymbols","symbol","char","ctrlKey","metaKey","maskAutoFill","Edit$1","editor","onRendered","success","cancel","editorParams","_initializeParams","displayItems","currentItems","focusedItem","input","_createInputElement","listEl","_createListElement","initialValues","isFilter","filterTimeout","filtered","typing","listIteration","lastAction","filterTerm","_deprecatedOptionsCheck","_initializeValue","_onRendered","defaultValue","multiselect","headerFilterInitialListGen","cellEl","clickStop","preventScroll","_preventPopupBlur","_preventBlur","_inputKeyDown","_setListWidth","attribs","elementAttributes","clearable","padding","boxSizing","autocomplete","cursor","caretColor","getAttribute","_bindInputEvents","valueKeys","valueCheck","verticalNavigation","placeholderLoading","placeholderEmpty","filterDelay","emptyValue","freetext","filterFunc","filterRemote","allowEmpty","listOnEmpty","valuesLookup","valuesURL","_inputFocus","_inputClick","_inputBlur","_inputSearch","_inputKeyUp","rebuildOptionsList","_filter","clearTimeout","_filterList","_resolveValue","_clearChoices","_keyUp","_keyDown","_keySide","_keyEnter","_keyEsc","_keyHomeEnd","_keyTab","_keySelectLetter","_keyAutoCompLetter","_chooseItem","stopImmediatePropagation","_focusItem","_cancel","_scrollToValue","character","fromCharCode","label","scrollIntoView","behavior","block","inline","_generateOptions","_sortOptions","_buildList","_showList","isInteger","_filterOptions","iteration","_ajaxRequest","_uniqueColumnValues","valuesLookupField","_addPlaceholder","responseValues","_parseList","_clearList","term","_emptyValueCheck","inputValues","entries","_parseListItem","_parseListGroup","itemParams","selected","original","_defaultSortFunction","_sortGroup","as","bs","a1","b1","L","rx","rd","emptyAlign","isFinite","_defaultFilterFunc","_filterItem","_buildItem","tabIndex","itemFormatter","_groupClick","_itemClick","_styleItem","startVis","blur","defaultEditors","cellValue","search","onChange","selectContents","textarea","vertNav","whiteSpace","heightNow","shiftKey","shiftEnterSubmit","selectionStart","number","step","blurFunc","date","inputFormat","DT","DateTime","luxon","convertDate","newDatetime","isDateTime","fromISO","fromFormat","toFormat","luxDate","toISO","relatedTarget","rangeParent","explicitOriginalTarget","time","luxTime","datetime","luxDateTime","List","star","maxStars","getElementsByTagName","size","stars","starsHolder","createElementNS","starChange","buildStar","starHolder","nextStar","cloneNode","changeValue","overflow","textOverflow","progress","percent","bar","mouseDrag","mouseDragWidth","updateValue","calcVal","round","getPropertyValue","backgroundColor","screenX","tickCross","tristate","indetermValue","indeterminateValue","indetermState","trueValueSet","falseValueSet","marginTop","checkedValue","checked","trueValue","falseValue","indeterminate","adaptable","editorFunc","editorLookup","defaultLookup","paramsLookup","lookupEditor","Edit","mouseClick","recursionBlock","invalidEdit","editedCells","convertEmptyValues","editors","emptyValueCheck","getEditedCells","clearCellEdited","navigatePrev","navigateNext","navigateLeft","navigateRight","navigateUp","navigateDown","cellIsEdited","clearEdited","editCell","cellCancelEdit","bindEditor","updateCellClass","columnDeleteCheck","rowDeleteCheck","rowEditableCheck","cancelEdit","pasteBlocker","keybindingNavigateNext","newRow","edited","allowEdit","nextCell","findPrevEditableCell","findNextEditableCell","prevCell","convertEmpty","editable","editorEmptyValue","editorEmptyValueFunc","getCurrentCell","clearEditor","cellEditCancelled","button","contains","focusCellNoEvent","forceEdit","focusScrollAdjust","leftEdge","rightEdge","leftMargin","rightMargin","cellEditor","editFinished","cellClick","cellEditing","validationMode","transformEmptyValues","checkFunc","editIndex","ExportRow","ExportColumn","columnLookups$1","rowLookups$1","selectRow","selectedRows","Export","columnLookups","rowLookups","cloneTableStyle","colVisProp","colVisPropAttach","getHtml","colLookup","columnVisCheck","columnHeaders","headersToExportRows","generateColumnGroupHeaders","bodyToExportRows","rowLookup","generateTable","generateTableElement","columnGroups","colData","processColumnGroup","maxDepth","groupData","subGroup","subGroupData","visProp","rowHeaders","headerDepth","exportRows","parseColumnGroup","rowGroups","exportCols","headerEl","bodyEl","lookupTableStyles","setup","treeElementField","elementField","mapElementStyles","generateHeaderElement","generateGroupElement","generateCalcElement","generateRowElement","evenRow","oddRow","calcRow","firstRow","firstGroup","getElementsByClassName","styleCells","styleRowHeader","firstCell","lastCell","classNames","generator","cellStyle","styleProps","cellWrapper","formatCells","formatExportValue","align","controlEl","branchEl","htmlOutputConfig","color","fromStyle","defaultFilters","filterVal","rowVal","filterParams","regex","RegExp","like","keywords","keyword","matchAll","starts","ends","endsWith","in","Filter","filterList","headerFilterColumns","prevHeaderFilterChangeCheck","tableInitialized","searchRows","searchData","userSetFilter","userRefreshFilter","userAddFilter","getFilters","userSetHeaderFilterFocus","userGetHeaderFilterValue","userSetHeaderFilterValue","getHeaderFilters","userRemoveFilter","userClearFilter","userClearHeaderFilter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","setHeaderFilterValue","initializeColumnHeaderFilter","hideHeaderFilterElements","showHeaderFilterElements","tableBuilt","generatePlaceholder","filterMode","remoteFilterParams","initialFilter","setFilter","initialHeaderFilter","placeholderHeaderFilter","refreshFilter","addFilter","removeFilter","clearFilter","clearHeaderFilter","headerFilter","filterType","tagType","attrType","filterChangeCheck","prevSuccess","emptyFunc","headerFilterFunc","filters","headerFilterFuncParams","fieldVal","colVal","trackChanges","generateHeaderFilterElement","filterElement","editorElement","typingTimer","searchTrigger","onRenderedCallback","headerElement","headerFilterEmptyCheck","headerFilterParams","headerFilterLiveFilterDelay","hasAttribute","headerFilterLiveFilter","hasChanged","findFilter","findSubFilters","ajax","filtersToArray","searchType","filterRecurse","rowList","activeRowComponents","filterRow","subFilter","defaultFormatters","plaintext","formatterParams","emptyToSpace","sanitizeHTML","money","integer","decimal","rgx","floatVal","sign","decimalSym","thousandSym","thousand","negativeSign","symbolAfter","link","urlPrefix","labelField","labelTraverse","urlField","image","src","urlSuffix","truthy","allowTruthy","tick","tickElement","cross","crossElement","outputFormat","invalid","invalidPlaceholder","isValid","timezone","setZone","datetimediff","suffix","humanize","now","toHuman","traffic","colors","percentValue","legendAlign","legend","legendColor","barEl","barContainer","legendEl","holderEl","buttonTick","buttonCross","sizePx","containEl","switchEl","onValue","offValue","state","onTruthy","flexDirection","onColor","background","offColor","borderRadius","clickable","relativeToPage","page","getPageSize","getPage","innerText","formatterFunc","formatterLookup","array","valueMap","multiline","replacer","Format","formatValue","formatHeader","lookupTypeFormatter","formatterPrint","print","formatterClipboard","formatterHtmlOutput","htmlOutput","formatters","mockCell","titleFormatter","titleFormatterParams","entityMap","GroupComponent","groupManager","getParentGroup","toggleVisibility","Group","oldGroup","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","groupList","elementContents","arrowElement","startOpen","createElements","addBindings","createValueGroups","elementsOnly","arrow","movableRows","initializeGroupHeader","allowedValues","_createGroup","toggleElement","groupToggleElement","groupID","groupKey","headerGenerator","insertRow","conformRowData","updateGroupRows","scrollHeader","removeRow","groupValues","generateGroupHeaderContents","removeGroup","getHeadersAndRows","_visSet","groupClosedShowCalcs","includeChildren","getPath","childNodes","defaultUndoers","cellEdit","rowAdd","rowDelete","_rebindRow","rowMove","posFrom","posTo","defaultRedoers","newValue","extensions$3","undo","redo","history","History","cellUpdated","clearComponentHistory","rowDeleted","rowAdded","rowMoved","getHistoryUndoSize","getHistoryRedoSize","undoers","redoers","oldRow","defaultImporters","inQuote","nextChar","workbook2","read","sheet_to_json","Import","importFromFile","importFormat","loadDataCheck","loadData","importData","lookupImporter","structureData","err","importer","importers","extension","importReader","pickFile","validateData","accept","file","files","reader","FileReader","validateFile","readAsArrayBuffer","readAsBinaryString","readAsDataURL","readAsText","onload","onerror","parsedData","structureArrayToObject","structureArrayToColumns","transformHeader","importHeaderTransform","transformData","importValueTransform","importFileValidator","importDataValidator","defaultBindings","navPrev","navNext","navUp","navDown","navLeft","navRight","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","defaultActions","keyBlock","newPos","scrollMax","Keybindings","watchKeys","pressedKeys","keyupBinding","keydownBinding","mergedBindings","mapBindings","bindEvents","clearBindings","mapBinding","symbolsList","ctrl","meta","code","checkBinding","defaultSenders","toTable","defaultReceivers","fromTable","MoveRows","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toRowAfter","hasHandle","startY","startX","moveHover","endMove","tableRowDropEvent","touchMove","connectionSelectorsTables","connectionSelectorsElements","connectionElements","connectedTable","connectedRow","movableRowsConnectedTables","movableRowsConnectedElements","initializeCell","tableRowDrop","previousSibling","mouseup","mousemove","which","startMove","bindTouchEvents","rowHandle","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","startYMove","passive","_bindMouseMove","_unbindMouseMove","setStartPosition","connectToTables","pointerEvents","disconnectFromTables","moveHoverConnections","moveHoverTable","rowHolder","yPos","elementRowDrop","connectionTables","dropEvent","tabulatorElementDropEvent","connect","disconnect","dropComplete","sender","movableRowsSender","senders","movableRowsReceiver","receivers","defaultMutators","Mutator","enabled","transformCell","mutateLink","rowDataChanged","lookupMutator","mutators","mutatorEdit","linkCell","defaultPageCounters","pageSize","currentRow","currentPage","totalRows","totalPages","showingEl","valueEl","ofEl","totalEl","rowsEl","Page","progressiveLoad","pageCounterElement","pageCounter","remoteRowCountEstimate","initialLoad","dataChanging","pageSizes","setMaxPage","setPage","userSetPageToRow","userSetPageSize","previousPage","nextPage","getPageMax","setPageToRow","initialLoadComplete","calculatePageSizes","footerRedraw","paginationAddRow","rowAddingPosition","paginationMode","remotePageParams","_parseRemoteData","restOnRenderBefore","initializePageCounter","initializePaginator","initializeProgressive","scrollVertical","testElRow","testElCell","paginationSize","generatePageSizeSelectList","setPageSize","progressiveLoadScrollMargin","pagesElement","firstBut","prevBut","nextBut","lastBut","paginationSizeSelector","pageSizeSelect","itemEl","paginationCounter","pageCounters","hidden","pageSelectLabel","paginationCounterHolder","paginationElement","paginationCounterElement","paginationInitialPage","paginationButtonCount","setMaxRows","rowCount","trigger","_setPageCounter","_setPageButtons","leftSize","rightSize","disabled","_generatePageButton","textContent","actualStartRow","actualRowPageSize","actualRows","paginationOutOfRange","last_page","last_row","progressiveLoadDelay","footer","defaultReaders","local","id","localStorage","getItem","cookie","cookiePos","defaultWriters","setItem","expireDate","setDate","getDate","toUTCString","Persistence","defWatcherBlock","readFunc","writeFunc","localStorageTest","testKey","removeItem","persistence","persistenceMode","persistenceID","retrievedData","persistenceReaderFunc","readers","persistenceWriterFunc","writers","retrieveData","groupStartOpen","save","eventSave","getColumnLayout","setColumnLayout","sorters","initialSort","parseColumns","mergeDefinition","getOwnPropertyDescriptor","defineProperty","set","current","oldCols","newCols","mergeAllNew","_findColumn","validateSorters","getSort","getGroupConfig","getPageConfig","excludedKeys","defStore","colDef","extensions$2","responsiveCollapse","toggleList","isOpen","collapseEl","extensions$1","rowSelection","checkbox","selectableRowsRangeMode","toggleSelect","handleComplexRowClick","isSelected","registerRowSelectCheckbox","deselectRow","registerHeaderSelectCheckbox","RangeComponent","_range","getStructuredCells","getBounds","getTopEdge","getBottomEdge","getLeftEdge","getRightEdge","setBounds","destroyedGuard","setStartBound","setEndBound","rangeManager","clearValues","Range","initializing","initElement","initBounds","_updateMinMax","setStart","setEnd","columnSelection","_getTableRows","selecting","_getTableColumns","topLeftCell","bottomRightCell","topLeftCellEl","bottomRightCellEl","topLeftRowEl","bottomRightRowEl","_vDomTop","_vDomBottom","_vDomLeft","_vDomRight","Infinity","overlaps","atTopLeft","atBottomRight","occupies","occupiesRow","occupiesColumn","arr","clearValue","selectableRangeClearCellsValue","notify","rangeRemoved","rangeJumpUp","rangeJumpDown","rangeJumpLeft","rangeJumpRight","rangeExpandUp","rangeExpandDown","rangeExpandLeft","rangeExpandRight","rangeExpandJumpUp","rangeExpandJumpDown","rangeExpandJumpLeft","rangeExpandJumpRight","selectRange","activeRange","bounds","startCell","startRow","rowWidth","dataLength","singleCell","startCol","itemLength","selectedColumns","aRow","bRow","alignEmptyValues","defaultSorters","decimalSeparator","thousandSeparator","string","localeCompare","boolean","calc","d","exists","alphanum","Sort","sortList","userSetSort","clearSort","sortMode","remoteSortParams","setSort","refreshSort","arrowEl","sorterParams","startingDir","headerSortStartingDir","headerSortTristate","headerSort","headerSortClickElement","headerSortElement","setColumnHeaderSortIcon","columnHeaderSortMulti","newSortList","findSorter","sortOnly","sortOrderReverse","sortListActual","rowComponents","clearColumnHeaders","sortObj","setColumnHeader","_sortItems","sortEl","sorterCount","sortItem","_sortRow","el1Comp","el2Comp","el1","el2","GridCalculator","columnCount","columnString","genColumns","colCount","incrementChar","genRows","setRowCount","setColumnCount","SheetComponent","_sheet","getTitle","setTitle","setRows","Sheet","spreadsheetManager","isActive","grid","defaultColumnDefinition","columnDefinition","columnDefs","rowDefs","columnFields","initializeColumns","initializeRows","loadSheet","ref","refs","_id","unload","wasInactive","full","rowWidths","outputWidth","outputHeight","findLastIndex","removeSheet","defaultValidators","parameters","float","numeric","alphanumeric","minLength","maxLength","cellData","Validate","invalidCells","getInvalidCells","userClearCellValidation","userValidate","cellIsValid","clearValidation","cellValidate","columnValidate","rowValidate","editValidate","editorClear","editedClear","previousValue","validate","cancelled","validator","_extractValidator","substring","_buildValidator","validators","failedValidators","invalidIndex","expandEl","collapseRow","expandRow","toggleRow","getTreeParent","getRowChildren","addTreeChildRow","isRowExpanded","dummyEl","dataTreeChildField","dataTreeChildIndent","dataTreeBranchElement","dataTreeCollapseElement","dataTreeExpandElement","layoutRow","rowDeleting","columnMoving","initializeElementField","tableRedrawing","reinitializeRowChildren","firstCol","dataTreeElementColumn","getTreeChildren","redrawNeeded","childArray","generateControlElement","oldControl","getChildren","allChildren","generateChildren","dataTreeFilter","dataTreeSort","sub","childData","childRow","getTreeParentRoot","childIndex","findChildIndex","recurse","getChildField","initializationMode","layoutCell","reinitializeColumns","blockLayout","unblockLayout","edge","frozenCheck","layoutCalcRows","layoutGroupCalcs","layoutColumnPosition","allCells","leftParents","marginValue","getColGroupParentElement","getFrozenColumns","_calcSpace","freezeRow","unfreezeRow","isRowFrozen","detachRow","frozenRows","rowType","isFrozen","styleRows","displayHandler","setGroupBy","setGroupValues","setGroupStartOpen","setGroupHeader","userGetGroups","userGetGroupedData","rowGetGroup","_blockRedrawing","_restore_redrawing","groupUpdateOnCellEdit","reassignRowToGroup","configureGroupSetup","scrollHeaders","rowMoving","rowAddingIndex","virtualRenderFill","langValue","lookupFunc","prevValue","assignRowToGroup","getGroupedData","toGroup","fromGroup","generateGroups","groupComponents","pullGroupListData","groupListData","headerContent","countGroups","oldGroups","createGroup","assignRowToExistingGroup","newGroupNeeded","oldRowGroup","oldGroupPath","newGroupPath","getExpectedPath","samePath","every","groupPath","groupId","checkBasicModeGroupHeaderWidth","fieldIndex","hasIndex","tableElementCheck","parseTable","_extractOptions","_extractHeaders","_generateBlankHeaders","optionsArr","attrib","_attribValue","_findCol","replaceAll","eventMap","rowClick","rowDblClick","rowContext","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowMouseDown","rowMouseUp","rowTap","rowDblTap","rowTapHold","cellDblClick","cellContext","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellMouseDown","cellMouseUp","cellTap","cellDblTap","cellTapHold","headerClick","headerDblClick","headerContext","headerMouseEnter","headerMouseLeave","headerMouseOver","headerMouseOut","headerMouseMove","headerMouseDown","headerMouseUp","headerTap","headerDblTap","headerTapHold","groupClick","groupDblClick","groupContext","groupMouseEnter","groupMouseLeave","groupMouseOver","groupMouseOut","groupMouseMove","groupMouseDown","groupMouseUp","groupTap","groupDblTap","groupTapHold","subscribers","touchSubscribers","columnSubscribers","touchWatchers","tap","tapDbl","tapHold","initializeExternalEvents","cellContentsSelectionFixer","clearTouchWatchers","selectNode","subscribeTouchEvents","unsubscribeTouchEvents","handleTouch","noTouch","watchers","componentObj","nestedMenuBlock","currentComponent","rootPopup","initializeRowWatchers","initializeGroupWatchers","rowContextMenu","loadMenuEvent","rowClickMenu","rowDblClickMenu","groupContextMenu","groupClickMenu","groupDblClickMenu","headerContextMenu","loadMenuTableColumnEvent","headerClickMenu","headerDblClickMenu","headerMenu","initializeColumnHeaderMenu","contextMenu","loadMenuTableCellEvent","clickMenu","dblClickMenu","headerMenuEl","icon","headerMenuIcon","menu","loadMenu","parentPopup","toCol","toColAfter","autoScrollMargin","autoScrollStep","autoScrollTimeout","movableColumns","abortMove","prevColWidth","nextColWidthLast","prevColWidthLast","startXMove","moveToCol","mousedown","movingCells","columnHolder","xPos","scrollPos","_componentPopupCall","loadPopupEvent","rowContextPopup","rowClickPopup","rowDblClickPopup","groupContextPopup","groupClickPopup","groupDblClickPopup","headerContextPopup","loadPopupTableColumnEvent","headerClickPopup","headerDblClickPopup","headerPopup","initializeColumnHeaderPopup","contextPopup","loadPopupTableCellEvent","clickPopup","dblClickPopup","headerPopupEl","headerPopupIcon","loadPopup","contentsEl","manualBlock","beforeprintEventHandler","afterprintEventHandler","printAsHtml","replaceTable","cleanup","printFullscreen","printConfig","printStyled","printRowRange","scrollX","scrollY","footerEl","tableEl","footerContent","printHeader","printFooter","printFormatter","origFuncs","currentVersion","unblock","watchRow","watchData","unwatchData","version","enumerable","configurable","arg","pop","oldRows","writable","watchKey","watchTreeChildren","childField","rebuildTree","unwatchRow","startColumn","startWidth","latestX","initialNextColumn","layoutColumnHeader","initializeEventWatchers","layoutCellHandles","deInitializeComponent","resizeHandle","columnLayoutUpdated","deInitializeColumn","columnWidthUpdated","resizable","reinitializeColumn","frozenColumnOffset","frozenOffset","handleEl","nearestColumn","_checkResizability","handleDown","_mouseDown","oldWidth","parentElement","clientX","blockedBefore","blockedAfter","startDiff","moveDiff","resizableColumnFit","calcGuidePosition","mouseX","handleX","tableX","columnX","mouseDiff","guideEl","mouseMove","resizableColumnGuide","mouseUp","startHeight","prevHandle","prevHandleDown","screenY","mouseY","handleY","tableY","rowY","resizableRowGuide","visibilityObserver","resizeObserver","containerObserver","tableHeight","containerWidth","autoResize","initialRedraw","tableStyle","IntersectionObserver","ResizeObserver","initializeVisibilityObserver","entry","nodeHeight","contentRect","nodeWidth","redrawTable","observe","tableResized","isIntersecting","unobserve","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","updateColumnVisibility","initializeResponsivity","generateCollapsedRowContent","responsiveLayoutCollapseFormatter","formatCollapsedData","responsiveLayoutCollapseStartOpen","order","generateCollapsedContent","generateCollapsedRowData","mockCellComponent","responsiveLayoutCollapseUseFormatters","titleData","valueData","node_content","titleHighlight","ranges","overlay","layoutChangeTimeout","maxRanges","blockKeydown","keyDownEvent","_handleKeyDown","mouseUpEvent","_handleMouseUp","getRangesData","getRanges","addRangeFromComponent","cellGetRanges","rowGetRanges","colGetRanges","initializeTable","initializeWatchers","rangeContainer","activeRangeCellElement","resetRanges","handleColumnMouseDown","handleColumnMouseMove","handleColumnResized","handleColumnMoving","handleColumnMoved","layoutChange","updateHeaderColumn","renderCell","handleCellMouseDown","handleCellMouseMove","handleCellClick","handleEditingCell","finishEditingCell","restoreFocus","keyNavigate","keyNavigateRange","frozenCols","getActiveCell","initializeFocus","some","selectedColumn","_event","_to","_after","newSelection","rangeIdx","dataset","navigate","jump","expand","rangeEdge","prevRect","rowRect","rowManagerRect","columnRect","columnManagerRect","moved","findJumpCellLeft","findJumpCellRight","findJumpCellUp","findJumpCellDown","getTableColumns","getTableRows","getRowByRangePos","getColumnByRangePos","autoScroll","getRowHeaderWidth","removed","findJumpRow","emptyStart","emptySide","findJumpItem","findJumpCol","valueResolver","nextItem","currentItem","currentValue","rowPos","isStartingCellEmpty","isEmpty","isLeftOfStartingCellEmpty","targetCols","jumpCol","isRightOfStartingCellEmpty","isTopOfStartingCellEmpty","jumpRow","isBottomOfStartingCellEmpty","tableHolder","rect","withinHorizontalView","withinVerticalView","layoutRanges","layoutColumn","occupied","activeCell","activeCellEl","activeRowEl","rowIdx","colIdx","visibleCells","lastClickedRow","selectPrev","headerCheckboxElement","selectRows","deselectRows","getSelectedRows","getSelectedData","isRowSelected","selectableRows","selectableRange","clearSelectionData","rowRetrieve","selectableRowsPersistence","_deselectRow","prevSelected","_rowSelectionChanged","selectable","checkRowSelectability","endSelect","lastClickedRowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","selectableRowsCheck","_selectRow","rowMatch","rowInfo","selectableRowsRollingSelection","checkboxEl","dataTreeSelectPropagate","childRowSelection","selectedRow","deselected","setSheets","addSheet","getSheets","getSheetDefinitions","setSheetData","getSheet","getSheetData","clearSheet","removeSheetFunc","activeSheetFunc","loadRemoteData","spreadsheetData","initializeTabset","altContainer","loadSheets","data1","data2","newSheet","destroySheets","activeSheet","prevSheet","lookupSheet","tooltipSubscriber","headerSubscriber","timeout","popupInstance","headerTooltip","mousemoveCheck","mouseoutCheck","tooltip","clearPopup","loadTooltip","tooltipDelay","allModules"],"mappings":"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"}